!function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"_",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t._)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(s,n,function(i){return t[i]}.bind(null,n));return s},e.n=function(t){var i=t&&t._?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=162)}([function(t,i,e){"use strict";var s,n,r=e(48),h=r.Reader,a=r.Writer,o=r.util,c=r.roots.default||(r.roots.default={});c.ProtoAdBreak=function(){function t(t){if(this.types=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.types=o.emptyArray,t.prototype.maxAdPodDuration=0,t.prototype.maxAdSlotDuration=180,t.prototype.numberOfAdSlots=1,t.encode=function(t,i){if(i||(i=a.create()),null!=t.types&&t.types.length){i.uint32(10).fork();for(var e=0;e<t.types.length;++e)i.int32(t.types[e]);i.ldelim()}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&i.uint32(16).int32(t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&i.uint32(24).int32(t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&i.uint32(32).int32(t.numberOfAdSlots),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoAdBreak;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:if(s.types&&s.types.length||(s.types=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.types.push(t.int32());else s.types.push(t.int32());break;case 2:s.maxAdPodDuration=t.int32();break;case 3:s.maxAdSlotDuration=t.int32();break;case 4:s.numberOfAdSlots=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoAdBreak)return t;var i=new c.ProtoAdBreak;if(t.types){if(!Array.isArray(t.types))throw TypeError(".ProtoAdBreak.types: array expected");i.types=[];for(var e=0;e<t.types.length;++e)switch(t.types[e]){default:case"None":case 0:i.types[e]=0;break;case"PreRoll":case 1:i.types[e]=1;break;case"MidRoll":case 2:i.types[e]=2;break;case"PostRoll":case 3:i.types[e]=3}}return null!=t.maxAdPodDuration&&(i.maxAdPodDuration=0|t.maxAdPodDuration),null!=t.maxAdSlotDuration&&(i.maxAdSlotDuration=0|t.maxAdSlotDuration),null!=t.numberOfAdSlots&&(i.numberOfAdSlots=0|t.numberOfAdSlots),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.types=[]),i.defaults&&(e.maxAdPodDuration=0,e.maxAdSlotDuration=180,e.numberOfAdSlots=1),t.types&&t.types.length){e.types=[];for(var s=0;s<t.types.length;++s)e.types[s]=i.enums===String?c.ProtoAdBreakTypeEnum[t.types[s]]:t.types[s]}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&(e.maxAdPodDuration=t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&(e.maxAdSlotDuration=t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&(e.numberOfAdSlots=t.numberOfAdSlots),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoPlayerPlaybackModeEnum=(s={},(n=Object.create(s))[s[0]="Autoplay"]=0,n[s[1]="ScrollToPlay"]=1,n[s[2]="ClickToPlay"]=2,n),c.ProtoPlayerCloseButtonMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnHover"]=1,i[t[2]="OnHoverAfterFirstAd"]=2,i[t[3]="AlwaysOn"]=3,i}(),c.ProtoPlayerFloatingMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnPageLoad"]=1,i[t[2]="AfterInView"]=2,i[t[3]="Always"]=3,i}(),c.ProtoPlayerSoundMode=function(){var t={},i=Object.create(t);return i[t[0]="Mute"]=0,i[t[1]="On"]=1,i[t[2]="Hover"]=2,i}(),c.ProtoPlayerInsertMode=function(){var t={},i=Object.create(t);return i[t[0]="WithinContainer"]=0,i[t[1]="BeforeContainer"]=1,i[t[2]="AfterContainer"]=2,i[t[3]="ReplaceContainer"]=3,i[t[4]="HideContainer"]=4,i}(),c.ProtoAdViewabilityPolicy=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoSharingDestination=function(){var t={},i=Object.create(t);return i[t[0]="Facebook"]=0,i[t[1]="Twitter"]=1,i[t[2]="LinkedIn"]=2,i}(),c.ProtoFloatingFixedPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="Page"]=0,i[t[1]="Element"]=1,i}(),c.ProtoPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="BottomRight"]=0,i[t[1]="BottomLeft"]=1,i[t[2]="TopRight"]=2,i[t[3]="TopLeft"]=3,i}(),c.ProtoAdPlaybackMode=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i}(),c.ProtoFloatingAppendLocationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Above"]=0,i[t[1]="Below"]=1,i[t[2]="Within"]=2,i}(),c.ProtoPlayerAdSkippability=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="NoRestrictions"]=2,i}(),c.ProtoImplementationType=function(){var t={},i=Object.create(t);return i[t[0]="Web"]=0,i[t[1]="Amp"]=1,i}(),c.ProtoAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="PreRoll"]=1,i[t[2]="MidRoll"]=2,i[t[3]="PostRoll"]=3,i}(),c.ProtoAdSlotAdTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="SingleAd"]=0,i[t[1]="AdPod"]=1,i}(),c.ProtoTamRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.lineItemId="",t.prototype.code="",t.prototype.metadata=null,t.prototype.exploration=!1,t.prototype.enablePredictionThreshold=!1,t.encode=function(t,i){return i||(i=a.create()),null!=t.lineItemId&&t.hasOwnProperty("lineItemId")&&i.uint32(10).string(t.lineItemId),null!=t.code&&t.hasOwnProperty("code")&&i.uint32(18).string(t.code),null!=t.metadata&&t.hasOwnProperty("metadata")&&c.MetadataModel.encode(t.metadata,i.uint32(26).fork()).ldelim(),null!=t.exploration&&t.hasOwnProperty("exploration")&&i.uint32(32).bool(t.exploration),null!=t.enablePredictionThreshold&&t.hasOwnProperty("enablePredictionThreshold")&&i.uint32(40).bool(t.enablePredictionThreshold),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTamRequest;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.lineItemId=t.string();break;case 2:s.code=t.string();break;case 3:s.metadata=c.MetadataModel.decode(t,t.uint32());break;case 4:s.exploration=t.bool();break;case 5:s.enablePredictionThreshold=t.bool();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoTamRequest)return t;var i=new c.ProtoTamRequest;if(null!=t.lineItemId&&(i.lineItemId=String(t.lineItemId)),null!=t.code&&(i.code=String(t.code)),null!=t.metadata){if("object"!=typeof t.metadata)throw TypeError(".ProtoTamRequest.metadata: object expected");i.metadata=c.MetadataModel.fromObject(t.metadata)}return null!=t.exploration&&(i.exploration=Boolean(t.exploration)),null!=t.enablePredictionThreshold&&(i.enablePredictionThreshold=Boolean(t.enablePredictionThreshold)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.lineItemId="",e.code="",e.metadata=null,e.exploration=!1,e.enablePredictionThreshold=!1),null!=t.lineItemId&&t.hasOwnProperty("lineItemId")&&(e.lineItemId=t.lineItemId),null!=t.code&&t.hasOwnProperty("code")&&(e.code=t.code),null!=t.metadata&&t.hasOwnProperty("metadata")&&(e.metadata=c.MetadataModel.toObject(t.metadata,i)),null!=t.exploration&&t.hasOwnProperty("exploration")&&(e.exploration=t.exploration),null!=t.enablePredictionThreshold&&t.hasOwnProperty("enablePredictionThreshold")&&(e.enablePredictionThreshold=t.enablePredictionThreshold),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.MetadataModel=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.version=0,t.prototype.sessionId="",t.prototype.playerId="",t.prototype.userId="",t.prototype.browser=null,t.prototype.geo=null,t.prototype.clientAb0=0,t.prototype.clientAb1=0,t.prototype.serverAb0=0,t.prototype.serverAb1=0,t.prototype.pageUrl="",t.prototype.bundleId="",t.prototype.implementationType=0,t.prototype.trackAllRequests=!1,t.prototype.customParam1="",t.prototype.customParam2="",t.prototype.customParam3="",t.encode=function(t,i){return i||(i=a.create()),null!=t.version&&t.hasOwnProperty("version")&&i.uint32(8).int32(t.version),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&i.uint32(18).string(t.sessionId),null!=t.playerId&&t.hasOwnProperty("playerId")&&i.uint32(26).string(t.playerId),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(34).string(t.userId),null!=t.browser&&t.hasOwnProperty("browser")&&c.Browser.encode(t.browser,i.uint32(42).fork()).ldelim(),null!=t.geo&&t.hasOwnProperty("geo")&&c.GeoLocation.encode(t.geo,i.uint32(50).fork()).ldelim(),null!=t.clientAb0&&t.hasOwnProperty("clientAb0")&&i.uint32(56).int32(t.clientAb0),null!=t.clientAb1&&t.hasOwnProperty("clientAb1")&&i.uint32(64).int32(t.clientAb1),null!=t.serverAb0&&t.hasOwnProperty("serverAb0")&&i.uint32(72).int32(t.serverAb0),null!=t.serverAb1&&t.hasOwnProperty("serverAb1")&&i.uint32(80).int32(t.serverAb1),null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&i.uint32(122).string(t.pageUrl),null!=t.bundleId&&t.hasOwnProperty("bundleId")&&i.uint32(138).string(t.bundleId),null!=t.implementationType&&t.hasOwnProperty("implementationType")&&i.uint32(144).int32(t.implementationType),null!=t.trackAllRequests&&t.hasOwnProperty("trackAllRequests")&&i.uint32(152).bool(t.trackAllRequests),null!=t.customParam1&&t.hasOwnProperty("customParam1")&&i.uint32(162).string(t.customParam1),null!=t.customParam2&&t.hasOwnProperty("customParam2")&&i.uint32(170).string(t.customParam2),null!=t.customParam3&&t.hasOwnProperty("customParam3")&&i.uint32(178).string(t.customParam3),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.MetadataModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.version=t.int32();break;case 2:s.sessionId=t.string();break;case 3:s.playerId=t.string();break;case 4:s.userId=t.string();break;case 5:s.browser=c.Browser.decode(t,t.uint32());break;case 6:s.geo=c.GeoLocation.decode(t,t.uint32());break;case 7:s.clientAb0=t.int32();break;case 8:s.clientAb1=t.int32();break;case 9:s.serverAb0=t.int32();break;case 10:s.serverAb1=t.int32();break;case 15:s.pageUrl=t.string();break;case 17:s.bundleId=t.string();break;case 18:s.implementationType=t.int32();break;case 19:s.trackAllRequests=t.bool();break;case 20:s.customParam1=t.string();break;case 21:s.customParam2=t.string();break;case 22:s.customParam3=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.MetadataModel)return t;var i=new c.MetadataModel;if(null!=t.version&&(i.version=0|t.version),null!=t.sessionId&&(i.sessionId=String(t.sessionId)),null!=t.playerId&&(i.playerId=String(t.playerId)),null!=t.userId&&(i.userId=String(t.userId)),null!=t.browser){if("object"!=typeof t.browser)throw TypeError(".MetadataModel.browser: object expected");i.browser=c.Browser.fromObject(t.browser)}if(null!=t.geo){if("object"!=typeof t.geo)throw TypeError(".MetadataModel.geo: object expected");i.geo=c.GeoLocation.fromObject(t.geo)}switch(null!=t.clientAb0&&(i.clientAb0=0|t.clientAb0),null!=t.clientAb1&&(i.clientAb1=0|t.clientAb1),null!=t.serverAb0&&(i.serverAb0=0|t.serverAb0),null!=t.serverAb1&&(i.serverAb1=0|t.serverAb1),null!=t.pageUrl&&(i.pageUrl=String(t.pageUrl)),null!=t.bundleId&&(i.bundleId=String(t.bundleId)),t.implementationType){case"Web":case 0:i.implementationType=0;break;case"Amp":case 1:i.implementationType=1}return null!=t.trackAllRequests&&(i.trackAllRequests=Boolean(t.trackAllRequests)),null!=t.customParam1&&(i.customParam1=String(t.customParam1)),null!=t.customParam2&&(i.customParam2=String(t.customParam2)),null!=t.customParam3&&(i.customParam3=String(t.customParam3)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.version=0,e.sessionId="",e.playerId="",e.userId="",e.browser=null,e.geo=null,e.clientAb0=0,e.clientAb1=0,e.serverAb0=0,e.serverAb1=0,e.pageUrl="",e.bundleId="",e.implementationType=i.enums===String?"Web":0,e.trackAllRequests=!1,e.customParam1="",e.customParam2="",e.customParam3=""),null!=t.version&&t.hasOwnProperty("version")&&(e.version=t.version),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&(e.sessionId=t.sessionId),null!=t.playerId&&t.hasOwnProperty("playerId")&&(e.playerId=t.playerId),null!=t.userId&&t.hasOwnProperty("userId")&&(e.userId=t.userId),null!=t.browser&&t.hasOwnProperty("browser")&&(e.browser=c.Browser.toObject(t.browser,i)),null!=t.geo&&t.hasOwnProperty("geo")&&(e.geo=c.GeoLocation.toObject(t.geo,i)),null!=t.clientAb0&&t.hasOwnProperty("clientAb0")&&(e.clientAb0=t.clientAb0),null!=t.clientAb1&&t.hasOwnProperty("clientAb1")&&(e.clientAb1=t.clientAb1),null!=t.serverAb0&&t.hasOwnProperty("serverAb0")&&(e.serverAb0=t.serverAb0),null!=t.serverAb1&&t.hasOwnProperty("serverAb1")&&(e.serverAb1=t.serverAb1),null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&(e.pageUrl=t.pageUrl),null!=t.bundleId&&t.hasOwnProperty("bundleId")&&(e.bundleId=t.bundleId),null!=t.implementationType&&t.hasOwnProperty("implementationType")&&(e.implementationType=i.enums===String?c.ProtoImplementationType[t.implementationType]:t.implementationType),null!=t.trackAllRequests&&t.hasOwnProperty("trackAllRequests")&&(e.trackAllRequests=t.trackAllRequests),null!=t.customParam1&&t.hasOwnProperty("customParam1")&&(e.customParam1=t.customParam1),null!=t.customParam2&&t.hasOwnProperty("customParam2")&&(e.customParam2=t.customParam2),null!=t.customParam3&&t.hasOwnProperty("customParam3")&&(e.customParam3=t.customParam3),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoDeviceType=function(){var t={},i=Object.create(t);return i[t[0]="Desktop"]=0,i[t[1]="Smartphone"]=1,i[t[2]="Tablet"]=2,i[t[3]="GameConsole"]=3,i[t[4]="SmartTV"]=4,i[t[5]="WearableComputer"]=5,i[t[6]="PDA"]=6,i[t[7]="Unrecognized"]=7,i}(),c.Browser=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.browserVersion="",t.prototype.browserType="",t.prototype.osCode="",t.prototype.device=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&i.uint32(10).string(t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&i.uint32(18).string(t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&i.uint32(26).string(t.osCode),null!=t.device&&t.hasOwnProperty("device")&&i.uint32(32).int32(t.device),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.Browser;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.browserVersion=t.string();break;case 2:s.browserType=t.string();break;case 3:s.osCode=t.string();break;case 4:s.device=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.Browser)return t;var i=new c.Browser;switch(null!=t.browserVersion&&(i.browserVersion=String(t.browserVersion)),null!=t.browserType&&(i.browserType=String(t.browserType)),null!=t.osCode&&(i.osCode=String(t.osCode)),t.device){case"Desktop":case 0:i.device=0;break;case"Smartphone":case 1:i.device=1;break;case"Tablet":case 2:i.device=2;break;case"GameConsole":case 3:i.device=3;break;case"SmartTV":case 4:i.device=4;break;case"WearableComputer":case 5:i.device=5;break;case"PDA":case 6:i.device=6;break;case"Unrecognized":case 7:i.device=7}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.browserVersion="",e.browserType="",e.osCode="",e.device=i.enums===String?"Desktop":0),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&(e.browserVersion=t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&(e.browserType=t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&(e.osCode=t.osCode),null!=t.device&&t.hasOwnProperty("device")&&(e.device=i.enums===String?c.ProtoDeviceType[t.device]:t.device),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.GeoLocation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.countryGeoId=0,t.prototype.cityId=0,t.prototype.subdivisionId=0,t.prototype.dmaId=0,t.prototype.ip="",t.prototype.lat=0,t.prototype.lon=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&i.uint32(8).int32(t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&i.uint32(16).int32(t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&i.uint32(24).int32(t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&i.uint32(32).int32(t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&i.uint32(42).string(t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&i.uint32(49).double(t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&i.uint32(57).double(t.lon),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.GeoLocation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.countryGeoId=t.int32();break;case 2:s.cityId=t.int32();break;case 3:s.subdivisionId=t.int32();break;case 4:s.dmaId=t.int32();break;case 5:s.ip=t.string();break;case 6:s.lat=t.double();break;case 7:s.lon=t.double();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.GeoLocation)return t;var i=new c.GeoLocation;return null!=t.countryGeoId&&(i.countryGeoId=0|t.countryGeoId),null!=t.cityId&&(i.cityId=0|t.cityId),null!=t.subdivisionId&&(i.subdivisionId=0|t.subdivisionId),null!=t.dmaId&&(i.dmaId=0|t.dmaId),null!=t.ip&&(i.ip=String(t.ip)),null!=t.lat&&(i.lat=Number(t.lat)),null!=t.lon&&(i.lon=Number(t.lon)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.countryGeoId=0,e.cityId=0,e.subdivisionId=0,e.dmaId=0,e.ip="",e.lat=0,e.lon=0),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&(e.countryGeoId=t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&(e.cityId=t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&(e.subdivisionId=t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&(e.dmaId=t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&(e.ip=t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&(e.lat=i.json&&!isFinite(t.lat)?String(t.lat):t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&(e.lon=i.json&&!isFinite(t.lon)?String(t.lon):t.lon),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTamResponse=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.errorMessage="",t.prototype.encriptedBidPrice="",t.prototype.score=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&i.uint32(10).string(t.errorMessage),null!=t.encriptedBidPrice&&t.hasOwnProperty("encriptedBidPrice")&&i.uint32(82).string(t.encriptedBidPrice),null!=t.score&&t.hasOwnProperty("score")&&i.uint32(89).double(t.score),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTamResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.errorMessage=t.string();break;case 10:s.encriptedBidPrice=t.string();break;case 11:s.score=t.double();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoTamResponse)return t;var i=new c.ProtoTamResponse;return null!=t.errorMessage&&(i.errorMessage=String(t.errorMessage)),null!=t.encriptedBidPrice&&(i.encriptedBidPrice=String(t.encriptedBidPrice)),null!=t.score&&(i.score=Number(t.score)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.errorMessage="",e.encriptedBidPrice="",e.score=0),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&(e.errorMessage=t.errorMessage),null!=t.encriptedBidPrice&&t.hasOwnProperty("encriptedBidPrice")&&(e.encriptedBidPrice=t.encriptedBidPrice),null!=t.score&&t.hasOwnProperty("score")&&(e.score=i.json&&!isFinite(t.score)?String(t.score):t.score),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoCookieSettings=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.name="",t.prototype.value="",t.prototype.timestamp=o.Long?o.Long.fromBits(0,0,!1):0,t.encode=function(t,i){return i||(i=a.create()),null!=t.name&&t.hasOwnProperty("name")&&i.uint32(10).string(t.name),null!=t.value&&t.hasOwnProperty("value")&&i.uint32(18).string(t.value),null!=t.timestamp&&t.hasOwnProperty("timestamp")&&i.uint32(24).int64(t.timestamp),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoCookieSettings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.name=t.string();break;case 2:s.value=t.string();break;case 3:s.timestamp=t.int64();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoCookieSettings)return t;var i=new c.ProtoCookieSettings;return null!=t.name&&(i.name=String(t.name)),null!=t.value&&(i.value=String(t.value)),null!=t.timestamp&&(o.Long?(i.timestamp=o.Long.fromValue(t.timestamp)).unsigned=!1:"string"==typeof t.timestamp?i.timestamp=parseInt(t.timestamp,10):"number"==typeof t.timestamp?i.timestamp=t.timestamp:"object"==typeof t.timestamp&&(i.timestamp=new o.LongBits(t.timestamp.low>>>0,t.timestamp.high>>>0).toNumber())),i},t.toObject=function(t,i){i||(i={});var e={};if(i.defaults)if(e.name="",e.value="",o.Long){var s=new o.Long(0,0,!1);e.timestamp=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else e.timestamp=i.longs===String?"0":0;return null!=t.name&&t.hasOwnProperty("name")&&(e.name=t.name),null!=t.value&&t.hasOwnProperty("value")&&(e.value=t.value),null!=t.timestamp&&t.hasOwnProperty("timestamp")&&("number"==typeof t.timestamp?e.timestamp=i.longs===String?String(t.timestamp):t.timestamp:e.timestamp=i.longs===String?o.Long.prototype.toString.call(t.timestamp):i.longs===Number?new o.LongBits(t.timestamp.low>>>0,t.timestamp.high>>>0).toNumber():t.timestamp),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoCookieSecureModeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Secure"]=0,i[t[1]="Unsecure"]=1,i[t[2]="Auto"]=2,i}(),c.ProtoCookieSyncRequest=function(){function t(t){if(this.cookieList=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.cookieList=o.emptyArray,t.prototype.secureMode=0,t.prototype.browserInfo=null,t.encode=function(t,i){if(i||(i=a.create()),null!=t.cookieList&&t.cookieList.length)for(var e=0;e<t.cookieList.length;++e)c.ProtoCookieSettings.encode(t.cookieList[e],i.uint32(10).fork()).ldelim();return null!=t.secureMode&&t.hasOwnProperty("secureMode")&&i.uint32(16).int32(t.secureMode),null!=t.browserInfo&&t.hasOwnProperty("browserInfo")&&c.Browser.encode(t.browserInfo,i.uint32(26).fork()).ldelim(),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoCookieSyncRequest;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.cookieList&&s.cookieList.length||(s.cookieList=[]),s.cookieList.push(c.ProtoCookieSettings.decode(t,t.uint32()));break;case 2:s.secureMode=t.int32();break;case 3:s.browserInfo=c.Browser.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoCookieSyncRequest)return t;var i=new c.ProtoCookieSyncRequest;if(t.cookieList){if(!Array.isArray(t.cookieList))throw TypeError(".ProtoCookieSyncRequest.cookieList: array expected");i.cookieList=[];for(var e=0;e<t.cookieList.length;++e){if("object"!=typeof t.cookieList[e])throw TypeError(".ProtoCookieSyncRequest.cookieList: object expected");i.cookieList[e]=c.ProtoCookieSettings.fromObject(t.cookieList[e])}}switch(t.secureMode){case"Secure":case 0:i.secureMode=0;break;case"Unsecure":case 1:i.secureMode=1;break;case"Auto":case 2:i.secureMode=2}if(null!=t.browserInfo){if("object"!=typeof t.browserInfo)throw TypeError(".ProtoCookieSyncRequest.browserInfo: object expected");i.browserInfo=c.Browser.fromObject(t.browserInfo)}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.cookieList=[]),i.defaults&&(e.secureMode=i.enums===String?"Secure":0,e.browserInfo=null),t.cookieList&&t.cookieList.length){e.cookieList=[];for(var s=0;s<t.cookieList.length;++s)e.cookieList[s]=c.ProtoCookieSettings.toObject(t.cookieList[s],i)}return null!=t.secureMode&&t.hasOwnProperty("secureMode")&&(e.secureMode=i.enums===String?c.ProtoCookieSecureModeEnum[t.secureMode]:t.secureMode),null!=t.browserInfo&&t.hasOwnProperty("browserInfo")&&(e.browserInfo=c.Browser.toObject(t.browserInfo,i)),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoUserInformation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.userId="",t.prototype.lookupId="",t.prototype.lookupResponseCode=0,t.prototype.callFraudSensor=!1,t.prototype.publisherAdsTxt="",t.encode=function(t,i){return i||(i=a.create()),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(10).string(t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&i.uint32(26).string(t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&i.uint32(32).int32(t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&i.uint32(40).bool(t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&i.uint32(50).string(t.publisherAdsTxt),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoUserInformation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.userId=t.string();break;case 3:s.lookupId=t.string();break;case 4:s.lookupResponseCode=t.int32();break;case 5:s.callFraudSensor=t.bool();break;case 6:s.publisherAdsTxt=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoUserInformation)return t;var i=new c.ProtoUserInformation;return null!=t.userId&&(i.userId=String(t.userId)),null!=t.lookupId&&(i.lookupId=String(t.lookupId)),null!=t.lookupResponseCode&&(i.lookupResponseCode=0|t.lookupResponseCode),null!=t.callFraudSensor&&(i.callFraudSensor=Boolean(t.callFraudSensor)),null!=t.publisherAdsTxt&&(i.publisherAdsTxt=String(t.publisherAdsTxt)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.userId="",e.lookupId="",e.lookupResponseCode=0,e.callFraudSensor=!1,e.publisherAdsTxt=""),null!=t.userId&&t.hasOwnProperty("userId")&&(e.userId=t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&(e.lookupId=t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&(e.lookupResponseCode=t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&(e.callFraudSensor=t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&(e.publisherAdsTxt=t.publisherAdsTxt),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTrackerType=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Javascript"]=1,i}(),c.ProtoTrackerTriggerType=function(){var t={},i=Object.create(t);return i[t[0]="Impression"]=0,i[t[1]="Complete25Pc"]=1,i[t[2]="Complete50Pc"]=2,i[t[3]="Complete75Pc"]=3,i[t[4]="ViewCompletion"]=4,i[t[5]="VideoClick"]=5,i[t[6]="Pause"]=6,i[t[7]="Resume"]=7,i[t[8]="Mute"]=8,i[t[9]="Unmute"]=9,i}(),c.CreativeTrackerViewModel=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.Type=0,t.prototype.Trigger=0,t.prototype.url="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.CreativeTrackerViewModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.Type=t.int32();break;case 2:s.Trigger=t.int32();break;case 3:s.url=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.Type=i.enums===String?"Image":0,e.Trigger=i.enums===String?"Impression":0,e.url=""),null!=t.Type&&t.hasOwnProperty("Type")&&(e.Type=i.enums===String?c.ProtoTrackerType[t.Type]:t.Type),null!=t.Trigger&&t.hasOwnProperty("Trigger")&&(e.Trigger=i.enums===String?c.ProtoTrackerTriggerType[t.Trigger]:t.Trigger),null!=t.url&&t.hasOwnProperty("url")&&(e.url=t.url),e},t}(),c.ProtoGeneticAlgoInformation=function(){function t(t){if(this.rtbAuctionPattern=[],this.resetRequestCapByTimeRatios=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.generationId=0,t.prototype.individualId=0,t.prototype.rtbRequestResetTime=60,t.prototype.rtbAuctionPattern=o.emptyArray,t.prototype.resetRequestCapByTimeRatios=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoGeneticAlgoInformation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.generationId=t.int32();break;case 2:s.individualId=t.int32();break;case 3:s.rtbRequestResetTime=t.int32();break;case 4:if(s.rtbAuctionPattern&&s.rtbAuctionPattern.length||(s.rtbAuctionPattern=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.rtbAuctionPattern.push(t.int32());else s.rtbAuctionPattern.push(t.int32());break;case 5:s.resetRequestCapByTimeRatios&&s.resetRequestCapByTimeRatios.length||(s.resetRequestCapByTimeRatios=[]),s.resetRequestCapByTimeRatios.push(c.ProtoResetRequestCapByTimeRatio.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.rtbAuctionPattern=[],e.resetRequestCapByTimeRatios=[]),i.defaults&&(e.generationId=0,e.individualId=0,e.rtbRequestResetTime=60),null!=t.generationId&&t.hasOwnProperty("generationId")&&(e.generationId=t.generationId),null!=t.individualId&&t.hasOwnProperty("individualId")&&(e.individualId=t.individualId),null!=t.rtbRequestResetTime&&t.hasOwnProperty("rtbRequestResetTime")&&(e.rtbRequestResetTime=t.rtbRequestResetTime),t.rtbAuctionPattern&&t.rtbAuctionPattern.length){e.rtbAuctionPattern=[];for(var s=0;s<t.rtbAuctionPattern.length;++s)e.rtbAuctionPattern[s]=t.rtbAuctionPattern[s]}if(t.resetRequestCapByTimeRatios&&t.resetRequestCapByTimeRatios.length){e.resetRequestCapByTimeRatios=[];for(s=0;s<t.resetRequestCapByTimeRatios.length;++s)e.resetRequestCapByTimeRatios[s]=c.ProtoResetRequestCapByTimeRatio.toObject(t.resetRequestCapByTimeRatios[s],i)}return e},t}(),c.ProtoResetRequestCapByTimeRatio=function(){function t(t){if(this.range=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.range=o.emptyArray,t.prototype.ratio=1,t.encode=function(t,i){if(i||(i=a.create()),null!=t.range&&t.range.length){i.uint32(10).fork();for(var e=0;e<t.range.length;++e)i.double(t.range[e]);i.ldelim()}return null!=t.ratio&&t.hasOwnProperty("ratio")&&i.uint32(17).double(t.ratio),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoResetRequestCapByTimeRatio;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:if(s.range&&s.range.length||(s.range=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.range.push(t.double());else s.range.push(t.double());break;case 2:s.ratio=t.double();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoResetRequestCapByTimeRatio)return t;var i=new c.ProtoResetRequestCapByTimeRatio;if(t.range){if(!Array.isArray(t.range))throw TypeError(".ProtoResetRequestCapByTimeRatio.range: array expected");i.range=[];for(var e=0;e<t.range.length;++e)i.range[e]=Number(t.range[e])}return null!=t.ratio&&(i.ratio=Number(t.ratio)),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.range=[]),i.defaults&&(e.ratio=1),t.range&&t.range.length){e.range=[];for(var s=0;s<t.range.length;++s)e.range[s]=i.json&&!isFinite(t.range[s])?String(t.range[s]):t.range[s]}return null!=t.ratio&&t.hasOwnProperty("ratio")&&(e.ratio=i.json&&!isFinite(t.ratio)?String(t.ratio):t.ratio),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoCreativeTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="ThirdParty"]=0,i[t[1]="MediaFile"]=1,i[t[2]="Rtb"]=2,i[t[3]="External"]=3,i[t[4]="HeaderBidder"]=4,i[t[7]="Tam"]=7,i}(),c.ProtoResetCapTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="TimeCapping"]=0,i[t[1]="ContentCapping"]=1,i[t[2]="OpportunityCapping"]=2,i}(),c.ProtoAdSlotsEnum=function(){var t={},i=Object.create(t);return i[t[0]="PreRoll"]=0,i[t[1]="MidRoll"]=1,i[t[2]="PostRoll"]=2,i}(),c.ProtoLineItmePriority=function(){var t={},i=Object.create(t);return i[t[0]="House"]=0,i[t[1]="Default"]=1,i[t[2]="Preferred"]=2,i[t[3]="Top"]=3,i}(),c.ProtoAdSkipMode=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="Never"]=2,i[t[3]="NotAplicable"]=3,i}(),c.ProtoAdType=function(){var t={},i=Object.create(t);return i[t[0]="Video"]=0,i[t[1]="Overlay"]=1,i}(),c.ProtoChoiceCriteriaEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="All"]=1,i[t[2]="SingleAd"]=2,i[t[3]="AdPod"]=3,i}(),c.ProtoLineItemTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdSlotTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="SpecificSlots"]=1,i[t[2]="Interval"]=2,i}(),c.ProtoLineItemAdBreakTargeting=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adRollType=0,t.prototype.adBreakTypeEnum=1,t.encode=function(t,i){return i||(i=a.create()),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&i.uint32(8).int32(t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&i.uint32(16).int32(t.adBreakTypeEnum),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adRollType=t.int32();break;case 2:s.adBreakTypeEnum=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdBreakTargeting)return t;var i=new c.ProtoLineItemAdBreakTargeting;switch(t.adRollType){case"None":case 0:i.adRollType=0;break;case"PreRoll":case 1:i.adRollType=1;break;case"MidRoll":case 2:i.adRollType=2;break;case"PostRoll":case 3:i.adRollType=3}switch(t.adBreakTypeEnum){case"All":case 1:i.adBreakTypeEnum=1;break;case"SingleAd":case 2:i.adBreakTypeEnum=2;break;case"AdPod":case 3:i.adBreakTypeEnum=3}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.adRollType=i.enums===String?"None":0,e.adBreakTypeEnum=i.enums===String?"All":1),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&(e.adRollType=i.enums===String?c.ProtoAdBreakTypeEnum[t.adRollType]:t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&(e.adBreakTypeEnum=i.enums===String?c.ProtoLineItemAdBreakTypeEnum[t.adBreakTypeEnum]:t.adBreakTypeEnum),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItemAdPodTargeting=function(){function t(t){if(this.adSlotPositions=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.targetingType=0,t.prototype.adSlotTargetingType=1,t.prototype.adSlotPositions=o.emptyArray,t.encode=function(t,i){if(i||(i=a.create()),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&i.uint32(8).int32(t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&i.uint32(16).int32(t.adSlotTargetingType),null!=t.adSlotPositions&&t.adSlotPositions.length){i.uint32(26).fork();for(var e=0;e<t.adSlotPositions.length;++e)i.int32(t.adSlotPositions[e]);i.ldelim()}return i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdPodTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.targetingType=t.int32();break;case 2:s.adSlotTargetingType=t.int32();break;case 3:if(s.adSlotPositions&&s.adSlotPositions.length||(s.adSlotPositions=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.adSlotPositions.push(t.int32());else s.adSlotPositions.push(t.int32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdPodTargeting)return t;var i=new c.ProtoLineItemAdPodTargeting;switch(t.targetingType){case"Only":case 0:i.targetingType=0;break;case"Except":case 1:i.targetingType=1}switch(t.adSlotTargetingType){case"SpecificSlots":case 1:i.adSlotTargetingType=1;break;case"Interval":case 2:i.adSlotTargetingType=2}if(t.adSlotPositions){if(!Array.isArray(t.adSlotPositions))throw TypeError(".ProtoLineItemAdPodTargeting.adSlotPositions: array expected");i.adSlotPositions=[];for(var e=0;e<t.adSlotPositions.length;++e)i.adSlotPositions[e]=0|t.adSlotPositions[e]}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adSlotPositions=[]),i.defaults&&(e.targetingType=i.enums===String?"Only":0,e.adSlotTargetingType=i.enums===String?"SpecificSlots":1),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&(e.targetingType=i.enums===String?c.ProtoLineItemTargetingTypeEnum[t.targetingType]:t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&(e.adSlotTargetingType=i.enums===String?c.ProtoLineItemAdSlotTargetingTypeEnum[t.adSlotTargetingType]:t.adSlotTargetingType),t.adSlotPositions&&t.adSlotPositions.length){e.adSlotPositions=[];for(var s=0;s<t.adSlotPositions.length;++s)e.adSlotPositions[s]=t.adSlotPositions[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItemAdBreakSettings=function(){function t(t){if(this.adBreakTargeting=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adBreakTargeting=o.emptyArray,t.prototype.adPodTargeting=null,t.encode=function(t,i){if(i||(i=a.create()),null!=t.adBreakTargeting&&t.adBreakTargeting.length)for(var e=0;e<t.adBreakTargeting.length;++e)c.ProtoLineItemAdBreakTargeting.encode(t.adBreakTargeting[e],i.uint32(10).fork()).ldelim();return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&c.ProtoLineItemAdPodTargeting.encode(t.adPodTargeting,i.uint32(18).fork()).ldelim(),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakSettings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adBreakTargeting&&s.adBreakTargeting.length||(s.adBreakTargeting=[]),s.adBreakTargeting.push(c.ProtoLineItemAdBreakTargeting.decode(t,t.uint32()));break;case 2:s.adPodTargeting=c.ProtoLineItemAdPodTargeting.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdBreakSettings)return t;var i=new c.ProtoLineItemAdBreakSettings;if(t.adBreakTargeting){if(!Array.isArray(t.adBreakTargeting))throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: array expected");i.adBreakTargeting=[];for(var e=0;e<t.adBreakTargeting.length;++e){if("object"!=typeof t.adBreakTargeting[e])throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: object expected");i.adBreakTargeting[e]=c.ProtoLineItemAdBreakTargeting.fromObject(t.adBreakTargeting[e])}}if(null!=t.adPodTargeting){if("object"!=typeof t.adPodTargeting)throw TypeError(".ProtoLineItemAdBreakSettings.adPodTargeting: object expected");i.adPodTargeting=c.ProtoLineItemAdPodTargeting.fromObject(t.adPodTargeting)}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adBreakTargeting=[]),i.defaults&&(e.adPodTargeting=null),t.adBreakTargeting&&t.adBreakTargeting.length){e.adBreakTargeting=[];for(var s=0;s<t.adBreakTargeting.length;++s)e.adBreakTargeting[s]=c.ProtoLineItemAdBreakTargeting.toObject(t.adBreakTargeting[s],i)}return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&(e.adPodTargeting=c.ProtoLineItemAdPodTargeting.toObject(t.adPodTargeting,i)),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItem=function(){function t(t){if(this.trackers=[],this.renditions=[],this.floorPrices=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.adTag="",t.prototype.creativeType=0,t.prototype.yoScore=0,t.prototype.sound=!1,t.prototype.viewability=!1,t.prototype.impressionTimeout=0,t.prototype.vendorId="",t.prototype.trackers=o.emptyArray,t.prototype.duration=0,t.prototype.renditions=o.emptyArray,t.prototype.mediaCreativeId="",t.prototype.ignoreFilledRequests=!1,t.prototype.requestCap=3,t.prototype.impressionCap=0,t.prototype.successRate=0,t.prototype.lineItemPriority=0,t.prototype.headerBidderBids="",t.prototype.headerBidderTimeout=0,t.prototype.mediaCreativeClickUrl="",t.prototype.resetRequestsCapTime=60,t.prototype.resetImpressionsCapTime=60,t.prototype.resetCapType=0,t.prototype.creativeHlsFileName="",t.prototype.timeBetweenRequests=0,t.prototype.skipMode=0,t.prototype.mediaIdTargeting=null,t.prototype.mediaKeywordsTargeting=null,t.prototype.mediaLanguageTargeting=null,t.prototype.adType=0,t.prototype.overlayTime=30,t.prototype.floorPrice=0,t.prototype.adBreakSettings=null,t.prototype.floorPrices=o.emptyArray,t.prototype.playerSize="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.publisherLineItemId=t.string();break;case 2:s.advertiserLineItemId=t.string();break;case 3:s.adTag=t.string();break;case 4:s.creativeType=t.int32();break;case 5:s.yoScore=t.double();break;case 6:s.sound=t.bool();break;case 7:s.viewability=t.bool();break;case 9:s.impressionTimeout=t.int32();break;case 10:s.vendorId=t.string();break;case 12:s.trackers&&s.trackers.length||(s.trackers=[]),s.trackers.push(c.CreativeTrackerViewModel.decode(t,t.uint32()));break;case 13:s.duration=t.int32();break;case 14:s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(c.ProtoRendition.decode(t,t.uint32()));break;case 15:s.mediaCreativeId=t.string();break;case 16:s.ignoreFilledRequests=t.bool();break;case 17:s.requestCap=t.int32();break;case 18:s.impressionCap=t.int32();break;case 19:s.successRate=t.double();break;case 20:s.lineItemPriority=t.int32();break;case 21:s.headerBidderBids=t.string();break;case 22:s.headerBidderTimeout=t.int32();break;case 23:s.mediaCreativeClickUrl=t.string();break;case 24:s.resetRequestsCapTime=t.int32();break;case 25:s.resetImpressionsCapTime=t.int32();break;case 26:s.resetCapType=t.int32();break;case 27:s.creativeHlsFileName=t.string();break;case 28:s.timeBetweenRequests=t.int32();break;case 29:s.skipMode=t.int32();break;case 30:s.mediaIdTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 31:s.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 32:s.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 33:s.adType=t.int32();break;case 34:s.overlayTime=t.int32();break;case 35:s.floorPrice=t.double();break;case 36:s.adBreakSettings=c.ProtoLineItemAdBreakSettings.decode(t,t.uint32());break;case 38:if(s.floorPrices&&s.floorPrices.length||(s.floorPrices=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.floorPrices.push(t.double());else s.floorPrices.push(t.double());break;case 101:s.playerSize=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.trackers=[],e.renditions=[],e.floorPrices=[]),i.defaults&&(e.publisherLineItemId="",e.advertiserLineItemId="",e.adTag="",e.creativeType=i.enums===String?"ThirdParty":0,e.yoScore=0,e.sound=!1,e.viewability=!1,e.impressionTimeout=0,e.vendorId="",e.duration=0,e.mediaCreativeId="",e.ignoreFilledRequests=!1,e.requestCap=3,e.impressionCap=0,e.successRate=0,e.lineItemPriority=i.enums===String?"House":0,e.headerBidderBids="",e.headerBidderTimeout=0,e.mediaCreativeClickUrl="",e.resetRequestsCapTime=60,e.resetImpressionsCapTime=60,e.resetCapType=i.enums===String?"TimeCapping":0,e.creativeHlsFileName="",e.timeBetweenRequests=0,e.skipMode=i.enums===String?"IfLongerThan31Sec":0,e.mediaIdTargeting=null,e.mediaKeywordsTargeting=null,e.mediaLanguageTargeting=null,e.adType=i.enums===String?"Video":0,e.overlayTime=30,e.floorPrice=0,e.adBreakSettings=null,e.playerSize=""),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&(e.publisherLineItemId=t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&(e.advertiserLineItemId=t.advertiserLineItemId),null!=t.adTag&&t.hasOwnProperty("adTag")&&(e.adTag=t.adTag),null!=t.creativeType&&t.hasOwnProperty("creativeType")&&(e.creativeType=i.enums===String?c.ProtoCreativeTypeEnum[t.creativeType]:t.creativeType),null!=t.yoScore&&t.hasOwnProperty("yoScore")&&(e.yoScore=i.json&&!isFinite(t.yoScore)?String(t.yoScore):t.yoScore),null!=t.sound&&t.hasOwnProperty("sound")&&(e.sound=t.sound),null!=t.viewability&&t.hasOwnProperty("viewability")&&(e.viewability=t.viewability),null!=t.impressionTimeout&&t.hasOwnProperty("impressionTimeout")&&(e.impressionTimeout=t.impressionTimeout),null!=t.vendorId&&t.hasOwnProperty("vendorId")&&(e.vendorId=t.vendorId),t.trackers&&t.trackers.length){e.trackers=[];for(var s=0;s<t.trackers.length;++s)e.trackers[s]=c.CreativeTrackerViewModel.toObject(t.trackers[s],i)}if(null!=t.duration&&t.hasOwnProperty("duration")&&(e.duration=t.duration),t.renditions&&t.renditions.length){e.renditions=[];for(s=0;s<t.renditions.length;++s)e.renditions[s]=c.ProtoRendition.toObject(t.renditions[s],i)}if(null!=t.mediaCreativeId&&t.hasOwnProperty("mediaCreativeId")&&(e.mediaCreativeId=t.mediaCreativeId),null!=t.ignoreFilledRequests&&t.hasOwnProperty("ignoreFilledRequests")&&(e.ignoreFilledRequests=t.ignoreFilledRequests),null!=t.requestCap&&t.hasOwnProperty("requestCap")&&(e.requestCap=t.requestCap),null!=t.impressionCap&&t.hasOwnProperty("impressionCap")&&(e.impressionCap=t.impressionCap),null!=t.successRate&&t.hasOwnProperty("successRate")&&(e.successRate=i.json&&!isFinite(t.successRate)?String(t.successRate):t.successRate),null!=t.lineItemPriority&&t.hasOwnProperty("lineItemPriority")&&(e.lineItemPriority=i.enums===String?c.ProtoLineItmePriority[t.lineItemPriority]:t.lineItemPriority),null!=t.headerBidderBids&&t.hasOwnProperty("headerBidderBids")&&(e.headerBidderBids=t.headerBidderBids),null!=t.headerBidderTimeout&&t.hasOwnProperty("headerBidderTimeout")&&(e.headerBidderTimeout=t.headerBidderTimeout),null!=t.mediaCreativeClickUrl&&t.hasOwnProperty("mediaCreativeClickUrl")&&(e.mediaCreativeClickUrl=t.mediaCreativeClickUrl),null!=t.resetRequestsCapTime&&t.hasOwnProperty("resetRequestsCapTime")&&(e.resetRequestsCapTime=t.resetRequestsCapTime),null!=t.resetImpressionsCapTime&&t.hasOwnProperty("resetImpressionsCapTime")&&(e.resetImpressionsCapTime=t.resetImpressionsCapTime),null!=t.resetCapType&&t.hasOwnProperty("resetCapType")&&(e.resetCapType=i.enums===String?c.ProtoResetCapTypeEnum[t.resetCapType]:t.resetCapType),null!=t.creativeHlsFileName&&t.hasOwnProperty("creativeHlsFileName")&&(e.creativeHlsFileName=t.creativeHlsFileName),null!=t.timeBetweenRequests&&t.hasOwnProperty("timeBetweenRequests")&&(e.timeBetweenRequests=t.timeBetweenRequests),null!=t.skipMode&&t.hasOwnProperty("skipMode")&&(e.skipMode=i.enums===String?c.ProtoAdSkipMode[t.skipMode]:t.skipMode),null!=t.mediaIdTargeting&&t.hasOwnProperty("mediaIdTargeting")&&(e.mediaIdTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaIdTargeting,i)),null!=t.mediaKeywordsTargeting&&t.hasOwnProperty("mediaKeywordsTargeting")&&(e.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaKeywordsTargeting,i)),null!=t.mediaLanguageTargeting&&t.hasOwnProperty("mediaLanguageTargeting")&&(e.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaLanguageTargeting,i)),null!=t.adType&&t.hasOwnProperty("adType")&&(e.adType=i.enums===String?c.ProtoAdType[t.adType]:t.adType),null!=t.overlayTime&&t.hasOwnProperty("overlayTime")&&(e.overlayTime=t.overlayTime),null!=t.floorPrice&&t.hasOwnProperty("floorPrice")&&(e.floorPrice=i.json&&!isFinite(t.floorPrice)?String(t.floorPrice):t.floorPrice),null!=t.adBreakSettings&&t.hasOwnProperty("adBreakSettings")&&(e.adBreakSettings=c.ProtoLineItemAdBreakSettings.toObject(t.adBreakSettings,i)),t.floorPrices&&t.floorPrices.length){e.floorPrices=[];for(s=0;s<t.floorPrices.length;++s)e.floorPrices[s]=i.json&&!isFinite(t.floorPrices[s])?String(t.floorPrices[s]):t.floorPrices[s]}return null!=t.playerSize&&t.hasOwnProperty("playerSize")&&(e.playerSize=t.playerSize),e},t}(),c.ProtoTargetingChoiceModel=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.choiceCriteria=0,t.prototype.items=o.emptyArray,t.encode=function(t,i){if(i||(i=a.create()),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&i.uint32(8).int32(t.choiceCriteria),null!=t.items&&t.items.length)for(var e=0;e<t.items.length;++e)i.uint32(18).string(t.items[e]);return i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTargetingChoiceModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.choiceCriteria=t.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(t.string());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoTargetingChoiceModel)return t;var i=new c.ProtoTargetingChoiceModel;switch(t.choiceCriteria){case"Only":case 0:i.choiceCriteria=0;break;case"Except":case 1:i.choiceCriteria=1}if(t.items){if(!Array.isArray(t.items))throw TypeError(".ProtoTargetingChoiceModel.items: array expected");i.items=[];for(var e=0;e<t.items.length;++e)i.items[e]=String(t.items[e])}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.choiceCriteria=i.enums===String?"Only":0),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&(e.choiceCriteria=i.enums===String?c.ProtoChoiceCriteriaEnum[t.choiceCriteria]:t.choiceCriteria),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=t.items[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoRendition=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.height=0,t.prototype.codec="",t.prototype.file="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRendition;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.height=t.int32();break;case 2:s.codec=t.string();break;case 3:s.file=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.height=0,e.codec="",e.file=""),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.codec&&t.hasOwnProperty("codec")&&(e.codec=t.codec),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),e},t}(),c.ProtoLiveMediaMetadataResponse=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.startDate="",t.prototype.outputUrl="",t.prototype.thumbnailUrl="",t.prototype.altText="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLiveMediaMetadataResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.startDate=t.string();break;case 2:s.outputUrl=t.string();break;case 3:s.thumbnailUrl=t.string();break;case 4:s.altText=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.startDate="",e.outputUrl="",e.thumbnailUrl="",e.altText=""),null!=t.startDate&&t.hasOwnProperty("startDate")&&(e.startDate=t.startDate),null!=t.outputUrl&&t.hasOwnProperty("outputUrl")&&(e.outputUrl=t.outputUrl),null!=t.thumbnailUrl&&t.hasOwnProperty("thumbnailUrl")&&(e.thumbnailUrl=t.thumbnailUrl),null!=t.altText&&t.hasOwnProperty("altText")&&(e.altText=t.altText),e},t}(),c.ProtoLoggingLevelEnum=function(){var t={},i=Object.create(t);return i[t[0]="FATAL"]=0,i[t[1]="WARNING"]=1,i[t[2]="INFO"]=2,i}(),c.ProtoLoggingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.message="",t.prototype.version=0,t.prototype.level=0,t.prototype.callStack="",t.prototype.pageUrl="",t.prototype.exception="",t.prototype.sessionId="",t.encode=function(t,i){return i||(i=a.create()),null!=t.message&&t.hasOwnProperty("message")&&i.uint32(10).string(t.message),null!=t.version&&t.hasOwnProperty("version")&&i.uint32(16).int32(t.version),null!=t.level&&t.hasOwnProperty("level")&&i.uint32(24).int32(t.level),null!=t.callStack&&t.hasOwnProperty("callStack")&&i.uint32(34).string(t.callStack),null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&i.uint32(42).string(t.pageUrl),null!=t.exception&&t.hasOwnProperty("exception")&&i.uint32(50).string(t.exception),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&i.uint32(58).string(t.sessionId),i},t.fromObject=function(t){if(t instanceof c.ProtoLoggingRequest)return t;var i=new c.ProtoLoggingRequest;switch(null!=t.message&&(i.message=String(t.message)),null!=t.version&&(i.version=0|t.version),t.level){case"FATAL":case 0:i.level=0;break;case"WARNING":case 1:i.level=1;break;case"INFO":case 2:i.level=2}return null!=t.callStack&&(i.callStack=String(t.callStack)),null!=t.pageUrl&&(i.pageUrl=String(t.pageUrl)),null!=t.exception&&(i.exception=String(t.exception)),null!=t.sessionId&&(i.sessionId=String(t.sessionId)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoSpriteSheet=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.file="",t.prototype.height=0,t.prototype.count=0,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSpriteSheet;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.file=t.string();break;case 2:s.height=t.int32();break;case 3:s.count=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.file="",e.height=0,e.count=0),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.count&&t.hasOwnProperty("count")&&(e.count=t.count),e},t}(),c.ProtoTrack=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.file="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTrack;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.file=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.file=""),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),e},t}(),c.ProtoCustomField=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.name="",t.prototype.value="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoCustomField;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.name=t.string();break;case 2:s.value=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.name="",e.value=""),null!=t.name&&t.hasOwnProperty("name")&&(e.name=t.name),null!=t.value&&t.hasOwnProperty("value")&&(e.value=t.value),e},t}(),c.ProtoMediaMetadataResponse=function(){function t(t){if(this.keywordList=[],this.trackList=[],this.renditionList=[],this.customFields=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.title="",t.prototype.description="",t.prototype.duration=0,t.prototype.clickUrl="",t.prototype.keywordList=o.emptyArray,t.prototype.trackList=o.emptyArray,t.prototype.spriteSheet=null,t.prototype.thumbnail="",t.prototype.renditionList=o.emptyArray,t.prototype.customFields=o.emptyArray,t.prototype.hlsFilePath="",t.prototype.languageId="",t.prototype.sourceItemId="",t.prototype.altText="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoMediaMetadataResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.title=t.string();break;case 2:s.description=t.string();break;case 3:s.duration=t.int32();break;case 4:s.clickUrl=t.string();break;case 5:s.keywordList&&s.keywordList.length||(s.keywordList=[]),s.keywordList.push(t.string());break;case 6:s.trackList&&s.trackList.length||(s.trackList=[]),s.trackList.push(c.ProtoTrack.decode(t,t.uint32()));break;case 7:s.spriteSheet=c.ProtoSpriteSheet.decode(t,t.uint32());break;case 8:s.thumbnail=t.string();break;case 9:s.renditionList&&s.renditionList.length||(s.renditionList=[]),s.renditionList.push(c.ProtoRendition.decode(t,t.uint32()));break;case 10:s.customFields&&s.customFields.length||(s.customFields=[]),s.customFields.push(c.ProtoCustomField.decode(t,t.uint32()));break;case 11:s.hlsFilePath=t.string();break;case 12:s.languageId=t.string();break;case 13:s.sourceItemId=t.string();break;case 14:s.altText=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.keywordList=[],e.trackList=[],e.renditionList=[],e.customFields=[]),i.defaults&&(e.title="",e.description="",e.duration=0,e.clickUrl="",e.spriteSheet=null,e.thumbnail="",e.hlsFilePath="",e.languageId="",e.sourceItemId="",e.altText=""),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),null!=t.description&&t.hasOwnProperty("description")&&(e.description=t.description),null!=t.duration&&t.hasOwnProperty("duration")&&(e.duration=t.duration),null!=t.clickUrl&&t.hasOwnProperty("clickUrl")&&(e.clickUrl=t.clickUrl),t.keywordList&&t.keywordList.length){e.keywordList=[];for(var s=0;s<t.keywordList.length;++s)e.keywordList[s]=t.keywordList[s]}if(t.trackList&&t.trackList.length){e.trackList=[];for(s=0;s<t.trackList.length;++s)e.trackList[s]=c.ProtoTrack.toObject(t.trackList[s],i)}if(null!=t.spriteSheet&&t.hasOwnProperty("spriteSheet")&&(e.spriteSheet=c.ProtoSpriteSheet.toObject(t.spriteSheet,i)),null!=t.thumbnail&&t.hasOwnProperty("thumbnail")&&(e.thumbnail=t.thumbnail),t.renditionList&&t.renditionList.length){e.renditionList=[];for(s=0;s<t.renditionList.length;++s)e.renditionList[s]=c.ProtoRendition.toObject(t.renditionList[s],i)}if(t.customFields&&t.customFields.length){e.customFields=[];for(s=0;s<t.customFields.length;++s)e.customFields[s]=c.ProtoCustomField.toObject(t.customFields[s],i)}return null!=t.hlsFilePath&&t.hasOwnProperty("hlsFilePath")&&(e.hlsFilePath=t.hlsFilePath),null!=t.languageId&&t.hasOwnProperty("languageId")&&(e.languageId=t.languageId),null!=t.sourceItemId&&t.hasOwnProperty("sourceItemId")&&(e.sourceItemId=t.sourceItemId),null!=t.altText&&t.hasOwnProperty("altText")&&(e.altText=t.altText),e},t}(),c.ProtoMediaTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Video"]=1,i}(),c.ProtoRtbRequest=function(){function t(t){if(this.lineItems={},this.customMacros={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.metadata=null,t.prototype.coppa=!1,t.prototype.refererUrl="",t.prototype.testMode=!1,t.prototype.videoWidth=0,t.prototype.videoHeight=0,t.prototype.gdprCompliant=!1,t.prototype.soundOn=!1,t.prototype.gdprConsentData="",t.prototype.explorationMode=!1,t.prototype.viewability=!1,t.prototype.outstream=!1,t.prototype.domainURL="",t.prototype.isClickToPlay=!1,t.prototype.appVersion="",t.prototype.deviceID="",t.prototype.lineItems=o.emptyObject,t.prototype.isCcpaBlockingUserInfo=!1,t.prototype.usPrivacyString="",t.prototype.generationId=0,t.prototype.individualId=0,t.prototype.adSkippability=0,t.prototype.skipAdAfter=5,t.prototype.gdprConsentMode=0,t.prototype.maxAdDuration=180,t.prototype.customMacros=o.emptyObject,t.encode=function(t,i){if(i||(i=a.create()),null!=t.metadata&&t.hasOwnProperty("metadata")&&c.MetadataModel.encode(t.metadata,i.uint32(10).fork()).ldelim(),null!=t.coppa&&t.hasOwnProperty("coppa")&&i.uint32(32).bool(t.coppa),null!=t.refererUrl&&t.hasOwnProperty("refererUrl")&&i.uint32(42).string(t.refererUrl),null!=t.testMode&&t.hasOwnProperty("testMode")&&i.uint32(48).bool(t.testMode),null!=t.videoWidth&&t.hasOwnProperty("videoWidth")&&i.uint32(56).int32(t.videoWidth),null!=t.videoHeight&&t.hasOwnProperty("videoHeight")&&i.uint32(64).int32(t.videoHeight),null!=t.gdprCompliant&&t.hasOwnProperty("gdprCompliant")&&i.uint32(72).bool(t.gdprCompliant),null!=t.soundOn&&t.hasOwnProperty("soundOn")&&i.uint32(80).bool(t.soundOn),null!=t.gdprConsentData&&t.hasOwnProperty("gdprConsentData")&&i.uint32(90).string(t.gdprConsentData),null!=t.explorationMode&&t.hasOwnProperty("explorationMode")&&i.uint32(96).bool(t.explorationMode),null!=t.viewability&&t.hasOwnProperty("viewability")&&i.uint32(104).bool(t.viewability),null!=t.outstream&&t.hasOwnProperty("outstream")&&i.uint32(112).bool(t.outstream),null!=t.domainURL&&t.hasOwnProperty("domainURL")&&i.uint32(130).string(t.domainURL),null!=t.isClickToPlay&&t.hasOwnProperty("isClickToPlay")&&i.uint32(144).bool(t.isClickToPlay),null!=t.appVersion&&t.hasOwnProperty("appVersion")&&i.uint32(170).string(t.appVersion),null!=t.deviceID&&t.hasOwnProperty("deviceID")&&i.uint32(194).string(t.deviceID),null!=t.lineItems&&t.hasOwnProperty("lineItems"))for(var e=Object.keys(t.lineItems),s=0;s<e.length;++s)i.uint32(202).fork().uint32(10).string(e[s]),c.LineItemEntryModel.encode(t.lineItems[e[s]],i.uint32(18).fork()).ldelim().ldelim();if(null!=t.isCcpaBlockingUserInfo&&t.hasOwnProperty("isCcpaBlockingUserInfo")&&i.uint32(208).bool(t.isCcpaBlockingUserInfo),null!=t.usPrivacyString&&t.hasOwnProperty("usPrivacyString")&&i.uint32(218).string(t.usPrivacyString),null!=t.generationId&&t.hasOwnProperty("generationId")&&i.uint32(240).int32(t.generationId),null!=t.individualId&&t.hasOwnProperty("individualId")&&i.uint32(248).int32(t.individualId),null!=t.adSkippability&&t.hasOwnProperty("adSkippability")&&i.uint32(256).int32(t.adSkippability),null!=t.skipAdAfter&&t.hasOwnProperty("skipAdAfter")&&i.uint32(264).int32(t.skipAdAfter),null!=t.gdprConsentMode&&t.hasOwnProperty("gdprConsentMode")&&i.uint32(288).int32(t.gdprConsentMode),null!=t.maxAdDuration&&t.hasOwnProperty("maxAdDuration")&&i.uint32(296).int32(t.maxAdDuration),null!=t.customMacros&&t.hasOwnProperty("customMacros"))for(e=Object.keys(t.customMacros),s=0;s<e.length;++s)i.uint32(306).fork().uint32(10).string(e[s]).uint32(18).string(t.customMacros[e[s]]).ldelim();return i},t.fromObject=function(t){if(t instanceof c.ProtoRtbRequest)return t;var i=new c.ProtoRtbRequest;if(null!=t.metadata){if("object"!=typeof t.metadata)throw TypeError(".ProtoRtbRequest.metadata: object expected");i.metadata=c.MetadataModel.fromObject(t.metadata)}if(null!=t.coppa&&(i.coppa=Boolean(t.coppa)),null!=t.refererUrl&&(i.refererUrl=String(t.refererUrl)),null!=t.testMode&&(i.testMode=Boolean(t.testMode)),null!=t.videoWidth&&(i.videoWidth=0|t.videoWidth),null!=t.videoHeight&&(i.videoHeight=0|t.videoHeight),null!=t.gdprCompliant&&(i.gdprCompliant=Boolean(t.gdprCompliant)),null!=t.soundOn&&(i.soundOn=Boolean(t.soundOn)),null!=t.gdprConsentData&&(i.gdprConsentData=String(t.gdprConsentData)),null!=t.explorationMode&&(i.explorationMode=Boolean(t.explorationMode)),null!=t.viewability&&(i.viewability=Boolean(t.viewability)),null!=t.outstream&&(i.outstream=Boolean(t.outstream)),null!=t.domainURL&&(i.domainURL=String(t.domainURL)),null!=t.isClickToPlay&&(i.isClickToPlay=Boolean(t.isClickToPlay)),null!=t.appVersion&&(i.appVersion=String(t.appVersion)),null!=t.deviceID&&(i.deviceID=String(t.deviceID)),t.lineItems){if("object"!=typeof t.lineItems)throw TypeError(".ProtoRtbRequest.lineItems: object expected");i.lineItems={};for(var e=Object.keys(t.lineItems),s=0;s<e.length;++s){if("object"!=typeof t.lineItems[e[s]])throw TypeError(".ProtoRtbRequest.lineItems: object expected");i.lineItems[e[s]]=c.LineItemEntryModel.fromObject(t.lineItems[e[s]])}}switch(null!=t.isCcpaBlockingUserInfo&&(i.isCcpaBlockingUserInfo=Boolean(t.isCcpaBlockingUserInfo)),null!=t.usPrivacyString&&(i.usPrivacyString=String(t.usPrivacyString)),null!=t.generationId&&(i.generationId=0|t.generationId),null!=t.individualId&&(i.individualId=0|t.individualId),t.adSkippability){case"IfLongerThan31Sec":case 0:i.adSkippability=0;break;case"Always":case 1:i.adSkippability=1;break;case"NoRestrictions":case 2:i.adSkippability=2}switch(null!=t.skipAdAfter&&(i.skipAdAfter=0|t.skipAdAfter),t.gdprConsentMode){case"Unknown":case 0:i.gdprConsentMode=0;break;case"NoCmp":case 1:i.gdprConsentMode=1;break;case"NoConsent":case 2:i.gdprConsentMode=2;break;case"NoConnatixConsent":case 3:i.gdprConsentMode=3;break;case"NotAllDemandConsent":case 4:i.gdprConsentMode=4;break;case"AllGood":case 5:i.gdprConsentMode=5}if(null!=t.maxAdDuration&&(i.maxAdDuration=0|t.maxAdDuration),t.customMacros){if("object"!=typeof t.customMacros)throw TypeError(".ProtoRtbRequest.customMacros: object expected");i.customMacros={};for(e=Object.keys(t.customMacros),s=0;s<e.length;++s)i.customMacros[e[s]]=String(t.customMacros[e[s]])}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.LineItemEntryModel=function(){function t(t){if(this.ignoredFloorPriceFactorIndexes=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.availableRequests=0,t.prototype.cachedFloorPrice=0,t.prototype.ignoredFloorPriceFactorIndexes=o.emptyArray,t.prototype.gdprConsent=!1,t.prototype.publisherLineItemId="",t.prototype.slotWidth=0,t.prototype.slotHeight=0,t.encode=function(t,i){if(i||(i=a.create()),null!=t.availableRequests&&t.hasOwnProperty("availableRequests")&&i.uint32(8).int32(t.availableRequests),null!=t.cachedFloorPrice&&t.hasOwnProperty("cachedFloorPrice")&&i.uint32(17).double(t.cachedFloorPrice),null!=t.ignoredFloorPriceFactorIndexes&&t.ignoredFloorPriceFactorIndexes.length){i.uint32(26).fork();for(var e=0;e<t.ignoredFloorPriceFactorIndexes.length;++e)i.int32(t.ignoredFloorPriceFactorIndexes[e]);i.ldelim()}return null!=t.gdprConsent&&t.hasOwnProperty("gdprConsent")&&i.uint32(32).bool(t.gdprConsent),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(42).string(t.publisherLineItemId),null!=t.slotWidth&&t.hasOwnProperty("slotWidth")&&i.uint32(48).int32(t.slotWidth),null!=t.slotHeight&&t.hasOwnProperty("slotHeight")&&i.uint32(56).int32(t.slotHeight),i},t.fromObject=function(t){if(t instanceof c.LineItemEntryModel)return t;var i=new c.LineItemEntryModel;if(null!=t.availableRequests&&(i.availableRequests=0|t.availableRequests),null!=t.cachedFloorPrice&&(i.cachedFloorPrice=Number(t.cachedFloorPrice)),t.ignoredFloorPriceFactorIndexes){if(!Array.isArray(t.ignoredFloorPriceFactorIndexes))throw TypeError(".LineItemEntryModel.ignoredFloorPriceFactorIndexes: array expected");i.ignoredFloorPriceFactorIndexes=[];for(var e=0;e<t.ignoredFloorPriceFactorIndexes.length;++e)i.ignoredFloorPriceFactorIndexes[e]=0|t.ignoredFloorPriceFactorIndexes[e]}return null!=t.gdprConsent&&(i.gdprConsent=Boolean(t.gdprConsent)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.slotWidth&&(i.slotWidth=0|t.slotWidth),null!=t.slotHeight&&(i.slotHeight=0|t.slotHeight),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoRtbResponse=function(){function t(t){if(this.lineItemResponses=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.lineItemResponses=o.emptyArray,t.prototype.usedDefaultGeneticParams=!1,t.prototype.loggingHandledByServer=!1,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRtbResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 3:s.lineItemResponses&&s.lineItemResponses.length||(s.lineItemResponses=[]),s.lineItemResponses.push(c.LineItemResponseModel.decode(t,t.uint32()));break;case 4:s.usedDefaultGeneticParams=t.bool();break;case 5:s.loggingHandledByServer=t.bool();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.lineItemResponses=[]),i.defaults&&(e.usedDefaultGeneticParams=!1,e.loggingHandledByServer=!1),t.lineItemResponses&&t.lineItemResponses.length){e.lineItemResponses=[];for(var s=0;s<t.lineItemResponses.length;++s)e.lineItemResponses[s]=c.LineItemResponseModel.toObject(t.lineItemResponses[s],i)}return null!=t.usedDefaultGeneticParams&&t.hasOwnProperty("usedDefaultGeneticParams")&&(e.usedDefaultGeneticParams=t.usedDefaultGeneticParams),null!=t.loggingHandledByServer&&t.hasOwnProperty("loggingHandledByServer")&&(e.loggingHandledByServer=t.loggingHandledByServer),e},t}(),c.RtbBidResponseModel=function(){function t(t){if(this.billingNoticeUrlList=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.winNoticeUrl="",t.prototype.adQualityCheckUrl="",t.prototype.vastTag="",t.prototype.yoScore=0,t.prototype.encryptedPrice="",t.prototype.creativeId="",t.prototype.seatId="",t.prototype.adomain="",t.prototype.syncedUser=!1,t.prototype.requestedFloorPrice=0,t.prototype.floorPriceFactorIndex=0,t.prototype.campaignId="",t.prototype.width=0,t.prototype.height=0,t.prototype.billingNoticeUrlList=o.emptyArray,t.prototype.mime="text/html",t.prototype.gtkpbp=0,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.RtbBidResponseModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 2:s.winNoticeUrl=t.string();break;case 3:s.adQualityCheckUrl=t.string();break;case 4:s.vastTag=t.string();break;case 5:s.yoScore=t.double();break;case 6:s.encryptedPrice=t.string();break;case 7:s.creativeId=t.string();break;case 8:s.seatId=t.string();break;case 9:s.adomain=t.string();break;case 10:s.syncedUser=t.bool();break;case 11:s.requestedFloorPrice=t.double();break;case 12:s.floorPriceFactorIndex=t.int32();break;case 13:s.campaignId=t.string();break;case 14:s.width=t.int32();break;case 15:s.height=t.int32();break;case 16:s.billingNoticeUrlList&&s.billingNoticeUrlList.length||(s.billingNoticeUrlList=[]),s.billingNoticeUrlList.push(t.string());break;case 17:s.mime=t.string();break;case 18:s.gtkpbp=t.double();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.billingNoticeUrlList=[]),i.defaults&&(e.winNoticeUrl="",e.adQualityCheckUrl="",e.vastTag="",e.yoScore=0,e.encryptedPrice="",e.creativeId="",e.seatId="",e.adomain="",e.syncedUser=!1,e.requestedFloorPrice=0,e.floorPriceFactorIndex=0,e.campaignId="",e.width=0,e.height=0,e.mime="text/html",e.gtkpbp=0),null!=t.winNoticeUrl&&t.hasOwnProperty("winNoticeUrl")&&(e.winNoticeUrl=t.winNoticeUrl),null!=t.adQualityCheckUrl&&t.hasOwnProperty("adQualityCheckUrl")&&(e.adQualityCheckUrl=t.adQualityCheckUrl),null!=t.vastTag&&t.hasOwnProperty("vastTag")&&(e.vastTag=t.vastTag),null!=t.yoScore&&t.hasOwnProperty("yoScore")&&(e.yoScore=i.json&&!isFinite(t.yoScore)?String(t.yoScore):t.yoScore),null!=t.encryptedPrice&&t.hasOwnProperty("encryptedPrice")&&(e.encryptedPrice=t.encryptedPrice),null!=t.creativeId&&t.hasOwnProperty("creativeId")&&(e.creativeId=t.creativeId),null!=t.seatId&&t.hasOwnProperty("seatId")&&(e.seatId=t.seatId),null!=t.adomain&&t.hasOwnProperty("adomain")&&(e.adomain=t.adomain),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&(e.syncedUser=t.syncedUser),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&(e.requestedFloorPrice=i.json&&!isFinite(t.requestedFloorPrice)?String(t.requestedFloorPrice):t.requestedFloorPrice),null!=t.floorPriceFactorIndex&&t.hasOwnProperty("floorPriceFactorIndex")&&(e.floorPriceFactorIndex=t.floorPriceFactorIndex),null!=t.campaignId&&t.hasOwnProperty("campaignId")&&(e.campaignId=t.campaignId),null!=t.width&&t.hasOwnProperty("width")&&(e.width=t.width),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),t.billingNoticeUrlList&&t.billingNoticeUrlList.length){e.billingNoticeUrlList=[];for(var s=0;s<t.billingNoticeUrlList.length;++s)e.billingNoticeUrlList[s]=t.billingNoticeUrlList[s]}return null!=t.mime&&t.hasOwnProperty("mime")&&(e.mime=t.mime),null!=t.gtkpbp&&t.hasOwnProperty("gtkpbp")&&(e.gtkpbp=i.json&&!isFinite(t.gtkpbp)?String(t.gtkpbp):t.gtkpbp),e},t}(),c.NoBidResponse=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.connatixReason=0,t.prototype.partnerReason=0,t.prototype.syncedUser=!1,t.prototype.requestedFloorPrice=0,t.prototype.floorPriceFactorIndex=0,t.prototype.partnerCustomHeaders="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.NoBidResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.connatixReason=t.int32();break;case 2:s.partnerReason=t.int32();break;case 3:s.syncedUser=t.bool();break;case 4:s.requestedFloorPrice=t.double();break;case 5:s.floorPriceFactorIndex=t.int32();break;case 6:s.partnerCustomHeaders=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.connatixReason=i.enums===String?"RequestException":0,e.partnerReason=i.enums===String?"Unknown":0,e.syncedUser=!1,e.requestedFloorPrice=0,e.floorPriceFactorIndex=0,e.partnerCustomHeaders=""),null!=t.connatixReason&&t.hasOwnProperty("connatixReason")&&(e.connatixReason=i.enums===String?c.ConnatixNoBidReasonEnum[t.connatixReason]:t.connatixReason),null!=t.partnerReason&&t.hasOwnProperty("partnerReason")&&(e.partnerReason=i.enums===String?c.PartnerNoBidReasonEnum[t.partnerReason]:t.partnerReason),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&(e.syncedUser=t.syncedUser),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&(e.requestedFloorPrice=i.json&&!isFinite(t.requestedFloorPrice)?String(t.requestedFloorPrice):t.requestedFloorPrice),null!=t.floorPriceFactorIndex&&t.hasOwnProperty("floorPriceFactorIndex")&&(e.floorPriceFactorIndex=t.floorPriceFactorIndex),null!=t.partnerCustomHeaders&&t.hasOwnProperty("partnerCustomHeaders")&&(e.partnerCustomHeaders=t.partnerCustomHeaders),e},t}(),c.LineItemResponseModel=function(){function t(t){if(this.bids=[],this.noBids=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.id="",t.prototype.cachedFloorPrice=0,t.prototype.bids=o.emptyArray,t.prototype.noBids=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.LineItemResponseModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.id=t.string();break;case 2:s.cachedFloorPrice=t.double();break;case 3:s.bids&&s.bids.length||(s.bids=[]),s.bids.push(c.RtbBidResponseModel.decode(t,t.uint32()));break;case 4:s.noBids&&s.noBids.length||(s.noBids=[]),s.noBids.push(c.NoBidResponse.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.bids=[],e.noBids=[]),i.defaults&&(e.id="",e.cachedFloorPrice=0),null!=t.id&&t.hasOwnProperty("id")&&(e.id=t.id),null!=t.cachedFloorPrice&&t.hasOwnProperty("cachedFloorPrice")&&(e.cachedFloorPrice=i.json&&!isFinite(t.cachedFloorPrice)?String(t.cachedFloorPrice):t.cachedFloorPrice),t.bids&&t.bids.length){e.bids=[];for(var s=0;s<t.bids.length;++s)e.bids[s]=c.RtbBidResponseModel.toObject(t.bids[s],i)}if(t.noBids&&t.noBids.length){e.noBids=[];for(s=0;s<t.noBids.length;++s)e.noBids[s]=c.NoBidResponse.toObject(t.noBids[s],i)}return e},t}(),c.ConnatixNoBidReasonEnum=function(){var t={},i=Object.create(t);return i[t[0]="RequestException"]=0,i[t[1]="Timeout"]=1,i[t[2]="EmptyResponse"]=2,i[t[3]="InvalidResponse"]=3,i[t[4]="NoBid"]=4,i[t[5]="BidBelowFloor"]=5,i[t[6]="DealIdMismatch"]=6,i[t[7]="CsInvalidResponse"]=7,i[t[8]="CsRequestException"]=8,i[t[9]="CsEmptyResponse"]=9,i}(),c.PartnerNoBidReasonEnum=function(){var t={},i=Object.create(t);return i[t[0]="Unknown"]=0,i[t[1]="TechnicalError"]=1,i[t[2]="InvalidRequest"]=2,i[t[3]="KnownWebSpider"]=3,i[t[4]="SuspectedNonHumanTraffic"]=4,i[t[5]="CloudIP"]=5,i[t[6]="UnsupportedDevice"]=6,i[t[7]="BlockedPublisher"]=7,i[t[8]="UnmatchedUser"]=8,i[t[9]="DailyReaderCapMet"]=9,i[t[10]="DailyDomainCapMet"]=10,i}(),c.ProtoSupplyChain=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.businessDomain="",t.prototype.supplyChainId="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSupplyChain;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.businessDomain=t.string();break;case 3:s.supplyChainId=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.businessDomain="",e.supplyChainId=""),null!=t.businessDomain&&t.hasOwnProperty("businessDomain")&&(e.businessDomain=t.businessDomain),null!=t.supplyChainId&&t.hasOwnProperty("supplyChainId")&&(e.supplyChainId=t.supplyChainId),e},t}(),c.ProtoAdClickTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.type=1,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(18).string(t.mediaGuid),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(26).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(34).string(t.advertiserLineItemId),null!=t.type&&t.hasOwnProperty("type")&&i.uint32(40).int32(t.type),i},t.fromObject=function(t){if(t instanceof c.ProtoAdClickTrackingRequest)return t;var i=new c.ProtoAdClickTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoAdClickTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),t.type){case"AdClick":case 1:i.type=1;break;case"AdClickThrough":case 2:i.type=2;break;case"AdSkipClick":case 3:i.type=3;break;case"VolumeClick":case 4:i.type=4;break;case"PauseClick":case 5:i.type=5;break;case"PlayClick":case 6:i.type=6;break;case"FullScreenClick":case 7:i.type=7;break;case"MuteClick":case 8:i.type=8;break;case"UnmuteClick":case 9:i.type=9}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoAdClickTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="AdClick"]=1,i[t[2]="AdClickThrough"]=2,i[t[3]="AdSkipClick"]=3,i[t[4]="VolumeClick"]=4,i[t[5]="PauseClick"]=5,i[t[6]="PlayClick"]=6,i[t[7]="FullScreenClick"]=7,i[t[8]="MuteClick"]=8,i[t[9]="UnmuteClick"]=9,i}(),c.ProtoAdOpportunityRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.sessionId="",t.prototype.trackingRequestMeta=null,t.prototype.adBreak=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&i.uint32(10).string(t.sessionId),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(18).fork()).ldelim(),null!=t.adBreak&&t.hasOwnProperty("adBreak")&&i.uint32(24).int32(t.adBreak),i},t.fromObject=function(t){if(t instanceof c.ProtoAdOpportunityRequest)return t;var i=new c.ProtoAdOpportunityRequest;if(null!=t.sessionId&&(i.sessionId=String(t.sessionId)),null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoAdOpportunityRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(t.adBreak){case"None":case 0:i.adBreak=0;break;case"PreRoll":case 1:i.adBreak=1;break;case"MidRoll":case 2:i.adBreak=2;break;case"PostRoll":case 3:i.adBreak=3}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoAdsourceTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Unknown"]=0,i[t[1]="Vpaid"]=1,i[t[2]="VastMedia"]=2,i[t[3]="CnxMedia"]=3,i[t[4]="Jw"]=4,i[t[5]="Ima"]=5,i[t[6]="AOL"]=6,i}(),c.ProtoGdprConsentModeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Unknown"]=0,i[t[1]="NoCmp"]=1,i[t[2]="NoConsent"]=2,i[t[3]="NoConnatixConsent"]=3,i[t[4]="NotAllDemandConsent"]=4,i[t[5]="AllGood"]=5,i}(),c.ProtoPrebid=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.syncedUser=!1,t.prototype.timeSpent=0,t.prototype.reason=0,t.prototype.rtbRequestNumber=0,t.prototype.partnerReason=0,t.prototype.requestedFloorPrice=0,t.prototype.partnerCustomHeaders="",t.prototype.prebidJsBidderName="",t.encode=function(t,i){return i||(i=a.create()),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(10).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(18).string(t.advertiserLineItemId),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(24).bool(t.syncedUser),null!=t.timeSpent&&t.hasOwnProperty("timeSpent")&&i.uint32(32).int32(t.timeSpent),null!=t.reason&&t.hasOwnProperty("reason")&&i.uint32(40).int32(t.reason),null!=t.rtbRequestNumber&&t.hasOwnProperty("rtbRequestNumber")&&i.uint32(48).int32(t.rtbRequestNumber),null!=t.partnerReason&&t.hasOwnProperty("partnerReason")&&i.uint32(56).int32(t.partnerReason),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&i.uint32(65).double(t.requestedFloorPrice),null!=t.partnerCustomHeaders&&t.hasOwnProperty("partnerCustomHeaders")&&i.uint32(74).string(t.partnerCustomHeaders),null!=t.prebidJsBidderName&&t.hasOwnProperty("prebidJsBidderName")&&i.uint32(98).string(t.prebidJsBidderName),i},t.fromObject=function(t){if(t instanceof c.ProtoPrebid)return t;var i=new c.ProtoPrebid;switch(null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.timeSpent&&(i.timeSpent=0|t.timeSpent),t.reason){case"RequestException":case 0:i.reason=0;break;case"Timeout":case 1:i.reason=1;break;case"EmptyResponse":case 2:i.reason=2;break;case"InvalidResponse":case 3:i.reason=3;break;case"NoBid":case 4:i.reason=4;break;case"BidBelowFloor":case 5:i.reason=5;break;case"DealIdMismatch":case 6:i.reason=6;break;case"CsInvalidResponse":case 7:i.reason=7;break;case"CsRequestException":case 8:i.reason=8;break;case"CsEmptyResponse":case 9:i.reason=9}switch(null!=t.rtbRequestNumber&&(i.rtbRequestNumber=0|t.rtbRequestNumber),t.partnerReason){case"Unknown":case 0:i.partnerReason=0;break;case"TechnicalError":case 1:i.partnerReason=1;break;case"InvalidRequest":case 2:i.partnerReason=2;break;case"KnownWebSpider":case 3:i.partnerReason=3;break;case"SuspectedNonHumanTraffic":case 4:i.partnerReason=4;break;case"CloudIP":case 5:i.partnerReason=5;break;case"UnsupportedDevice":case 6:i.partnerReason=6;break;case"BlockedPublisher":case 7:i.partnerReason=7;break;case"UnmatchedUser":case 8:i.partnerReason=8;break;case"DailyReaderCapMet":case 9:i.partnerReason=9;break;case"DailyDomainCapMet":case 10:i.partnerReason=10}return null!=t.requestedFloorPrice&&(i.requestedFloorPrice=Number(t.requestedFloorPrice)),null!=t.partnerCustomHeaders&&(i.partnerCustomHeaders=String(t.partnerCustomHeaders)),null!=t.prebidJsBidderName&&(i.prebidJsBidderName=String(t.prebidJsBidderName)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoBid=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.syncedUser=!1,t.prototype.timeSpent=0,t.prototype.rtbRequestNumber=0,t.prototype.rtbCreativeId="",t.prototype.rtbSeatId="",t.prototype.rtbAdomain="",t.prototype.encryptedPrice="",t.prototype.requestedFloorPrice=0,t.prototype.prebidJsBidderName="",t.prototype.customClientPrice=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(10).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(18).string(t.advertiserLineItemId),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(24).bool(t.syncedUser),null!=t.timeSpent&&t.hasOwnProperty("timeSpent")&&i.uint32(32).int32(t.timeSpent),null!=t.rtbRequestNumber&&t.hasOwnProperty("rtbRequestNumber")&&i.uint32(40).int32(t.rtbRequestNumber),null!=t.rtbCreativeId&&t.hasOwnProperty("rtbCreativeId")&&i.uint32(50).string(t.rtbCreativeId),null!=t.rtbSeatId&&t.hasOwnProperty("rtbSeatId")&&i.uint32(58).string(t.rtbSeatId),null!=t.rtbAdomain&&t.hasOwnProperty("rtbAdomain")&&i.uint32(66).string(t.rtbAdomain),null!=t.encryptedPrice&&t.hasOwnProperty("encryptedPrice")&&i.uint32(74).string(t.encryptedPrice),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&i.uint32(81).double(t.requestedFloorPrice),null!=t.prebidJsBidderName&&t.hasOwnProperty("prebidJsBidderName")&&i.uint32(106).string(t.prebidJsBidderName),null!=t.customClientPrice&&t.hasOwnProperty("customClientPrice")&&i.uint32(113).double(t.customClientPrice),i},t.fromObject=function(t){if(t instanceof c.ProtoBid)return t;var i=new c.ProtoBid;return null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.timeSpent&&(i.timeSpent=0|t.timeSpent),null!=t.rtbRequestNumber&&(i.rtbRequestNumber=0|t.rtbRequestNumber),null!=t.rtbCreativeId&&(i.rtbCreativeId=String(t.rtbCreativeId)),null!=t.rtbSeatId&&(i.rtbSeatId=String(t.rtbSeatId)),null!=t.rtbAdomain&&(i.rtbAdomain=String(t.rtbAdomain)),null!=t.encryptedPrice&&(i.encryptedPrice=String(t.encryptedPrice)),null!=t.requestedFloorPrice&&(i.requestedFloorPrice=Number(t.requestedFloorPrice)),null!=t.prebidJsBidderName&&(i.prebidJsBidderName=String(t.prebidJsBidderName)),null!=t.customClientPrice&&(i.customClientPrice=Number(t.customClientPrice)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoPostBid=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.syncedUser=!1,t.prototype.timeSpent=0,t.prototype.error="",t.prototype.loaded=!1,t.prototype.rtbCreativeId="",t.prototype.rtbSeatId="",t.prototype.rtbAdomain="",t.prototype.adsourceType=0,t.prototype.vastMediaType="",t.prototype.adPodSlotPosition=0,t.prototype.prebidJsBidderName="",t.encode=function(t,i){return i||(i=a.create()),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(10).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(18).string(t.advertiserLineItemId),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(24).bool(t.syncedUser),null!=t.timeSpent&&t.hasOwnProperty("timeSpent")&&i.uint32(32).int32(t.timeSpent),null!=t.error&&t.hasOwnProperty("error")&&i.uint32(42).string(t.error),null!=t.loaded&&t.hasOwnProperty("loaded")&&i.uint32(48).bool(t.loaded),null!=t.rtbCreativeId&&t.hasOwnProperty("rtbCreativeId")&&i.uint32(58).string(t.rtbCreativeId),null!=t.rtbSeatId&&t.hasOwnProperty("rtbSeatId")&&i.uint32(66).string(t.rtbSeatId),null!=t.rtbAdomain&&t.hasOwnProperty("rtbAdomain")&&i.uint32(74).string(t.rtbAdomain),null!=t.adsourceType&&t.hasOwnProperty("adsourceType")&&i.uint32(80).int32(t.adsourceType),null!=t.vastMediaType&&t.hasOwnProperty("vastMediaType")&&i.uint32(90).string(t.vastMediaType),null!=t.adPodSlotPosition&&t.hasOwnProperty("adPodSlotPosition")&&i.uint32(96).int32(t.adPodSlotPosition),null!=t.prebidJsBidderName&&t.hasOwnProperty("prebidJsBidderName")&&i.uint32(106).string(t.prebidJsBidderName),i},t.fromObject=function(t){if(t instanceof c.ProtoPostBid)return t;var i=new c.ProtoPostBid;switch(null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.timeSpent&&(i.timeSpent=0|t.timeSpent),null!=t.error&&(i.error=String(t.error)),null!=t.loaded&&(i.loaded=Boolean(t.loaded)),null!=t.rtbCreativeId&&(i.rtbCreativeId=String(t.rtbCreativeId)),null!=t.rtbSeatId&&(i.rtbSeatId=String(t.rtbSeatId)),null!=t.rtbAdomain&&(i.rtbAdomain=String(t.rtbAdomain)),t.adsourceType){case"Unknown":case 0:i.adsourceType=0;break;case"Vpaid":case 1:i.adsourceType=1;break;case"VastMedia":case 2:i.adsourceType=2;break;case"CnxMedia":case 3:i.adsourceType=3;break;case"Jw":case 4:i.adsourceType=4;break;case"Ima":case 5:i.adsourceType=5;break;case"AOL":case 6:i.adsourceType=6}return null!=t.vastMediaType&&(i.vastMediaType=String(t.vastMediaType)),null!=t.adPodSlotPosition&&(i.adPodSlotPosition=0|t.adPodSlotPosition),null!=t.prebidJsBidderName&&(i.prebidJsBidderName=String(t.prebidJsBidderName)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoBidTrackingsRequest=function(){function t(t){if(this.prebids=[],this.bids=[],this.postBids=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.prebids=o.emptyArray,t.prototype.bids=o.emptyArray,t.prototype.postBids=o.emptyArray,t.prototype.logEveryting=!1,t.prototype.generationId=0,t.prototype.individualId=0,t.prototype.hasGdprConsentPayload=!1,t.prototype.gdprConsentMode=0,t.encode=function(t,i){if(i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(18).string(t.mediaGuid),null!=t.prebids&&t.prebids.length)for(var e=0;e<t.prebids.length;++e)c.ProtoPrebid.encode(t.prebids[e],i.uint32(34).fork()).ldelim();if(null!=t.bids&&t.bids.length)for(e=0;e<t.bids.length;++e)c.ProtoBid.encode(t.bids[e],i.uint32(42).fork()).ldelim();if(null!=t.postBids&&t.postBids.length)for(e=0;e<t.postBids.length;++e)c.ProtoPostBid.encode(t.postBids[e],i.uint32(50).fork()).ldelim();return null!=t.logEveryting&&t.hasOwnProperty("logEveryting")&&i.uint32(56).bool(t.logEveryting),null!=t.generationId&&t.hasOwnProperty("generationId")&&i.uint32(64).int32(t.generationId),null!=t.individualId&&t.hasOwnProperty("individualId")&&i.uint32(72).int32(t.individualId),null!=t.hasGdprConsentPayload&&t.hasOwnProperty("hasGdprConsentPayload")&&i.uint32(80).bool(t.hasGdprConsentPayload),null!=t.gdprConsentMode&&t.hasOwnProperty("gdprConsentMode")&&i.uint32(88).int32(t.gdprConsentMode),i},t.fromObject=function(t){if(t instanceof c.ProtoBidTrackingsRequest)return t;var i=new c.ProtoBidTrackingsRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoBidTrackingsRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}if(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),t.prebids){if(!Array.isArray(t.prebids))throw TypeError(".ProtoBidTrackingsRequest.prebids: array expected");i.prebids=[];for(var e=0;e<t.prebids.length;++e){if("object"!=typeof t.prebids[e])throw TypeError(".ProtoBidTrackingsRequest.prebids: object expected");i.prebids[e]=c.ProtoPrebid.fromObject(t.prebids[e])}}if(t.bids){if(!Array.isArray(t.bids))throw TypeError(".ProtoBidTrackingsRequest.bids: array expected");i.bids=[];for(e=0;e<t.bids.length;++e){if("object"!=typeof t.bids[e])throw TypeError(".ProtoBidTrackingsRequest.bids: object expected");i.bids[e]=c.ProtoBid.fromObject(t.bids[e])}}if(t.postBids){if(!Array.isArray(t.postBids))throw TypeError(".ProtoBidTrackingsRequest.postBids: array expected");i.postBids=[];for(e=0;e<t.postBids.length;++e){if("object"!=typeof t.postBids[e])throw TypeError(".ProtoBidTrackingsRequest.postBids: object expected");i.postBids[e]=c.ProtoPostBid.fromObject(t.postBids[e])}}switch(null!=t.logEveryting&&(i.logEveryting=Boolean(t.logEveryting)),null!=t.generationId&&(i.generationId=0|t.generationId),null!=t.individualId&&(i.individualId=0|t.individualId),null!=t.hasGdprConsentPayload&&(i.hasGdprConsentPayload=Boolean(t.hasGdprConsentPayload)),t.gdprConsentMode){case"Unknown":case 0:i.gdprConsentMode=0;break;case"NoCmp":case 1:i.gdprConsentMode=1;break;case"NoConsent":case 2:i.gdprConsentMode=2;break;case"NoConnatixConsent":case 3:i.gdprConsentMode=3;break;case"NotAllDemandConsent":case 4:i.gdprConsentMode=4;break;case"AllGood":case 5:i.gdprConsentMode=5}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoMediaClickTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.type=0,t.prototype.clickUrl="",t.prototype.slideTitle="",t.prototype.slideNumber=0,t.prototype.slideMediaType=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(18).string(t.mediaGuid),null!=t.type&&t.hasOwnProperty("type")&&i.uint32(24).int32(t.type),null!=t.clickUrl&&t.hasOwnProperty("clickUrl")&&i.uint32(34).string(t.clickUrl),null!=t.slideTitle&&t.hasOwnProperty("slideTitle")&&i.uint32(42).string(t.slideTitle),null!=t.slideNumber&&t.hasOwnProperty("slideNumber")&&i.uint32(48).int32(t.slideNumber),null!=t.slideMediaType&&t.hasOwnProperty("slideMediaType")&&i.uint32(56).int32(t.slideMediaType),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoMediaClickTrackingRequest;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.trackingRequestMeta=c.MetadataModel.decode(t,t.uint32());break;case 2:s.mediaGuid=t.string();break;case 3:s.type=t.int32();break;case 4:s.clickUrl=t.string();break;case 5:s.slideTitle=t.string();break;case 6:s.slideNumber=t.int32();break;case 7:s.slideMediaType=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoMediaClickTrackingRequest)return t;var i=new c.ProtoMediaClickTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoMediaClickTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),t.type){case"Click":case 0:i.type=0;break;case"UrlClick":case 1:i.type=1;break;case"VolumeClick":case 2:i.type=2;break;case"PlayClick":case 3:i.type=3;break;case"PauseClick":case 4:i.type=4;break;case"NextClick":case 5:i.type=5;break;case"PreviousClick":case 6:i.type=6;break;case"MuteClick":case 7:i.type=7;break;case"UnmuteClick":case 8:i.type=8;break;case"CloseClick":case 9:i.type=9;break;case"ScrollClick":case 10:i.type=10;break;case"GalleryClick":case 11:i.type=11;break;case"SubtitleClick":case 12:i.type=12;break;case"FullScreenClick":case 13:i.type=13;break;case"ExitFullScreenClick":case 14:i.type=14}switch(null!=t.clickUrl&&(i.clickUrl=String(t.clickUrl)),null!=t.slideTitle&&(i.slideTitle=String(t.slideTitle)),null!=t.slideNumber&&(i.slideNumber=0|t.slideNumber),t.slideMediaType){case"Image":case 0:i.slideMediaType=0;break;case"Video":case 1:i.slideMediaType=1}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.trackingRequestMeta=null,e.mediaGuid="",e.type=i.enums===String?"Click":0,e.clickUrl="",e.slideTitle="",e.slideNumber=0,e.slideMediaType=i.enums===String?"Image":0),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&(e.trackingRequestMeta=c.MetadataModel.toObject(t.trackingRequestMeta,i)),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&(e.mediaGuid=t.mediaGuid),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoMediaClickTypeEnum[t.type]:t.type),null!=t.clickUrl&&t.hasOwnProperty("clickUrl")&&(e.clickUrl=t.clickUrl),null!=t.slideTitle&&t.hasOwnProperty("slideTitle")&&(e.slideTitle=t.slideTitle),null!=t.slideNumber&&t.hasOwnProperty("slideNumber")&&(e.slideNumber=t.slideNumber),null!=t.slideMediaType&&t.hasOwnProperty("slideMediaType")&&(e.slideMediaType=i.enums===String?c.ProtoMediaTypeEnum[t.slideMediaType]:t.slideMediaType),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoMediaClickTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Click"]=0,i[t[1]="UrlClick"]=1,i[t[2]="VolumeClick"]=2,i[t[3]="PlayClick"]=3,i[t[4]="PauseClick"]=4,i[t[5]="NextClick"]=5,i[t[6]="PreviousClick"]=6,i[t[7]="MuteClick"]=7,i[t[8]="UnmuteClick"]=8,i[t[9]="CloseClick"]=9,i[t[10]="ScrollClick"]=10,i[t[11]="GalleryClick"]=11,i[t[12]="SubtitleClick"]=12,i[t[13]="FullScreenClick"]=13,i[t[14]="ExitFullScreenClick"]=14,i}(),c.ProtoMediaTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.quartile=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(18).string(t.mediaGuid),null!=t.quartile&&t.hasOwnProperty("quartile")&&i.uint32(32).int32(t.quartile),i},t.fromObject=function(t){if(t instanceof c.ProtoMediaTrackingRequest)return t;var i=new c.ProtoMediaTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoMediaTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),t.quartile){case"Start":case 0:i.quartile=0;break;case"First":case 1:i.quartile=1;break;case"Second":case 2:i.quartile=2;break;case"Third":case 3:i.quartile=3;break;case"Fourth":case 4:i.quartile=4}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoQuartilesEnum=function(){var t={},i=Object.create(t);return i[t[0]="Start"]=0,i[t[1]="First"]=1,i[t[2]="Second"]=2,i[t[3]="Third"]=3,i[t[4]="Fourth"]=4,i}(),c.ProtoSessionTimeTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.timePlayed=0,t.prototype.timePlayedInView=0,t.prototype.sessionTime=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.timePlayed&&t.hasOwnProperty("timePlayed")&&i.uint32(16).int32(t.timePlayed),null!=t.timePlayedInView&&t.hasOwnProperty("timePlayedInView")&&i.uint32(24).int32(t.timePlayedInView),null!=t.sessionTime&&t.hasOwnProperty("sessionTime")&&i.uint32(32).int32(t.sessionTime),i},t.fromObject=function(t){if(t instanceof c.ProtoSessionTimeTrackingRequest)return t;var i=new c.ProtoSessionTimeTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoSessionTimeTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}return null!=t.timePlayed&&(i.timePlayed=0|t.timePlayed),null!=t.timePlayedInView&&(i.timePlayedInView=0|t.timePlayedInView),null!=t.sessionTime&&(i.sessionTime=0|t.sessionTime),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.generationId=0,t.prototype.individualId=0,t.prototype.hasAdBlocker=!1,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.generationId&&t.hasOwnProperty("generationId")&&i.uint32(16).int32(t.generationId),null!=t.individualId&&t.hasOwnProperty("individualId")&&i.uint32(24).int32(t.individualId),null!=t.hasAdBlocker&&t.hasOwnProperty("hasAdBlocker")&&i.uint32(32).bool(t.hasAdBlocker),i},t.fromObject=function(t){if(t instanceof c.ProtoTrackingRequest)return t;var i=new c.ProtoTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}return null!=t.generationId&&(i.generationId=0|t.generationId),null!=t.individualId&&(i.individualId=0|t.individualId),null!=t.hasAdBlocker&&(i.hasAdBlocker=Boolean(t.hasAdBlocker)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTrackingResponse=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.errorMessage="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTrackingResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.errorMessage=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.errorMessage=""),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&(e.errorMessage=t.errorMessage),e},t}(),c.ProtoVideoAdImpressionRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.syncedUser=!1,t.prototype.timeSpent=0,t.prototype.encryptedPrice="",t.prototype.rtbCreativeId="",t.prototype.rtbSeatId="",t.prototype.rtbAdomain="",t.prototype.customClientPrice=0,t.prototype.adsourceType=0,t.prototype.vastMediaType="",t.prototype.generationId=0,t.prototype.individualId=0,t.prototype.adPodSlotPosition=0,t.prototype.prebidjsBidderName="",t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(26).string(t.mediaGuid),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(42).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(50).string(t.advertiserLineItemId),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(56).bool(t.syncedUser),null!=t.timeSpent&&t.hasOwnProperty("timeSpent")&&i.uint32(64).int32(t.timeSpent),null!=t.encryptedPrice&&t.hasOwnProperty("encryptedPrice")&&i.uint32(74).string(t.encryptedPrice),null!=t.rtbCreativeId&&t.hasOwnProperty("rtbCreativeId")&&i.uint32(82).string(t.rtbCreativeId),null!=t.rtbSeatId&&t.hasOwnProperty("rtbSeatId")&&i.uint32(90).string(t.rtbSeatId),null!=t.rtbAdomain&&t.hasOwnProperty("rtbAdomain")&&i.uint32(98).string(t.rtbAdomain),null!=t.customClientPrice&&t.hasOwnProperty("customClientPrice")&&i.uint32(105).double(t.customClientPrice),null!=t.adsourceType&&t.hasOwnProperty("adsourceType")&&i.uint32(112).int32(t.adsourceType),null!=t.vastMediaType&&t.hasOwnProperty("vastMediaType")&&i.uint32(122).string(t.vastMediaType),null!=t.generationId&&t.hasOwnProperty("generationId")&&i.uint32(128).int32(t.generationId),null!=t.individualId&&t.hasOwnProperty("individualId")&&i.uint32(136).int32(t.individualId),null!=t.adPodSlotPosition&&t.hasOwnProperty("adPodSlotPosition")&&i.uint32(144).int32(t.adPodSlotPosition),null!=t.prebidjsBidderName&&t.hasOwnProperty("prebidjsBidderName")&&i.uint32(154).string(t.prebidjsBidderName),i},t.fromObject=function(t){if(t instanceof c.ProtoVideoAdImpressionRequest)return t;var i=new c.ProtoVideoAdImpressionRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoVideoAdImpressionRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.timeSpent&&(i.timeSpent=0|t.timeSpent),null!=t.encryptedPrice&&(i.encryptedPrice=String(t.encryptedPrice)),null!=t.rtbCreativeId&&(i.rtbCreativeId=String(t.rtbCreativeId)),null!=t.rtbSeatId&&(i.rtbSeatId=String(t.rtbSeatId)),null!=t.rtbAdomain&&(i.rtbAdomain=String(t.rtbAdomain)),null!=t.customClientPrice&&(i.customClientPrice=Number(t.customClientPrice)),t.adsourceType){case"Unknown":case 0:i.adsourceType=0;break;case"Vpaid":case 1:i.adsourceType=1;break;case"VastMedia":case 2:i.adsourceType=2;break;case"CnxMedia":case 3:i.adsourceType=3;break;case"Jw":case 4:i.adsourceType=4;break;case"Ima":case 5:i.adsourceType=5;break;case"AOL":case 6:i.adsourceType=6}return null!=t.vastMediaType&&(i.vastMediaType=String(t.vastMediaType)),null!=t.generationId&&(i.generationId=0|t.generationId),null!=t.individualId&&(i.individualId=0|t.individualId),null!=t.adPodSlotPosition&&(i.adPodSlotPosition=0|t.adPodSlotPosition),null!=t.prebidjsBidderName&&(i.prebidjsBidderName=String(t.prebidjsBidderName)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoVideoAdImpressionViewableRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(26).string(t.mediaGuid),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(42).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(50).string(t.advertiserLineItemId),i},t.fromObject=function(t){if(t instanceof c.ProtoVideoAdImpressionViewableRequest)return t;var i=new c.ProtoVideoAdImpressionViewableRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoVideoAdImpressionViewableRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}return null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoVideoAdQuartilesRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.quartile=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(26).string(t.mediaGuid),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(42).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(50).string(t.advertiserLineItemId),null!=t.quartile&&t.hasOwnProperty("quartile")&&i.uint32(56).int32(t.quartile),i},t.fromObject=function(t){if(t instanceof c.ProtoVideoAdQuartilesRequest)return t;var i=new c.ProtoVideoAdQuartilesRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoVideoAdQuartilesRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),t.quartile){case"Start":case 0:i.quartile=0;break;case"First":case 1:i.quartile=1;break;case"Second":case 2:i.quartile=2;break;case"Third":case 3:i.quartile=3;break;case"Fourth":case 4:i.quartile=4}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoUserSyncRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.userId="",t.prototype.demandPartner=0,t.prototype.demandPartnerUserId="",t.encode=function(t,i){return i||(i=a.create()),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(10).string(t.userId),null!=t.demandPartner&&t.hasOwnProperty("demandPartner")&&i.uint32(16).int32(t.demandPartner),null!=t.demandPartnerUserId&&t.hasOwnProperty("demandPartnerUserId")&&i.uint32(26).string(t.demandPartnerUserId),i},t.fromObject=function(t){if(t instanceof c.ProtoUserSyncRequest)return t;var i=new c.ProtoUserSyncRequest;return null!=t.userId&&(i.userId=String(t.userId)),null!=t.demandPartner&&(i.demandPartner=0|t.demandPartner),null!=t.demandPartnerUserId&&(i.demandPartnerUserId=String(t.demandPartnerUserId)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t.exports=c},function(t,i,e){"use strict";e.d(i,"v",function(){return f}),e.d(i,"P",function(){return p}),e.d(i,"O",function(){return b}),e.d(i,"K",function(){return v}),e.d(i,"J",function(){return g}),e.d(i,"B",function(){return m}),e.d(i,"A",function(){return y}),e.d(i,"z",function(){return x}),e.d(i,"a",function(){return w}),e.d(i,"I",function(){return k}),e.d(i,"u",function(){return S}),e.d(i,"M",function(){return O}),e.d(i,"n",function(){return _}),e.d(i,"m",function(){return j}),e.d(i,"b",function(){return A}),e.d(i,"d",function(){return T}),e.d(i,"g",function(){return C}),e.d(i,"c",function(){return I}),e.d(i,"L",function(){return P}),e.d(i,"R",function(){return M}),e.d(i,"o",function(){return E}),e.d(i,"j",function(){return L}),e.d(i,"N",function(){return R}),e.d(i,"f",function(){return D}),e.d(i,"q",function(){return $}),e.d(i,"k",function(){return F}),e.d(i,"t",function(){return V}),e.d(i,"e",function(){return U}),e.d(i,"y",function(){return N}),e.d(i,"x",function(){return H}),e.d(i,"w",function(){return q}),e.d(i,"l",function(){return z}),e.d(i,"i",function(){return G}),e.d(i,"h",function(){return Q}),e.d(i,"D",function(){return J}),e.d(i,"G",function(){return X}),e.d(i,"Q",function(){return Y}),e.d(i,"C",function(){return K}),e.d(i,"s",function(){return Z}),e.d(i,"r",function(){return tt}),e.d(i,"H",function(){return it}),e.d(i,"E",function(){return et}),e.d(i,"S",function(){return st}),e.d(i,"p",function(){return nt}),e.d(i,"F",function(){return rt});var s=e(19),n=e(2),r=e(7),h=e(3),a=e(8),o=e(0),c=e(5);function l(t,i){t&&(t.style.display=i?"":"none")}function u(t,i){if(Object(n.a)(t.classList))return void t.classList.add(i);const e=`${t.getAttribute("class")} ${i}`;t.setAttribute("class",e)}function d(t,i){if(Object(n.a)(t.classList))return void t.classList.remove(i);const e=t.getAttribute("class").replace(i,"");t.setAttribute("class",e)}function f(t){l(t,!1)}function p(t){l(t,!0)}function b(t,i){for(const e in i)i.hasOwnProperty(e)&&(t.style[e]=i[e])}function v(t,...i){i.forEach(i=>{t.style[i]=""})}function g(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function m(t,i,e,s,r){if(i)try{const h=e.document.createElement("link");return h.id=t.id,h.type="text/css",h.rel="stylesheet",h.href=t.src,Object(n.b)(s)&&(h.onload=()=>{s()}),Object(n.b)(r)&&(h.onerror=t=>{i.removeChild(h),Object(n.g)(t)?r(`link_stylesheet_load_error_${t}`):r(`link_stylesheet_load_error_${function(t,i){const e=t.document.createElement("div");return e.appendChild(i),e.innerHTML}(e,h)}`)}),i.appendChild(h),h}catch(t){return null}}function y(t,i,e,s,r,h=!0,a){try{const l=e.document.createElement("script");return l.src=t.src,l.async=!0,l.type="text/javascript",t.id&&(l.id=t.id),Object(n.b)(s)&&(l.onload=()=>{s()}),l.onerror=e=>{i.removeChild(l),h&&Object(c.a)({message:a,exception:"script_load_error",callStack:t.src,level:o.ProtoLoggingLevelEnum.INFO,throttle:2,sendMaxLog:!1}),Object(n.b)(r)&&r()},i.appendChild(l),l}catch(i){return h&&Object(c.a)({message:a,exception:`script_insert_error_${i.message}_${i.stack}`,callStack:t.src,level:o.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1}),Object(n.b)(r)&&r(),null}}function x(t,i,e){if(t)try{const s=i.document.createElement("script"),n=i.document.createTextNode(e);return s.appendChild(n),t.appendChild(s),s}catch(t){return null}}function w(t,...i){t&&i.forEach(i=>{Object(n.h)(i)&&u(t,i)})}function k(t,...i){t&&i.forEach(i=>{Object(n.h)(i)&&d(t,i)})}function S(t,i){return t&&t.classList.contains(i)}function O(t,i,e,s=!1){t&&(d(t,i),s&&L(t),u(t,e))}const _=(t,i)=>i.document.getElementById(t),j=(t,i)=>i.getComputedStyle(t);function A(t,i="",e){const s=e.document.getElementsByTagName("head")[0],n=e.document.createElement("style");n.setAttribute("type","text/css"),n.id=i,n.styleSheet?n.styleSheet.cssText=t:n.appendChild(e.document.createTextNode(t)),s.appendChild(n)}function T(t,i){const e=i.document.getElementsByTagName("head")[0],s=i.document.createElement("link");s.setAttribute("rel","preconnect"),s.setAttribute("link",t),e.appendChild(s)}function C(t,i){const e=i.document.createElement("div");return e.innerHTML=t,e.firstElementChild}function I(t,i,e){i.forEach(i=>t.addEventListener(i,e))}function P(t,i,e){i.forEach(i=>t.removeEventListener(i,e))}function M(t,i){i>0?(t.removeAttribute("muted"),t.muted=!1):(t.setAttribute("muted",""),t.muted=!0)}function E(t){return s.b.find(i=>{if(i.keys.fullscreenEnabled in t)return!0})}function L(t){t.getBoundingClientRect()}function R(t,i){return(t.requestAnimationFrame||t.webkitRequestAnimationFrame||function(t){return setTimeout(t,20)})(i)}function D(t,i){return(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||function(t){return clearTimeout(t)})(i)}function B(t,i,e){const s=function(t,i){const e=function(t,i){let e=i;for(;e;){const i=e.parentNode;if(i){const e=t.reduce((t,e)=>t||i.querySelector(e),null);if(e)return e}e=i}return null}(t,i);return e?j(e,V(e)):null}(t,i);return s?function(t,i){return t.getPropertyValue(i)}(s,e):null}function $(t){const i=B(["h1","h2"],t,"font-family");return i||"inherit"}function F(t){const i=B(["p"],t,"font-family");return i||"inherit"}function V(t){try{return t.ownerDocument.defaultView}catch(t){return null}}function U(t,i){t&&i&&(Array.isArray(t)?t.forEach(t=>i.appendChild(t)):i.appendChild(t))}function N(t,i,e){let s=!1;const n=Object(r.c)(i.childNodes);for(let i=0;i<n.length;i++)if(e-1===i||0===e){s=!0,Array.isArray(t)?H(n[i],...t):H(n[i],t);break}s||U(t,i)}function H(t,...i){if(t&&t.parentElement)for(let e=i.length;e--;)t.parentElement.insertBefore(i[e],t)}function q(t,...i){for(let e=i.length;e--;)t.parentNode.insertBefore(i[e],t.nextSibling)}function z(t,i){return Object(r.c)(i.children).indexOf(t)}function W(t){const i=V(t);if(!i)return;const{display:e}=j(t,i);"none"===e&&(t.style.display="block")}function G(t,i=(()=>{})){const e=function(s){"opacity"===s.propertyName&&(k(t,h.n.FadeOutBase,h.n.FadeOut),i(),t.removeEventListener("transitionend",e))};w(t,h.n.FadeOutBase),W(t),L(t),t.addEventListener("transitionend",e),w(t,h.n.FadeOut)}function Q(t,i=(()=>{})){const e=function(s){"opacity"===s.propertyName&&(k(t,h.n.FadeInBase,h.n.FadeIn),i(),t.removeEventListener("transitionend",e))};w(t,h.n.FadeInBase),W(t),L(t),t.addEventListener("transitionend",e),w(t,h.n.FadeIn)}function J(t){const i=V(t);if(!i)return!0;const{display:e,opacity:s}=j(t,i);return"none"===e||"0"===s}function X(t,i){return null===t.firstChild?t.appendChild(i):t.insertBefore(i,t.firstChild)}function Y(t,i){const e=i.document.createElement("div");return e.innerHTML=t||"",e.innerText}function K(){const t=window.navigator&&window.navigator.doNotTrack||window.doNotTrack;return"1"===t||"yes"===t}function Z(t,i){const e=Object(a.f)(t).topFrame;return e[i]?e:null}function tt(t,i){let e=t,s=null;try{for(;!s;){try{e.frames[i]&&(s=e)}catch(t){}if(e===window.top)break;e=e.parent}}catch(t){}return s}function it(t,i){let e=[];try{e=e.slice.call(i.document.querySelectorAll(t),0)}catch(t){}return e}function et(t){return-1!==Object(a.f)(t).topFrame.location.protocol.indexOf("https")}function st(t){if(!et(t))return;[window,t].forEach(t=>{if(null===t.document.querySelector("meta[content=upgrade-insecure-requests]")){const i=t.document.createElement("meta");i.setAttribute("http-equiv","Content-Security-Policy"),i.content="upgrade-insecure-requests",t.document.head.appendChild(i)}})}function nt(t){return Object(a.f)(t).topFrame.document.referrer}function rt(t,i){const e=Object(a.f)(i).topFrame.location.hostname,s=Object(a.g)(t);return s&&s.hostname===e}},function(t,i,e){"use strict";function s(t){return"string"==typeof t}function n(t){return!isNaN(parseFloat(t))&&isFinite(t)}function r(t){return n(t)&&t>0}function h(t){return s(t)&&t.length>0}function a(t){return void 0!==t}function o(t){return"function"==typeof t}function c(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function l(t){try{if(t.contentWindow||t.contentDocument)return!0}catch(t){}return!1}e.d(i,"g",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"e",function(){return r}),e.d(i,"h",function(){return h}),e.d(i,"a",function(){return a}),e.d(i,"b",function(){return o}),e.d(i,"f",function(){return c}),e.d(i,"c",function(){return l})},function(t,i,e){"use strict";var s,n,r;e.d(i,"h",function(){return s}),e.d(i,"g",function(){return n}),e.d(i,"j",function(){return r}),e.d(i,"t",function(){return h}),e.d(i,"p",function(){return a}),e.d(i,"i",function(){return o}),e.d(i,"k",function(){return c}),e.d(i,"f",function(){return l}),e.d(i,"m",function(){return u}),e.d(i,"l",function(){return d}),e.d(i,"e",function(){return f}),e.d(i,"o",function(){return p}),e.d(i,"n",function(){return b}),e.d(i,"r",function(){return v}),e.d(i,"s",function(){return g}),e.d(i,"b",function(){return y}),e.d(i,"c",function(){return x}),e.d(i,"d",function(){return w}),e.d(i,"q",function(){return k}),e.d(i,"a",function(){return S}),function(t){t.Invisible="cnx-mod-invisible",t.HoverStart="cnx-mod-hover-s",t.HoverEnd="cnx-mod-hover",t.HoverBoom="cnx-mod-boom",t.DisplayNone="cnx-mod-display-none",t.Active="cnx-mod-active",t.HideOnVolumeHover="cnx-hide-on-volume-hover",t.HideOnSingleVideo="cnx-hide-on-single-video",t.NoTransition="cnx-mod-no-transition",t.Collapsable="cnx-mod-collapsable",t.HasCustomScrollbar="cnx-mod-scrollbar",t.Show="cnx-mod-show",t.Hide="cnx-mod-hide",t.OnHold="cnx-mod-onhold",t.ForceLineBreak="cnx-mod-force-line-break",t.HideOnAdOverlay="cnx-mod-ad-overlay-none",t.HideOnPodLoadingScreen="cnx-mod-pod-loading-none"}(s||(s={})),function(t){t.Fullscreen="cnx-in-fullscreen",t.Ad="cnx-in-ad",t.AdOverlayType="cnx-in-ad-overlay",t.AdFullSize="cnx-in-ad-full",t.ShowControls="cnx-in-show-controls",t.Mobile="cnx-in-mobile",t.Desktop="cnx-in-desktop",t.Muted="cnx-in-mute",t.CanClose="cnx-in-can-close",t.Collapsed="cnx-in-collapse",t.GalleryPortrait="cnx-in-g-portrait",t.GalleryLandscape="cnx-in-g-landscape",t.ContextController="cnx-context-controller",t.HideUI="cnx-in-hide-ui",t.AlwaysOn="cnx-ui-always-on",t.PodLoadingScreen="cnx-in-pod-loading"}(n||(n={})),function(t){t.Playing="cnx-is-playing",t.Paused="cnx-is-paused",t.Stopped="cnx-is-stopped",t.Preroll="cnx-is-preroll",t.Postroll="cnx-is-postroll",t.Loading="cnx-is-loading",t.LiveEnded="cnx-live-ended"}(r||(r={}));const h={Xxl:"cnx-bp-xxl-v",Xl:"cnx-bp-xl-v",Lg:"cnx-bp-lg-v",Md:"cnx-bp-md-v",Sm:"cnx-bp-sm-v",Xs:"cnx-bp-xs-v",Xxs:"cnx-bp-xxs-v"},a={Xxl:"cnx-bp-xxl-st",Xl:"cnx-bp-xl-st",Lg:"cnx-bp-lg-st",Md:"cnx-bp-md-st",Sm:"cnx-bp-sm-st",Xs:"cnx-bp-xs-st",Xxs:"cnx-bp-xxs-st"};var o,c,l,u,d,f,p;!function(t){t.Responsive="cnx-size-responsive",t.Fixed="cnx-size-fixed"}(o||(o={})),function(t){t.ClickOption="cnx-cm-item--click",t.ToggleOption="cnx-cm-item--toggle",t.SubmenuOption="cnx-cm-item--submenu",t.ItemIcon="cnx-cm-item__icon",t.ItemTitle="cnx-cm-item__title",t.ItemExtra="cnx-cm-item__extra",t.Items="cnx-cm-items",t.Container="cnx-cm-container"}(c||(c={})),function(t){t.Icons="cnx-color-icon",t.TooltipText="cnx-color-tt-text",t.TooltipBackground="cnx-color-tt-bg",t.AccentColor="cnx-color-accent",t.PrimaryColor="cnx-color-primary",t.SecondaryColor="cnx-color-secondary",t.TitleComponent="cnx-title-component",t.TitleLink="cnx-color-title-link",t.SlideProgressBar="cnx-slides-progress-bar",t.ProgressFill="cnx-progress-fill"}(l||(l={})),function(t){t.InheritTitleFontFamily="cnx-inherit-title-font-family",t.InheritBodyFontFamily="cnx-inherit-body-font-family"}(u||(u={})),function(t){t.Connatix="#0099FF",t.Icons="#FFFFFF",t.PrimaryBackground="#F1F1F1",t.PrimaryForeground="#000000",t.SecondaryBackground="#000000",t.SecondaryForeground="#F1F1F1",t.AccentForeground="#FFFFFF"}(d||(d={})),function(t){t.CaptionContainer="cnx-captions-text-holder"}(f||(f={})),function(t){t.MainClass="cnx-float",t.TransitionClass="cnx-float-transition"}(p||(p={}));const b={FadeOutBase:"cnx-fade-out-base",FadeOut:"cnx-fade-out",FadeInBase:"cnx-fade-in-base",FadeIn:"cnx-fade-in"};var v,g,m;!function(t){t.CurrentSlide="cnx-slide-current",t.NextSlide="cnx-slide-next",t.SlideLeft="cnx-slide-left",t.SlideRight="cnx-slide-right"}(v||(v={})),function(t){t.OpacityInTransition="cnx-tooltip-animation-in"}(g||(g={})),function(t){t.Card="cnx-g-card",t.CardSlot="cnx-g-card-slot",t.CardImage="cnx-g-card-image",t.CardText="cnx-g-card-text",t.CardTextContainer="cnx-g-card-text-container",t.CardPlaceholder="cnx-g-card-placeholder",t.CardRail="cnx-g-rail",t.StyleDetailed="cnx-g-style-detailed",t.StyleVisual="cnx-g-style-visual",t.ExploreMore="cnx-g-explore-more",t.FadeOut="cnx-g-fade-out"}(m||(m={}));const y={MainContainer:"cnx-main-container",MainContainerFlex:"cnx-main-container-flex",PlayerWrapper:"cnx-player-wrapper",ImagePlaceholder:"cnx-image-placeholder"},x="cnx-ratio",w="cnx-hide-video",k={Text:"cnx-skip-ad-text",Timer:"cnx-timer-loader",Icon:"cnx-skip-ad-icon",SkipAdButton:"cnx-skip-ad-button",InTimer:"cnx-skip-ad-in-timer"},S={Icon:"cnx-pod-open-new-icon",Button:"cnx-pod-read-more-btn",ButtonContainer:"cnx-pod-read-more-container",Wrapper:"cnx-pod-read-more-wrapper",BackgroundImg:"cnx-pod-loading-background",InfoContainer:"cnx-pod-loading-info",FallbackContainer:"cnx-pod-loading-fallback",SlotCountText:"cnx-pod-slot-count-text"}},function(t,i,e){"use strict";var s,n;e.d(i,"a",function(){return s}),e.d(i,"b",function(){return n}),function(t){t.Fullscreen="fullscreen",t.Normal="normal",t.Thumbnail="thumbnail"}(s||(s={})),function(t){t.AdLoaded="AdLoaded",t.AdStarted="AdStarted",t.AdStopped="AdStopped",t.AdSkipped="AdSkipped",t.AdSkippableStateChange="AdSkippableStateChange",t.AdSizeChange="AdSizeChange",t.AdLinearChange="AdLinearChange",t.AdDurationChange="AdDurationChange",t.AdExpandedChange="AdExpandedChange",t.AdRemainingTimeChange="AdRemainingTimeChange",t.AdVolumeChange="AdVolumeChange",t.AdImpression="AdImpression",t.AdVideoStart="AdVideoStart",t.AdVideoFirstQuartile="AdVideoFirstQuartile",t.AdVideoMidpoint="AdVideoMidpoint",t.AdVideoThirdQuartile="AdVideoThirdQuartile",t.AdVideoComplete="AdVideoComplete",t.AdClickThru="AdClickThru",t.AdInteraction="AdInteraction",t.AdUserAcceptInvitation="AdUserAcceptInvitation",t.AdUserMinimize="AdUserMinimize",t.AdUserClose="AdUserClose",t.AdPaused="AdPaused",t.AdPlaying="AdPlaying",t.AdLog="AdLog",t.AdError="AdError"}(n||(n={}))},function(t,i,e){"use strict";var s=e(17),n=e(22),r=e(0),h=e(15),a=e(27);const o=!0,c=30;var l=e(13);e.d(i,"a",function(){return b});var u=function(t,i){var e={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&i.indexOf(s)<0&&(e[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)i.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(e[s[n]]=t[s[n]])}return e};const d=500;let f=window.location&&window.location.href,p=!1;try{f=window.top.location.href}catch(t){}function b(t){var{throttle:i=c,sendMaxLog:e=!0,logJsonState:v=!1}=t,g=u(t,["throttle","sendMaxLog","logJsonState"]);if(!p)if(g.playerDestroyed&&(p=!0),g.sessionId=a.a.sessionId,o&&(a.a.incrementLogCount(g.message),a.a.isMaxLogOverflow(g.message)&&b({message:"Logging_max_log_overflow_1000",exception:g.message,callStack:g.callStack,level:r.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!1,throttle:100,sessionId:a.a.sessionId}),a.a.isMaxLog(g.message,i)))e&&!a.a.isMaxLogSent(g.message)&&(a.a.setMaxLogSent(g.message),b({message:"Logging_max_log_sent",exception:g.message,callStack:g.callStack,level:r.ProtoLoggingLevelEnum.FATAL,sessionId:a.a.sessionId}));else{if(v&&(g.callStack=l.a.getJsonString()),void 0===g.callStack){const t=new Error(g.message);g.callStack=t.stack}if(g.callStack=g.callStack.substring(0,d),s.a.logToServer){g.pageUrl=f,g.version=s.a.version;const t={requestData:g,endpoint:h.a.endPoints.tracking.logging,ProtoRequest:r.ProtoLoggingRequest};g.sendBeacon?n.a.sendProtoBeaconRequest(t):n.a.sendProtoRequest(t).catch(t=>{})}s.a.logToConsole&&function(t){let i;switch(t.level){case r.ProtoLoggingLevelEnum.FATAL:i="#8B0000";break;case r.ProtoLoggingLevelEnum.WARNING:i="#FF8C00";break;case r.ProtoLoggingLevelEnum.INFO:i="#000000"}console.log(`%cConnatix Logging:\n   message: ${t.message}\n   exception: ${t.exception}\n   level: ${t.level}\n   version: ${t.version}\n   sessionId: ${t.sessionId}\n   callStack: ${t.callStack}`,`color:${i}`)}(g)}}},function(t,i,e){"use strict";var s,n,r,h,a,o;e.d(i,"b",function(){return s}),e.d(i,"f",function(){return n}),e.d(i,"j",function(){return r}),e.d(i,"e",function(){return a}),e.d(i,"c",function(){return o}),e.d(i,"h",function(){return c}),e.d(i,"i",function(){return l}),e.d(i,"g",function(){return u}),e.d(i,"a",function(){return d}),e.d(i,"d",function(){return f}),function(t){t[t.Idle=0]="Idle",t[t.Loading=1]="Loading",t[t.Ready=2]="Ready",t[t.Error=3]="Error",t[t.Capped=4]="Capped",t[t.InWin=5]="InWin",t[t.Consumed=6]="Consumed",t[t.InImpression=7]="InImpression"}(s||(s={})),function(t){t.Ima=".g.doubleclick.net",t.Jw="content.jwplatform.com"}(n||(n={})),function(t){t[t.Javascript=0]="Javascript",t[t.Video=1]="Video"}(r||(r={})),function(t){t[t.Viewability=0]="Viewability",t[t.Sound=1]="Sound",t[t.PreRoll=2]="PreRoll"}(h||(h={})),function(t){t.Timeout="timeout",t.VpaidError="vpaidError",t.ImaError="imaError",t.SpotxError="spotxError",t.ImaManagerInit="imaManagerInit",t.ImaInitSdkError="initImasdkError",t.SpotXAdOSInit="spotxAdOSInit",t.SpotXLoadAd="spotxLoadAd",t.VastVideoTagEventError="vastVideoTagEventError",t.VastUnsupportedMedia="vastUnsupportedMedia",t.VastPlayPromiseReject="playPromiseReject",t.AdStopped="adStopped",t.MuteEnforce="muteEnforce",t.VpaidOnLoad="vpaidOnLoad",t.VpaidEnforcements="vpaidEnforcements",t.VpaidInvalid="vpaidInvalid",t.VpaidGetVpaidAdError="vpaidGetVpaidAdError",t.AolImpresssionFunction="aolCustom",t.CnxMediaNoRenditions="noRenditions",t.CnxMediaSrcNotSupported="srcNotSupported",t.CreateSameAd="createSameAd",t.InvalidVpaidEvent="invalidVpaidEvent",t.AdxOverlayNoFill="adxOverlayNoFill",t.AdxOverlayStartAd="adxOverlayStartAd",t.AdxOverlayGptScriptLoad="adxOverlayGptScriptLoad",t.DisplayIntegratorNoHtml="displayIntegratorNoMime",t.DisplayIntegratorJavascriptSyntax="displayIntegratorJavascriptSyntax"}(a||(a={})),function(t){t[t.AdSourceSelected=0]="AdSourceSelected",t[t.ExternalAdSelected=1]="ExternalAdSelected",t[t.ExternalRtbError=2]="ExternalRtbError",t[t.AdSourceCapResetList=3]="AdSourceCapResetList",t[t.AdSourceWrapperCollectionCappedByImpression=4]="AdSourceWrapperCollectionCappedByImpression",t[t.AuctionCallReady=5]="AuctionCallReady",t[t.AuctionCompleted=6]="AuctionCompleted"}(o||(o={}));const c=25e3,l=25e3,u=500;var d,f;!function(t){t[t.Vast=0]="Vast",t[t.Ima=1]="Ima",t[t.Jw=2]="Jw",t[t.Media=3]="Media",t[t.WithContent=4]="WithContent",t[t.Overlay=5]="Overlay"}(d||(d={})),function(t){t.Html="text/html",t.Javascript="application/javascript"}(f||(f={}))},function(t,i,e){"use strict";e.d(i,"g",function(){return h}),e.d(i,"l",function(){return a}),e.d(i,"d",function(){return o}),e.d(i,"c",function(){return c}),e.d(i,"f",function(){return l}),e.d(i,"h",function(){return u}),e.d(i,"i",function(){return d}),e.d(i,"k",function(){return f}),e.d(i,"j",function(){return p}),e.d(i,"a",function(){return b}),e.d(i,"b",function(){return v}),e.d(i,"m",function(){return g}),e.d(i,"e",function(){return m});var s=e(23),n=e(8),r=e(2);function h(t,i){return i.indexOf(t)>-1}function a(t){return Array.isArray(t)?t:[t]}function o(t,i){const e=[],s=new Map;return i.forEach(i=>{s.has(i[t])||(s.set(i[t],!0),e.push(i))}),e}function c(t){return[].slice.call(t)}function l(t){const i=[];for(const e in t)e&&parseInt(e,10)>=0&&i.push(t[e]);return i}function u(t){return t&&t.length>0}function d(t){return t.every(t=>Object(r.d)(t))}function f(t){let i="[";for(let e=0;e<t.length;e++)i+=Object(s.c)(t[e])+(e===t.length-1?"":",");return i+="]"}function p(t,i){return!(!t||!i)&&(t.length===i.length&&(t===i||0===t.length&&0===i.length||t.every((t,e)=>Object(n.i)(t,i[e]))))}function b(t,i){return t.filter(t=>!i.includes(t))}function v(t,i){return t.filter(t=>i.includes(t))}function g(t){return t.filter((i,e)=>t.indexOf(i)===e)}function m(t,i){const e=t.reduce((t,e)=>Math.abs(e-i)<Math.abs(t-i)?e:t);return t.indexOf(e)}},function(t,i,e){"use strict";e.d(i,"c",function(){return a}),e.d(i,"d",function(){return o}),e.d(i,"g",function(){return c}),e.d(i,"f",function(){return l}),e.d(i,"m",function(){return u}),e.d(i,"l",function(){return d}),e.d(i,"b",function(){return f}),e.d(i,"a",function(){return p}),e.d(i,"i",function(){return b}),e.d(i,"h",function(){return v}),e.d(i,"j",function(){return g}),e.d(i,"e",function(){return m}),e.d(i,"k",function(){return y});var s=e(14),n=e(2),r=e(23),h=e(7);function a(t=5,i=""){return t?a(--t,i+=Math.floor(65536*(1+Math.random())).toString(16).substring(1)):i+Date.now().toString()}function o(t,i){let e="";if(!t.err)try{e=t.topFrame.location.href}catch(t){}if(!e||0===e.length)try{e=i.top.location.href}catch(t){}if(!e||0===e.length)try{e=t.topFrame.document.referrer}catch(t){}return e}function c(t){try{const i=t.match(/^(https?:)\/\/(([^:\/?#]*)(?::([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return{href:t,protocol:i[1],host:i[2],hostname:i[3],port:i[4],pathname:i[5],search:i[6],hash:i[7]}}catch(t){return null}}function l(t){let i=t,e=null,s=!1;try{for(;i.parent.document!==i.document;){if(!i.parent.document){s=!0;break}e=i,i=i.parent}}catch(t){s=!0}return{topFrame:i,topChildFrame:e,err:s}}function u(t=[],i,e={}){t.forEach(t=>{Object(n.g)(t)&&((new i.Image).src=`${t}${Object(s.c)(t)}${function(t,i){const e=[];return Object.keys(t).forEach(s=>{const a=i?`${i}[${s}]`:s,o=t[s];if(Object(n.f)(o))e.push(`${encodeURIComponent(a)}=${Object(r.c)(o)}`);else if(Array.isArray(o))e.push(`${encodeURIComponent(a)}=${Object(h.k)(o)}`);else if(null!=o){const t=encodeURIComponent(o),i=encodeURIComponent(a);t&&i&&e.push(`${i}=${t}`)}}),e.join("&")}(e)}`)})}function d(t){const i=Math.floor(100*Math.random());let e=0,s=0;for(let n=0;n<t.length;n++)if(i<(s+=t[n])){e=n;break}return e}function f(){let t=!1;try{const i=document.createElement("audio");i.volume=1,i.muted=!1;const e=i.play();void 0!==e&&e.catch(()=>{}),t=!i.paused,i.pause()}catch(t){}return t}function p(t,i=0,...e){return setTimeout(()=>{t.apply(this,e)},i)}function b(t,i){return Object(n.f)(t)?Object(r.b)(t,i):Array.isArray(t)?Object(h.j)(t,i):t===i}function v(t,i,e){let s=0,n=t;for(;s<=e;){if(s++,n.classList.contains(i))return!0;if(!(n=n.parentElement))return!1}return!1}function g(t,i){try{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);let s=parseInt(e[1],16),n=parseInt(e[2],16),r=parseInt(e[3],16);s/=255,n/=255,r/=255;const h=Math.max(s,n,r),a=Math.min(s,n,r);let o,c,l=(h+a)/2;if(h===a)o=c=0;else{const t=h-a;switch(c=l>.5?t/(2-h-a):t/(h+a),h){case s:o=(n-r)/t+(n<r?6:0);break;case n:o=(r-s)/t+2;break;case r:o=(s-n)/t+4}o/=6}return o=Math.round(360*o),c=Math.round(100*c),l=Math.round(100*l),`hsl(${o},${c}%,${l+=i/100*(100-l)}%)`}catch(i){return t}}function m(t){let i=t;const e=a(2);if(i.includes("cnxCacheBuster="))i=i.replace(/cnxCacheBuster=([a-z0-9]+)/,`cnxCacheBuster=${e}`);else{const s=t.includes("?")?"&":"?";i=`${t}${s}cnxCacheBuster=${e}`}return i}function y(t,i=5){return new Promise((e,s)=>{t().then(e).catch(n=>{1!==i?y(t,i-1).then(e,s):s(n)})})}},function(t,i,e){"use strict";var s,n,r=e(48),h=r.Reader,a=r.Writer,o=r.util,c=r.roots.default||(r.roots.default={});c.ProtoPlayspaceCodecEnum=(s={},(n=Object.create(s))[s[0]="h264"]=0,n[s[1]="hevc"]=1,n),c.ProtoPlayspaceVideoSlideRendition=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.width=0,t.prototype.height=0,t.prototype.videoUrl="",t.prototype.codec=0,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceVideoSlideRendition;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.width=t.int32();break;case 2:s.height=t.int32();break;case 3:s.videoUrl=t.string();break;case 4:s.codec=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.width=0,e.height=0,e.videoUrl="",e.codec=i.enums===String?"h264":0),null!=t.width&&t.hasOwnProperty("width")&&(e.width=t.width),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.videoUrl&&t.hasOwnProperty("videoUrl")&&(e.videoUrl=t.videoUrl),null!=t.codec&&t.hasOwnProperty("codec")&&(e.codec=i.enums===String?c.ProtoPlayspaceCodecEnum[t.codec]:t.codec),e},t}(),c.ProtoPlayspaceVideoSettings=function(){function t(t){if(this.renditions=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.renditions=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceVideoSettings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(c.ProtoPlayspaceVideoSlideRendition.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.renditions=[]),t.renditions&&t.renditions.length){e.renditions=[];for(var s=0;s<t.renditions.length;++s)e.renditions[s]=c.ProtoPlayspaceVideoSlideRendition.toObject(t.renditions[s],i)}return e},t}(),c.ProtoPlayerOrientationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Mixed"]=0,i[t[1]="Portrait"]=1,i[t[2]="Landscape"]=2,i}(),c.ProtoEndOfSlideCycleMode=function(){var t={},i=Object.create(t);return i[t[0]="Loop"]=0,i[t[1]="Stop"]=1,i}(),c.ProtoPlayspaceColorSchemeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Accent"]=1,i[t[2]="Primary"]=2,i[t[3]="Secondary"]=3,i}(),c.ProtoPlayspaceSlideTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Cover"]=1,i[t[2]="Description"]=2,i[t[3]="BulletList"]=3,i[t[4]="Stock"]=4,i[t[5]="Quote"]=5,i[t[6]="Instagram"]=6,i}(),c.ProtoPlayspaceSlideCapabilitiesEnum=function(){var t={},i=Object.create(t);return i[t[0]="VolumeControls"]=0,i[t[1]="PlaybackControls"]=1,i[t[2]="PlaylistControls"]=2,i[t[3]="CtaButton"]=3,i[t[4]="TopStoryTitle"]=4,i[t[5]="TopSlideTitle"]=5,i}(),c.ProtoMediaContextEnum=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="Logo"]=1,i}(),c.ProtoSlideCapabilityMetadata=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.label="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSlideCapabilityMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.label=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.label=""),null!=t.label&&t.hasOwnProperty("label")&&(e.label=t.label),e},t}(),c.ProtoPlayspaceSlideCapability=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.type=0,t.prototype.metadata=null,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceSlideCapability;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.type=t.int32();break;case 2:s.metadata=c.ProtoSlideCapabilityMetadata.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.type=i.enums===String?"VolumeControls":0,e.metadata=null),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoPlayspaceSlideCapabilitiesEnum[t.type]:t.type),null!=t.metadata&&t.hasOwnProperty("metadata")&&(e.metadata=c.ProtoSlideCapabilityMetadata.toObject(t.metadata,i)),e},t}(),c.ProtoFallbackStoryResponse=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.storyId="",t.prototype.activeVersionId="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoFallbackStoryResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.storyId=t.string();break;case 2:s.activeVersionId=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.storyId="",e.activeVersionId=""),null!=t.storyId&&t.hasOwnProperty("storyId")&&(e.storyId=t.storyId),null!=t.activeVersionId&&t.hasOwnProperty("activeVersionId")&&(e.activeVersionId=t.activeVersionId),e},t}(),c.ProtoPlayspaceMediaMetadataResponse=function(){function t(t){if(this.slides=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.slides=o.emptyArray,t.prototype.storyTitle="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceMediaMetadataResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.slides&&s.slides.length||(s.slides=[]),s.slides.push(c.ProtoPlayspaceSlideMetadata.decode(t,t.uint32()));break;case 2:s.storyTitle=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.slides=[]),i.defaults&&(e.storyTitle=""),t.slides&&t.slides.length){e.slides=[];for(var s=0;s<t.slides.length;++s)e.slides[s]=c.ProtoPlayspaceSlideMetadata.toObject(t.slides[s],i)}return null!=t.storyTitle&&t.hasOwnProperty("storyTitle")&&(e.storyTitle=t.storyTitle),e},t}(),c.ProtoPlayspaceSlideMetadata=function(){function t(t){if(this.capabilityList=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.mediaType=0,t.prototype.title="",t.prototype.clickUrl="",t.prototype.imageUrl="",t.prototype.slideDuration=0,t.prototype.videoRendition=null,t.prototype.type=0,t.prototype.coverMetadata=null,t.prototype.descriptionMetadata=null,t.prototype.bulletListMetadata=null,t.prototype.stockMetadata=null,t.prototype.quoteMetadata=null,t.prototype.instagramMetadata=null,t.prototype.capabilityList=o.emptyArray,t.prototype.portraitImageUrl="",t.prototype.mediaContext=0,t.prototype.altText="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceSlideMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.mediaType=t.int32();break;case 2:s.title=t.string();break;case 3:s.clickUrl=t.string();break;case 4:s.imageUrl=t.string();break;case 5:s.slideDuration=t.int32();break;case 6:s.videoRendition=c.ProtoPlayspaceVideoSettings.decode(t,t.uint32());break;case 7:s.type=t.int32();break;case 8:s.coverMetadata=c.ProtoPlayspaceCoverMetadata.decode(t,t.uint32());break;case 9:s.descriptionMetadata=c.ProtoPlayspaceDescriptionMetadata.decode(t,t.uint32());break;case 10:s.bulletListMetadata=c.ProtoPlayspaceBulletListMetadata.decode(t,t.uint32());break;case 11:s.stockMetadata=c.ProtoPlayspaceStockMetadata.decode(t,t.uint32());break;case 12:s.quoteMetadata=c.ProtoPlayspaceQuoteMetadata.decode(t,t.uint32());break;case 16:s.instagramMetadata=c.ProtoPlayspaceInstagramMetadata.decode(t,t.uint32());break;case 13:s.capabilityList&&s.capabilityList.length||(s.capabilityList=[]),s.capabilityList.push(c.ProtoPlayspaceSlideCapability.decode(t,t.uint32()));break;case 14:s.portraitImageUrl=t.string();break;case 15:s.mediaContext=t.int32();break;case 17:s.altText=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.capabilityList=[]),i.defaults&&(e.mediaType=i.enums===String?"Image":0,e.title="",e.clickUrl="",e.imageUrl="",e.slideDuration=0,e.videoRendition=null,e.type=i.enums===String?"Default":0,e.coverMetadata=null,e.descriptionMetadata=null,e.bulletListMetadata=null,e.stockMetadata=null,e.quoteMetadata=null,e.portraitImageUrl="",e.mediaContext=i.enums===String?"None":0,e.instagramMetadata=null,e.altText=""),null!=t.mediaType&&t.hasOwnProperty("mediaType")&&(e.mediaType=i.enums===String?c.ProtoMediaTypeEnum[t.mediaType]:t.mediaType),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),null!=t.clickUrl&&t.hasOwnProperty("clickUrl")&&(e.clickUrl=t.clickUrl),null!=t.imageUrl&&t.hasOwnProperty("imageUrl")&&(e.imageUrl=t.imageUrl),null!=t.slideDuration&&t.hasOwnProperty("slideDuration")&&(e.slideDuration=t.slideDuration),null!=t.videoRendition&&t.hasOwnProperty("videoRendition")&&(e.videoRendition=c.ProtoPlayspaceVideoSettings.toObject(t.videoRendition,i)),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoPlayspaceSlideTypeEnum[t.type]:t.type),null!=t.coverMetadata&&t.hasOwnProperty("coverMetadata")&&(e.coverMetadata=c.ProtoPlayspaceCoverMetadata.toObject(t.coverMetadata,i)),null!=t.descriptionMetadata&&t.hasOwnProperty("descriptionMetadata")&&(e.descriptionMetadata=c.ProtoPlayspaceDescriptionMetadata.toObject(t.descriptionMetadata,i)),null!=t.bulletListMetadata&&t.hasOwnProperty("bulletListMetadata")&&(e.bulletListMetadata=c.ProtoPlayspaceBulletListMetadata.toObject(t.bulletListMetadata,i)),null!=t.stockMetadata&&t.hasOwnProperty("stockMetadata")&&(e.stockMetadata=c.ProtoPlayspaceStockMetadata.toObject(t.stockMetadata,i)),null!=t.quoteMetadata&&t.hasOwnProperty("quoteMetadata")&&(e.quoteMetadata=c.ProtoPlayspaceQuoteMetadata.toObject(t.quoteMetadata,i)),t.capabilityList&&t.capabilityList.length){e.capabilityList=[];for(var s=0;s<t.capabilityList.length;++s)e.capabilityList[s]=c.ProtoPlayspaceSlideCapability.toObject(t.capabilityList[s],i)}return null!=t.portraitImageUrl&&t.hasOwnProperty("portraitImageUrl")&&(e.portraitImageUrl=t.portraitImageUrl),null!=t.mediaContext&&t.hasOwnProperty("mediaContext")&&(e.mediaContext=i.enums===String?c.ProtoMediaContextEnum[t.mediaContext]:t.mediaContext),null!=t.instagramMetadata&&t.hasOwnProperty("instagramMetadata")&&(e.instagramMetadata=c.ProtoPlayspaceInstagramMetadata.toObject(t.instagramMetadata,i)),null!=t.altText&&t.hasOwnProperty("altText")&&(e.altText=t.altText),e},t}(),c.ProtoPlayspaceCoverMetadata=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.title="",t.prototype.subtitle="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceCoverMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.title=t.string();break;case 2:s.subtitle=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.title="",e.subtitle=""),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),null!=t.subtitle&&t.hasOwnProperty("subtitle")&&(e.subtitle=t.subtitle),e},t}(),c.ProtoPlayspaceDescriptionChunk=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.text="",t.prototype.colorScheme=0,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceDescriptionChunk;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.text=t.string();break;case 2:s.colorScheme=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.text="",e.colorScheme=i.enums===String?"Default":0),null!=t.text&&t.hasOwnProperty("text")&&(e.text=t.text),null!=t.colorScheme&&t.hasOwnProperty("colorScheme")&&(e.colorScheme=i.enums===String?c.ProtoPlayspaceColorSchemeEnum[t.colorScheme]:t.colorScheme),e},t}(),c.ProtoPlayspaceDescriptionMetadata=function(){function t(t){if(this.chunkList=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.chunkList=o.emptyArray,t.prototype.label=null,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceDescriptionMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.chunkList&&s.chunkList.length||(s.chunkList=[]),s.chunkList.push(c.ProtoPlayspaceDescriptionChunk.decode(t,t.uint32()));break;case 2:s.label=c.ProtoPlayspaceDescriptionChunk.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.chunkList=[]),i.defaults&&(e.label=null),t.chunkList&&t.chunkList.length){e.chunkList=[];for(var s=0;s<t.chunkList.length;++s)e.chunkList[s]=c.ProtoPlayspaceDescriptionChunk.toObject(t.chunkList[s],i)}return null!=t.label&&t.hasOwnProperty("label")&&(e.label=c.ProtoPlayspaceDescriptionChunk.toObject(t.label,i)),e},t}(),c.ProtoBulletOptions=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.title="",t.prototype.description="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoBulletOptions;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.title=t.string();break;case 2:s.description=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.title="",e.description=""),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),null!=t.description&&t.hasOwnProperty("description")&&(e.description=t.description),e},t}(),c.ProtoPlayspaceBulletListMetadata=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.title="",t.prototype.items=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceBulletListMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.title=t.string();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(c.ProtoBulletOptions.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.title=""),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=c.ProtoBulletOptions.toObject(t.items[s],i)}return e},t}(),c.ProtoPlayspaceQuoteMetadata=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.text="",t.prototype.source="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceQuoteMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.text=t.string();break;case 2:s.source=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.text="",e.source=""),null!=t.text&&t.hasOwnProperty("text")&&(e.text=t.text),null!=t.source&&t.hasOwnProperty("source")&&(e.source=t.source),e},t}(),c.ProtoPlayspaceStockMetadata=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.encode=function(t,i){return i||(i=a.create()),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceStockMetadata;t.pos<e;){var n=t.uint32();t.skipType(7&n)}return s},t.fromObject=function(t){return t instanceof c.ProtoPlayspaceStockMetadata?t:new c.ProtoPlayspaceStockMetadata},t.toObject=function(){return{}},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoPlayspaceInstagramMetadata=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.handle="",t.prototype.createdDate="",t.prototype.likes="",t.prototype.comments="",t.encode=function(t,i){return i||(i=a.create()),null!=t.handle&&t.hasOwnProperty("handle")&&i.uint32(10).string(t.handle),null!=t.createdDate&&t.hasOwnProperty("createdDate")&&i.uint32(18).string(t.createdDate),null!=t.likes&&t.hasOwnProperty("likes")&&i.uint32(26).string(t.likes),null!=t.comments&&t.hasOwnProperty("comments")&&i.uint32(34).string(t.comments),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceInstagramMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.handle=t.string();break;case 2:s.createdDate=t.string();break;case 3:s.likes=t.string();break;case 4:s.comments=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoPlayspaceInstagramMetadata)return t;var i=new c.ProtoPlayspaceInstagramMetadata;return null!=t.handle&&(i.handle=String(t.handle)),null!=t.createdDate&&(i.createdDate=String(t.createdDate)),null!=t.likes&&(i.likes=String(t.likes)),null!=t.comments&&(i.comments=String(t.comments)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.handle="",e.createdDate="",e.likes="",e.comments=""),null!=t.handle&&t.hasOwnProperty("handle")&&(e.handle=t.handle),null!=t.createdDate&&t.hasOwnProperty("createdDate")&&(e.createdDate=t.createdDate),null!=t.likes&&t.hasOwnProperty("likes")&&(e.likes=t.likes),null!=t.comments&&t.hasOwnProperty("comments")&&(e.comments=t.comments),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoMediaTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Video"]=1,i}(),c.ProtoPlayspaceColorPrimary=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.background="#F1F1F1",t.prototype.foreground="#000000",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceColorPrimary;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.background=t.string();break;case 2:s.foreground=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.background="#F1F1F1",e.foreground="#000000"),null!=t.background&&t.hasOwnProperty("background")&&(e.background=t.background),null!=t.foreground&&t.hasOwnProperty("foreground")&&(e.foreground=t.foreground),e},t}(),c.ProtoPlayspaceColorSecondary=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.background="#000000 ",t.prototype.foreground="#F1F1F1",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceColorSecondary;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.background=t.string();break;case 2:s.foreground=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.background="#000000 ",e.foreground="#F1F1F1"),null!=t.background&&t.hasOwnProperty("background")&&(e.background=t.background),null!=t.foreground&&t.hasOwnProperty("foreground")&&(e.foreground=t.foreground),e},t}(),c.ProtoPlayspaceColorAccent=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.background="",t.prototype.foreground="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceColorAccent;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.background=t.string();break;case 2:s.foreground=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.background="",e.foreground=""),null!=t.background&&t.hasOwnProperty("background")&&(e.background=t.background),null!=t.foreground&&t.hasOwnProperty("foreground")&&(e.foreground=t.foreground),e},t}(),c.ProtoPlayspaceRequest=function(){function t(t){if(this.tokens=[],this.queryJsTargeting={},this.reloadedPlayers={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.tokens=o.emptyArray,t.prototype.pageUrl="",t.prototype.userId="",t.prototype.forceLineItemId="",t.prototype.forcePlayerId="",t.prototype.forceStoryId="",t.prototype.version=0,t.prototype.clientAb0=0,t.prototype.clientAb1=0,t.prototype.customParam1="",t.prototype.customParam2="",t.prototype.customParam3="",t.prototype.forceExploration=!1,t.prototype.es6=!1,t.prototype.bundleId="",t.prototype.parseDomain=!1,t.prototype.implementationType=0,t.prototype.queryJsTargeting=o.emptyObject,t.prototype.isConsentConnatix=!0,t.prototype.reloadedPlayers=o.emptyObject,t.prototype.skipServingRules=!1,t.prototype.disableTracking=!1,t.prototype.referrer="",t.encode=function(t,i){if(i||(i=a.create()),null!=t.tokens&&t.tokens.length)for(var e=0;e<t.tokens.length;++e)i.uint32(10).string(t.tokens[e]);if(null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&i.uint32(26).string(t.pageUrl),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(42).string(t.userId),null!=t.forceLineItemId&&t.hasOwnProperty("forceLineItemId")&&i.uint32(50).string(t.forceLineItemId),null!=t.forcePlayerId&&t.hasOwnProperty("forcePlayerId")&&i.uint32(58).string(t.forcePlayerId),null!=t.forceStoryId&&t.hasOwnProperty("forceStoryId")&&i.uint32(66).string(t.forceStoryId),null!=t.version&&t.hasOwnProperty("version")&&i.uint32(72).int32(t.version),null!=t.clientAb0&&t.hasOwnProperty("clientAb0")&&i.uint32(80).int32(t.clientAb0),null!=t.clientAb1&&t.hasOwnProperty("clientAb1")&&i.uint32(88).int32(t.clientAb1),null!=t.customParam1&&t.hasOwnProperty("customParam1")&&i.uint32(114).string(t.customParam1),null!=t.customParam2&&t.hasOwnProperty("customParam2")&&i.uint32(122).string(t.customParam2),null!=t.customParam3&&t.hasOwnProperty("customParam3")&&i.uint32(130).string(t.customParam3),null!=t.forceExploration&&t.hasOwnProperty("forceExploration")&&i.uint32(136).bool(t.forceExploration),null!=t.es6&&t.hasOwnProperty("es6")&&i.uint32(144).bool(t.es6),null!=t.bundleId&&t.hasOwnProperty("bundleId")&&i.uint32(154).string(t.bundleId),null!=t.parseDomain&&t.hasOwnProperty("parseDomain")&&i.uint32(160).bool(t.parseDomain),null!=t.implementationType&&t.hasOwnProperty("implementationType")&&i.uint32(168).int32(t.implementationType),null!=t.queryJsTargeting&&t.hasOwnProperty("queryJsTargeting")){var s=Object.keys(t.queryJsTargeting);for(e=0;e<s.length;++e)i.uint32(178).fork().uint32(10).string(s[e]).uint32(18).string(t.queryJsTargeting[s[e]]).ldelim()}if(null!=t.isConsentConnatix&&t.hasOwnProperty("isConsentConnatix")&&i.uint32(184).bool(t.isConsentConnatix),null!=t.reloadedPlayers&&t.hasOwnProperty("reloadedPlayers"))for(s=Object.keys(t.reloadedPlayers),e=0;e<s.length;++e)i.uint32(202).fork().uint32(10).string(s[e]).uint32(18).string(t.reloadedPlayers[s[e]]).ldelim();return null!=t.skipServingRules&&t.hasOwnProperty("skipServingRules")&&i.uint32(208).bool(t.skipServingRules),null!=t.disableTracking&&t.hasOwnProperty("disableTracking")&&i.uint32(216).bool(t.disableTracking),null!=t.referrer&&t.hasOwnProperty("referrer")&&i.uint32(226).string(t.referrer),i},t.fromObject=function(t){if(t instanceof c.ProtoPlayspaceRequest)return t;var i=new c.ProtoPlayspaceRequest;if(t.tokens){if(!Array.isArray(t.tokens))throw TypeError(".ProtoPlayspaceRequest.tokens: array expected");i.tokens=[];for(var e=0;e<t.tokens.length;++e)i.tokens[e]=String(t.tokens[e])}switch(null!=t.pageUrl&&(i.pageUrl=String(t.pageUrl)),null!=t.userId&&(i.userId=String(t.userId)),null!=t.forceLineItemId&&(i.forceLineItemId=String(t.forceLineItemId)),null!=t.forcePlayerId&&(i.forcePlayerId=String(t.forcePlayerId)),null!=t.forceStoryId&&(i.forceStoryId=String(t.forceStoryId)),null!=t.version&&(i.version=0|t.version),null!=t.clientAb0&&(i.clientAb0=0|t.clientAb0),null!=t.clientAb1&&(i.clientAb1=0|t.clientAb1),null!=t.customParam1&&(i.customParam1=String(t.customParam1)),null!=t.customParam2&&(i.customParam2=String(t.customParam2)),null!=t.customParam3&&(i.customParam3=String(t.customParam3)),null!=t.forceExploration&&(i.forceExploration=Boolean(t.forceExploration)),null!=t.es6&&(i.es6=Boolean(t.es6)),null!=t.bundleId&&(i.bundleId=String(t.bundleId)),null!=t.parseDomain&&(i.parseDomain=Boolean(t.parseDomain)),t.implementationType){case"Web":case 0:i.implementationType=0;break;case"Amp":case 1:i.implementationType=1}if(t.queryJsTargeting){if("object"!=typeof t.queryJsTargeting)throw TypeError(".ProtoPlayspaceRequest.queryJsTargeting: object expected");i.queryJsTargeting={};var s=Object.keys(t.queryJsTargeting);for(e=0;e<s.length;++e)i.queryJsTargeting[s[e]]=String(t.queryJsTargeting[s[e]])}if(null!=t.isConsentConnatix&&(i.isConsentConnatix=Boolean(t.isConsentConnatix)),t.reloadedPlayers){if("object"!=typeof t.reloadedPlayers)throw TypeError(".ProtoPlayspaceRequest.reloadedPlayers: object expected");i.reloadedPlayers={};for(s=Object.keys(t.reloadedPlayers),e=0;e<s.length;++e)i.reloadedPlayers[s[e]]=String(t.reloadedPlayers[s[e]])}return null!=t.skipServingRules&&(i.skipServingRules=Boolean(t.skipServingRules)),null!=t.disableTracking&&(i.disableTracking=Boolean(t.disableTracking)),null!=t.referrer&&(i.referrer=String(t.referrer)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoPlayspace=function(){function t(t){if(this.sharingDestinations=[],this.floatingDeviceMode=[],this.lineItems=[],this.adBreaks=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.playerId="",t.prototype.playbackMode=0,t.prototype.soundMode=0,t.prototype.endOfCycleMode=0,t.prototype.containerSelector="",t.prototype.position=0,t.prototype.insertPosition=0,t.prototype.forceInsertPath=!1,t.prototype.renderInFrame=!1,t.prototype.scrollHijackingProtection=!1,t.prototype.preRollBreak=0,t.prototype.postRollBreak=0,t.prototype.midRollNumber=-1,t.prototype.slidesBetweenAds=0,t.prototype.minSlidesBeforeFirstAd=0,t.prototype.adViewabilityPolicy=0,t.prototype.casting=!1,t.prototype.sharingDestinations=o.emptyArray,t.prototype.expandButton=!1,t.prototype.closeButtonMode=0,t.prototype.floatingMode=0,t.prototype.floatingDeviceMode=o.emptyArray,t.prototype.floatingCloseButtonMode=0,t.prototype.floatingFixedPosition=0,t.prototype.floatingPageElement="",t.prototype.floatingUseElementWidth=!1,t.prototype.floatingScrollPosition=0,t.prototype.floatingGutterX=0,t.prototype.floatingGutterY=0,t.prototype.floatingWidth=0,t.prototype.html="",t.prototype.logoUrl="",t.prototype.lineItems=o.emptyArray,t.prototype.adPlaybackMode=0,t.prototype.css="",t.prototype.sessionId="",t.prototype.orientation=0,t.prototype.orientationBreakpoint=0,t.prototype.activeVersion="",t.prototype.storyId="",t.prototype.floatingAppendLocation=0,t.prototype.floatingYAxisPadding=0,t.prototype.contentTitleTextColor="",t.prototype.useAccentColorForProgressBar=!1,t.prototype.primaryColorList=null,t.prototype.secondaryColorList=null,t.prototype.accentColorList=null,t.prototype.customJsCode="",t.prototype.initializationSettingsJson="",t.prototype.publisherName="",t.prototype.adSkippability=0,t.prototype.skipAdAfter=5,t.prototype.adBreaks=o.emptyArray,t.prototype.amazonTamSlotId="",t.prototype.limitClientSideApiUse=!1,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspace;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.playerId=t.string();break;case 2:s.playbackMode=t.int32();break;case 3:s.soundMode=t.int32();break;case 4:s.endOfCycleMode=t.int32();break;case 5:s.containerSelector=t.string();break;case 6:s.position=t.int32();break;case 7:s.insertPosition=t.int32();break;case 8:s.forceInsertPath=t.bool();break;case 9:s.renderInFrame=t.bool();break;case 10:s.scrollHijackingProtection=t.bool();break;case 11:s.preRollBreak=t.int32();break;case 12:s.postRollBreak=t.int32();break;case 13:s.midRollNumber=t.int32();break;case 14:s.slidesBetweenAds=t.int32();break;case 15:s.minSlidesBeforeFirstAd=t.int32();break;case 16:s.adViewabilityPolicy=t.int32();break;case 18:s.casting=t.bool();break;case 19:if(s.sharingDestinations&&s.sharingDestinations.length||(s.sharingDestinations=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.sharingDestinations.push(t.int32());else s.sharingDestinations.push(t.int32());break;case 20:s.expandButton=t.bool();break;case 21:s.closeButtonMode=t.int32();break;case 22:s.floatingMode=t.int32();break;case 23:if(s.floatingDeviceMode&&s.floatingDeviceMode.length||(s.floatingDeviceMode=[]),2==(7&n))for(r=t.uint32()+t.pos;t.pos<r;)s.floatingDeviceMode.push(t.int32());else s.floatingDeviceMode.push(t.int32());break;case 24:s.floatingCloseButtonMode=t.int32();break;case 25:s.floatingFixedPosition=t.int32();break;case 26:s.floatingPageElement=t.string();break;case 27:s.floatingUseElementWidth=t.bool();break;case 28:s.floatingScrollPosition=t.int32();break;case 29:s.floatingGutterX=t.int32();break;case 30:s.floatingGutterY=t.int32();break;case 31:s.floatingWidth=t.int32();break;case 35:s.html=t.string();break;case 36:s.logoUrl=t.string();break;case 37:s.lineItems&&s.lineItems.length||(s.lineItems=[]),s.lineItems.push(c.ProtoLineItem.decode(t,t.uint32()));break;case 38:s.adPlaybackMode=t.int32();break;case 39:s.css=t.string();break;case 40:s.sessionId=t.string();break;case 41:s.orientation=t.int32();break;case 42:s.orientationBreakpoint=t.int32();break;case 43:s.activeVersion=t.string();break;case 44:s.storyId=t.string();break;case 50:s.floatingAppendLocation=t.int32();break;case 51:s.floatingYAxisPadding=t.int32();break;case 57:s.contentTitleTextColor=t.string();break;case 58:s.useAccentColorForProgressBar=t.bool();break;case 59:s.primaryColorList=c.ProtoPlayspaceColorPrimary.decode(t,t.uint32());break;case 60:s.secondaryColorList=c.ProtoPlayspaceColorSecondary.decode(t,t.uint32());break;case 61:s.accentColorList=c.ProtoPlayspaceColorAccent.decode(t,t.uint32());break;case 62:s.customJsCode=t.string();break;case 63:s.initializationSettingsJson=t.string();break;case 64:s.publisherName=t.string();break;case 65:s.adSkippability=t.int32();break;case 66:s.skipAdAfter=t.int32();break;case 67:s.adBreaks&&s.adBreaks.length||(s.adBreaks=[]),s.adBreaks.push(c.ProtoAdBreak.decode(t,t.uint32()));break;case 68:s.amazonTamSlotId=t.string();break;case 69:s.limitClientSideApiUse=t.bool();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.sharingDestinations=[],e.floatingDeviceMode=[],e.lineItems=[],e.adBreaks=[]),i.defaults&&(e.playerId="",e.playbackMode=i.enums===String?"Autoplay":0,e.soundMode=i.enums===String?"Mute":0,e.endOfCycleMode=i.enums===String?"Loop":0,e.containerSelector="",e.position=0,e.insertPosition=i.enums===String?"WithinContainer":0,e.forceInsertPath=!1,e.renderInFrame=!1,e.scrollHijackingProtection=!1,e.preRollBreak=0,e.postRollBreak=0,e.midRollNumber=-1,e.slidesBetweenAds=0,e.minSlidesBeforeFirstAd=0,e.adViewabilityPolicy=i.enums===String?"Default":0,e.casting=!1,e.expandButton=!1,e.closeButtonMode=i.enums===String?"Off":0,e.floatingMode=i.enums===String?"Off":0,e.floatingCloseButtonMode=i.enums===String?"Off":0,e.floatingFixedPosition=i.enums===String?"Page":0,e.floatingPageElement="",e.floatingUseElementWidth=!1,e.floatingScrollPosition=i.enums===String?"BottomRight":0,e.floatingGutterX=0,e.floatingGutterY=0,e.floatingWidth=0,e.html="",e.logoUrl="",e.adPlaybackMode=i.enums===String?"Autoplay":0,e.css="",e.sessionId="",e.orientation=i.enums===String?"Mixed":0,e.orientationBreakpoint=0,e.activeVersion="",e.storyId="",e.floatingAppendLocation=i.enums===String?"Above":0,e.floatingYAxisPadding=0,e.contentTitleTextColor="",e.useAccentColorForProgressBar=!1,e.primaryColorList=null,e.secondaryColorList=null,e.accentColorList=null,e.customJsCode="",e.initializationSettingsJson="",e.publisherName="",e.adSkippability=i.enums===String?"IfLongerThan31Sec":0,e.skipAdAfter=5,e.amazonTamSlotId="",e.limitClientSideApiUse=!1),null!=t.playerId&&t.hasOwnProperty("playerId")&&(e.playerId=t.playerId),null!=t.playbackMode&&t.hasOwnProperty("playbackMode")&&(e.playbackMode=i.enums===String?c.ProtoPlayerPlaybackModeEnum[t.playbackMode]:t.playbackMode),null!=t.soundMode&&t.hasOwnProperty("soundMode")&&(e.soundMode=i.enums===String?c.ProtoPlayerSoundMode[t.soundMode]:t.soundMode),null!=t.endOfCycleMode&&t.hasOwnProperty("endOfCycleMode")&&(e.endOfCycleMode=i.enums===String?c.ProtoEndOfSlideCycleMode[t.endOfCycleMode]:t.endOfCycleMode),null!=t.containerSelector&&t.hasOwnProperty("containerSelector")&&(e.containerSelector=t.containerSelector),null!=t.position&&t.hasOwnProperty("position")&&(e.position=t.position),null!=t.insertPosition&&t.hasOwnProperty("insertPosition")&&(e.insertPosition=i.enums===String?c.ProtoPlayerInsertMode[t.insertPosition]:t.insertPosition),null!=t.forceInsertPath&&t.hasOwnProperty("forceInsertPath")&&(e.forceInsertPath=t.forceInsertPath),null!=t.renderInFrame&&t.hasOwnProperty("renderInFrame")&&(e.renderInFrame=t.renderInFrame),null!=t.scrollHijackingProtection&&t.hasOwnProperty("scrollHijackingProtection")&&(e.scrollHijackingProtection=t.scrollHijackingProtection),null!=t.preRollBreak&&t.hasOwnProperty("preRollBreak")&&(e.preRollBreak=t.preRollBreak),null!=t.postRollBreak&&t.hasOwnProperty("postRollBreak")&&(e.postRollBreak=t.postRollBreak),null!=t.midRollNumber&&t.hasOwnProperty("midRollNumber")&&(e.midRollNumber=t.midRollNumber),null!=t.slidesBetweenAds&&t.hasOwnProperty("slidesBetweenAds")&&(e.slidesBetweenAds=t.slidesBetweenAds),null!=t.minSlidesBeforeFirstAd&&t.hasOwnProperty("minSlidesBeforeFirstAd")&&(e.minSlidesBeforeFirstAd=t.minSlidesBeforeFirstAd),null!=t.adViewabilityPolicy&&t.hasOwnProperty("adViewabilityPolicy")&&(e.adViewabilityPolicy=i.enums===String?c.ProtoAdViewabilityPolicy[t.adViewabilityPolicy]:t.adViewabilityPolicy),null!=t.casting&&t.hasOwnProperty("casting")&&(e.casting=t.casting),t.sharingDestinations&&t.sharingDestinations.length){e.sharingDestinations=[];for(var s=0;s<t.sharingDestinations.length;++s)e.sharingDestinations[s]=i.enums===String?c.ProtoSharingDestination[t.sharingDestinations[s]]:t.sharingDestinations[s]}if(null!=t.expandButton&&t.hasOwnProperty("expandButton")&&(e.expandButton=t.expandButton),null!=t.closeButtonMode&&t.hasOwnProperty("closeButtonMode")&&(e.closeButtonMode=i.enums===String?c.ProtoPlayerCloseButtonMode[t.closeButtonMode]:t.closeButtonMode),null!=t.floatingMode&&t.hasOwnProperty("floatingMode")&&(e.floatingMode=i.enums===String?c.ProtoPlayerFloatingMode[t.floatingMode]:t.floatingMode),t.floatingDeviceMode&&t.floatingDeviceMode.length){e.floatingDeviceMode=[];for(s=0;s<t.floatingDeviceMode.length;++s)e.floatingDeviceMode[s]=i.enums===String?c.ProtoDeviceType[t.floatingDeviceMode[s]]:t.floatingDeviceMode[s]}if(null!=t.floatingCloseButtonMode&&t.hasOwnProperty("floatingCloseButtonMode")&&(e.floatingCloseButtonMode=i.enums===String?c.ProtoPlayerCloseButtonMode[t.floatingCloseButtonMode]:t.floatingCloseButtonMode),null!=t.floatingFixedPosition&&t.hasOwnProperty("floatingFixedPosition")&&(e.floatingFixedPosition=i.enums===String?c.ProtoFloatingFixedPositionMode[t.floatingFixedPosition]:t.floatingFixedPosition),null!=t.floatingPageElement&&t.hasOwnProperty("floatingPageElement")&&(e.floatingPageElement=t.floatingPageElement),null!=t.floatingUseElementWidth&&t.hasOwnProperty("floatingUseElementWidth")&&(e.floatingUseElementWidth=t.floatingUseElementWidth),null!=t.floatingScrollPosition&&t.hasOwnProperty("floatingScrollPosition")&&(e.floatingScrollPosition=i.enums===String?c.ProtoPositionMode[t.floatingScrollPosition]:t.floatingScrollPosition),null!=t.floatingGutterX&&t.hasOwnProperty("floatingGutterX")&&(e.floatingGutterX=t.floatingGutterX),null!=t.floatingGutterY&&t.hasOwnProperty("floatingGutterY")&&(e.floatingGutterY=t.floatingGutterY),null!=t.floatingWidth&&t.hasOwnProperty("floatingWidth")&&(e.floatingWidth=t.floatingWidth),null!=t.html&&t.hasOwnProperty("html")&&(e.html=t.html),null!=t.logoUrl&&t.hasOwnProperty("logoUrl")&&(e.logoUrl=t.logoUrl),t.lineItems&&t.lineItems.length){e.lineItems=[];for(s=0;s<t.lineItems.length;++s)e.lineItems[s]=c.ProtoLineItem.toObject(t.lineItems[s],i)}if(null!=t.adPlaybackMode&&t.hasOwnProperty("adPlaybackMode")&&(e.adPlaybackMode=i.enums===String?c.ProtoAdPlaybackMode[t.adPlaybackMode]:t.adPlaybackMode),null!=t.css&&t.hasOwnProperty("css")&&(e.css=t.css),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&(e.sessionId=t.sessionId),null!=t.orientation&&t.hasOwnProperty("orientation")&&(e.orientation=i.enums===String?c.ProtoPlayerOrientationEnum[t.orientation]:t.orientation),null!=t.orientationBreakpoint&&t.hasOwnProperty("orientationBreakpoint")&&(e.orientationBreakpoint=t.orientationBreakpoint),null!=t.activeVersion&&t.hasOwnProperty("activeVersion")&&(e.activeVersion=t.activeVersion),null!=t.storyId&&t.hasOwnProperty("storyId")&&(e.storyId=t.storyId),null!=t.floatingAppendLocation&&t.hasOwnProperty("floatingAppendLocation")&&(e.floatingAppendLocation=i.enums===String?c.ProtoFloatingAppendLocationEnum[t.floatingAppendLocation]:t.floatingAppendLocation),null!=t.floatingYAxisPadding&&t.hasOwnProperty("floatingYAxisPadding")&&(e.floatingYAxisPadding=t.floatingYAxisPadding),null!=t.contentTitleTextColor&&t.hasOwnProperty("contentTitleTextColor")&&(e.contentTitleTextColor=t.contentTitleTextColor),null!=t.useAccentColorForProgressBar&&t.hasOwnProperty("useAccentColorForProgressBar")&&(e.useAccentColorForProgressBar=t.useAccentColorForProgressBar),null!=t.primaryColorList&&t.hasOwnProperty("primaryColorList")&&(e.primaryColorList=c.ProtoPlayspaceColorPrimary.toObject(t.primaryColorList,i)),null!=t.secondaryColorList&&t.hasOwnProperty("secondaryColorList")&&(e.secondaryColorList=c.ProtoPlayspaceColorSecondary.toObject(t.secondaryColorList,i)),null!=t.accentColorList&&t.hasOwnProperty("accentColorList")&&(e.accentColorList=c.ProtoPlayspaceColorAccent.toObject(t.accentColorList,i)),null!=t.customJsCode&&t.hasOwnProperty("customJsCode")&&(e.customJsCode=t.customJsCode),null!=t.initializationSettingsJson&&t.hasOwnProperty("initializationSettingsJson")&&(e.initializationSettingsJson=t.initializationSettingsJson),null!=t.publisherName&&t.hasOwnProperty("publisherName")&&(e.publisherName=t.publisherName),null!=t.adSkippability&&t.hasOwnProperty("adSkippability")&&(e.adSkippability=i.enums===String?c.ProtoPlayerAdSkippability[t.adSkippability]:t.adSkippability),null!=t.skipAdAfter&&t.hasOwnProperty("skipAdAfter")&&(e.skipAdAfter=t.skipAdAfter),t.adBreaks&&t.adBreaks.length){e.adBreaks=[];for(s=0;s<t.adBreaks.length;++s)e.adBreaks[s]=c.ProtoAdBreak.toObject(t.adBreaks[s],i)}return null!=t.amazonTamSlotId&&t.hasOwnProperty("amazonTamSlotId")&&(e.amazonTamSlotId=t.amazonTamSlotId),null!=t.limitClientSideApiUse&&t.hasOwnProperty("limitClientSideApiUse")&&(e.limitClientSideApiUse=t.limitClientSideApiUse),e},t}(),c.ProtoPlayspaceResponse=function(){function t(t){if(this.players=[],this.lineItems=[],this.cookieSyncUrls={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.errorMessage="",t.prototype.players=o.emptyArray,t.prototype.browser=null,t.prototype.geoLocation=null,t.prototype.lineItems=o.emptyArray,t.prototype.cookieSyncUrls=o.emptyObject,t.prototype.explorationMode=!1,t.prototype.supplyChain=null,t.prototype.secondLevelDomain="",t.prototype.geneticAlgoInformation=null,t.prototype.userInformation=null,t.prototype.serverAb0=0,t.prototype.serverAb1=0,t.prototype.isSeoTraffic=!1,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e,s=void 0===i?t.len:t.pos+i,n=new c.ProtoPlayspaceResponse;t.pos<s;){var r=t.uint32();switch(r>>>3){case 1:n.errorMessage=t.string();break;case 10:n.players&&n.players.length||(n.players=[]),n.players.push(c.ProtoPlayspace.decode(t,t.uint32()));break;case 11:n.browser=c.Browser.decode(t,t.uint32());break;case 12:n.geoLocation=c.GeoLocation.decode(t,t.uint32());break;case 13:n.lineItems&&n.lineItems.length||(n.lineItems=[]),n.lineItems.push(c.ProtoLineItem.decode(t,t.uint32()));break;case 14:t.skip().pos++,n.cookieSyncUrls===o.emptyObject&&(n.cookieSyncUrls={}),e=t.int32(),t.pos++,n.cookieSyncUrls[e]=t.string();break;case 15:n.explorationMode=t.bool();break;case 17:n.supplyChain=c.ProtoSupplyChain.decode(t,t.uint32());break;case 18:n.secondLevelDomain=t.string();break;case 19:n.geneticAlgoInformation=c.ProtoGeneticAlgoInformation.decode(t,t.uint32());break;case 20:n.userInformation=c.ProtoUserInformation.decode(t,t.uint32());break;case 21:n.serverAb0=t.int32();break;case 22:n.serverAb1=t.int32();break;case 23:n.isSeoTraffic=t.bool();break;default:t.skipType(7&r)}}return n},t.toObject=function(t,i){i||(i={});var e,s={};if((i.arrays||i.defaults)&&(s.players=[],s.lineItems=[]),(i.objects||i.defaults)&&(s.cookieSyncUrls={}),i.defaults&&(s.errorMessage="",s.browser=null,s.geoLocation=null,s.explorationMode=!1,s.supplyChain=null,s.secondLevelDomain="",s.geneticAlgoInformation=null,s.userInformation=null,s.serverAb0=0,s.serverAb1=0,s.isSeoTraffic=!1),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&(s.errorMessage=t.errorMessage),t.players&&t.players.length){s.players=[];for(var n=0;n<t.players.length;++n)s.players[n]=c.ProtoPlayspace.toObject(t.players[n],i)}if(null!=t.browser&&t.hasOwnProperty("browser")&&(s.browser=c.Browser.toObject(t.browser,i)),null!=t.geoLocation&&t.hasOwnProperty("geoLocation")&&(s.geoLocation=c.GeoLocation.toObject(t.geoLocation,i)),t.lineItems&&t.lineItems.length){s.lineItems=[];for(n=0;n<t.lineItems.length;++n)s.lineItems[n]=c.ProtoLineItem.toObject(t.lineItems[n],i)}if(t.cookieSyncUrls&&(e=Object.keys(t.cookieSyncUrls)).length){s.cookieSyncUrls={};for(n=0;n<e.length;++n)s.cookieSyncUrls[e[n]]=t.cookieSyncUrls[e[n]]}return null!=t.explorationMode&&t.hasOwnProperty("explorationMode")&&(s.explorationMode=t.explorationMode),null!=t.supplyChain&&t.hasOwnProperty("supplyChain")&&(s.supplyChain=c.ProtoSupplyChain.toObject(t.supplyChain,i)),null!=t.secondLevelDomain&&t.hasOwnProperty("secondLevelDomain")&&(s.secondLevelDomain=t.secondLevelDomain),null!=t.geneticAlgoInformation&&t.hasOwnProperty("geneticAlgoInformation")&&(s.geneticAlgoInformation=c.ProtoGeneticAlgoInformation.toObject(t.geneticAlgoInformation,i)),null!=t.userInformation&&t.hasOwnProperty("userInformation")&&(s.userInformation=c.ProtoUserInformation.toObject(t.userInformation,i)),null!=t.serverAb0&&t.hasOwnProperty("serverAb0")&&(s.serverAb0=t.serverAb0),null!=t.serverAb1&&t.hasOwnProperty("serverAb1")&&(s.serverAb1=t.serverAb1),null!=t.isSeoTraffic&&t.hasOwnProperty("isSeoTraffic")&&(s.isSeoTraffic=t.isSeoTraffic),s},t}(),c.ProtoDeviceType=function(){var t={},i=Object.create(t);return i[t[0]="Desktop"]=0,i[t[1]="Smartphone"]=1,i[t[2]="Tablet"]=2,i[t[3]="GameConsole"]=3,i[t[4]="SmartTV"]=4,i[t[5]="WearableComputer"]=5,i[t[6]="PDA"]=6,i[t[7]="Unrecognized"]=7,i}(),c.Browser=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.browserVersion="",t.prototype.browserType="",t.prototype.osCode="",t.prototype.device=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&i.uint32(10).string(t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&i.uint32(18).string(t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&i.uint32(26).string(t.osCode),null!=t.device&&t.hasOwnProperty("device")&&i.uint32(32).int32(t.device),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.Browser;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.browserVersion=t.string();break;case 2:s.browserType=t.string();break;case 3:s.osCode=t.string();break;case 4:s.device=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.Browser)return t;var i=new c.Browser;switch(null!=t.browserVersion&&(i.browserVersion=String(t.browserVersion)),null!=t.browserType&&(i.browserType=String(t.browserType)),null!=t.osCode&&(i.osCode=String(t.osCode)),t.device){case"Desktop":case 0:i.device=0;break;case"Smartphone":case 1:i.device=1;break;case"Tablet":case 2:i.device=2;break;case"GameConsole":case 3:i.device=3;break;case"SmartTV":case 4:i.device=4;break;case"WearableComputer":case 5:i.device=5;break;case"PDA":case 6:i.device=6;break;case"Unrecognized":case 7:i.device=7}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.browserVersion="",e.browserType="",e.osCode="",e.device=i.enums===String?"Desktop":0),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&(e.browserVersion=t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&(e.browserType=t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&(e.osCode=t.osCode),null!=t.device&&t.hasOwnProperty("device")&&(e.device=i.enums===String?c.ProtoDeviceType[t.device]:t.device),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.GeoLocation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.countryGeoId=0,t.prototype.cityId=0,t.prototype.subdivisionId=0,t.prototype.dmaId=0,t.prototype.ip="",t.prototype.lat=0,t.prototype.lon=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&i.uint32(8).int32(t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&i.uint32(16).int32(t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&i.uint32(24).int32(t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&i.uint32(32).int32(t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&i.uint32(42).string(t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&i.uint32(49).double(t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&i.uint32(57).double(t.lon),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.GeoLocation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.countryGeoId=t.int32();break;case 2:s.cityId=t.int32();break;case 3:s.subdivisionId=t.int32();break;case 4:s.dmaId=t.int32();break;case 5:s.ip=t.string();break;case 6:s.lat=t.double();break;case 7:s.lon=t.double();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.GeoLocation)return t;var i=new c.GeoLocation;return null!=t.countryGeoId&&(i.countryGeoId=0|t.countryGeoId),null!=t.cityId&&(i.cityId=0|t.cityId),null!=t.subdivisionId&&(i.subdivisionId=0|t.subdivisionId),null!=t.dmaId&&(i.dmaId=0|t.dmaId),null!=t.ip&&(i.ip=String(t.ip)),null!=t.lat&&(i.lat=Number(t.lat)),null!=t.lon&&(i.lon=Number(t.lon)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.countryGeoId=0,e.cityId=0,e.subdivisionId=0,e.dmaId=0,e.ip="",e.lat=0,e.lon=0),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&(e.countryGeoId=t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&(e.cityId=t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&(e.subdivisionId=t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&(e.dmaId=t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&(e.ip=t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&(e.lat=i.json&&!isFinite(t.lat)?String(t.lat):t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&(e.lon=i.json&&!isFinite(t.lon)?String(t.lon):t.lon),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTrackerType=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Javascript"]=1,i}(),c.ProtoTrackerTriggerType=function(){var t={},i=Object.create(t);return i[t[0]="Impression"]=0,i[t[1]="Complete25Pc"]=1,i[t[2]="Complete50Pc"]=2,i[t[3]="Complete75Pc"]=3,i[t[4]="ViewCompletion"]=4,i[t[5]="VideoClick"]=5,i[t[6]="Pause"]=6,i[t[7]="Resume"]=7,i[t[8]="Mute"]=8,i[t[9]="Unmute"]=9,i}(),c.CreativeTrackerViewModel=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.Type=0,t.prototype.Trigger=0,t.prototype.url="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.CreativeTrackerViewModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.Type=t.int32();break;case 2:s.Trigger=t.int32();break;case 3:s.url=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.Type=i.enums===String?"Image":0,e.Trigger=i.enums===String?"Impression":0,e.url=""),null!=t.Type&&t.hasOwnProperty("Type")&&(e.Type=i.enums===String?c.ProtoTrackerType[t.Type]:t.Type),null!=t.Trigger&&t.hasOwnProperty("Trigger")&&(e.Trigger=i.enums===String?c.ProtoTrackerTriggerType[t.Trigger]:t.Trigger),null!=t.url&&t.hasOwnProperty("url")&&(e.url=t.url),e},t}(),c.ProtoCreativeTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="ThirdParty"]=0,i[t[1]="MediaFile"]=1,i[t[2]="Rtb"]=2,i[t[3]="External"]=3,i[t[4]="HeaderBidder"]=4,i[t[7]="Tam"]=7,i}(),c.ProtoResetCapTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="TimeCapping"]=0,i[t[1]="ContentCapping"]=1,i[t[2]="OpportunityCapping"]=2,i}(),c.ProtoAdSlotsEnum=function(){var t={},i=Object.create(t);return i[t[0]="PreRoll"]=0,i[t[1]="MidRoll"]=1,i[t[2]="PostRoll"]=2,i}(),c.ProtoLineItmePriority=function(){var t={},i=Object.create(t);return i[t[0]="House"]=0,i[t[1]="Default"]=1,i[t[2]="Preferred"]=2,i[t[3]="Top"]=3,i}(),c.ProtoAdSkipMode=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="Never"]=2,i[t[3]="NotAplicable"]=3,i}(),c.ProtoAdType=function(){var t={},i=Object.create(t);return i[t[0]="Video"]=0,i[t[1]="Overlay"]=1,i}(),c.ProtoChoiceCriteriaEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="All"]=1,i[t[2]="SingleAd"]=2,i[t[3]="AdPod"]=3,i}(),c.ProtoLineItemTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdSlotTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="SpecificSlots"]=1,i[t[2]="Interval"]=2,i}(),c.ProtoLineItemAdBreakTargeting=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adRollType=0,t.prototype.adBreakTypeEnum=1,t.encode=function(t,i){return i||(i=a.create()),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&i.uint32(8).int32(t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&i.uint32(16).int32(t.adBreakTypeEnum),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adRollType=t.int32();break;case 2:s.adBreakTypeEnum=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdBreakTargeting)return t;var i=new c.ProtoLineItemAdBreakTargeting;switch(t.adRollType){case"None":case 0:i.adRollType=0;break;case"PreRoll":case 1:i.adRollType=1;break;case"MidRoll":case 2:i.adRollType=2;break;case"PostRoll":case 3:i.adRollType=3}switch(t.adBreakTypeEnum){case"All":case 1:i.adBreakTypeEnum=1;break;case"SingleAd":case 2:i.adBreakTypeEnum=2;break;case"AdPod":case 3:i.adBreakTypeEnum=3}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.adRollType=i.enums===String?"None":0,e.adBreakTypeEnum=i.enums===String?"All":1),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&(e.adRollType=i.enums===String?c.ProtoAdBreakTypeEnum[t.adRollType]:t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&(e.adBreakTypeEnum=i.enums===String?c.ProtoLineItemAdBreakTypeEnum[t.adBreakTypeEnum]:t.adBreakTypeEnum),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItemAdPodTargeting=function(){function t(t){if(this.adSlotPositions=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.targetingType=0,t.prototype.adSlotTargetingType=1,t.prototype.adSlotPositions=o.emptyArray,t.encode=function(t,i){if(i||(i=a.create()),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&i.uint32(8).int32(t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&i.uint32(16).int32(t.adSlotTargetingType),null!=t.adSlotPositions&&t.adSlotPositions.length){i.uint32(26).fork();for(var e=0;e<t.adSlotPositions.length;++e)i.int32(t.adSlotPositions[e]);i.ldelim()}return i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdPodTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.targetingType=t.int32();break;case 2:s.adSlotTargetingType=t.int32();break;case 3:if(s.adSlotPositions&&s.adSlotPositions.length||(s.adSlotPositions=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.adSlotPositions.push(t.int32());else s.adSlotPositions.push(t.int32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdPodTargeting)return t;var i=new c.ProtoLineItemAdPodTargeting;switch(t.targetingType){case"Only":case 0:i.targetingType=0;break;case"Except":case 1:i.targetingType=1}switch(t.adSlotTargetingType){case"SpecificSlots":case 1:i.adSlotTargetingType=1;break;case"Interval":case 2:i.adSlotTargetingType=2}if(t.adSlotPositions){if(!Array.isArray(t.adSlotPositions))throw TypeError(".ProtoLineItemAdPodTargeting.adSlotPositions: array expected");i.adSlotPositions=[];for(var e=0;e<t.adSlotPositions.length;++e)i.adSlotPositions[e]=0|t.adSlotPositions[e]}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adSlotPositions=[]),i.defaults&&(e.targetingType=i.enums===String?"Only":0,e.adSlotTargetingType=i.enums===String?"SpecificSlots":1),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&(e.targetingType=i.enums===String?c.ProtoLineItemTargetingTypeEnum[t.targetingType]:t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&(e.adSlotTargetingType=i.enums===String?c.ProtoLineItemAdSlotTargetingTypeEnum[t.adSlotTargetingType]:t.adSlotTargetingType),t.adSlotPositions&&t.adSlotPositions.length){e.adSlotPositions=[];for(var s=0;s<t.adSlotPositions.length;++s)e.adSlotPositions[s]=t.adSlotPositions[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItemAdBreakSettings=function(){function t(t){if(this.adBreakTargeting=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adBreakTargeting=o.emptyArray,t.prototype.adPodTargeting=null,t.encode=function(t,i){if(i||(i=a.create()),null!=t.adBreakTargeting&&t.adBreakTargeting.length)for(var e=0;e<t.adBreakTargeting.length;++e)c.ProtoLineItemAdBreakTargeting.encode(t.adBreakTargeting[e],i.uint32(10).fork()).ldelim();return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&c.ProtoLineItemAdPodTargeting.encode(t.adPodTargeting,i.uint32(18).fork()).ldelim(),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakSettings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adBreakTargeting&&s.adBreakTargeting.length||(s.adBreakTargeting=[]),s.adBreakTargeting.push(c.ProtoLineItemAdBreakTargeting.decode(t,t.uint32()));break;case 2:s.adPodTargeting=c.ProtoLineItemAdPodTargeting.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdBreakSettings)return t;var i=new c.ProtoLineItemAdBreakSettings;if(t.adBreakTargeting){if(!Array.isArray(t.adBreakTargeting))throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: array expected");i.adBreakTargeting=[];for(var e=0;e<t.adBreakTargeting.length;++e){if("object"!=typeof t.adBreakTargeting[e])throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: object expected");i.adBreakTargeting[e]=c.ProtoLineItemAdBreakTargeting.fromObject(t.adBreakTargeting[e])}}if(null!=t.adPodTargeting){if("object"!=typeof t.adPodTargeting)throw TypeError(".ProtoLineItemAdBreakSettings.adPodTargeting: object expected");i.adPodTargeting=c.ProtoLineItemAdPodTargeting.fromObject(t.adPodTargeting)}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adBreakTargeting=[]),i.defaults&&(e.adPodTargeting=null),t.adBreakTargeting&&t.adBreakTargeting.length){e.adBreakTargeting=[];for(var s=0;s<t.adBreakTargeting.length;++s)e.adBreakTargeting[s]=c.ProtoLineItemAdBreakTargeting.toObject(t.adBreakTargeting[s],i)}return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&(e.adPodTargeting=c.ProtoLineItemAdPodTargeting.toObject(t.adPodTargeting,i)),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItem=function(){function t(t){if(this.trackers=[],this.renditions=[],this.floorPrices=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.adTag="",t.prototype.creativeType=0,t.prototype.yoScore=0,t.prototype.sound=!1,t.prototype.viewability=!1,t.prototype.impressionTimeout=0,t.prototype.vendorId="",t.prototype.trackers=o.emptyArray,t.prototype.duration=0,t.prototype.renditions=o.emptyArray,t.prototype.mediaCreativeId="",t.prototype.ignoreFilledRequests=!1,t.prototype.requestCap=3,t.prototype.impressionCap=0,t.prototype.successRate=0,t.prototype.lineItemPriority=0,t.prototype.headerBidderBids="",t.prototype.headerBidderTimeout=0,t.prototype.mediaCreativeClickUrl="",t.prototype.resetRequestsCapTime=60,t.prototype.resetImpressionsCapTime=60,t.prototype.resetCapType=0,t.prototype.creativeHlsFileName="",t.prototype.timeBetweenRequests=0,t.prototype.skipMode=0,t.prototype.mediaIdTargeting=null,t.prototype.mediaKeywordsTargeting=null,t.prototype.mediaLanguageTargeting=null,t.prototype.adType=0,t.prototype.overlayTime=30,t.prototype.floorPrice=0,t.prototype.adBreakSettings=null,t.prototype.floorPrices=o.emptyArray,t.prototype.playerSize="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.publisherLineItemId=t.string();break;case 2:s.advertiserLineItemId=t.string();break;case 3:s.adTag=t.string();break;case 4:s.creativeType=t.int32();break;case 5:s.yoScore=t.double();break;case 6:s.sound=t.bool();break;case 7:s.viewability=t.bool();break;case 9:s.impressionTimeout=t.int32();break;case 10:s.vendorId=t.string();break;case 12:s.trackers&&s.trackers.length||(s.trackers=[]),s.trackers.push(c.CreativeTrackerViewModel.decode(t,t.uint32()));break;case 13:s.duration=t.int32();break;case 14:s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(c.ProtoRendition.decode(t,t.uint32()));break;case 15:s.mediaCreativeId=t.string();break;case 16:s.ignoreFilledRequests=t.bool();break;case 17:s.requestCap=t.int32();break;case 18:s.impressionCap=t.int32();break;case 19:s.successRate=t.double();break;case 20:s.lineItemPriority=t.int32();break;case 21:s.headerBidderBids=t.string();break;case 22:s.headerBidderTimeout=t.int32();break;case 23:s.mediaCreativeClickUrl=t.string();break;case 24:s.resetRequestsCapTime=t.int32();break;case 25:s.resetImpressionsCapTime=t.int32();break;case 26:s.resetCapType=t.int32();break;case 27:s.creativeHlsFileName=t.string();break;case 28:s.timeBetweenRequests=t.int32();break;case 29:s.skipMode=t.int32();break;case 30:s.mediaIdTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 31:s.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 32:s.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 33:s.adType=t.int32();break;case 34:s.overlayTime=t.int32();break;case 35:s.floorPrice=t.double();break;case 36:s.adBreakSettings=c.ProtoLineItemAdBreakSettings.decode(t,t.uint32());break;case 38:if(s.floorPrices&&s.floorPrices.length||(s.floorPrices=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.floorPrices.push(t.double());else s.floorPrices.push(t.double());break;case 101:s.playerSize=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.trackers=[],e.renditions=[],e.floorPrices=[]),i.defaults&&(e.publisherLineItemId="",e.advertiserLineItemId="",e.adTag="",e.creativeType=i.enums===String?"ThirdParty":0,e.yoScore=0,e.sound=!1,e.viewability=!1,e.impressionTimeout=0,e.vendorId="",e.duration=0,e.mediaCreativeId="",e.ignoreFilledRequests=!1,e.requestCap=3,e.impressionCap=0,e.successRate=0,e.lineItemPriority=i.enums===String?"House":0,e.headerBidderBids="",e.headerBidderTimeout=0,e.mediaCreativeClickUrl="",e.resetRequestsCapTime=60,e.resetImpressionsCapTime=60,e.resetCapType=i.enums===String?"TimeCapping":0,e.creativeHlsFileName="",e.timeBetweenRequests=0,e.skipMode=i.enums===String?"IfLongerThan31Sec":0,e.mediaIdTargeting=null,e.mediaKeywordsTargeting=null,e.mediaLanguageTargeting=null,e.adType=i.enums===String?"Video":0,e.overlayTime=30,e.floorPrice=0,e.adBreakSettings=null,e.playerSize=""),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&(e.publisherLineItemId=t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&(e.advertiserLineItemId=t.advertiserLineItemId),null!=t.adTag&&t.hasOwnProperty("adTag")&&(e.adTag=t.adTag),null!=t.creativeType&&t.hasOwnProperty("creativeType")&&(e.creativeType=i.enums===String?c.ProtoCreativeTypeEnum[t.creativeType]:t.creativeType),null!=t.yoScore&&t.hasOwnProperty("yoScore")&&(e.yoScore=i.json&&!isFinite(t.yoScore)?String(t.yoScore):t.yoScore),null!=t.sound&&t.hasOwnProperty("sound")&&(e.sound=t.sound),null!=t.viewability&&t.hasOwnProperty("viewability")&&(e.viewability=t.viewability),null!=t.impressionTimeout&&t.hasOwnProperty("impressionTimeout")&&(e.impressionTimeout=t.impressionTimeout),null!=t.vendorId&&t.hasOwnProperty("vendorId")&&(e.vendorId=t.vendorId),t.trackers&&t.trackers.length){e.trackers=[];for(var s=0;s<t.trackers.length;++s)e.trackers[s]=c.CreativeTrackerViewModel.toObject(t.trackers[s],i)}if(null!=t.duration&&t.hasOwnProperty("duration")&&(e.duration=t.duration),t.renditions&&t.renditions.length){e.renditions=[];for(s=0;s<t.renditions.length;++s)e.renditions[s]=c.ProtoRendition.toObject(t.renditions[s],i)}if(null!=t.mediaCreativeId&&t.hasOwnProperty("mediaCreativeId")&&(e.mediaCreativeId=t.mediaCreativeId),null!=t.ignoreFilledRequests&&t.hasOwnProperty("ignoreFilledRequests")&&(e.ignoreFilledRequests=t.ignoreFilledRequests),null!=t.requestCap&&t.hasOwnProperty("requestCap")&&(e.requestCap=t.requestCap),null!=t.impressionCap&&t.hasOwnProperty("impressionCap")&&(e.impressionCap=t.impressionCap),null!=t.successRate&&t.hasOwnProperty("successRate")&&(e.successRate=i.json&&!isFinite(t.successRate)?String(t.successRate):t.successRate),null!=t.lineItemPriority&&t.hasOwnProperty("lineItemPriority")&&(e.lineItemPriority=i.enums===String?c.ProtoLineItmePriority[t.lineItemPriority]:t.lineItemPriority),null!=t.headerBidderBids&&t.hasOwnProperty("headerBidderBids")&&(e.headerBidderBids=t.headerBidderBids),null!=t.headerBidderTimeout&&t.hasOwnProperty("headerBidderTimeout")&&(e.headerBidderTimeout=t.headerBidderTimeout),null!=t.mediaCreativeClickUrl&&t.hasOwnProperty("mediaCreativeClickUrl")&&(e.mediaCreativeClickUrl=t.mediaCreativeClickUrl),null!=t.resetRequestsCapTime&&t.hasOwnProperty("resetRequestsCapTime")&&(e.resetRequestsCapTime=t.resetRequestsCapTime),null!=t.resetImpressionsCapTime&&t.hasOwnProperty("resetImpressionsCapTime")&&(e.resetImpressionsCapTime=t.resetImpressionsCapTime),null!=t.resetCapType&&t.hasOwnProperty("resetCapType")&&(e.resetCapType=i.enums===String?c.ProtoResetCapTypeEnum[t.resetCapType]:t.resetCapType),null!=t.creativeHlsFileName&&t.hasOwnProperty("creativeHlsFileName")&&(e.creativeHlsFileName=t.creativeHlsFileName),null!=t.timeBetweenRequests&&t.hasOwnProperty("timeBetweenRequests")&&(e.timeBetweenRequests=t.timeBetweenRequests),null!=t.skipMode&&t.hasOwnProperty("skipMode")&&(e.skipMode=i.enums===String?c.ProtoAdSkipMode[t.skipMode]:t.skipMode),null!=t.mediaIdTargeting&&t.hasOwnProperty("mediaIdTargeting")&&(e.mediaIdTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaIdTargeting,i)),null!=t.mediaKeywordsTargeting&&t.hasOwnProperty("mediaKeywordsTargeting")&&(e.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaKeywordsTargeting,i)),null!=t.mediaLanguageTargeting&&t.hasOwnProperty("mediaLanguageTargeting")&&(e.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaLanguageTargeting,i)),null!=t.adType&&t.hasOwnProperty("adType")&&(e.adType=i.enums===String?c.ProtoAdType[t.adType]:t.adType),null!=t.overlayTime&&t.hasOwnProperty("overlayTime")&&(e.overlayTime=t.overlayTime),null!=t.floorPrice&&t.hasOwnProperty("floorPrice")&&(e.floorPrice=i.json&&!isFinite(t.floorPrice)?String(t.floorPrice):t.floorPrice),null!=t.adBreakSettings&&t.hasOwnProperty("adBreakSettings")&&(e.adBreakSettings=c.ProtoLineItemAdBreakSettings.toObject(t.adBreakSettings,i)),t.floorPrices&&t.floorPrices.length){e.floorPrices=[];for(s=0;s<t.floorPrices.length;++s)e.floorPrices[s]=i.json&&!isFinite(t.floorPrices[s])?String(t.floorPrices[s]):t.floorPrices[s]}return null!=t.playerSize&&t.hasOwnProperty("playerSize")&&(e.playerSize=t.playerSize),e},t}(),c.ProtoTargetingChoiceModel=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.choiceCriteria=0,t.prototype.items=o.emptyArray,t.encode=function(t,i){if(i||(i=a.create()),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&i.uint32(8).int32(t.choiceCriteria),null!=t.items&&t.items.length)for(var e=0;e<t.items.length;++e)i.uint32(18).string(t.items[e]);return i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTargetingChoiceModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.choiceCriteria=t.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(t.string());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoTargetingChoiceModel)return t;var i=new c.ProtoTargetingChoiceModel;switch(t.choiceCriteria){case"Only":case 0:i.choiceCriteria=0;break;case"Except":case 1:i.choiceCriteria=1}if(t.items){if(!Array.isArray(t.items))throw TypeError(".ProtoTargetingChoiceModel.items: array expected");i.items=[];for(var e=0;e<t.items.length;++e)i.items[e]=String(t.items[e])}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.choiceCriteria=i.enums===String?"Only":0),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&(e.choiceCriteria=i.enums===String?c.ProtoChoiceCriteriaEnum[t.choiceCriteria]:t.choiceCriteria),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=t.items[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoRendition=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.height=0,t.prototype.codec="",t.prototype.file="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRendition;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.height=t.int32();break;case 2:s.codec=t.string();break;case 3:s.file=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.height=0,e.codec="",e.file=""),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.codec&&t.hasOwnProperty("codec")&&(e.codec=t.codec),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),e},t}(),c.ProtoPlayerPlaybackModeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i[t[2]="ClickToPlay"]=2,i}(),c.ProtoPlayerCloseButtonMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnHover"]=1,i[t[2]="OnHoverAfterFirstAd"]=2,i[t[3]="AlwaysOn"]=3,i}(),c.ProtoPlayerFloatingMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnPageLoad"]=1,i[t[2]="AfterInView"]=2,i[t[3]="Always"]=3,i}(),c.ProtoPlayerSoundMode=function(){var t={},i=Object.create(t);return i[t[0]="Mute"]=0,i[t[1]="On"]=1,i[t[2]="Hover"]=2,i}(),c.ProtoPlayerInsertMode=function(){var t={},i=Object.create(t);return i[t[0]="WithinContainer"]=0,i[t[1]="BeforeContainer"]=1,i[t[2]="AfterContainer"]=2,i[t[3]="ReplaceContainer"]=3,i[t[4]="HideContainer"]=4,i}(),c.ProtoAdViewabilityPolicy=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoSharingDestination=function(){var t={},i=Object.create(t);return i[t[0]="Facebook"]=0,i[t[1]="Twitter"]=1,i[t[2]="LinkedIn"]=2,i}(),c.ProtoFloatingFixedPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="Page"]=0,i[t[1]="Element"]=1,i}(),c.ProtoPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="BottomRight"]=0,i[t[1]="BottomLeft"]=1,i[t[2]="TopRight"]=2,i[t[3]="TopLeft"]=3,i}(),c.ProtoAdPlaybackMode=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i}(),c.ProtoFloatingAppendLocationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Above"]=0,i[t[1]="Below"]=1,i[t[2]="Within"]=2,i}(),c.ProtoPlayerAdSkippability=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="NoRestrictions"]=2,i}(),c.ProtoImplementationType=function(){var t={},i=Object.create(t);return i[t[0]="Web"]=0,i[t[1]="Amp"]=1,i}(),c.ProtoAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="PreRoll"]=1,i[t[2]="MidRoll"]=2,i[t[3]="PostRoll"]=3,i}(),c.ProtoAdSlotAdTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="SingleAd"]=0,i[t[1]="AdPod"]=1,i}(),c.ProtoSupplyChain=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.businessDomain="",t.prototype.supplyChainId="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSupplyChain;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.businessDomain=t.string();break;case 3:s.supplyChainId=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.businessDomain="",e.supplyChainId=""),null!=t.businessDomain&&t.hasOwnProperty("businessDomain")&&(e.businessDomain=t.businessDomain),null!=t.supplyChainId&&t.hasOwnProperty("supplyChainId")&&(e.supplyChainId=t.supplyChainId),e},t}(),c.ProtoGeneticAlgoInformation=function(){function t(t){if(this.rtbAuctionPattern=[],this.resetRequestCapByTimeRatios=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.generationId=0,t.prototype.individualId=0,t.prototype.rtbRequestResetTime=60,t.prototype.rtbAuctionPattern=o.emptyArray,t.prototype.resetRequestCapByTimeRatios=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoGeneticAlgoInformation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.generationId=t.int32();break;case 2:s.individualId=t.int32();break;case 3:s.rtbRequestResetTime=t.int32();break;case 4:if(s.rtbAuctionPattern&&s.rtbAuctionPattern.length||(s.rtbAuctionPattern=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.rtbAuctionPattern.push(t.int32());else s.rtbAuctionPattern.push(t.int32());break;case 5:s.resetRequestCapByTimeRatios&&s.resetRequestCapByTimeRatios.length||(s.resetRequestCapByTimeRatios=[]),s.resetRequestCapByTimeRatios.push(c.ProtoResetRequestCapByTimeRatio.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.rtbAuctionPattern=[],e.resetRequestCapByTimeRatios=[]),i.defaults&&(e.generationId=0,e.individualId=0,e.rtbRequestResetTime=60),null!=t.generationId&&t.hasOwnProperty("generationId")&&(e.generationId=t.generationId),null!=t.individualId&&t.hasOwnProperty("individualId")&&(e.individualId=t.individualId),null!=t.rtbRequestResetTime&&t.hasOwnProperty("rtbRequestResetTime")&&(e.rtbRequestResetTime=t.rtbRequestResetTime),t.rtbAuctionPattern&&t.rtbAuctionPattern.length){e.rtbAuctionPattern=[];for(var s=0;s<t.rtbAuctionPattern.length;++s)e.rtbAuctionPattern[s]=t.rtbAuctionPattern[s]}if(t.resetRequestCapByTimeRatios&&t.resetRequestCapByTimeRatios.length){e.resetRequestCapByTimeRatios=[];for(s=0;s<t.resetRequestCapByTimeRatios.length;++s)e.resetRequestCapByTimeRatios[s]=c.ProtoResetRequestCapByTimeRatio.toObject(t.resetRequestCapByTimeRatios[s],i)}return e},t}(),c.ProtoResetRequestCapByTimeRatio=function(){function t(t){if(this.range=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.range=o.emptyArray,t.prototype.ratio=1,t.encode=function(t,i){if(i||(i=a.create()),null!=t.range&&t.range.length){i.uint32(10).fork();for(var e=0;e<t.range.length;++e)i.double(t.range[e]);i.ldelim()}return null!=t.ratio&&t.hasOwnProperty("ratio")&&i.uint32(17).double(t.ratio),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoResetRequestCapByTimeRatio;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:if(s.range&&s.range.length||(s.range=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.range.push(t.double());else s.range.push(t.double());break;case 2:s.ratio=t.double();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoResetRequestCapByTimeRatio)return t;var i=new c.ProtoResetRequestCapByTimeRatio;if(t.range){if(!Array.isArray(t.range))throw TypeError(".ProtoResetRequestCapByTimeRatio.range: array expected");i.range=[];for(var e=0;e<t.range.length;++e)i.range[e]=Number(t.range[e])}return null!=t.ratio&&(i.ratio=Number(t.ratio)),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.range=[]),i.defaults&&(e.ratio=1),t.range&&t.range.length){e.range=[];for(var s=0;s<t.range.length;++s)e.range[s]=i.json&&!isFinite(t.range[s])?String(t.range[s]):t.range[s]}return null!=t.ratio&&t.hasOwnProperty("ratio")&&(e.ratio=i.json&&!isFinite(t.ratio)?String(t.ratio):t.ratio),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoUserInformation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.userId="",t.prototype.lookupId="",t.prototype.lookupResponseCode=0,t.prototype.callFraudSensor=!1,t.prototype.publisherAdsTxt="",t.encode=function(t,i){return i||(i=a.create()),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(10).string(t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&i.uint32(26).string(t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&i.uint32(32).int32(t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&i.uint32(40).bool(t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&i.uint32(50).string(t.publisherAdsTxt),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoUserInformation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.userId=t.string();break;case 3:s.lookupId=t.string();break;case 4:s.lookupResponseCode=t.int32();break;case 5:s.callFraudSensor=t.bool();break;case 6:s.publisherAdsTxt=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoUserInformation)return t;var i=new c.ProtoUserInformation;return null!=t.userId&&(i.userId=String(t.userId)),null!=t.lookupId&&(i.lookupId=String(t.lookupId)),null!=t.lookupResponseCode&&(i.lookupResponseCode=0|t.lookupResponseCode),null!=t.callFraudSensor&&(i.callFraudSensor=Boolean(t.callFraudSensor)),null!=t.publisherAdsTxt&&(i.publisherAdsTxt=String(t.publisherAdsTxt)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.userId="",e.lookupId="",e.lookupResponseCode=0,e.callFraudSensor=!1,e.publisherAdsTxt=""),null!=t.userId&&t.hasOwnProperty("userId")&&(e.userId=t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&(e.lookupId=t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&(e.lookupResponseCode=t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&(e.callFraudSensor=t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&(e.publisherAdsTxt=t.publisherAdsTxt),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoAdBreak=function(){function t(t){if(this.types=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.types=o.emptyArray,t.prototype.maxAdPodDuration=0,t.prototype.maxAdSlotDuration=180,t.prototype.numberOfAdSlots=1,t.encode=function(t,i){if(i||(i=a.create()),null!=t.types&&t.types.length){i.uint32(10).fork();for(var e=0;e<t.types.length;++e)i.int32(t.types[e]);i.ldelim()}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&i.uint32(16).int32(t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&i.uint32(24).int32(t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&i.uint32(32).int32(t.numberOfAdSlots),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoAdBreak;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:if(s.types&&s.types.length||(s.types=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.types.push(t.int32());else s.types.push(t.int32());break;case 2:s.maxAdPodDuration=t.int32();break;case 3:s.maxAdSlotDuration=t.int32();break;case 4:s.numberOfAdSlots=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoAdBreak)return t;var i=new c.ProtoAdBreak;if(t.types){if(!Array.isArray(t.types))throw TypeError(".ProtoAdBreak.types: array expected");i.types=[];for(var e=0;e<t.types.length;++e)switch(t.types[e]){default:case"None":case 0:i.types[e]=0;break;case"PreRoll":case 1:i.types[e]=1;break;case"MidRoll":case 2:i.types[e]=2;break;case"PostRoll":case 3:i.types[e]=3}}return null!=t.maxAdPodDuration&&(i.maxAdPodDuration=0|t.maxAdPodDuration),null!=t.maxAdSlotDuration&&(i.maxAdSlotDuration=0|t.maxAdSlotDuration),null!=t.numberOfAdSlots&&(i.numberOfAdSlots=0|t.numberOfAdSlots),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.types=[]),i.defaults&&(e.maxAdPodDuration=0,e.maxAdSlotDuration=180,e.numberOfAdSlots=1),t.types&&t.types.length){e.types=[];for(var s=0;s<t.types.length;++s)e.types[s]=i.enums===String?c.ProtoAdBreakTypeEnum[t.types[s]]:t.types[s]}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&(e.maxAdPodDuration=t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&(e.maxAdSlotDuration=t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&(e.numberOfAdSlots=t.numberOfAdSlots),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t.exports=c},function(t,i,e){"use strict";e.d(i,"b",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"e",function(){return r}),e.d(i,"f",function(){return h}),e.d(i,"g",function(){return a}),e.d(i,"a",function(){return o}),e.d(i,"c",function(){return c});const s=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,n=36e5,r=6e4,h=1e3,a=60,o=864e5,c=60},function(t,i,e){"use strict";i.a={AdBreakStart:"adBreakStart",AdImpression:"adImpression",AdComplete:"adComplete",AdBreakComplete:"adBreakComplete",Pause:"pause",AdPause:"adPause",Play:"play",AdPlay:"adPlay",ContentComplete:"contentComplete",SessionStart:"sessionStart",SessionEnd:"sessionEnd",PlayerResized:"playerStateResize",OnEnterFullscreen:"onEnterFullscreen",OnExitFullscreen:"onExitFullscreen",PlayerCollapsed:"playerCollapsed",PlayerExpanded:"playerExpanded",AdError:"adError",PlayError:"playError",RenderError:"renderError",AdInteraction:"adInteraction",AdClickThru:"adClickThru",AdVideoStart:"adVideoStart",AdLoaded:"adLoaded",AdStateChange:"adStateChange",AdVideoFirstQuartile:"adVideoFirstQuartile",AdVideoMidpoint:"adVideoMidpoint",AdVideoThirdQuartile:"adVideoThirdQuartile",AdVideoComplete:"adVideoComplete",VolumeChange:"volumeChange",AdSkipped:"adSkipped",Destroy:"destroy"}},function(t,i,e){"use strict";e.d(i,"a",function(){return n});var s=e(7);class n{constructor(){this.T={}}subscribe(t,i,e){this.T[t]||(this.T[t]=[]),this.T[t].push({context:i,func:e})}unsubscribe(t,i,e){this.T[t]&&(this.T[t]=this.T[t].filter(t=>!(t.context===i&&t.func===e)))}unsubscribeAll(t){Object.keys(this.T).forEach(i=>{this.T[i]=this.T[i].filter(i=>i.context!==t)})}publish(t,i,e={payload:void 0}){Object.prototype.hasOwnProperty.call(this.T,i)&&this.T[i].forEach(i=>{i.context===t&&i.func(e)})}relay(t,i,e,n){Object(s.l)(t).forEach(t=>{this.subscribe(t,i,i=>{n.publish(e,t,i)})})}relayBulk(t,i,e){t.forEach(t=>{this.relay(t.channel,t.source,i,e)})}}},function(t,i,e){"use strict";e.d(i,"a",function(){return h});var s=e(6),n=e(4),r=e(21);class h{static $(){const t=h.V;return h.V++,t}static U(t){return h.W[t]}static Z(t){t.forEach(t=>{h.W[t.advertiserLineItemId]&&h.addCustomHistoryLine("duplicate",{id:t.advertiserLineItemId}),h.W[t.advertiserLineItemId]=h.$()})}static tt(t){return t.map(t=>({advertiserLineItemId:t.advertiserLineItemId,creativeType:t.creativeType,impressionTimeout:t.impressionTimeout,lineItemPriority:t.lineItemPriority,playerSize:t.playerSize,requestCap:t.requestCap,sound:t.sound,viewability:t.viewability,yoScore:t.yoScore}))}static setClientSideAdList(t){h.it&&(h.et=h.tt(JSON.parse(JSON.stringify(t))),h.Z(h.et))}static setRtbAdList(t){h.it&&(h.st=h.tt(JSON.parse(JSON.stringify(t))),h.Z(h.st))}static setHeaderBidderAdList(t){h.it&&(h.nt=h.tt(JSON.parse(JSON.stringify(t))),h.Z(h.nt))}static setTamAdList(t){h.it&&(h.rt=h.tt(JSON.parse(JSON.stringify(t))),h.Z(h.rt))}static setLineItemStatus(t,i){if(!h.it)return;const e=h.U(t);h.ht.push({type:"status",id:e,status:s.b[i]})}static logPreBid(t){h.it&&h.ht.push({type:"trackPreBid",ad:h.U(t.advertiserLineItemId)})}static logBid(t){h.it&&h.ht.push({type:"trackBid",ad:h.U(t.advertiserLineItemId)})}static logPostBid(t){h.it&&h.ht.push({type:"trackPostBid",ad:h.U(t.advertiserLineItemId)})}static logImpression(t){h.it&&h.ht.push({type:"trackImpression",ad:h.U(t.advertiserLineItemId)})}static logWin(t){h.it&&h.ht.push({type:"trackWin",ad:h.U(t.advertiserLineItemId)})}static adFinished(t){h.it&&h.ht.push({type:"adFinished",ad:h.U(t.advertiserLineItemId)})}static addAdSource(t){h.it&&h.ht.push({type:"addAdSource",ad:h.U(t.advertiserLineItemId)})}static removeAdSource(t){h.it&&h.ht.push({type:"removeAdSource",ad:h.U(t.advertiserLineItemId)})}static adDestroyed(t){h.it&&h.ht.push({type:"adDestroyed",ad:h.U(t.advertiserLineItemId)})}static monetizationDestroyed(){h.it&&h.ht.push({type:"DestroyMonetization!!!"})}static setAdListChange(t,i){if(!h.it)return;const e=[...t].map(t=>h.U(t.advertiserLineItemId));h.ht.push({type:"rtblist",list:e,ad:h.U(i.advertiserLineItemId)})}static setVpaidEvent(t,i){if(h.it)try{const e=h.U(t);switch(i){case n.b.AdLoaded:case n.b.AdStarted:case n.b.AdError:case n.b.AdSkipped:case n.b.AdStopped:case n.b.AdPaused:case n.b.AdPlaying:case n.b.AdImpression:h.ht.push({type:"vpaid",id:e,event:i})}}catch(t){}}static setViewabilityState(t){h.it&&h.ht.push({type:"view",inView:t})}static setFocusState(t){h.it&&h.ht.push({type:"focus",inView:t})}static setAdState(t){h.it&&h.ht.push({type:"adState",state:r.ProtoAdSlotsEnum[t]})}static enforcerAction(t){h.it&&h.ht.push({type:"enforcer",action:t})}static addCustomHistoryLine(t,i){h.it&&h.ht.push(Object.assign({type:t},i))}static addWorkList(t){if(!h.it)return;const i=[...t].map(t=>h.U(t.advertiserLineItemId));h.ht.push({type:"worklist",worklist:i})}static getJsonString(){return h.it?JSON.stringify({clientAdList:h.et,rtbAdList:h.st,headerBidderAdList:h.nt,mappedAdList:h.W,history:h.ht}).substring(0,h.at):""}static playerDestroyed(){this.ot=!0}static isPlayerDestroyed(){return this.ot}}h.it=Date.now()-1581093917537<0,h.at=5e4,h.V=0,h.W={},h.et=[],h.st=[],h.nt=[],h.rt=[],h.ht=[],h.ot=!1},function(t,i,e){"use strict";e.d(i,"b",function(){return n}),e.d(i,"d",function(){return r}),e.d(i,"f",function(){return h}),e.d(i,"c",function(){return a}),e.d(i,"a",function(){return o}),e.d(i,"e",function(){return c});var s=e(2);function n(t,i){i||(i=location.search),t=t.replace(/\[/,"\\[").replace(/]/,"\\]");const e=new RegExp(`[\\?&]${t}=([^&#]*)`,"i").exec(i);return null===e?null:decodeURIComponent(e[1])}function r(t,i){const e=i.split("?");if(e.length>1){const s=encodeURIComponent(t)+"=",n=e[1].split(/[&;]/g);for(let t=n.length;t--;)-1!==n[t].lastIndexOf(s,0)&&n.splice(t,1);i=`${e[0]}?${n.join("&")}`}return i}function h(t,i,e){const s=new RegExp(`([?&])${i}=.*?(&|$)`,"i"),n=-1!==t.indexOf("?")?"&":"?";return t.match(s)?e?t.replace(s,`$1${i}=${e}$2`):t.replace(s,"$1"):`${t}${n}${i}=${e}`}function a(t){return t.indexOf("?")>-1?"&":"?"}function o(t){if(Object(s.h)(t))return t.indexOf("://")>-1?t.split("/")[2]:t.split("/")[0]}function c(t){return t=function(t){const i=/https:\/\/www.google\..*?\/amp\//.exec(t);return null!==i&&0===t.indexOf("https://www.google.")?t.replace(i[0],""):t}(t=function(t){const i=t.indexOf(".cdn.ampproject.org");return i>-1?t.substr(0,i).cnx_replaceAll("-",".")+t.substr(i).replace(".cdn.ampproject.org",""):t}(t))}},function(t,i,e){"use strict";var s=e(17);class n{constructor(t){this.base=t,this.api={pls:t.core+"core/pls",story:t.core+"core/story",rtb:t.core+"rtb/g",vpaid:t.core+"vpaid",syncUrls:t.core+"core/us",fallbackstory:t.core+"core/fallbackstory",cookie:t.core+"core/ck",tam:t.core+"core/atam"},this.tracking={session_rendered:t.tracking+"sr",session_view:t.tracking+"sv",session_time:t.tracking+"st",session_engagement_click:t.tracking+"se",session_client_error:t.tracking+"e",media_quartile:t.tracking+"mq",media_click:t.tracking+"mc",ad_impression:t.tracking+"ai",bids:t.tracking+"abt",ad_impression_viewable:t.tracking+"av",ad_quartile:t.tracking+"aq",ad_click:t.tracking+"ac",contentLoad:t.tracking+"clr",noContent:t.tracking+"nc",eventService:t.tracking+"et",tracking:t.tracking+"tr",vastWin:t.tracking+"vw",rtb:t.tracking+"g",logging:t.tracking+"e",galleryCardClick:t.tracking+"cc",playerStart:t.tracking+"ps",adOpportunity:t.tracking+"ao"},this.assets={css:{elements:`${this.ct(t.assets)}connatix.player.css`,playspace:`${this.ct(t.assets)}connatix.playspace.css`}}}ct(t){return"development"===s.a.env?"//cd.connatix.com/":`${t}p/${s.a.version}/`}}var r=e(14),h=e(8);e.d(i,"a",function(){return a});class a{static lt(){const t=Object(r.b)("cnxEnv",Object(h.f)(window).topFrame.location.href);return t&&(s.a.domainPrefix=`-${t}`),Object.keys(this.ut).forEach(t=>{this.ut[t]=this.ut[t].replace("{{env}}",s.a.domainPrefix)}),new n(a.ut)}static get endPoints(){return null===a.dt&&(a.dt=a.lt()),a.dt}}a.ut={a:"//a{{env}}.connatix.com/",video:"//vid.connatix.com/",image:"//img.connatix.com/",core:"https://capi{{env}}.connatix.com/",tracking:"//capi{{env}}.connatix.com/tr/",metadata:"//vid.connatix.com/",assets:"//cds{{env}}.connatix.com/"},a.dt=null},function(t,i,e){"undefined"!=typeof window&&(t.exports=function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"_",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t._)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(s,n,function(i){return t[i]}.bind(null,n));return s},e.n=function(t){var i=t&&t._?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/dist/",e(e.s=13)}([function(t,i,e){"use strict";e.d(i,"a",function(){return o}),e.d(i,"b",function(){return c});var s=e(5);function n(){}var r={trace:n,debug:n,log:n,warn:n,info:n,error:n},h=r,a=Object(s.a)(),o=function(t){if(a.console&&!0===t||"object"==typeof t){!function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];e.forEach(function(i){h[i]=t[i]?t[i].bind(t):function(t){var i=a.console[t];return i?function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];s[0]&&(s[0]=function(t,i){return i="["+t+"] > "+i}(t,s[0])),i.apply(a.console,s)}:n}(i)})}(t,"debug","log","info","warn","error");try{h.log()}catch(t){h=r}}else h=r},c=h},function(t,i,e){"use strict";i.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},function(t,i,e){"use strict";var s,n;e.d(i,"b",function(){return s}),e.d(i,"a",function(){return n}),function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(s||(s={})),function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException"}(n||(n={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return s});var s=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)}},function(t,i,e){"use strict";e.d(i,"b",function(){return a});var s,n=e(5),r=function(){function t(){}return t.isHeader=function(t,i){return i+10<=t.length&&73===t[i]&&68===t[i+1]&&51===t[i+2]&&t[i+3]<255&&t[i+4]<255&&t[i+6]<128&&t[i+7]<128&&t[i+8]<128&&t[i+9]<128},t.isFooter=function(t,i){return i+10<=t.length&&51===t[i]&&68===t[i+1]&&73===t[i+2]&&t[i+3]<255&&t[i+4]<255&&t[i+6]<128&&t[i+7]<128&&t[i+8]<128&&t[i+9]<128},t.getID3Data=function(i,e){for(var s=e,n=0;t.isHeader(i,e);)n+=10,n+=t.ft(i,e+6),t.isFooter(i,e+10)&&(n+=10),e+=n;if(n>0)return i.subarray(s,s+n)},t.ft=function(t,i){var e=0;return e=(127&t[i])<<21,e|=(127&t[i+1])<<14,e|=(127&t[i+2])<<7,e|=127&t[i+3]},t.getTimeStamp=function(i){for(var e=t.getID3Frames(i),s=0;s<e.length;s++){var n=e[s];if(t.isTimeStampFrame(n))return t.pt(n)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t.bt=function(i){var e=String.fromCharCode(i[0],i[1],i[2],i[3]),s=t.ft(i,4);return{type:e,size:s,data:i.subarray(10,10+s)}},t.getID3Frames=function(i){for(var e=0,s=[];t.isHeader(i,e);){for(var n=t.ft(i,e+6),r=(e+=10)+n;e+8<r;){var h=t.bt(i.subarray(e)),a=t.vt(h);a&&s.push(a),e+=h.size+10}t.isFooter(i,e)&&(e+=10)}return s},t.vt=function(i){return"PRIV"===i.type?t.gt(i):"T"===i.type[0]?t.yt(i):"W"===i.type[0]?t.xt(i):void 0},t.pt=function(t){if(8===t.data.byteLength){var i=new Uint8Array(t.data),e=1&i[3],s=(i[4]<<23)+(i[5]<<15)+(i[6]<<7)+i[7];return s/=45,e&&(s+=47721858.84),Math.round(s)}},t.gt=function(i){if(!(i.size<2)){var e=t.wt(i.data,!0),s=new Uint8Array(i.data.subarray(e.length+1));return{key:i.type,info:e,data:s.buffer}}},t.yt=function(i){if(!(i.size<2)){if("TXXX"===i.type){var e=1,s=t.wt(i.data.subarray(e),!0);e+=s.length+1;var n=t.wt(i.data.subarray(e));return{key:i.type,info:s,data:n}}var r=t.wt(i.data.subarray(1));return{key:i.type,data:r}}},t.xt=function(i){if("WXXX"===i.type){if(i.size<2)return;var e=1,s=t.wt(i.data.subarray(e));e+=s.length+1;var n=t.wt(i.data.subarray(e));return{key:i.type,info:s,data:n}}var r=t.wt(i.data);return{key:i.type,data:r}},t.wt=function(t,i){void 0===i&&(i=!1);var e=h();if(e){var s=e.decode(t);if(i){var n=s.indexOf("\0");return-1!==n?s.substring(0,n):s}return s.replace(/\0/g,"")}for(var r,a,o,c=t.length,l="",u=0;u<c;){if(0===(r=t[u++])&&i)return l;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(r);break;case 12:case 13:a=t[u++],l+=String.fromCharCode((31&r)<<6|63&a);break;case 14:a=t[u++],o=t[u++],l+=String.fromCharCode((15&r)<<12|(63&a)<<6|(63&o)<<0)}}return l},t}();function h(){var t=Object(n.a)();return s||void 0===t.TextDecoder||(s=new t.TextDecoder("utf-8")),s}var a=r.wt;i.a=r},function(t,i,e){"use strict";function s(){return"undefined"==typeof window?self:window.cnxRenderWindow?window.cnxRenderWindow:window}e.d(i,"a",function(){return s})},function(t,i){t.exports=void 0},function(t,i,e){var s,n,r,h,a;s=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,h=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(t,i,e){if(e=e||{},t=t.trim(),!(i=i.trim())){if(!e.alwaysNormalize)return t;var s=a.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");return s.path=a.normalizePath(s.path),a.buildURLFromParts(s)}var r=a.parseURL(i);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return e.alwaysNormalize?(r.path=a.normalizePath(r.path),a.buildURLFromParts(r)):i;var h=a.parseURL(t);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&"/"!==h.path[0]){var o=n.exec(h.path);h.netLoc=o[1],h.path=o[2]}h.netLoc&&!h.path&&(h.path="/");var c={scheme:h.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(c.netLoc=h.netLoc,"/"!==r.path[0]))if(r.path){var l=h.path,u=l.substring(0,l.lastIndexOf("/")+1)+r.path;c.path=a.normalizePath(u)}else c.path=h.path,r.params||(c.params=h.params,r.query||(c.query=h.query));return null===c.path&&(c.path=e.alwaysNormalize?a.normalizePath(r.path):r.path),a.buildURLFromParts(c)},parseURL:function(t){var i=s.exec(t);return i?{scheme:i[1]||"",netLoc:i[2]||"",path:i[3]||"",params:i[4]||"",query:i[5]||"",fragment:i[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(r,"");t.length!==(t=t.replace(h,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=a},function(t,i,e){"use strict";var s=Object.prototype.hasOwnProperty,n="~";function r(){}function h(t,i,e){this.fn=t,this.context=i,this.once=e||!1}function a(t,i,e,s,r){if("function"!=typeof e)throw new TypeError("The listener must be a function");var a=new h(e,s||t,r),o=n?n+i:i;return t.kt[o]?t.kt[o].fn?t.kt[o]=[t.kt[o],a]:t.kt[o].push(a):(t.kt[o]=a,t.St++),t}function o(t,i){0==--t.St?t.kt=new r:delete t.kt[i]}function c(){this.kt=new r,this.St=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),c.prototype.eventNames=function(){var t,i,e=[];if(0===this.St)return e;for(i in t=this.kt)s.call(t,i)&&e.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},c.prototype.listeners=function(t){var i=n?n+t:t,e=this.kt[i];if(!e)return[];if(e.fn)return[e.fn];for(var s=0,r=e.length,h=new Array(r);s<r;s++)h[s]=e[s].fn;return h},c.prototype.listenerCount=function(t){var i=n?n+t:t,e=this.kt[i];return e?e.fn?1:e.length:0},c.prototype.emit=function(t,i,e,s,r,h){var a=n?n+t:t;if(!this.kt[a])return!1;var o,c,l=this.kt[a],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,i),!0;case 3:return l.fn.call(l.context,i,e),!0;case 4:return l.fn.call(l.context,i,e,s),!0;case 5:return l.fn.call(l.context,i,e,s,r),!0;case 6:return l.fn.call(l.context,i,e,s,r,h),!0}for(c=1,o=new Array(u-1);c<u;c++)o[c-1]=arguments[c];l.fn.apply(l.context,o)}else{var d,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),u){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,i);break;case 3:l[c].fn.call(l[c].context,i,e);break;case 4:l[c].fn.call(l[c].context,i,e,s);break;default:if(!o)for(d=1,o=new Array(u-1);d<u;d++)o[d-1]=arguments[d];l[c].fn.apply(l[c].context,o)}}return!0},c.prototype.on=function(t,i,e){return a(this,t,i,e,!1)},c.prototype.once=function(t,i,e){return a(this,t,i,e,!0)},c.prototype.removeListener=function(t,i,e,s){var r=n?n+t:t;if(!this.kt[r])return this;if(!i)return o(this,r),this;var h=this.kt[r];if(h.fn)h.fn!==i||s&&!h.once||e&&h.context!==e||o(this,r);else{for(var a=0,c=[],l=h.length;a<l;a++)(h[a].fn!==i||s&&!h[a].once||e&&h[a].context!==e)&&c.push(h[a]);c.length?this.kt[r]=1===c.length?c[0]:c:o(this,r)}return this},c.prototype.removeAllListeners=function(t){var i;return t?(i=n?n+t:t,this.kt[i]&&o(this,i)):(this.kt=new r,this.St=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c},function(t,i,e){"use strict";var s=e(1),n=e(2),r=function(){function t(t,i){this.subtle=t,this.aesIV=i}return t.prototype.decrypt=function(t,i){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},i,t)},t}(),h=function(){function t(t,i){this.subtle=t,this.key=i}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),a=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var i=t.prototype;return i.uint8ArrayToUint32Array_=function(t){for(var i=new DataView(t),e=new Uint32Array(4),s=0;s<4;s++)e[s]=i.getUint32(4*s);return e},i.initTable=function(){var t=this.sBox,i=this.invSBox,e=this.subMix,s=e[0],n=e[1],r=e[2],h=e[3],a=this.invSubMix,o=a[0],c=a[1],l=a[2],u=a[3],d=new Uint32Array(256),f=0,p=0,b=0;for(b=0;b<256;b++)d[b]=b<128?b<<1:b<<1^283;for(b=0;b<256;b++){var v=p^p<<1^p<<2^p<<3^p<<4;v=v>>>8^255&v^99,t[f]=v,i[v]=f;var g=d[f],m=d[g],y=d[m],x=257*d[v]^16843008*v;s[f]=x<<24|x>>>8,n[f]=x<<16|x>>>16,r[f]=x<<8|x>>>24,h[f]=x,x=16843009*y^65537*m^257*g^16843008*f,o[v]=x<<24|x>>>8,c[v]=x<<16|x>>>16,l[v]=x<<8|x>>>24,u[v]=x,f?(f=g^d[d[d[y^g]]],p^=d[d[p]]):f=p=1}},i.expandKey=function(t){for(var i=this.uint8ArrayToUint32Array_(t),e=!0,s=0;s<i.length&&e;)e=i[s]===this.key[s],s++;if(!e){this.key=i;var n=this.keySize=i.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);var r,h,a,o,c=this.ksRows=4*(n+6+1),l=this.keySchedule=new Uint32Array(c),u=this.invKeySchedule=new Uint32Array(c),d=this.sBox,f=this.rcon,p=this.invSubMix,b=p[0],v=p[1],g=p[2],m=p[3];for(r=0;r<c;r++)r<n?a=l[r]=i[r]:(o=a,r%n==0?(o=d[(o=o<<8|o>>>24)>>>24]<<24|d[o>>>16&255]<<16|d[o>>>8&255]<<8|d[255&o],o^=f[r/n|0]<<24):n>6&&r%n==4&&(o=d[o>>>24]<<24|d[o>>>16&255]<<16|d[o>>>8&255]<<8|d[255&o]),l[r]=a=(l[r-n]^o)>>>0);for(h=0;h<c;h++)r=c-h,o=3&h?l[r]:l[r-4],u[h]=h<4||r<=4?o:b[d[o>>>24]]^v[d[o>>>16&255]]^g[d[o>>>8&255]]^m[d[255&o]],u[h]=u[h]>>>0}},i.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},i.decrypt=function(t,i,e,s){for(var n,r,h,a,o,c,l,u,d,f,p,b,v,g,m,y,x,w=this.keySize+6,k=this.invKeySchedule,S=this.invSBox,O=this.invSubMix,_=O[0],j=O[1],A=O[2],T=O[3],C=this.uint8ArrayToUint32Array_(e),I=C[0],P=C[1],M=C[2],E=C[3],L=new Int32Array(t),R=new Int32Array(L.length),D=this.networkToHostOrderSwap;i<L.length;){for(d=D(L[i]),f=D(L[i+1]),p=D(L[i+2]),b=D(L[i+3]),o=d^k[0],c=b^k[1],l=p^k[2],u=f^k[3],v=4,g=1;g<w;g++)n=_[o>>>24]^j[c>>16&255]^A[l>>8&255]^T[255&u]^k[v],r=_[c>>>24]^j[l>>16&255]^A[u>>8&255]^T[255&o]^k[v+1],h=_[l>>>24]^j[u>>16&255]^A[o>>8&255]^T[255&c]^k[v+2],a=_[u>>>24]^j[o>>16&255]^A[c>>8&255]^T[255&l]^k[v+3],o=n,c=r,l=h,u=a,v+=4;n=S[o>>>24]<<24^S[c>>16&255]<<16^S[l>>8&255]<<8^S[255&u]^k[v],r=S[c>>>24]<<24^S[l>>16&255]<<16^S[u>>8&255]<<8^S[255&o]^k[v+1],h=S[l>>>24]<<24^S[u>>16&255]<<16^S[o>>8&255]<<8^S[255&c]^k[v+2],a=S[u>>>24]<<24^S[o>>16&255]<<16^S[c>>8&255]<<8^S[255&l]^k[v+3],v+=3,R[i]=D(n^I),R[i+1]=D(a^P),R[i+2]=D(h^M),R[i+3]=D(r^E),I=d,P=f,M=p,E=b,i+=4}return s?(m=R.buffer,y=m.byteLength,(x=y&&new DataView(m).getUint8(y-1))?m.slice(0,y-x):m):R.buffer},i.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),o=e(0),c=e(5),l=function(){function t(t,i,e){var s=(void 0===e?{}:e).removePKCS7Padding,n=void 0===s||s;if(this.logEnabled=!0,this.observer=t,this.config=i,this.removePKCS7Padding=n,n)try{var r=Object(c.a)().crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch(t){}this.disableWebCrypto=!this.subtle}var i=t.prototype;return i.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},i.decrypt=function(t,i,e,s){var n=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(o.b.log("JS AES decrypt"),this.logEnabled=!1);var c=this.decryptor;c||(this.decryptor=c=new a),c.expandKey(i),s(c.decrypt(t,0,e,this.removePKCS7Padding))}else{this.logEnabled&&(o.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var l=this.subtle;this.key!==i&&(this.key=i,this.fastAesKey=new h(l,i)),this.fastAesKey.expandKey().then(function(h){new r(l,e).decrypt(t,h).catch(function(r){n.onWebCryptoError(r,t,i,e,s)}).then(function(t){s(t)})}).catch(function(r){n.onWebCryptoError(r,t,i,e,s)})}},i.onWebCryptoError=function(t,i,e,r,h){this.config.enableSoftwareAES?(o.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(i,e,r,h)):(o.b.error("decrypting error : "+t.message),this.observer.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},i.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}(),u=e(3);function d(t,i){return 255===t[i]&&240==(246&t[i+1])}function f(t,i){return 1&t[i+1]?7:9}function p(t,i){return(3&t[i+3])<<11|t[i+4]<<3|(224&t[i+5])>>>5}function b(t,i){return!!(i+1<t.length&&d(t,i))}function v(t,i){if(b(t,i)){var e=f(t,i);i+5<t.length&&(e=p(t,i));var s=i+e;if(s===t.length||s+1<t.length&&d(t,s))return!0}return!1}function g(t,i,e,r,h){if(!t.samplerate){var a=function(t,i,e,r){var h,a,c,l,u,d=navigator.userAgent.toLowerCase(),f=r,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(h=1+((192&i[e+2])>>>6),!((a=(60&i[e+2])>>>2)>p.length-1))return l=(1&i[e+2])<<2,l|=(192&i[e+3])>>>6,o.b.log("manifest codec:"+r+",ADTS data:type:"+h+",sampleingIndex:"+a+"["+p[a]+"Hz],channelConfig:"+l),/firefox/i.test(d)?a>=6?(h=5,u=new Array(4),c=a-3):(h=2,u=new Array(2),c=a):-1!==d.indexOf("android")?(h=2,u=new Array(2),c=a):(h=5,u=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&a>=6?c=a-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(a>=6&&1===l||/vivaldi/i.test(d))||!r&&1===l)&&(h=2,u=new Array(2)),c=a)),u[0]=h<<3,u[0]|=(14&a)>>1,u[1]|=(1&a)<<7,u[1]|=l<<3,5===h&&(u[1]|=(14&c)>>1,u[2]=(1&c)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:p[a],channelCount:l,codec:"mp4a.40."+h,manifestCodec:f};t.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+a})}(i,e,r,h);t.config=a.config,t.samplerate=a.samplerate,t.channelCount=a.channelCount,t.codec=a.codec,t.manifestCodec=a.manifestCodec,o.b.log("parsed codec:"+t.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}}function m(t){return 9216e4/t}function y(t,i,e,s,n){var r=function(t,i,e,s,n){var r,h,a=t.length;if(r=f(t,i),h=p(t,i),(h-=r)>0&&i+r+h<=a)return{headerLength:r,frameLength:h,stamp:e+s*n}}(i,e,s,n,m(t.samplerate));if(r){var h=r.stamp,a=r.headerLength,o=r.frameLength,c={unit:i.subarray(e+a,e+a+o),pts:h,dts:h};return t.samples.push(c),{sample:c,length:o+a}}}var x=e(4),w=function(){function t(t,i,e){this.observer=t,this.config=e,this.remuxer=i}var i=t.prototype;return i.resetInitSegment=function(t,i,e,s){this.Ot={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:i,duration:s,inputTimeScale:9e4}},i.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var i=(x.a.getID3Data(t,0)||[]).length,e=t.length;i<e;i++)if(v(t,i))return o.b.log("ADTS sync word found !"),!0;return!1},i.append=function(t,i,e,s){for(var n=this.Ot,r=x.a.getID3Data(t,0)||[],h=x.a.getTimeStamp(r),a=Object(u.a)(h)?90*h:9e4*i,c=0,l=a,d=t.length,f=r.length,p=[{pts:l,dts:l,data:r}];f<d-1;)if(b(t,f)&&f+5<d){g(n,this.observer,t,f,n.manifestCodec);var v=y(n,t,f,a,c);if(!v){o.b.log("Unable to parse AAC frame");break}f+=v.length,l=v.sample.pts,c++}else x.a.isHeader(t,f)?(r=x.a.getID3Data(t,f),p.push({pts:l,dts:l,data:r}),f+=r.length):f++;this.remuxer.remux(n,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},i,e,s)},i.destroy=function(){},t}(),k=e(10),S={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,i,e,s,n){if(!(e+24>i.length)){var r=this.parseHeader(i,e);if(r&&e+r.frameLength<=i.length){var h=s+n*(9e4*r.samplesPerFrame/r.sampleRate),a={unit:i.subarray(e,e+r.frameLength),pts:h,dts:h};return t.config=[],t.channelCount=r.channelCount,t.samplerate=r.sampleRate,t.samples.push(a),{sample:a,length:r.frameLength}}}},parseHeader:function(t,i){var e=t[i+1]>>3&3,s=t[i+1]>>1&3,n=t[i+2]>>4&15,r=t[i+2]>>2&3,h=t[i+2]>>1&1;if(1!==e&&0!==n&&15!==n&&3!==r){var a=3===e?3-s:3===s?3:4,o=1e3*S.BitratesMap[14*a+n-1],c=3===e?0:2===e?1:2,l=S.SamplingRateMap[3*c+r],u=t[i+3]>>6==3?1:2,d=S.SamplesCoefficients[e][s],f=S.BytesInSlot[s],p=8*d*f;return{sampleRate:l,channelCount:u,frameLength:parseInt(d*o/l+h,10)*f,samplesPerFrame:p}}},isHeaderPattern:function(t,i){return 255===t[i]&&224==(224&t[i+1])&&0!=(6&t[i+1])},isHeader:function(t,i){return!!(i+1<t.length&&this.isHeaderPattern(t,i))},probe:function(t,i){if(i+1<t.length&&this.isHeaderPattern(t,i)){var e=this.parseHeader(t,i),s=4;e&&e.frameLength&&(s=e.frameLength);var n=i+s;if(n===t.length||n+1<t.length&&this.isHeaderPattern(t,n))return!0}return!1}},O=S,_=function(){function t(t){this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var i=t.prototype;return i.loadWord=function(){var t=this.data,i=this.bytesAvailable,e=t.byteLength-i,s=new Uint8Array(4),n=Math.min(4,i);if(0===n)throw new Error("no bytes available");s.set(t.subarray(e,e+n)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n},i.skipBits=function(t){var i;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(i=t>>3)>>3,this.bytesAvailable-=i,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},i.readBits=function(t){var i=Math.min(this.bitsAvailable,t),e=this.word>>>32-i;return t>32&&o.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=i,this.bitsAvailable>0?this.word<<=i:this.bytesAvailable>0&&this.loadWord(),(i=t-i)>0&&this.bitsAvailable?e<<i|this.readBits(i):e},i.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},i.skipUEG=function(){this.skipBits(1+this.skipLZ())},i.skipEG=function(){this.skipBits(1+this.skipLZ())},i.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},i.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},i.readBoolean=function(){return 1===this.readBits(1)},i.readUByte=function(){return this.readBits(8)},i.readUShort=function(){return this.readBits(16)},i.readUInt=function(){return this.readBits(32)},i.skipScalingList=function(t){var i,e=8,s=8;for(i=0;i<t;i++)0!==s&&(s=(e+this.readEG()+256)%256),e=0===s?e:s},i.readSPS=function(){var t,i,e,s,n,r,h,a=0,o=0,c=0,l=0,u=this.readUByte.bind(this),d=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),b=this.skipBits.bind(this),v=this.skipEG.bind(this),g=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(u(),t=u(),d(5),b(3),u(),g(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var y=f();if(3===y&&b(1),g(),g(),b(1),p())for(r=3!==y?8:12,h=0;h<r;h++)p()&&m(h<6?16:64)}g();var x=f();if(0===x)f();else if(1===x)for(b(1),v(),v(),i=f(),h=0;h<i;h++)v();g(),b(1),e=f(),s=f(),0===(n=d(1))&&b(1),b(1),p()&&(a=f(),o=f(),c=f(),l=f());var w=[1,1];if(p()&&p())switch(u()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[u()<<8|u(),u()<<8|u()]}return{width:Math.ceil(16*(e+1)-2*a-2*o),height:(2-n)*(s+1)*16-(n?2:4)*(c+l),pixelRatio:w}},i.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),j=function(){function t(t,i,e,s){this.decryptdata=e,this.discardEPB=s,this.decrypter=new l(t,i,{removePKCS7Padding:!1})}var i=t.prototype;return i.decryptBuffer=function(t,i){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,i)},i.decryptAacSample=function(t,i,e,s){var n=t[i].unit,r=n.subarray(16,n.length-n.length%16),h=r.buffer.slice(r.byteOffset,r.byteOffset+r.length),a=this;this.decryptBuffer(h,function(r){r=new Uint8Array(r),n.set(r,16),s||a.decryptAacSamples(t,i+1,e)})},i.decryptAacSamples=function(t,i,e){for(;;i++){if(i>=t.length)return void e();if(!(t[i].unit.length<32)){var s=this.decrypter.isSync();if(this.decryptAacSample(t,i,e,s),!s)return}}},i.getAvcEncryptedData=function(t){for(var i=16*Math.floor((t.length-48)/160)+16,e=new Int8Array(i),s=0,n=32;n<=t.length-16;n+=160,s+=16)e.set(t.subarray(n,n+16),s);return e},i.getAvcDecryptedUnit=function(t,i){i=new Uint8Array(i);for(var e=0,s=32;s<=t.length-16;s+=160,e+=16)t.set(i.subarray(e,e+16),s);return t},i.decryptAvcSample=function(t,i,e,s,n,r){var h=this.discardEPB(n.data),a=this.getAvcEncryptedData(h),o=this;this.decryptBuffer(a.buffer,function(a){n.data=o.getAvcDecryptedUnit(h,a),r||o.decryptAvcSamples(t,i,e+1,s)})},i.decryptAvcSamples=function(t,i,e,s){for(;;i++,e=0){if(i>=t.length)return void s();for(var n=t[i].units;!(e>=n.length);e++){var r=n[e];if(!(r.length<=48||1!==r.type&&5!==r.type)){var h=this.decrypter.isSync();if(this.decryptAvcSample(t,i,e,s,r,h),!h)return}}}},t}(),A={video:1,audio:2,id3:3,text:4},T=function(){function t(t,i,e,s){this.observer=t,this.config=e,this.typeSupported=s,this.remuxer=i,this.sampleAes=null}var i=t.prototype;return i.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new j(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(i){var e=t._t(i);return!(e<0||(e&&o.b.warn("MPEG2-TS detected but first sync word found @ offset "+e+", junk ahead ?"),0))},t._t=function(t){for(var i=Math.min(1e3,t.length-564),e=0;e<i;){if(71===t[e]&&71===t[e+188]&&71===t[e+376])return e;e++}return-1},t.createTrack=function(t,i){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:A[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?i:void 0}},i.resetInitSegment=function(i,e,s,n){this.pmtParsed=!1,this.jt=-1,this.At=t.createTrack("video",n),this.Ot=t.createTrack("audio",n),this.Tt=t.createTrack("id3",n),this.Ct=t.createTrack("text",n),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=s,this.It=n},i.resetTimeStamp=function(){},i.append=function(i,e,r,h){var a,c,l,u,d,f=i.length,p=!1;this.contiguous=r;var b=this.pmtParsed,v=this.At,g=this.Ot,m=this.Tt,y=v.pid,x=g.pid,w=m.pid,k=this.jt,S=v.pesData,O=g.pesData,_=m.pesData,j=this.Pt,A=this.Mt,T=this.Et,C=this.Lt.bind(this),I=this.Rt.bind(this),P=this.Dt.bind(this),M=this.Bt.bind(this),E=t._t(i);for(f-=(f+E)%188,a=E;a<f;a+=188)if(71===i[a]){if(c=!!(64&i[a+1]),l=((31&i[a+1])<<8)+i[a+2],(48&i[a+3])>>4>1){if((u=a+5+i[a+4])===a+188)continue}else u=a+4;switch(l){case y:c&&(S&&(d=T(S))&&C(d,!1),S={data:[],size:0}),S&&(S.data.push(i.subarray(u,a+188)),S.size+=a+188-u);break;case x:c&&(O&&(d=T(O))&&(g.isAAC?I(d):P(d)),O={data:[],size:0}),O&&(O.data.push(i.subarray(u,a+188)),O.size+=a+188-u);break;case w:c&&(_&&(d=T(_))&&M(d),_={data:[],size:0}),_&&(_.data.push(i.subarray(u,a+188)),_.size+=a+188-u);break;case 0:c&&(u+=i[u]+1),k=this.jt=j(i,u);break;case k:c&&(u+=i[u]+1);var L=A(i,u,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(y=L.avc)>0&&(v.pid=y),(x=L.audio)>0&&(g.pid=x,g.isAAC=L.isAAC),(w=L.id3)>0&&(m.pid=w),p&&!b&&(o.b.log("reparse from beginning"),p=!1,a=E-188),b=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});S&&(d=T(S))?(C(d,!0),v.pesData=null):v.pesData=S,O&&(d=T(O))?(g.isAAC?I(d):P(d),g.pesData=null):(O&&O.size&&o.b.log("last AAC PES packet truncated,might overlap between fragments"),g.pesData=O),_&&(d=T(_))?(M(d),m.pesData=null):m.pesData=_,null==this.sampleAes?this.remuxer.remux(g,v,m,this.Ct,e,r,h):this.decryptAndRemux(g,v,m,this.Ct,e,r,h)},i.decryptAndRemux=function(t,i,e,s,n,r,h){if(t.samples&&t.isAAC){var a=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){a.decryptAndRemuxAvc(t,i,e,s,n,r,h)})}else this.decryptAndRemuxAvc(t,i,e,s,n,r,h)},i.decryptAndRemuxAvc=function(t,i,e,s,n,r,h){if(i.samples){var a=this;this.sampleAes.decryptAvcSamples(i.samples,0,0,function(){a.remuxer.remux(t,i,e,s,n,r,h)})}else this.remuxer.remux(t,i,e,s,n,r,h)},i.destroy=function(){this.$t=this.Ft=void 0,this.It=0},i.Pt=function(t,i){return(31&t[i+10])<<8|t[i+11]},i.Mt=function(t,i,e,s){var n,r,h={audio:-1,avc:-1,id3:-1,isAAC:!0};for(n=i+3+((15&t[i+1])<<8|t[i+2])-4,i+=12+((15&t[i+10])<<8|t[i+11]);i<n;){switch(r=(31&t[i+1])<<8|t[i+2],t[i]){case 207:if(!s){o.b.log("unknown stream type:"+t[i]);break}case 15:-1===h.audio&&(h.audio=r);break;case 21:-1===h.id3&&(h.id3=r);break;case 219:if(!s){o.b.log("unknown stream type:"+t[i]);break}case 27:-1===h.avc&&(h.avc=r);break;case 3:case 4:e?-1===h.audio&&(h.audio=r,h.isAAC=!1):o.b.log("MPEG audio found, not supported in this browser for now");break;case 36:o.b.warn("HEVC stream type found, not supported for now");break;default:o.b.log("unknown stream type:"+t[i])}i+=5+((15&t[i+3])<<8|t[i+4])}return h},i.Et=function(t){var i,e,s,n,r,h,a,c,l=0,u=t.data;if(!t||0===t.size)return null;for(;u[0].length<19&&u.length>1;){var d=new Uint8Array(u[0].length+u[1].length);d.set(u[0]),d.set(u[1],u[0].length),u[0]=d,u.splice(1,1)}if(1===((i=u[0])[0]<<16)+(i[1]<<8)+i[2]){if((s=(i[4]<<8)+i[5])&&s>t.size-6)return null;if(192&(e=i[7])&&((h=536870912*(14&i[9])+4194304*(255&i[10])+16384*(254&i[11])+128*(255&i[12])+(254&i[13])/2)>4294967295&&(h-=8589934592),64&e?((a=536870912*(14&i[14])+4194304*(255&i[15])+16384*(254&i[16])+128*(255&i[17])+(254&i[18])/2)>4294967295&&(a-=8589934592),h-a>54e5&&(o.b.warn(Math.round((h-a)/9e4)+"s delta between PTS and DTS, align them"),h=a)):a=h),c=(n=i[8])+9,t.size<=c)return null;t.size-=c,r=new Uint8Array(t.size);for(var f=0,p=u.length;f<p;f++){var b=(i=u[f]).byteLength;if(c){if(c>b){c-=b;continue}i=i.subarray(c),b-=c,c=0}r.set(i,l),l+=b}return s&&(s-=n+3),{data:r,pts:h,dts:a,len:s}}return null},i.pushAccesUnit=function(t,i){if(t.units.length&&t.frame){var e=i.samples,s=e.length;if(isNaN(t.pts)){if(!s)return void i.dropped++;var n=e[s-1];t.pts=n.pts,t.dts=n.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||i.sps&&(s||this.contiguous)?(t.id=s,e.push(t)):i.dropped++}t.debug.length&&o.b.log(t.pts+"/"+t.dts+":"+t.debug)},i.Lt=function(t,i){var e,s,n,r=this,h=this.At,a=this.Vt(t.data),o=this.avcSample,c=!1,l=this.pushAccesUnit.bind(this),u=function(t,i,e,s){return{key:t,pts:i,dts:e,units:[],debug:s}};t.data=null,o&&a.length&&!h.audFound&&(l(o,h),o=this.avcSample=u(!1,t.pts,t.dts,"")),a.forEach(function(i){switch(i.type){case 1:s=!0,o||(o=r.avcSample=u(!0,t.pts,t.dts,"")),o.frame=!0;var a=i.data;if(c&&a.length>4){var d=new _(a).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(o.key=!0)}break;case 5:s=!0,o||(o=r.avcSample=u(!0,t.pts,t.dts,"")),o.key=!0,o.frame=!0;break;case 6:s=!0,(e=new _(r.discardEPB(i.data))).readUByte();for(var f=0,p=0,b=!1,v=0;!b&&e.bytesAvailable>1;){f=0;do{f+=v=e.readUByte()}while(255===v);p=0;do{p+=v=e.readUByte()}while(255===v);if(4===f&&0!==e.bytesAvailable){if(b=!0,181===e.readUByte()&&49===e.readUShort()&&1195456820===e.readUInt()&&3===e.readUByte()){var g=e.readUByte(),m=31&g,y=[g,e.readUByte()];for(n=0;n<m;n++)y.push(e.readUByte()),y.push(e.readUByte()),y.push(e.readUByte());r.Ut(r.Ct.samples,{type:3,pts:t.pts,bytes:y})}}else if(5===f&&0!==e.bytesAvailable){if(b=!0,p>16){var w=[];for(n=0;n<16;n++)w.push(e.readUByte().toString(16)),3!==n&&5!==n&&7!==n&&9!==n||w.push("-");var k=p-16,S=new Uint8Array(k);for(n=0;n<k;n++)S[n]=e.readUByte();r.Ut(r.Ct.samples,{pts:t.pts,payloadType:f,uuid:w.join(""),userDataBytes:S,userData:Object(x.b)(S.buffer)})}}else if(p<e.bytesAvailable)for(n=0;n<p;n++)e.readUByte()}break;case 7:if(s=!0,c=!0,!h.sps){var O=(e=new _(i.data)).readSPS();h.width=O.width,h.height=O.height,h.pixelRatio=O.pixelRatio,h.sps=[i.data],h.duration=r.It;var j=i.data.subarray(1,4),A="avc1.";for(n=0;n<3;n++){var T=j[n].toString(16);T.length<2&&(T="0"+T),A+=T}h.codec=A}break;case 8:s=!0,h.pps||(h.pps=[i.data]);break;case 9:s=!1,h.audFound=!0,o&&l(o,h),o=r.avcSample=u(!1,t.pts,t.dts,"");break;case 12:s=!1;break;default:s=!1,o&&(o.debug+="unknown NAL "+i.type+" ")}o&&s&&o.units.push(i)}),i&&o&&(l(o,h),this.avcSample=null)},i.Ut=function(t,i){var e=t.length;if(e>0){if(i.pts>=t[e-1].pts)t.push(i);else for(var s=e-1;s>=0;s--)if(i.pts<t[s].pts){t.splice(s,0,i);break}}else t.push(i)},i.Nt=function(){var t,i=this.avcSample;if(!i||0===i.units.length){var e=this.At.samples;i=e[e.length-1]}if(i){var s=i.units;t=s[s.length-1]}return t},i.Vt=function(t){var i,e,s,n,r=0,h=t.byteLength,a=this.At,o=a.naluState||0,c=o,l=[],u=-1;for(-1===o&&(u=0,n=31&t[0],o=0,r=1);r<h;)if(i=t[r++],o)if(1!==o)if(i)if(1===i){if(u>=0)s={data:t.subarray(u,r-o-1),type:n},l.push(s);else{var d=this.Nt();if(d&&(c&&r<=4-c&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-c)),(e=r-o-1)>0)){var f=new Uint8Array(d.data.byteLength+e);f.set(d.data,0),f.set(t.subarray(0,e),d.data.byteLength),d.data=f}}r<h?(u=r,n=31&t[r],o=0):o=-1}else o=0;else o=3;else o=i?0:2;else o=i?0:1;if(u>=0&&o>=0&&(s={data:t.subarray(u,h),type:n,state:o},l.push(s)),0===l.length){var p=this.Nt();if(p){var b=new Uint8Array(p.data.byteLength+t.byteLength);b.set(p.data,0),b.set(t,p.data.byteLength),p.data=b}}return a.naluState=o,l},i.discardEPB=function(t){for(var i,e,s=t.byteLength,n=[],r=1;r<s-2;)0===t[r]&&0===t[r+1]&&3===t[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return t;i=s-n.length,e=new Uint8Array(i);var h=0;for(r=0;r<i;h++,r++)h===n[0]&&(h++,n.shift()),e[r]=t[h];return e},i.Rt=function(t){var i,e,r,h,a,c,l,u=this.Ot,d=t.data,f=t.pts,p=this.aacOverFlow,v=this.aacLastPTS;if(p){var x=new Uint8Array(p.byteLength+d.byteLength);x.set(p,0),x.set(d,p.byteLength),d=x}for(r=0,a=d.length;r<a-1&&!b(d,r);r++);if(!r||(r<a-1?(c="AAC PES did not start with ADTS header,offset:"+r,l=!1):(c="no ADTS header found in AAC PES",l=!0),o.b.warn("parsing error:"+c),this.observer.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:l,reason:c}),!l)){if(g(u,this.observer,d,r,this.audioCodec),e=0,i=m(u.samplerate),p&&v){var w=v+i;Math.abs(w-f)>1&&(o.b.log("AAC: align PTS for overlapping frames by "+Math.round((w-f)/90)),f=w)}for(;r<a;){if(b(d,r)){if(r+5<a){var k=y(u,d,r,f,e);if(k){r+=k.length,h=k.sample.pts,e++;continue}}break}r++}p=r<a?d.subarray(r,a):null,this.aacOverFlow=p,this.aacLastPTS=h}},i.Dt=function(t){for(var i=t.data,e=i.length,s=0,n=0,r=t.pts;n<e;)if(O.isHeader(i,n)){var h=O.appendFrame(this.Ot,i,n,r,s);if(!h)break;n+=h.length,s++}else n++},i.Bt=function(t){this.Tt.samples.push(t)},t}(),C=function(){function t(t,i,e){this.observer=t,this.config=e,this.remuxer=i}var i=t.prototype;return i.resetInitSegment=function(t,i,e,s){this.Ot={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:i,duration:s,inputTimeScale:9e4}},i.resetTimeStamp=function(){},t.probe=function(t){var i,e,s=x.a.getID3Data(t,0);if(s&&void 0!==x.a.getTimeStamp(s))for(i=s.length,e=Math.min(t.length-1,i+100);i<e;i++)if(O.probe(t,i))return o.b.log("MPEG Audio sync word found !"),!0;return!1},i.append=function(t,i,e,s){for(var n=x.a.getID3Data(t,0),r=x.a.getTimeStamp(n),h=r?90*r:9e4*i,a=n.length,o=t.length,c=0,l=0,u=this.Ot,d=[{pts:h,dts:h,data:n}];a<o;)if(O.isHeader(t,a)){var f=O.appendFrame(u,t,a,h,c);if(!f)break;a+=f.length,l=f.sample.pts,c++}else x.a.isHeader(t,a)?(n=x.a.getID3Data(t,a),d.push({pts:l,dts:l,data:n}),a+=n.length):a++;this.remuxer.remux(u,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},i,e,s)},i.destroy=function(){},t}(),I=function(){function t(){}return t.getSilentFrame=function(t,i){switch(t){case"mp4a.40.2":if(1===i)return new Uint8Array([0,200,0,128,35,128]);if(2===i)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===i)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===i)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===i)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),P=Math.pow(2,32)-1,M=function(){function t(){}return t.init=function(){var i;for(i in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(i)&&(t.types[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)]);var e=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),s=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:e,audio:s};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=r,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var h=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,h,o,h,a),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,n))},t.box=function(t){for(var i,e=Array.prototype.slice.call(arguments,1),s=8,n=e.length,r=n;n--;)s+=e[n].byteLength;for((i=new Uint8Array(s))[0]=s>>24&255,i[1]=s>>16&255,i[2]=s>>8&255,i[3]=255&s,i.set(t,4),n=0,s=8;n<r;n++)i.set(e[n],s),s+=e[n].byteLength;return i},t.hdlr=function(i){return t.box(t.types.hdlr,t.HDLR_TYPES[i])},t.mdat=function(i){return t.box(t.types.mdat,i)},t.mdhd=function(i,e){e*=i;var s=Math.floor(e/(P+1)),n=Math.floor(e%(P+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},t.mdia=function(i){return t.box(t.types.mdia,t.mdhd(i.timescale,i.duration),t.hdlr(i.type),t.minf(i))},t.mfhd=function(i){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i]))},t.minf=function(i){return"audio"===i.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(i)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(i))},t.moof=function(i,e,s){return t.box(t.types.moof,t.mfhd(i),t.traf(s,e))},t.moov=function(i){for(var e=i.length,s=[];e--;)s[e]=t.trak(i[e]);return t.box.apply(null,[t.types.moov,t.mvhd(i[0].timescale,i[0].duration)].concat(s).concat(t.mvex(i)))},t.mvex=function(i){for(var e=i.length,s=[];e--;)s[e]=t.trex(i[e]);return t.box.apply(null,[t.types.mvex].concat(s))},t.mvhd=function(i,e){e*=i;var s=Math.floor(e/(P+1)),n=Math.floor(e%(P+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,r)},t.sdtp=function(i){var e,s,n=i.samples||[],r=new Uint8Array(4+n.length);for(s=0;s<n.length;s++)e=n[s].flags,r[s+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return t.box(t.types.sdtp,r)},t.stbl=function(i){return t.box(t.types.stbl,t.stsd(i),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(i){var e,s,n,r=[],h=[];for(e=0;e<i.sps.length;e++)n=(s=i.sps[e]).byteLength,r.push(n>>>8&255),r.push(255&n),r=r.concat(Array.prototype.slice.call(s));for(e=0;e<i.pps.length;e++)n=(s=i.pps[e]).byteLength,h.push(n>>>8&255),h.push(255&n),h=h.concat(Array.prototype.slice.call(s));var a=t.box(t.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|i.sps.length].concat(r).concat([i.pps.length]).concat(h))),o=i.width,c=i.height,l=i.pixelRatio[0],u=i.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([l>>24,l>>16&255,l>>8&255,255&l,u>>24,u>>16&255,u>>8&255,255&u])))},t.esds=function(t){var i=t.config.length;return new Uint8Array([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([i]).concat(t.config).concat([6,1,2]))},t.mp4a=function(i){var e=i.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]),t.box(t.types.esds,t.esds(i)))},t.mp3=function(i){var e=i.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]))},t.stsd=function(i){return"audio"===i.type?i.isAAC||"mp3"!==i.codec?t.box(t.types.stsd,t.STSD,t.mp4a(i)):t.box(t.types.stsd,t.STSD,t.mp3(i)):t.box(t.types.stsd,t.STSD,t.avc1(i))},t.tkhd=function(i){var e=i.id,s=i.duration*i.timescale,n=i.width,r=i.height,h=Math.floor(s/(P+1)),a=Math.floor(s%(P+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,0,0,0,0,h>>24,h>>16&255,h>>8&255,255&h,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,r>>8&255,255&r,0,0]))},t.traf=function(i,e){var s=t.sdtp(i),n=i.id,r=Math.floor(e/(P+1)),h=Math.floor(e%(P+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,h>>24,h>>16&255,h>>8&255,255&h])),t.trun(i,s.length+16+20+8+16+8+8),s)},t.trak=function(i){return i.duration=i.duration||4294967295,t.box(t.types.trak,t.tkhd(i),t.mdia(i))},t.trex=function(i){var e=i.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(i,e){var s,n,r,h,a,o,c=i.samples||[],l=c.length,u=12+16*l,d=new Uint8Array(u);for(e+=8+u,d.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,e>>>24&255,e>>>16&255,e>>>8&255,255&e],0),s=0;s<l;s++)r=(n=c[s]).duration,h=n.size,a=n.flags,o=n.cts,d.set([r>>>24&255,r>>>16&255,r>>>8&255,255&r,h>>>24&255,h>>>16&255,h>>>8&255,255&h,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.paddingValue<<1|a.isNonSync,61440&a.degradPrio,15&a.degradPrio,o>>>24&255,o>>>16&255,o>>>8&255,255&o],12+16*s);return t.box(t.types.trun,d)},t.initSegment=function(i){t.types||t.init();var e,s=t.moov(i);return(e=new Uint8Array(t.FTYP.byteLength+s.byteLength)).set(t.FTYP),e.set(s,t.FTYP.byteLength),e},t}();function E(t,i,e,s){void 0===e&&(e=1),void 0===s&&(s=!1);var n=t*i*e;return s?Math.round(n):n}function L(t,i){return void 0===i&&(i=!1),E(t,1e3,1/9e4,i)}function R(t,i){return void 0===i&&(i=1),E(t,9e4,1/i)}var D,B=R(10),$=R(.2),F=function(){function t(t,i,e,s){this.observer=t,this.config=i,this.typeSupported=e;var n=navigator.userAgent;this.isSafari=s&&s.indexOf("Apple")>-1&&n&&!n.match("CriOS"),this.ISGenerated=!1}var i=t.prototype;return i.destroy=function(){},i.resetTimeStamp=function(t){this.$t=this.Ft=t},i.resetInitSegment=function(){this.ISGenerated=!1},i.remux=function(t,i,e,n,r,h,a){if(this.ISGenerated||this.generateIS(t,i,r),this.ISGenerated){var c=t.samples.length,l=i.samples.length,u=r,d=r;if(c&&l){var f=(t.samples[0].pts-i.samples[0].pts)/i.inputTimeScale;u+=Math.max(0,f),d+=Math.max(0,-f)}if(c){t.timescale||(o.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,i,r));var p,b=this.remuxAudio(t,u,h,a);l&&(b&&(p=b.endPTS-b.startPTS),i.timescale||(o.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,i,r)),this.remuxVideo(i,d,h,p,a))}else if(l){var v=this.remuxVideo(i,d,h,0,a);v&&t.codec&&this.remuxEmptyAudio(t,u,h,v)}}e.samples.length&&this.remuxID3(e,r),n.samples.length&&this.remuxText(n,r),this.observer.trigger(s.a.FRAG_PARSED)},i.generateIS=function(t,i,e){var r,h,a=this.observer,c=t.samples,l=i.samples,u=this.typeSupported,d="audio/mp4",f={},p={tracks:f},b=void 0===this.$t;if(b&&(r=h=1/0),t.config&&c.length&&(t.timescale=t.samplerate,o.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(u.mpeg?(d="audio/mpeg",t.codec=""):u.mp3&&(t.codec="mp3")),f.audio={container:d,codec:t.codec,initSegment:!t.isAAC&&u.mpeg?new Uint8Array:M.initSegment([t]),metadata:{channelCount:t.channelCount}},b&&(r=h=c[0].pts-t.inputTimeScale*e)),i.sps&&i.pps&&l.length){var v=i.inputTimeScale;i.timescale=v,f.video={container:"video/mp4",codec:i.codec,initSegment:M.initSegment([i]),metadata:{width:i.width,height:i.height}},b&&(r=Math.min(r,l[0].pts-v*e),h=Math.min(h,l[0].dts-v*e),this.observer.trigger(s.a.INIT_PTS_FOUND,{initPTS:r}))}Object.keys(f).length?(a.trigger(s.a.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,b&&(this.$t=r,this.Ft=h)):a.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},i.remuxVideo=function(t,i,e,r,h){var a,c,l,u,d,f,p,b=8,v=t.timescale,g=t.samples,m=[],y=g.length,x=this.Ht,w=this.$t,k=this.nextAvcDts,S=this.isSafari;if(0!==y){S&&(e|=g.length&&k&&(h&&Math.abs(i-k/v)<.1||Math.abs(g[0].pts-k-w)<v/5)),e||(k=i*v),g.forEach(function(t){t.pts=x(t.pts-w,k),t.dts=x(t.dts-w,k)}),g.sort(function(t,i){var e=t.dts-i.dts,s=t.pts-i.pts;return e||s||t.id-i.id});var O=g.reduce(function(t,i){return Math.max(Math.min(t,i.pts-i.dts),-1*$)},0);if(O<0){o.b.warn("PTS < DTS detected in video samples, shifting DTS by "+L(O,!0)+" ms to overcome this issue");for(var _=0;_<g.length;_++)g[_].dts+=O}var j=g[0];d=Math.max(j.dts,0),u=Math.max(j.pts,0);var A=d-k;e&&A&&(A>1?o.b.log("AVC: "+L(A,!0)+" ms hole between fragments detected,filling it"):A<-1&&o.b.log("AVC: "+L(-A,!0)+" ms overlapping between fragments detected"),d=k,g[0].dts=d,u=Math.max(u-A,k),g[0].pts=u,o.b.log("Video: PTS/DTS adjusted: "+L(u,!0)+"/"+L(d,!0)+", delta: "+L(A,!0)+" ms")),j=g[g.length-1],p=Math.max(j.dts,0),f=Math.max(j.pts,0,p),S&&(a=Math.round((p-d)/(g.length-1)));for(var T=0,C=0,I=0;I<y;I++){for(var P=g[I],E=P.units,R=E.length,D=0,B=0;B<R;B++)D+=E[B].data.length;C+=D,T+=R,P.length=D,P.dts=S?d+I*a:Math.max(P.dts,d),P.pts=Math.max(P.pts,P.dts)}var F=C+4*T+8;try{c=new Uint8Array(F)}catch(t){return void this.observer.trigger(s.a.ERROR,{type:n.b.MUX_ERROR,details:n.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating video mdat "+F})}var V=new DataView(c.buffer);V.setUint32(0,F),c.set(M.types.mdat,4);for(var U=0;U<y;U++){for(var N=g[U],H=N.units,q=0,z=void 0,W=0,G=H.length;W<G;W++){var Q=H[W],J=Q.data,X=Q.data.byteLength;V.setUint32(b,X),b+=4,c.set(J,b),b+=X,q+=4+X}if(S)z=Math.max(0,a*Math.round((N.pts-N.dts)/a));else{if(U<y-1)a=g[U+1].dts-N.dts;else{var Y=this.config,K=N.dts-g[U>0?U-1:U].dts;if(Y.stretchShortVideoTrack){var Z=Y.maxBufferHole,tt=Math.floor(Z*v),it=(r?u+r*v:this.nextAudioPts)-N.pts;it>tt?((a=it-K)<0&&(a=K),o.b.log("It is approximately "+L(it,!1)+" ms to the next segment; using duration "+L(a,!1)+" ms for the last video frame.")):a=K}else a=K}z=Math.round(N.pts-N.dts)}m.push({size:q,duration:a,cts:z,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:N.key?2:1,isNonSync:N.key?0:1}})}this.nextAvcDts=p+a;var et=t.dropped;if(t.nbNalu=0,t.dropped=0,m.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var st=m[0].flags;st.dependsOn=2,st.isNonSync=0}t.samples=m,l=M.moof(t.sequenceNumber++,d,t),t.samples=[];var nt={data1:l,data2:c,startPTS:u/v,endPTS:(f+a)/v,startDTS:d/v,endDTS:this.nextAvcDts/v,type:"video",hasAudio:!1,hasVideo:!0,nb:m.length,dropped:et};return this.observer.trigger(s.a.FRAG_PARSING_DATA,nt),nt}},i.remuxAudio=function(t,i,e,r){var h,a,c,l,u,d,f=t.inputTimeScale,p=t.timescale,b=f/p,v=(t.isAAC?1024:1152)*b,g=this.Ht,m=this.$t,y=!t.isAAC&&this.typeSupported.mpeg,x=y?0:8,w=t.samples,k=[],S=this.nextAudioPts;if(e|=w.length&&S&&(r&&Math.abs(i-S/f)<.1||Math.abs(w[0].pts-S-m)<20*v),w.forEach(function(t){t.pts=t.dts=g(t.pts-m,i*f)}),0!==(w=w.filter(function(t){return t.pts>=0})).length){if(e||(S=r?i*f:w[0].pts),t.isAAC)for(var O=this.config.maxAudioFramesDrift,_=0,j=S;_<w.length;){var A,T=w[_];if((A=T.pts-j)<=-O*v)o.b.warn("Dropping 1 audio frame @ "+L(j,!0)+" ms due to "+L(A,!0)+" ms overlap."),w.splice(_,1);else if(A>=O*v&&A<B&&j){var C=Math.round(A/v);o.b.warn("Injecting "+C+" audio frames @ "+L(j,!0)+" ms due to "+L(j,!0)+" ms gap.");for(var P=0;P<C;P++){var E=Math.max(j,0);(a=I.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(o.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),a=T.unit.subarray()),w.splice(_,0,{unit:a,pts:E,dts:E}),j+=v,_++}T.pts=T.dts=j,j+=v,_++}else Math.abs(A),T.pts=T.dts=j,j+=v,_++}for(var R=w.length,D=0;R--;)D+=w[R].unit.byteLength;for(var $=0,F=w.length;$<F;$++){var V=w[$],U=V.unit,N=V.pts;if(void 0!==d)h.duration=Math.round((N-d)/b);else{var H=N-S,q=0;if(e&&t.isAAC&&H){if(H>0&&H<B)q=Math.round((N-S)/v),o.b.log(L(H,!0)+" ms hole between AAC samples detected,filling it"),q>0&&((a=I.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(a=U.subarray()),D+=q*a.length);else if(H<-12){o.b.log("drop overlapping AAC sample, expected/parsed/delta: "+L(S,!0)+" ms / "+L(N,!0)+" ms / "+L(-H,!0)+" ms"),D-=U.byteLength;continue}N=S}if(u=N,!(D>0))return;D+=x;try{c=new Uint8Array(D)}catch(t){return void this.observer.trigger(s.a.ERROR,{type:n.b.MUX_ERROR,details:n.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:D,reason:"fail allocating audio mdat "+D})}y||(new DataView(c.buffer).setUint32(0,D),c.set(M.types.mdat,4));for(var z=0;z<q;z++)(a=I.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(o.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),a=U.subarray()),c.set(a,x),x+=a.byteLength,h={size:a.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},k.push(h)}c.set(U,x);var W=U.byteLength;x+=W,h={size:W,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},k.push(h),d=N}var G=0;if((R=k.length)>=2&&(G=k[R-2].duration,h.duration=G),R){this.nextAudioPts=S=d+b*G,t.samples=k,l=y?new Uint8Array:M.moof(t.sequenceNumber++,u/b,t),t.samples=[];var Q=u/f,J=S/f,X={data1:l,data2:c,startPTS:Q,endPTS:J,startDTS:Q,endDTS:J,type:"audio",hasAudio:!0,hasVideo:!1,nb:R};return this.observer.trigger(s.a.FRAG_PARSING_DATA,X),X}return null}},i.remuxEmptyAudio=function(t,i,e,s){var n=t.inputTimeScale,r=n/(t.samplerate?t.samplerate:n),h=this.nextAudioPts,a=(void 0!==h?h:s.startDTS*n)+this.Ft,c=s.endDTS*n+this.Ft,l=1024*r,u=Math.ceil((c-a)/l),d=I.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(o.b.warn("remux empty Audio"),d){for(var f=[],p=0;p<u;p++){var b=a+p*l;f.push({unit:d,pts:b,dts:b})}t.samples=f,this.remuxAudio(t,i,e)}else o.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},i.remuxID3=function(t){var i,e=t.samples.length,n=t.inputTimeScale,r=this.$t,h=this.Ft;if(e){for(var a=0;a<e;a++)(i=t.samples[a]).pts=(i.pts-r)/n,i.dts=(i.dts-h)/n;this.observer.trigger(s.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[]},i.remuxText=function(t){t.samples.sort(function(t,i){return t.pts-i.pts});var i,e=t.samples.length,n=t.inputTimeScale,r=this.$t;if(e){for(var h=0;h<e;h++)(i=t.samples[h]).pts=(i.pts-r)/n;this.observer.trigger(s.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[]},i.Ht=function(t,i){var e;if(void 0===i)return t;for(e=i<t?-8589934592:8589934592;Math.abs(t-i)>4294967296;)t+=e;return t},t}(),V=function(){function t(t){this.observer=t}var i=t.prototype;return i.destroy=function(){},i.resetTimeStamp=function(){},i.resetInitSegment=function(){},i.remux=function(t,i,e,n,r,h,a,o){var c=this.observer,l="";t&&(l+="audio"),i&&(l+="video"),c.trigger(s.a.FRAG_PARSING_DATA,{data1:o,startPTS:r,startDTS:r,type:l,hasAudio:!!t,hasVideo:!!i,nb:1,dropped:0}),c.trigger(s.a.FRAG_PARSED)},t}(),U=Object(c.a)();try{D=U.performance.now.bind(U.performance)}catch(t){o.b.debug("Unable to use Performance API on this environment"),D=U.Date.now}var N=function(){function t(t,i,e,s){this.observer=t,this.typeSupported=i,this.config=e,this.vendor=s}var i=t.prototype;return i.destroy=function(){var t=this.demuxer;t&&t.destroy()},i.push=function(t,i,e,n,r,h,a,o,c,u,d,f){var p=this;if(t.byteLength>0&&null!=i&&null!=i.key&&"AES-128"===i.method){var b=this.decrypter;null==b&&(b=this.decrypter=new l(this.observer,this.config));var v=D();b.decrypt(t,i.key.buffer,i.iv.buffer,function(t){var l=D();p.observer.trigger(s.a.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:l}}),p.pushDecrypted(new Uint8Array(t),i,new Uint8Array(e),n,r,h,a,o,c,u,d,f)})}else this.pushDecrypted(new Uint8Array(t),i,new Uint8Array(e),n,r,h,a,o,c,u,d,f)},i.pushDecrypted=function(t,i,e,r,h,a,o,c,l,u,d,f){var p=this.demuxer;if(!p||(o||c)&&!this.probe(t)){for(var b=this.observer,v=this.typeSupported,g=this.config,m=[{demux:T,remux:F},{demux:k.a,remux:V},{demux:w,remux:F},{demux:C,remux:F}],y=0,x=m.length;y<x;y++){var S=m[y],O=S.demux.probe;if(O(t)){var _=this.remuxer=new S.remux(b,g,v,this.vendor);p=new S.demux(b,_,g,v),this.probe=O;break}}if(!p)return void b.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=p}var j=this.remuxer;(o||c)&&(p.resetInitSegment(e,r,h,u),j.resetInitSegment()),o&&(p.resetTimeStamp(f),j.resetTimeStamp(f)),"function"==typeof p.setDecryptData&&p.setDecryptData(i),p.append(t,a,l,d)},t}();i.a=N},function(t,i,e){"use strict";var s=e(0),n=e(1),r=Math.pow(2,32)-1,h=function(){function t(t,i){this.observer=t,this.remuxer=i}var i=t.prototype;return i.resetTimeStamp=function(t){this.initPTS=t},i.resetInitSegment=function(i,e,s,r){if(i&&i.byteLength){var h=this.initData=t.parseInitSegment(i);null==e&&(e="mp4a.40.5"),null==s&&(s="avc1.42e01e");var a={};h.audio&&h.video?a.audiovideo={container:"video/mp4",codec:e+","+s,initSegment:r?i:null}:(h.audio&&(a.audio={container:"audio/mp4",codec:e,initSegment:r?i:null}),h.video&&(a.video={container:"video/mp4",codec:s,initSegment:r?i:null})),this.observer.trigger(n.a.FRAG_PARSING_INIT_SEGMENT,{tracks:a})}else e&&(this.audioCodec=e),s&&(this.videoCodec=s)},t.probe=function(i){return t.findBox({data:i,start:0,end:Math.min(i.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,i){t.data&&(i+=t.start,t=t.data);var e=t[i]<<8|t[i+1];return e<0?65536+e:e},t.readUint32=function(t,i){t.data&&(i+=t.start,t=t.data);var e=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3];return e<0?4294967296+e:e},t.writeUint32=function(t,i,e){t.data&&(i+=t.start,t=t.data),t[i]=e>>24,t[i+1]=e>>16&255,t[i+2]=e>>8&255,t[i+3]=255&e},t.findBox=function(i,e){var s,n,r,h,a,o,c=[];if(i.data?(a=i.start,r=i.end,i=i.data):(a=0,r=i.byteLength),!e.length)return null;for(s=a;s<r;)o=(n=t.readUint32(i,s))>1?s+n:r,t.bin2str(i.subarray(s+4,s+8))===e[0]&&(1===e.length?c.push({data:i,start:s+8,end:o}):(h=t.findBox({data:i,start:s+8,end:o},e.slice(1))).length&&(c=c.concat(h))),s=o;return c},t.parseSegmentIndex=function(i){var e,s=t.findBox(i,["moov"])[0],n=s?s.end:null,r=0,h=t.findBox(i,["sidx"]);if(!h||!h[0])return null;e=[];var a=(h=h[0]).data[0];r=0===a?8:16;var o=t.readUint32(h,r);r+=4,r+=0===a?8:16,r+=2;var c=h.end+0,l=t.readUint16(h,r);r+=2;for(var u=0;u<l;u++){var d=r,f=t.readUint32(h,d);d+=4;var p=2147483647&f;if(1==(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var b=t.readUint32(h,d);d+=4,e.push({referenceSize:p,subsegmentDuration:b,info:{duration:b/o,start:c,end:c+p-1}}),c+=p,r=d+=4}return{earliestPresentationTime:0,timescale:o,version:a,referencesCount:l,references:e,moovEndOffset:n}},t.parseInitSegment=function(i){var e=[];return t.findBox(i,["moov","trak"]).forEach(function(i){var n=t.findBox(i,["tkhd"])[0];if(n){var r=n.data[n.start],h=0===r?12:20,a=t.readUint32(n,h),o=t.findBox(i,["mdia","mdhd"])[0];if(o){h=0===(r=o.data[o.start])?12:20;var c=t.readUint32(o,h),l=t.findBox(i,["mdia","hdlr"])[0];if(l){var u={soun:"audio",vide:"video"}[t.bin2str(l.data.subarray(l.start+8,l.start+12))];if(u){var d=t.findBox(i,["mdia","minf","stbl","stsd"]);if(d.length){d=d[0];var f=t.bin2str(d.data.subarray(d.start+12,d.start+16));s.b.log("MP4Demuxer:"+u+":"+f+" found")}e[a]={timescale:c,type:u},e[u]={timescale:c,id:a}}}}}}),e},t.getStartDTS=function(i,e){var s,n,r;return s=t.findBox(e,["moof","traf"]),n=[].concat.apply([],s.map(function(e){return t.findBox(e,["tfhd"]).map(function(s){var n,r;return n=t.readUint32(s,4),r=i[n].timescale||9e4,t.findBox(e,["tfdt"]).map(function(i){var e,s;return e=i.data[i.start],s=t.readUint32(i,4),1===e&&(s*=Math.pow(2,32),s+=t.readUint32(i,8)),s})[0]/r})})),r=Math.min.apply(null,n),isFinite(r)?r:0},t.offsetStartDTS=function(i,e,s){t.findBox(e,["moof","traf"]).map(function(e){return t.findBox(e,["tfhd"]).map(function(n){var h=t.readUint32(n,4),a=i[h].timescale||9e4;t.findBox(e,["tfdt"]).map(function(i){var e=i.data[i.start],n=t.readUint32(i,4);if(0===e)t.writeUint32(i,4,n-s*a);else{n*=Math.pow(2,32),n+=t.readUint32(i,8),n-=s*a,n=Math.max(n,0);var h=Math.floor(n/(r+1)),o=Math.floor(n%(r+1));t.writeUint32(i,4,h),t.writeUint32(i,8,o)}})})})},i.append=function(i,e,s,r){var h=this.initData;h||(this.resetInitSegment(i,this.audioCodec,this.videoCodec,!1),h=this.initData);var a,o=this.initPTS;if(void 0===o){var c=t.getStartDTS(h,i);this.initPTS=o=c-e,this.observer.trigger(n.a.INIT_PTS_FOUND,{initPTS:o})}t.offsetStartDTS(h,i,o),a=t.getStartDTS(h,i),this.remuxer.remux(h.audio,h.video,null,null,a,s,r,i)},i.destroy=function(){},t}();i.a=h},function(t,i,e){function s(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.r=function(t){Object.defineProperty(t,"_",{value:!0})},e.n=function(t){var i=t&&t._?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/",e.oe=function(t){throw console.error(t),t};var s=e(e.s=ENTRY_MODULE);return s.default||s}var n="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function r(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function h(t,i,s){var h={};h[s]=[];var a=i.toString(),o=a.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!o)return h;for(var c,l=o[1],u=new RegExp("(\\\\n|\\W)"+r(l)+n,"g");c=u.exec(a);)"dll-reference"!==c[3]&&h[s].push(c[3]);for(u=new RegExp("\\("+r(l)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)'+n,"g");c=u.exec(a);)t[c[2]]||(h[s].push(c[1]),t[c[2]]=e(c[1]).m),h[c[2]]=h[c[2]]||[],h[c[2]].push(c[4]);for(var d,f=Object.keys(h),p=0;p<f.length;p++)for(var b=0;b<h[f[p]].length;b++)d=h[f[p]][b],isNaN(1*d)||(h[f[p]][b]=1*h[f[p]][b]);return h}function a(t){return Object.keys(t).reduce(function(i,e){return i||t[e].length>0},!1)}t.exports=function(t,i){i=i||{};var n={main:e.m},r=i.all?{main:Object.keys(n.main)}:function(t,i){for(var e={main:[i]},s={main:[]},n={main:{}};a(e);)for(var r=Object.keys(e),o=0;o<r.length;o++){var c=r[o],l=e[c].pop();if(n[c]=n[c]||{},!n[c][l]&&t[c][l]){n[c][l]=!0,s[c]=s[c]||[],s[c].push(l);for(var u=h(t,t[c][l],c),d=Object.keys(u),f=0;f<d.length;f++)e[d[f]]=e[d[f]]||[],e[d[f]]=e[d[f]].concat(u[d[f]])}}return s}(n,t),o="";Object.keys(r).filter(function(t){return"main"!==t}).forEach(function(t){for(var i=0;r[t][i];)i++;r[t].push(i),n[t][i]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+s.toString().replace("ENTRY_MODULE",JSON.stringify(i))+")({"+r[t].map(function(i){return JSON.stringify(i)+": "+n[t][i].toString()}).join(",")+"});\n"}),o=o+"new (("+s.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+r.main.map(function(t){return JSON.stringify(t)+": "+n.main[t].toString()}).join(",")+"}))(self);";var c=new window.Blob([o],{type:"text/javascript"});if(i.bare)return c;var l=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),u=new window.Worker(l);return u.objectURL=l,u}},function(t,i,e){"use strict";e.r(i);var s=e(9),n=e(1),r=e(0),h=e(8);i.default=function(t){var i=new h.EventEmitter;i.trigger=function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];i.emit.apply(i,[t,t].concat(s))},i.off=function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];i.removeListener.apply(i,[t].concat(s))};var e=function(i,e){t.postMessage({event:i,data:e})};t.addEventListener("message",function(n){var h=n.data;switch(h.cmd){case"init":var a=JSON.parse(h.config);t.demuxer=new s.a(i,h.typeSupported,a,h.vendor),Object(r.a)(a.debug),e("init",null);break;case"demux":t.demuxer.push(h.data,h.decryptdata,h.initSegment,h.audioCodec,h.videoCodec,h.timeOffset,h.discontinuity,h.trackSwitch,h.contiguous,h.duration,h.accurateTimeOffset,h.defaultInitPTS)}}),i.on(n.a.FRAG_DECRYPTED,e),i.on(n.a.FRAG_PARSING_INIT_SEGMENT,e),i.on(n.a.FRAG_PARSED,e),i.on(n.a.ERROR,e),i.on(n.a.FRAG_PARSING_METADATA,e),i.on(n.a.FRAG_PARSING_USERDATA,e),i.on(n.a.INIT_PTS_FOUND,e),i.on(n.a.FRAG_PARSING_DATA,function(i,e){var s=[],n={event:i,data:e};e.data1&&(n.data1=e.data1.buffer,s.push(e.data1.buffer),delete e.data1),e.data2&&(n.data2=e.data2.buffer,s.push(e.data2.buffer),delete e.data2),t.postMessage(n,s)})}},function(t,i,e){"use strict";e.r(i);var s,n,r=e(7),h=e(2),a=e(3),o=e(1),c=e(0),l={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},u=function(){function t(t){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=t,this.onEvent=this.onEvent.bind(this);for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.handledEvents=e,this.useGenericHandler=!0,this.registerListeners()}var i=t.prototype;return i.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},i.onHandlerDestroying=function(){},i.onHandlerDestroyed=function(){},i.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},i.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if(l[t])throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)},this)},i.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},i.onEvent=function(t,i){this.onEventGeneric(t,i)},i.onEventGeneric=function(t,i){try{(function(t,i){var e="on"+t.replace("hls","");if("function"!=typeof this[e])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+e+")");return this[e].bind(this,i)}).call(this,t,i).call()}catch(i){c.b.error("An internal error happened while handling event "+t+'. Error message: "'+i.message+'". Here is a stacktrace:',i),this.hls.trigger(o.a.ERROR,{type:h.b.OTHER_ERROR,details:h.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:i})}},t}();!function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(s||(s={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(n||(n={}));var d=e(10);function f(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var p,b=function(){function t(t,i){this.qt=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=t,this.reluri=i}var i,e;return i=t,(e=[{key:"uri",get:function(){return!this.qt&&this.reluri&&(this.qt=Object(r.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this.qt}}])&&f(i.prototype,e),t}();function v(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}!function(t){t.AUDIO="audio",t.VIDEO="video"}(p||(p={}));var g=function(){function t(){var t;this.zt=null,this.Wt=null,this.Gt=null,this.Qt=((t={})[p.AUDIO]=!1,t[p.VIDEO]=!1,t),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var i,e,s=t.prototype;return s.setByteRange=function(t,i){var e=t.split("@",2),s=[];1===e.length?s[0]=i?i.byteRangeEndOffset:0:s[0]=parseInt(e[1]),s[1]=parseInt(e[0])+s[0],this.Wt=s},s.addElementaryStream=function(t){this.Qt[t]=!0},s.hasElementaryStream=function(t){return!0===this.Qt[t]},s.createInitializationVector=function(t){for(var i=new Uint8Array(16),e=12;e<16;e++)i[e]=t>>8*(15-e)&255;return i},s.setDecryptDataFromLevelKey=function(t,i){var e=t;return t&&t.method&&t.uri&&!t.iv&&((e=new b(t.baseuri,t.reluri)).method=t.method,e.iv=this.createInitializationVector(i)),e},i=t,(e=[{key:"url",get:function(){return!this.zt&&this.relurl&&(this.zt=Object(r.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this.zt},set:function(t){this.zt=t}},{key:"byteRange",get:function(){return this.Wt?this.Wt:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this.Gt)return null;if(!this.Gt&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&c.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this.Gt=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this.Gt}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(a.a)(this.programDateTime))return null;var t=Object(a.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&v(i.prototype,e),t}();function m(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var y=function(){function t(t){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=t,this.version=null}var i,e;return i=t,(e=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(a.a)(this.fragments[0].programDateTime))}}])&&m(i.prototype,e),t}(),x=/^(\d+)x(\d+)$/,w=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,k=function(){function t(i){for(var e in"string"==typeof i&&(i=t.parseAttrList(i)),i)i.hasOwnProperty(e)&&(this[e]=i[e])}var i=t.prototype;return i.decimalInteger=function(t){var i=parseInt(this[t],10);return i>Number.MAX_SAFE_INTEGER?1/0:i},i.hexadecimalInteger=function(t){if(this[t]){var i=(this[t]||"0x").slice(2);i=(1&i.length?"0":"")+i;for(var e=new Uint8Array(i.length/2),s=0;s<i.length/2;s++)e[s]=parseInt(i.slice(2*s,2*s+2),16);return e}return null},i.hexadecimalIntegerAsNumber=function(t){var i=parseInt(this[t],16);return i>Number.MAX_SAFE_INTEGER?1/0:i},i.decimalFloatingPoint=function(t){return parseFloat(this[t])},i.enumeratedString=function(t){return this[t]},i.decimalResolution=function(t){var i=x.exec(this[t]);if(null!==i)return{width:parseInt(i[1],10),height:parseInt(i[2],10)}},t.parseAttrList=function(t){var i,e={};for(w.lastIndex=0;null!==(i=w.exec(t));){var s=i[2];0===s.indexOf('"')&&s.lastIndexOf('"')===s.length-1&&(s=s.slice(1,-1)),e[i[1]]=s}return e},t}(),S={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function O(t,i){return MediaSource.isTypeSupported((i||"video")+'/mp4;codecs="'+t+'"')}var _=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,j=/#EXT-X-MEDIA:(.*)/g,A=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),T=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,C=/\.(mp4|m4s|m4v|m4a)$/i,I=function(){function t(){}return t.findGroup=function(t,i){for(var e=0;e<t.length;e++){var s=t[e];if(s.id===i)return s}},t.convertAVC1ToAVCOTI=function(t){var i,e=t.split(".");return e.length>2?(i=e.shift()+".",i+=parseInt(e.shift()).toString(16),i+=("000"+parseInt(e.shift()).toString(16)).substr(-4)):i=t,i},t.resolve=function(t,i){return r.buildAbsoluteURL(i,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(i,e){var s,n=[];function r(t,i){["video","audio"].forEach(function(e){var s=t.filter(function(t){return function(t,i){var e=S[i];return!!e&&!0===e[t.slice(0,4)]}(t,e)});if(s.length){var n=s.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});i[e+"Codec"]=n.length>0?n[0]:s[0],t=t.filter(function(t){return-1===s.indexOf(t)})}}),i.unknownCodecs=t}for(_.lastIndex=0;null!=(s=_.exec(i));){var h={},a=h.attrs=new k(s[1]);h.url=t.resolve(s[2],e);var o=a.decimalResolution("RESOLUTION");o&&(h.width=o.width,h.height=o.height),h.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),h.name=a.NAME,r([].concat((a.CODECS||"").split(/[ ,]+/)),h),h.videoCodec&&-1!==h.videoCodec.indexOf("avc1")&&(h.videoCodec=t.convertAVC1ToAVCOTI(h.videoCodec)),n.push(h)}return n},t.parseMasterPlaylistMedia=function(i,e,s,n){var r;void 0===n&&(n=[]);var h=[],a=0;for(j.lastIndex=0;null!==(r=j.exec(i));){var o=new k(r[1]);if(o.TYPE===s){var c={id:a++,groupId:o["GROUP-ID"],name:o.NAME||o.LANGUAGE,type:s,default:"YES"===o.DEFAULT,autoselect:"YES"===o.AUTOSELECT,forced:"YES"===o.FORCED,lang:o.LANGUAGE};if(o.URI&&(c.url=t.resolve(o.URI,e)),n.length){var l=t.findGroup(n,c.groupId);c.audioCodec=l?l.codec:n[0].codec}h.push(c)}}return h},t.parseLevelPlaylist=function(t,i,e,s,n){var r,h,o,l=0,u=0,d=new y(i),f=0,p=null,v=new g,m=null;for(A.lastIndex=0;null!==(r=A.exec(t));){var x=r[1];if(x){v.duration=parseFloat(x);var w=(" "+r[2]).slice(1);v.title=w||null,v.tagList.push(w?["INF",x,w]:["INF",x])}else if(r[3]){if(Object(a.a)(v.duration)){var S=l++;v.type=s,v.start=u,o&&(v.levelkey=o),v.sn=S,v.level=e,v.cc=f,v.urlId=n,v.baseurl=i,v.relurl=(" "+r[3]).slice(1),P(v,p),d.fragments.push(v),p=v,u+=v.duration,v=new g}}else if(r[4]){var O=(" "+r[4]).slice(1);p?v.setByteRange(O,p):v.setByteRange(O)}else if(r[5])v.rawProgramDateTime=(" "+r[5]).slice(1),v.tagList.push(["PROGRAM-DATE-TIME",v.rawProgramDateTime]),null===m&&(m=d.fragments.length);else{if(!(r=r[0].match(T))){c.b.warn("No matches on slow regex match for level playlist!");continue}for(h=1;h<r.length&&void 0===r[h];h++);var _=(" "+r[h+1]).slice(1),j=(" "+r[h+2]).slice(1);switch(r[h]){case"#":v.tagList.push(j?[_,j]:[_]);break;case"PLAYLIST-TYPE":d.type=_.toUpperCase();break;case"MEDIA-SEQUENCE":l=d.startSN=parseInt(_);break;case"TARGETDURATION":d.targetduration=parseFloat(_);break;case"VERSION":d.version=parseInt(_);break;case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"DIS":f++,v.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(_);break;case"KEY":var I=new k(_),M=I.enumeratedString("METHOD"),E=I.URI,L=I.hexadecimalInteger("IV");M&&(o=new b(i,E),E&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(M)>=0&&(o.method=M,o.key=null,o.iv=L));break;case"START":var R=new k(_).decimalFloatingPoint("TIME-OFFSET");Object(a.a)(R)&&(d.startTimeOffset=R);break;case"MAP":var D=new k(_);v.relurl=D.URI,D.BYTERANGE&&v.setByteRange(D.BYTERANGE),v.baseurl=i,v.level=e,v.type=s,v.sn="initSegment",d.initSegment=v,(v=new g).rawProgramDateTime=d.initSegment.rawProgramDateTime;break;default:c.b.warn("line parsed but not handled: "+r)}}}return(v=p)&&!v.relurl&&(d.fragments.pop(),u-=v.duration),d.totalduration=u,d.averagetargetduration=u/d.fragments.length,d.endSN=l-1,d.startCC=d.fragments[0]?d.fragments[0].cc:0,d.endCC=f,!d.initSegment&&d.fragments.length&&d.fragments.every(function(t){return C.test(t.relurl)})&&(c.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(v=new g).relurl=d.fragments[0].relurl,v.baseurl=i,v.level=e,v.type=s,v.sn="initSegment",d.initSegment=v,d.needSidxRanges=!0),m&&function(t,i){for(var e=t[i],s=i-1;s>=0;s--){var n=t[s];n.programDateTime=e.programDateTime-1e3*n.duration,e=n}}(d.fragments,m),d},t}();function P(t,i){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):i&&i.programDateTime&&(t.programDateTime=i.endProgramDateTime),Object(a.a)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}var M=window.performance,E=function(t){var i,e;function r(i){var e;return(e=t.call(this,i,o.a.MANIFEST_LOADING,o.a.LEVEL_LOADING,o.a.AUDIO_TRACK_LOADING,o.a.SUBTITLE_TRACK_LOADING)||this).loaders={},e}e=t,(i=r).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e,r.canHaveQualityLevels=function(t){return t!==s.AUDIO_TRACK&&t!==s.SUBTITLE_TRACK},r.mapContextToLevelType=function(t){switch(t.type){case s.AUDIO_TRACK:return n.AUDIO;case s.SUBTITLE_TRACK:return n.SUBTITLE;default:return n.MAIN}},r.getResponseUrl=function(t,i){var e=t.url;return void 0!==e&&0!==e.indexOf("data:")||(e=i.url),e};var l=r.prototype;return l.createInternalLoader=function(t){var i=this.hls.config,e=i.pLoader,s=i.loader,n=new(e||s)(i);return t.loader=n,this.loaders[t.type]=n,n},l.getInternalLoader=function(t){return this.loaders[t.type]},l.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},l.destroyInternalLoaders=function(){for(var t in this.loaders){var i=this.loaders[t];i&&i.destroy(),this.resetInternalLoader(t)}},l.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},l.onManifestLoading=function(t){this.load({url:t.url,type:s.MANIFEST,level:0,id:null,responseType:"text"})},l.onLevelLoading=function(t){this.load({url:t.url,type:s.LEVEL,level:t.level,id:t.id,responseType:"text"})},l.onAudioTrackLoading=function(t){this.load({url:t.url,type:s.AUDIO_TRACK,level:null,id:t.id,responseType:"text"})},l.onSubtitleTrackLoading=function(t){this.load({url:t.url,type:s.SUBTITLE_TRACK,level:null,id:t.id,responseType:"text"})},l.load=function(t){var i=this.hls.config;c.b.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var e,n,r,h,a=this.getInternalLoader(t);if(a){var o=a.context;if(o&&o.url===t.url)return c.b.trace("playlist request ongoing"),!1;c.b.warn("aborting previous loader for type: "+t.type),a.abort()}switch(t.type){case s.MANIFEST:e=i.manifestLoadingMaxRetry,n=i.manifestLoadingTimeOut,r=i.manifestLoadingRetryDelay,h=i.manifestLoadingMaxRetryTimeout;break;case s.LEVEL:e=0,h=0,r=0,n=i.levelLoadingTimeOut;break;default:e=i.levelLoadingMaxRetry,n=i.levelLoadingTimeOut,r=i.levelLoadingRetryDelay,h=i.levelLoadingMaxRetryTimeout}a=this.createInternalLoader(t);var l={timeout:n,maxRetry:e,retryDelay:r,maxRetryDelay:h},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return c.b.debug("Calling internal loader delegate for URL: "+t.url),a.load(t,l,u),!0},l.loadsuccess=function(t,i,e,s){if(void 0===s&&(s=null),e.isSidxRequest)return this.Jt(t,e),void this.Xt(t,i,e,s);if(this.resetInternalLoader(e.type),"string"!=typeof t.data)throw new Error('expected responseType of "text" for PlaylistLoader');var n=t.data;i.tload=M.now(),0===n.indexOf("#EXTM3U")?n.indexOf("#EXTINF:")>0||n.indexOf("#EXT-X-TARGETDURATION:")>0?this.Yt(t,i,e,s):this.Kt(t,i,e,s):this.Zt(t,e,"no EXTM3U delimiter",s)},l.loaderror=function(t,i,e){void 0===e&&(e=null),this.ti(i,e,!1,t)},l.loadtimeout=function(t,i,e){void 0===e&&(e=null),this.ti(i,e,!0)},l.Kt=function(t,i,e,s){var n=this.hls,h=t.data,a=r.getResponseUrl(t,e),l=I.parseMasterPlaylist(h,a);if(l.length){var u=l.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),d=I.parseMasterPlaylistMedia(h,a,"AUDIO",u),f=I.parseMasterPlaylistMedia(h,a,"SUBTITLES");if(d.length){var p=!1;d.forEach(function(t){t.url||(p=!0)}),!1===p&&l[0].audioCodec&&!l[0].attrs.AUDIO&&(c.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),d.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1}))}n.trigger(o.a.MANIFEST_LOADED,{levels:l,audioTracks:d,subtitles:f,url:a,stats:i,networkDetails:s})}else this.Zt(t,e,"no level found in manifest",s)},l.Yt=function(t,i,e,n){var h=this.hls,c=e.id,l=e.level,u=e.type,d=r.getResponseUrl(t,e),f=Object(a.a)(c)?c:0,p=Object(a.a)(l)?l:f,b=r.mapContextToLevelType(e),v=I.parseLevelPlaylist(t.data,d,p,b,f);if(v.tload=i.tload,u===s.MANIFEST){var g={url:d,details:v};h.trigger(o.a.MANIFEST_LOADED,{levels:[g],audioTracks:[],url:d,stats:i,networkDetails:n})}if(i.tparsed=M.now(),v.needSidxRanges){var m=v.initSegment.url;this.load({url:m,isSidxRequest:!0,type:u,level:l,levelDetails:v,id:c,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else e.levelDetails=v,this.Xt(t,i,e,n)},l.Jt=function(t,i){if("string"==typeof t.data)throw new Error("sidx request must be made with responseType of array buffer");var e=d.a.parseSegmentIndex(new Uint8Array(t.data));if(e){var s=e.references,n=i.levelDetails;s.forEach(function(t,i){var e=t.info;if(n){var s=n.fragments[i];0===s.byteRange.length&&s.setByteRange(String(1+e.end-e.start)+"@"+String(e.start))}}),n&&n.initSegment.setByteRange(String(e.moovEndOffset)+"@0")}},l.Zt=function(t,i,e,s){this.hls.trigger(o.a.ERROR,{type:h.b.NETWORK_ERROR,details:h.a.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:e,networkDetails:s})},l.ti=function(t,i,e,n){var r,a;void 0===e&&(e=!1),void 0===n&&(n=null),c.b.info("A network error occured while loading a "+t.type+"-type playlist");var l=this.getInternalLoader(t);switch(t.type){case s.MANIFEST:r=e?h.a.MANIFEST_LOAD_TIMEOUT:h.a.MANIFEST_LOAD_ERROR,a=!0;break;case s.LEVEL:r=e?h.a.LEVEL_LOAD_TIMEOUT:h.a.LEVEL_LOAD_ERROR,a=!1;break;case s.AUDIO_TRACK:r=e?h.a.AUDIO_TRACK_LOAD_TIMEOUT:h.a.AUDIO_TRACK_LOAD_ERROR,a=!1;break;default:a=!1}l&&(l.abort(),this.resetInternalLoader(t.type));var u={type:h.b.NETWORK_ERROR,details:r,fatal:a,url:t.url,loader:l,context:t,networkDetails:i};n&&(u.response=n),this.hls.trigger(o.a.ERROR,u)},l.Xt=function(t,i,e,n){var h=e.type,a=e.level,c=e.id,l=e.levelDetails;if(l&&l.targetduration)if(r.canHaveQualityLevels(e.type))this.hls.trigger(o.a.LEVEL_LOADED,{details:l,level:a||0,id:c||0,stats:i,networkDetails:n});else switch(h){case s.AUDIO_TRACK:this.hls.trigger(o.a.AUDIO_TRACK_LOADED,{details:l,id:c,stats:i,networkDetails:n});break;case s.SUBTITLE_TRACK:this.hls.trigger(o.a.SUBTITLE_TRACK_LOADED,{details:l,id:c,stats:i,networkDetails:n})}else this.Zt(t,e,"invalid target duration",n)},r}(u),L=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.FRAG_LOADING)||this).loaders={},e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){var i=this.loaders;for(var e in i){var s=i[e];s&&s.destroy()}this.loaders={},t.prototype.destroy.call(this)},n.onFragLoading=function(t){var i=t.frag,e=i.type,s=this.loaders,n=this.hls.config,r=n.fLoader,h=n.loader;i.loaded=0;var o,l,u,d=s[e];d&&(c.b.warn("abort previous fragment loader for type: "+e),d.abort()),d=s[e]=i.loader=n.fLoader?new r(n):new h(n),o={url:i.url,frag:i,responseType:"arraybuffer",progressData:!1};var f=i.byteRangeStartOffset,p=i.byteRangeEndOffset;Object(a.a)(f)&&Object(a.a)(p)&&(o.rangeStart=f,o.rangeEnd=p),l={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},d.load(o,l,u)},n.loadsuccess=function(t,i,e,s){void 0===s&&(s=null);var n=t.data,r=e.frag;r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(o.a.FRAG_LOADED,{payload:n,frag:r,stats:i,networkDetails:s})},n.loaderror=function(t,i,e){void 0===e&&(e=null);var s=i.frag,n=s.loader;n&&n.abort(),this.loaders[s.type]=void 0,this.hls.trigger(o.a.ERROR,{type:h.b.NETWORK_ERROR,details:h.a.FRAG_LOAD_ERROR,fatal:!1,frag:i.frag,response:t,networkDetails:e})},n.loadtimeout=function(t,i,e){void 0===e&&(e=null);var s=i.frag,n=s.loader;n&&n.abort(),this.loaders[s.type]=void 0,this.hls.trigger(o.a.ERROR,{type:h.b.NETWORK_ERROR,details:h.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:i.frag,networkDetails:e})},n.loadprogress=function(t,i,e,s){void 0===s&&(s=null);var n=i.frag;n.loaded=t.loaded,this.hls.trigger(o.a.FRAG_LOAD_PROGRESS,{frag:n,stats:t,networkDetails:s})},s}(u),R=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.KEY_LOADING)||this).loaders={},e.decryptkey=null,e.decrypturl=null,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){for(var i in this.loaders){var e=this.loaders[i];e&&e.destroy()}this.loaders={},t.prototype.destroy.call(this)},n.onKeyLoading=function(t){var i=t.frag,e=i.type,s=this.loaders[e];if(i.decryptdata){var n=i.decryptdata.uri;if(n!==this.decrypturl||null===this.decryptkey){var r=this.hls.config;if(s&&(c.b.warn("abort previous key loader for type:"+e),s.abort()),!n)return void c.b.warn("key uri is falsy");i.loader=this.loaders[e]=new r.loader(r),this.decrypturl=n,this.decryptkey=null;var h={url:n,frag:i,responseType:"arraybuffer"},a={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:r.fragLoadingRetryDelay,maxRetryDelay:r.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};i.loader.load(h,a,l)}else this.decryptkey&&(i.decryptdata.key=this.decryptkey,this.hls.trigger(o.a.KEY_LOADED,{frag:i}))}else c.b.warn("Missing decryption data on fragment in onKeyLoading")},n.loadsuccess=function(t,i,e){var s=e.frag;s.decryptdata?(this.decryptkey=s.decryptdata.key=new Uint8Array(t.data),s.loader=void 0,delete this.loaders[s.type],this.hls.trigger(o.a.KEY_LOADED,{frag:s})):c.b.error("after key load, decryptdata unset")},n.loaderror=function(t,i){var e=i.frag,s=e.loader;s&&s.abort(),delete this.loaders[e.type],this.hls.trigger(o.a.ERROR,{type:h.b.NETWORK_ERROR,details:h.a.KEY_LOAD_ERROR,fatal:!1,frag:e,response:t})},n.loadtimeout=function(t,i){var e=i.frag,s=e.loader;s&&s.abort(),delete this.loaders[e.type],this.hls.trigger(o.a.ERROR,{type:h.b.NETWORK_ERROR,details:h.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:e})},s}(u),D="NOT_LOADED",B="APPENDING",$="PARTIAL",F=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.BUFFER_APPENDED,o.a.FRAG_BUFFERED,o.a.FRAG_LOADED)||this).bufferPadding=.2,e.fragments=Object.create(null),e.timeRanges=Object.create(null),e.config=i.config,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,u.prototype.destroy.call(this),t.prototype.destroy.call(this)},n.getBufferedFrag=function(t,i){var e=this.fragments,s=Object.keys(e).filter(function(s){var n=e[s];if(n.body.type!==i)return!1;if(!n.buffered)return!1;var r=n.body;return r.startPTS<=t&&t<=r.endPTS});if(0===s.length)return null;var n=s.pop();return e[n].body},n.detectEvictedFragments=function(t,i){var e,s,n=this;Object.keys(this.fragments).forEach(function(r){var h=n.fragments[r];if(!0===h.buffered){var a=h.range[t];if(a){e=a.time;for(var o=0;o<e.length;o++)if(s=e[o],!1===n.isTimeBuffered(s.startPTS,s.endPTS,i)){n.removeFragment(h.body);break}}}})},n.detectPartialFragments=function(t){var i=this,e=this.getFragmentKey(t),s=this.fragments[e];s&&(s.buffered=!0,Object.keys(this.timeRanges).forEach(function(e){if(t.hasElementaryStream(e)){var n=i.timeRanges[e];s.range[e]=i.getBufferedTimes(t.startPTS,t.endPTS,n)}}))},n.getBufferedTimes=function(t,i,e){for(var s,n,r=[],h=!1,a=0;a<e.length;a++){if(s=e.start(a)-this.bufferPadding,n=e.end(a)+this.bufferPadding,t>=s&&i<=n){r.push({startPTS:Math.max(t,e.start(a)),endPTS:Math.min(i,e.end(a))});break}if(t<n&&i>s)r.push({startPTS:Math.max(t,e.start(a)),endPTS:Math.min(i,e.end(a))}),h=!0;else if(i<=s)break}return{time:r,partial:h}},n.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},n.getPartialFragment=function(t){var i,e,s,n=this,r=null,h=0;return Object.keys(this.fragments).forEach(function(a){var o=n.fragments[a];n.isPartial(o)&&(e=o.body.startPTS-n.bufferPadding,s=o.body.endPTS+n.bufferPadding,t>=e&&t<=s&&(i=Math.min(t-e,s-t),h<=i&&(r=o.body,h=i)))}),r},n.getState=function(t){var i=this.getFragmentKey(t),e=this.fragments[i],s=D;return void 0!==e&&(s=e.buffered?!0===this.isPartial(e)?$:"OK":B),s},n.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},n.isTimeBuffered=function(t,i,e){for(var s,n,r=0;r<e.length;r++){if(s=e.start(r)-this.bufferPadding,n=e.end(r)+this.bufferPadding,t>=s&&i<=n)return!0;if(i<=s)return!1}return!1},n.onFragLoaded=function(t){var i=t.frag;Object(a.a)(i.sn)&&!i.bitrateTest&&(this.fragments[this.getFragmentKey(i)]={body:i,range:Object.create(null),buffered:!1})},n.onBufferAppended=function(t){var i=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach(function(t){var e=i.timeRanges[t];i.detectEvictedFragments(t,e)})},n.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},n.hasFragment=function(t){var i=this.getFragmentKey(t);return void 0!==this.fragments[i]},n.removeFragment=function(t){var i=this.getFragmentKey(t);delete this.fragments[i]},n.removeAllFragments=function(){this.fragments=Object.create(null)},s}(u),V={search:function(t,i){for(var e=0,s=t.length-1,n=null,r=null;e<=s;){var h=i(r=t[n=(e+s)/2|0]);if(h>0)e=n+1;else{if(!(h<0))return r;s=n-1}}return null}},U=function(){function t(){}return t.isBuffered=function(t,i){try{if(t)for(var e=t.buffered,s=0;s<e.length;s++)if(i>=e.start(s)&&i<=e.end(s))return!0}catch(t){}return!1},t.bufferInfo=function(t,i,e){try{if(t){var s,n=t.buffered,r=[];for(s=0;s<n.length;s++)r.push({start:n.start(s),end:n.end(s)});return this.bufferedInfo(r,i,e)}}catch(t){}return{len:0,start:i,end:i,nextStart:void 0}},t.bufferedInfo=function(t,i,e){t.sort(function(t,i){var e=t.start-i.start;return e||i.end-t.end});var s=[];if(e)for(var n=0;n<t.length;n++){var r=s.length;if(r){var h=s[r-1].end;t[n].start-h<e?t[n].end>h&&(s[r-1].end=t[n].end):s.push(t[n])}else s.push(t[n])}else s=t;for(var a,o=0,c=i,l=i,u=0;u<s.length;u++){var d=s[u].start,f=s[u].end;if(i+e>=d&&i<f)c=d,o=(l=f)-i;else if(i+e<d){a=d;break}}return{len:o,start:c,end:l,nextStart:a}},t}(),N=e(8),H=e(11),q=e(9);function z(){return window.MediaSource||window.WebKitMediaSource}var W=e(5),G=function(t){var i,e;function s(){return t.apply(this,arguments)||this}return e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e,s.prototype.trigger=function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.emit.apply(this,[t,t].concat(e))},s}(N.EventEmitter),Q=z()||{isTypeSupported:function(){return!1}},J=function(){function t(t,i){var e=this;this.hls=t,this.id=i;var s=this.observer=new G,n=t.config,r=function(i,s){(s=s||{}).frag=e.frag,s.id=e.id,t.trigger(i,s)};s.on(o.a.FRAG_DECRYPTED,r),s.on(o.a.FRAG_PARSING_INIT_SEGMENT,r),s.on(o.a.FRAG_PARSING_DATA,r),s.on(o.a.FRAG_PARSED,r),s.on(o.a.ERROR,r),s.on(o.a.FRAG_PARSING_METADATA,r),s.on(o.a.FRAG_PARSING_USERDATA,r),s.on(o.a.INIT_PTS_FOUND,r);var a={mp4:Q.isTypeSupported("video/mp4"),mpeg:Q.isTypeSupported("audio/mpeg"),mp3:Q.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(n.enableWorker&&"undefined"!=typeof Worker){var u;c.b.log("demuxing in webworker");try{u=this.w=H(12),this.onwmsg=this.onWorkerMessage.bind(this),u.addEventListener("message",this.onwmsg),u.onerror=function(i){t.trigger(o.a.ERROR,{type:h.b.OTHER_ERROR,details:h.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:i.message+" ("+i.filename+":"+i.lineno+")"}})},u.postMessage({cmd:"init",typeSupported:a,vendor:l,id:i,config:JSON.stringify(n)})}catch(t){c.b.warn("Error in worker:",t),c.b.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),u&&Object(W.a)().URL.revokeObjectURL(u.objectURL),this.demuxer=new q.a(s,a,n,l),this.w=void 0}}else this.demuxer=new q.a(s,a,n,l)}var i=t.prototype;return i.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var i=this.demuxer;i&&(i.destroy(),this.demuxer=null)}var e=this.observer;e&&(e.removeAllListeners(),this.observer=null)},i.push=function(t,i,e,s,n,r,h,o){var l=this.w,u=Object(a.a)(n.startPTS)?n.startPTS:n.start,d=n.decryptdata,f=this.frag,p=!(f&&n.cc===f.cc),b=!(f&&n.level===f.level),v=f&&n.sn===f.sn+1,g=!b&&v;if(p&&c.b.log(this.id+":discontinuity detected"),b&&c.b.log(this.id+":switch detected"),this.frag=n,l)l.postMessage({cmd:"demux",data:t,decryptdata:d,initSegment:i,audioCodec:e,videoCodec:s,timeOffset:u,discontinuity:p,trackSwitch:b,contiguous:g,duration:r,accurateTimeOffset:h,defaultInitPTS:o},t instanceof ArrayBuffer?[t]:[]);else{var m=this.demuxer;m&&m.push(t,d,i,e,s,u,p,b,g,r,h,o)}},i.onWorkerMessage=function(t){var i=t.data,e=this.hls;switch(i.event){case"init":Object(W.a)().URL.revokeObjectURL(this.w.objectURL);break;case o.a.FRAG_PARSING_DATA:i.data.data1=new Uint8Array(i.data1),i.data2&&(i.data.data2=new Uint8Array(i.data2));default:i.data=i.data||{},i.data.frag=this.frag,i.data.id=this.id,e.trigger(i.event,i.data)}},t}();function X(t,i,e){switch(i){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(e);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(e)}}function Y(t,i,e){var s=t[i],n=t[e],r=n.startPTS;Object(a.a)(r)?e>i?(s.duration=r-s.start,s.duration<0&&c.b.warn("negative duration computed for frag "+s.sn+",level "+s.level+", there should be some duration drift between playlist and fragment!")):(n.duration=s.start-r,n.duration<0&&c.b.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):n.start=e>i?s.start+s.duration:Math.max(s.start-n.duration,0)}function K(t,i,e,s,n,r){var h=e;if(Object(a.a)(i.startPTS)){var o=Math.abs(i.startPTS-e);Object(a.a)(i.deltaPTS)?i.deltaPTS=Math.max(o,i.deltaPTS):i.deltaPTS=o,h=Math.max(e,i.startPTS),e=Math.min(e,i.startPTS),s=Math.max(s,i.endPTS),n=Math.min(n,i.startDTS),r=Math.max(r,i.endDTS)}var c=e-i.start;i.start=i.startPTS=e,i.maxStartPTS=h,i.endPTS=s,i.startDTS=n,i.endDTS=r,i.duration=s-e;var l,u,d,f=i.sn;if(!t||f<t.startSN||f>t.endSN)return 0;for(l=f-t.startSN,(u=t.fragments)[l]=i,d=l;d>0;d--)Y(u,d,d-1);for(d=l;d<u.length-1;d++)Y(u,d,d+1);return t.PTSKnown=!0,c}var Z={toString:function(t){for(var i="",e=t.length,s=0;s<e;s++)i+="["+t.start(s).toFixed(3)+","+t.end(s).toFixed(3)+"]";return i}};function tt(t,i){i.fragments.forEach(function(i){if(i){var e=i.start+t;i.start=i.startPTS=e,i.endPTS=e+i.duration}}),i.PTSKnown=!0}function it(t,i,e){!function(t,i,e){if(function(t,i,e){var s=!1;return i&&i.details&&e&&(e.endCC>e.startCC||t&&t.cc<e.startCC)&&(s=!0),s}(t,e,i)){var s=function(t,i){var e=t.fragments,s=i.fragments;if(s.length&&e.length){var n=function(t,i){for(var e=null,s=0;s<t.length;s+=1){var n=t[s];if(n&&n.cc===i){e=n;break}}return e}(e,s[0].cc);if(n&&(!n||n.startPTS))return n;c.b.log("No frag in previous level to align on")}else c.b.log("No fragments to align")}(e.details,i);s&&(c.b.log("Adjusting PTS using last level due to CC increase within current level"),tt(s.start,i))}}(t,e,i),!e.PTSKnown&&i&&function(t,i){if(i&&i.fragments.length){if(!t.hasProgramDateTime||!i.hasProgramDateTime)return;var e=i.fragments[0].programDateTime,s=(t.fragments[0].programDateTime-e)/1e3+i.fragments[0].start;Object(a.a)(s)&&(c.b.log("adjusting PTS using programDateTime delta, sliding:"+s.toFixed(3)),tt(s,t))}}(e,i.details)}function et(t,i,e){void 0===t&&(t=0),void 0===i&&(i=0);var s=Math.min(i,e.duration+(e.deltaPTS?e.deltaPTS:0));return e.start+e.duration-s<=t?1:e.start-s>t&&e.start?-1:0}function st(t,i,e){var s=1e3*Math.min(i,e.duration+(e.deltaPTS?e.deltaPTS:0));return(e.endProgramDateTime||0)-s>t}var nt=function(){function t(t,i,e,s){this.config=t,this.media=i,this.fragmentTracker=e,this.hls=s,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var i=t.prototype;return i.poll=function(t){var i=this.config,e=this.media,s=this.stalled,n=e.currentTime,r=e.seeking,h=this.seeking&&!r,a=!this.seeking&&r;if(this.seeking=r,n===t){if((a||h)&&(this.stalled=null),!e.paused&&!e.ended&&0!==e.playbackRate&&e.buffered.length){var o=U.bufferInfo(e,n,0),l=o.len>0,u=o.nextStart||0;if(l||u){if(r){if(o.len>2||!u||u-n>2)return;this.moved=!1}if(!this.moved&&this.stalled){var d=Math.max(u,o.start||0)-n;if(d>0&&d<=2)return void this.ii(null)}var f=self.performance.now();if(null!==s){var p=f-s;!r&&p>=250&&this.ei(o.len);var b=U.bufferInfo(e,n,i.maxBufferHole);this.si(b,p)}else this.stalled=f}}}else if(this.moved=!0,null!==s){if(this.stallReported){var v=self.performance.now()-s;c.b.warn("playback not stuck anymore @"+n+", after "+Math.round(v)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},i.si=function(t,i){var e=this.config,s=this.fragmentTracker,n=this.media.currentTime,r=s.getPartialFragment(n);r&&this.ii(r)||t.len>e.maxBufferHole&&i>1e3*e.highBufferWatchdogPeriod&&(c.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this.ni())},i.ei=function(t){var i=this.hls,e=this.media;this.stallReported||(this.stallReported=!0,c.b.warn("Playback stalling at @"+e.currentTime+" due to low buffer"),i.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},i.ii=function(t){for(var i=this.config,e=this.hls,s=this.media,n=s.currentTime,r=0,a=0;a<s.buffered.length;a++){var l=s.buffered.start(a);if(n+i.maxBufferHole>=r&&n<l){var u=Math.max(l+.05,s.currentTime+.1);return c.b.warn("skipping hole, adjusting currentTime from "+n+" to "+u),this.moved=!0,this.stalled=null,s.currentTime=u,t&&e.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+u,frag:t}),u}r=s.buffered.end(a)}return 0},i.ni=function(){var t=this.config,i=this.hls,e=this.media,s=e.currentTime,n=(this.nudgeRetry||0)+1;if(this.nudgeRetry=n,n<t.nudgeMaxRetry){var r=s+n*t.nudgeOffset;c.b.warn("Nudging 'currentTime' from "+s+" to "+r),e.currentTime=r,i.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else c.b.error("Playhead still not moving while enough data buffered @"+s+" after "+t.nudgeMaxRetry+" nudges"),i.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_STALLED_ERROR,fatal:!0})},t}(),rt="STOPPED",ht="IDLE",at="KEY_LOADING",ot="FRAG_LOADING",ct="FRAG_LOADING_WAITING_RETRY",lt="PARSING",ut="PARSED",dt="BUFFER_FLUSHING",ft="ERROR",pt="WAITING_LEVEL";function bt(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var vt=function(t){var i,e;function s(i,e){var s;return(s=t.call(this,i,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.MANIFEST_LOADING,o.a.MANIFEST_PARSED,o.a.LEVEL_LOADED,o.a.KEY_LOADED,o.a.FRAG_LOADED,o.a.FRAG_LOAD_EMERGENCY_ABORTED,o.a.FRAG_PARSING_INIT_SEGMENT,o.a.FRAG_PARSING_DATA,o.a.FRAG_PARSED,o.a.ERROR,o.a.AUDIO_TRACK_SWITCHING,o.a.AUDIO_TRACK_SWITCHED,o.a.BUFFER_CREATED,o.a.BUFFER_APPENDED,o.a.BUFFER_FLUSHED)||this).fragmentTracker=e,s.config=i.config,s.audioCodecSwap=!1,s.ri=rt,s.stallReported=!1,s.gapController=null,s.altAudio=!1,s}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var r,l,u=s.prototype;return u.startLoad=function(t){if(this.levels){var i=this.lastCurrentTime,e=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var s=e.startLevel;-1===s&&(s=0,this.bitrateTest=!0),this.level=e.nextLoadLevel=s,this.loadedmetadata=!1}i>0&&-1===t&&(c.b.log("override startPosition with lastCurrentTime @"+i.toFixed(3)),t=i),this.state=ht,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=rt},u.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},u.doTick=function(){switch(this.state){case dt:this.fragLoadError=0;break;case ht:this.ai();break;case pt:var t=this.levels[this.level];t&&t.details&&(this.state=ht);break;case ct:var i=window.performance.now(),e=this.retryDate;(!e||i>=e||this.media&&this.media.seeking)&&(c.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=ht)}this.oi(),this.ci()},u.ai=function(){var t=this.hls,i=t.config,e=this.media;if(void 0!==this.levelLastLoaded&&(e||!this.startFragRequested&&i.startFragPrefetch)){var s;s=this.loadedmetadata?e.currentTime:this.nextLoadPosition;var n=t.nextLoadLevel,r=this.levels[n];if(r){var h,a=r.bitrate;h=a?Math.max(8*i.maxBufferSize/a,i.maxBufferLength):i.maxBufferLength,h=Math.min(h,i.maxMaxBufferLength);var l=U.bufferInfo(this.mediaBuffer?this.mediaBuffer:e,s,i.maxBufferHole),u=l.len;if(!(u>=h)){c.b.trace("buffer length of "+u.toFixed(3)+" is below max of "+h.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=n;var d=r.details;if(!d||d.live&&this.levelLastLoaded!==n)this.state=pt;else{if(this.li(l,d)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(o.a.BUFFER_EOS,f),void(this.state="ENDED")}this.ui(s,l,d)}}}}},u.ui=function(t,i,e){var s=this.fragPrevious,n=this.level,r=e.fragments,h=r.length;if(0!==h){var a,o=r[0].start,l=r[h-1].start+r[h-1].duration,u=i.end;if(e.initSegment&&!e.initSegment.data)a=e.initSegment;else if(e.live){var d=this.config.initialLiveManifestSize;if(h<d)return void c.b.warn("Can not start playback of a level, reason: not enough fragments "+h+" < "+d);if(null===(a=this.di(e,u,o,l,s,r,h)))return}else u<o&&(a=r[0]);a||(a=this.fi(o,s,h,r,u,l,e)),a&&(a.encrypted?(c.b.log("Loading key for "+a.sn+" of ["+e.startSN+" ,"+e.endSN+"],level "+n),this.pi(a)):(c.b.log("Loading "+a.sn+" of ["+e.startSN+" ,"+e.endSN+"],level "+n+", currentTime:"+t.toFixed(3)+",bufferEnd:"+u.toFixed(3)),this.bi(a)))}},u.di=function(t,i,e,s,n,r,h){var o,l=this.hls.config,u=this.media,d=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*t.targetduration;if(i<Math.max(e-l.maxFragLookUpTolerance,s-d)){var f=this.liveSyncPosition=this.computeLivePosition(e,t);i=f,u&&!u.paused&&u.readyState&&u.duration>f&&f>u.currentTime&&(c.b.log("buffer end: "+i.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),u.currentTime=f),this.nextLoadPosition=f}if(t.PTSKnown&&i>s&&u&&u.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(n)if(t.hasProgramDateTime)c.b.log("live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),o=function(t,i,e){if(null===i||!Array.isArray(t)||!t.length||!Object(a.a)(i))return null;if(i<(t[0].programDateTime||0))return null;if(i>=(t[t.length-1].endProgramDateTime||0))return null;e=e||0;for(var s=0;s<t.length;++s){var n=t[s];if(st(i,e,n))return n}return null}(r,n.endProgramDateTime,l.maxFragLookUpTolerance);else{var p=n.sn+1;if(p>=t.startSN&&p<=t.endSN){var b=r[p-t.startSN];n.cc===b.cc&&(o=b,c.b.log("live playlist, switching playlist, load frag with next SN: "+o.sn))}o||(o=V.search(r,function(t){return n.cc-t.cc}))&&c.b.log("live playlist, switching playlist, load frag with same CC: "+o.sn)}o||(o=r[Math.min(h-1,Math.round(h/2))],c.b.log("live playlist, switching playlist, unknown, load middle frag : "+o.sn))}return o},u.fi=function(t,i,e,s,n,r,h){var a,o=this.hls.config;if(a=n<r?function(t,i,e,s){void 0===e&&(e=0),void 0===s&&(s=0);var n=t?i[t.sn-i[0].sn+1]:null;return n&&!et(e,s,n)?n:V.search(i,et.bind(null,e,s))}(i,s,n,n>r-o.maxFragLookUpTolerance?0:o.maxFragLookUpTolerance):s[e-1]){var l=a.sn-h.startSN,u=i&&a.level===i.level,d=s[l-1],f=s[l+1];if(i&&a.sn===i.sn)if(u&&!a.backtracked)if(a.sn<h.endSN){var p=i.deltaPTS;p&&p>o.maxBufferHole&&i.dropped&&l?(a=d,c.b.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(a=f,c.b.log("Re-loading fragment with SN: "+a.sn))}else a=null;else a.backtracked&&(f&&f.backtracked?(c.b.warn("Already backtracked from fragment "+f.sn+", will not backtrack to fragment "+a.sn+". Loading fragment "+f.sn),a=f):(c.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),a.dropped=0,d?(a=d).backtracked=!0:l&&(a=null)))}return a},u.pi=function(t){this.state=at,this.hls.trigger(o.a.KEY_LOADING,{frag:t})},u.bi=function(t){var i=this.fragmentTracker.getState(t);this.fragCurrent=t,"initSegment"!==t.sn&&(this.startFragRequested=!0),Object(a.a)(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||i===D||i===$?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(o.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new J(this.hls,"main")),this.state=ot):i===B&&this.vi(t.duration)&&this.fragmentTracker.removeFragment(t)},u.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,n.MAIN)},u.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},u.ci=function(){var t,i,e=this.media;if(e&&e.readyState&&!1===e.seeking&&((i=e.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=i),U.isBuffered(e,i)?t=this.getBufferedFrag(i):U.isBuffered(e,i+.1)&&(t=this.getBufferedFrag(i+.1)),t)){var s=t;if(s!==this.fragPlaying){this.hls.trigger(o.a.FRAG_CHANGED,{frag:s});var n=s.level;this.fragPlaying&&this.fragPlaying.level===n||this.hls.trigger(o.a.LEVEL_SWITCHED,{level:n}),this.fragPlaying=s}}},u.immediateLevelSwitch=function(){if(c.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t,i=this.media;i?(t=i.paused,i.pause()):t=!0,this.previouslyPaused=t}var e=this.fragCurrent;e&&e.loader&&e.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},u.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,U.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},u.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var i,e,s;if((e=this.getBufferedFrag(t.currentTime))&&e.startPTS>1&&this.flushMainBuffer(0,e.startPTS-1),t.paused)i=0;else{var n=this.hls.nextLoadLevel,r=this.levels[n],h=this.fragLastKbps;i=h&&this.fragCurrent?this.fragCurrent.duration*r.bitrate/(1e3*h)+1:0}if((s=this.getBufferedFrag(t.currentTime+i))&&(s=this.followingBufferedFrag(s))){var a=this.fragCurrent;a&&a.loader&&a.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(s.maxStartPTS,Number.POSITIVE_INFINITY)}}},u.flushMainBuffer=function(t,i){this.state=dt;var e={startOffset:t,endOffset:i};this.altAudio&&(e.type="video"),this.hls.trigger(o.a.BUFFER_FLUSHING,e)},u.onMediaAttached=function(t){var i=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),i.addEventListener("seeking",this.onvseeking),i.addEventListener("seeked",this.onvseeked),i.addEventListener("ended",this.onvended);var e=this.config;this.levels&&e.autoStartLoad&&this.hls.startLoad(e.startPosition),this.gapController=new nt(e,i,this.fragmentTracker,this.hls)},u.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(c.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var i=this.levels;i&&i.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},u.onMediaSeeked=function(){var t=this.media,i=t?t.currentTime:void 0;Object(a.a)(i)&&c.b.log("media seeked to "+i.toFixed(3)),this.tick()},u.onManifestLoading=function(){c.b.log("trigger BUFFER_RESET"),this.hls.trigger(o.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},u.onManifestParsed=function(t){var i,e=!1,s=!1;t.levels.forEach(function(t){(i=t.audioCodec)&&(-1!==i.indexOf("mp4a.40.2")&&(e=!0),-1!==i.indexOf("mp4a.40.5")&&(s=!0))}),this.audioCodecSwitch=e&&s,this.audioCodecSwitch&&c.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=t.altAudio,this.levels=t.levels,this.startFragRequested=!1;var n=this.config;(n.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(n.startPosition)},u.onLevelLoaded=function(t){var i=t.details,e=t.level,s=this.levels[this.levelLastLoaded],n=this.levels[e],r=i.totalduration,h=0;if(c.b.log("level "+e+" loaded ["+i.startSN+","+i.endSN+"],duration:"+r),i.live){var l=n.details;l&&i.fragments.length>0?(function(t,i){i.initSegment&&t.initSegment&&(i.initSegment=t.initSegment);var e,s=0;if(function(t,i,e){if(t&&i)for(var s=Math.max(t.startSN,i.startSN)-i.startSN,n=Math.min(t.endSN,i.endSN)-i.startSN,r=i.startSN-t.startSN,h=s;h<=n;h++){var a=t.fragments[r+h],o=i.fragments[h];if(!a||!o)break;e(a,o,h)}}(t,i,function(t,n){s=t.cc-n.cc,Object(a.a)(t.startPTS)&&(n.start=n.startPTS=t.startPTS,n.endPTS=t.endPTS,n.duration=t.duration,n.backtracked=t.backtracked,n.dropped=t.dropped,e=n),i.PTSKnown=!0}),i.PTSKnown){if(s){c.b.log("discontinuity sliding from playlist, take drift into account");for(var n=i.fragments,r=0;r<n.length;r++)n[r].cc+=s}e?K(i,e,e.startPTS,e.endPTS,e.startDTS,e.endDTS):function(t,i){var e=i.startSN-t.startSN,s=t.fragments,n=i.fragments;if(!(e<0||e>s.length))for(var r=0;r<n.length;r++)n[r].start+=s[e].start}(t,i),i.PTSKnown=t.PTSKnown}}(l,i),h=i.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(h,l),i.PTSKnown&&Object(a.a)(h)?c.b.log("live playlist sliding:"+h.toFixed(3)):(c.b.log("live playlist - outdated PTS, unknown sliding"),it(this.fragPrevious,s,i))):(c.b.log("live playlist - first load, unknown sliding"),i.PTSKnown=!1,it(this.fragPrevious,s,i))}else i.PTSKnown=!1;if(n.details=i,this.levelLastLoaded=e,this.hls.trigger(o.a.LEVEL_UPDATED,{details:i,level:e}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var u=i.startTimeOffset;Object(a.a)(u)?(u<0&&(c.b.log("negative start time offset "+u+", count from end of last fragment"),u=h+r+u),c.b.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u):i.live?(this.startPosition=this.computeLivePosition(h,i),c.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===pt&&(this.state=ht),this.tick()},u.onKeyLoaded=function(){this.state===at&&(this.state=ht,this.tick())},u.onFragLoaded=function(t){var i=this.fragCurrent,e=this.hls,s=this.levels,n=this.media,r=t.frag;if(this.state===ot&&i&&"main"===r.type&&r.level===i.level&&r.sn===i.sn){var h=t.stats,a=s[i.level],l=a.details;if(this.bitrateTest=!1,this.stats=h,c.b.log("Loaded "+i.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+i.level),r.bitrateTest&&e.nextLoadLevel)this.state=ht,this.startFragRequested=!1,h.tparsed=h.tbuffered=window.performance.now(),e.trigger(o.a.FRAG_BUFFERED,{stats:h,frag:i,id:"main"}),this.tick();else if("initSegment"===r.sn)this.state=ht,h.tparsed=h.tbuffered=window.performance.now(),l.initSegment.data=t.payload,e.trigger(o.a.FRAG_BUFFERED,{stats:h,frag:i,id:"main"}),this.tick();else{c.b.log("Parsing "+i.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+i.level+", cc "+i.cc),this.state=lt,this.pendingBuffering=!0,this.appended=!1,r.bitrateTest&&(r.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:r}));var u=!(n&&n.seeking)&&(l.PTSKnown||!l.live),d=l.initSegment?l.initSegment.data:[],f=this.gi(a);(this.demuxer=this.demuxer||new J(this.hls,"main")).push(t.payload,d,f,a.videoCodec,i,l.totalduration,u)}}this.fragLoadError=0},u.onFragParsingInitSegment=function(t){var i=this.fragCurrent,e=t.frag;if(i&&"main"===t.id&&e.sn===i.sn&&e.level===i.level&&this.state===lt){var s,n,r=t.tracks;if(r.audio&&this.altAudio&&delete r.audio,n=r.audio){var h=this.levels[this.level].audioCodec,a=navigator.userAgent.toLowerCase();h&&this.audioCodecSwap&&(c.b.log("swapping playlist audio codec"),h=-1!==h.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==n.metadata.channelCount&&-1===a.indexOf("firefox")&&(h="mp4a.40.5"),-1!==a.indexOf("android")&&"audio/mpeg"!==n.container&&(h="mp4a.40.2",c.b.log("Android: force audio codec to "+h)),n.levelCodec=h,n.id=t.id}for(s in(n=r.video)&&(n.levelCodec=this.levels[this.level].videoCodec,n.id=t.id),this.hls.trigger(o.a.BUFFER_CODECS,r),r){n=r[s],c.b.log("main track:"+s+",container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var l=n.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(o.a.BUFFER_APPENDING,{type:s,data:l,parent:"main",content:"initSegment"}))}this.tick()}},u.onFragParsingData=function(t){var i=this,e=this.fragCurrent,s=t.frag;if(e&&"main"===t.id&&s.sn===e.sn&&s.level===e.level&&("audio"!==t.type||!this.altAudio)&&this.state===lt){var n=this.levels[this.level],r=e;if(Object(a.a)(t.endPTS)||(t.endPTS=t.startPTS+e.duration,t.endDTS=t.startDTS+e.duration),!0===t.hasAudio&&r.addElementaryStream(p.AUDIO),!0===t.hasVideo&&r.addElementaryStream(p.VIDEO),c.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(r.dropped=t.dropped,r.dropped)if(r.backtracked)c.b.warn("Already backtracked on this fragment, appending with the gap",r.sn);else{var h=n.details;if(!h||r.sn!==h.startSN)return c.b.warn("missing video frame(s), backtracking fragment",r.sn),this.fragmentTracker.removeFragment(r),r.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=ht,this.fragPrevious=r,void this.tick();c.b.warn("missing video frame(s) on first frag, appending with gap",r.sn)}else r.backtracked=!1;var l=K(n.details,r,t.startPTS,t.endPTS,t.startDTS,t.endDTS),u=this.hls;u.trigger(o.a.LEVEL_PTS_UPDATED,{details:n.details,level:this.level,drift:l,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&i.state===lt&&(i.appended=!0,i.pendingBuffering=!0,u.trigger(o.a.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}},u.onFragParsed=function(t){var i=this.fragCurrent,e=t.frag;i&&"main"===t.id&&e.sn===i.sn&&e.level===i.level&&this.state===lt&&(this.stats.tparsed=window.performance.now(),this.state=ut,this.mi())},u.onAudioTrackSwitching=function(t){var i=!!t.url,e=t.id;if(!i){if(this.mediaBuffer!==this.media){c.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var s=this.fragCurrent;s.loader&&(c.b.log("switching to main audio track, cancel main fragment load"),s.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ht}var n=this.hls;n.trigger(o.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),n.trigger(o.a.AUDIO_TRACK_SWITCHED,{id:e}),this.altAudio=!1}},u.onAudioTrackSwitched=function(t){var i=t.id,e=!!this.hls.audioTracks[i].url;if(e){var s=this.videoBuffer;s&&this.mediaBuffer!==s&&(c.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=e,this.tick()},u.onBufferCreated=function(t){var i,e,s=t.tracks,n=!1;for(var r in s){var h=s[r];"main"===h.id?(e=r,i=h,"video"===r&&(this.videoBuffer=s[r].buffer)):n=!0}n&&i?(c.b.log("alternate track found, use "+e+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media},u.onBufferAppended=function(t){if("main"===t.parent){var i=this.state;i!==lt&&i!==ut||(this.pendingBuffering=t.pending>0,this.mi())}},u.mi=function(){if(!(this.state!==ut||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var i=this.mediaBuffer?this.mediaBuffer:this.media;c.b.log("main buffered : "+Z.toString(i.buffered)),this.fragPrevious=t;var e=this.stats;e.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*e.total/(e.tbuffered-e.tfirst)),this.hls.trigger(o.a.FRAG_BUFFERED,{stats:e,frag:t,id:"main"}),this.state=ht}this.tick()}},u.onError=function(t){var i=t.frag||this.fragCurrent;if(!i||"main"===i.type){var e=!!this.media&&U.isBuffered(this.media,this.media.currentTime)&&U.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case h.a.FRAG_LOAD_ERROR:case h.a.FRAG_LOAD_TIMEOUT:case h.a.KEY_LOAD_ERROR:case h.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var s=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);c.b.warn("mediaController: frag loading failed, retry in "+s+" ms"),this.retryDate=window.performance.now()+s,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ct}else c.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=ft;break;case h.a.LEVEL_LOAD_ERROR:case h.a.LEVEL_LOAD_TIMEOUT:this.state!==ft&&(t.fatal?(this.state=ft,c.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==pt||(this.state=ht));break;case h.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==lt&&this.state!==ut||(e?(this.vi(this.config.maxBufferLength),this.state=ht):(c.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},u.vi=function(t){var i=this.config;return i.maxMaxBufferLength>=t&&(i.maxMaxBufferLength/=2,c.b.warn("main:reduce max buffer length to "+i.maxMaxBufferLength+"s"),!0)},u.oi=function(){var t=this.media;if(t&&0!==t.readyState){var i=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&i.length?(this.loadedmetadata=!0,this.yi()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,i)}},u.onFragLoadEmergencyAborted=function(){this.state=ht,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},u.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;t&&this.fragmentTracker.detectEvictedFragments(p.VIDEO,t.buffered),this.state=ht,this.fragPrevious=null},u.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},u.yi=function(){var t=this.media,i=t.currentTime,e=t.seeking?i:this.startPosition;i!==e&&e>=0&&(c.b.log("target start position not buffered, seek to buffered.start(0) "+e+" from current time "+i+" "),t.currentTime=e)},u.gi=function(t){var i=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(c.b.log("swapping playlist audio codec"),i&&(i=-1!==i.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),i},r=s,(l=[{key:"state",set:function(t){if(this.state!==t){var i=this.state;this.ri=t,c.b.log("main stream-controller: "+i+"->"+t),this.hls.trigger(o.a.STREAM_STATE_TRANSITION,{previousState:i,nextState:t})}},get:function(){return this.ri}},{key:"currentLevel",get:function(){var t=this.media;if(t){var i=this.getBufferedFrag(t.currentTime);if(i)return i.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this.xi},set:function(t){this.xi=t}}])&&bt(r.prototype,l),s}(function(t){var i,e;function s(){return t.apply(this,arguments)||this}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.doTick=function(){},n.startLoad=function(){},n.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=rt},n.li=function(t,i){var e=this.fragCurrent,s=this.fragmentTracker;if(!i.live&&e&&!e.backtracked&&e.sn===i.endSN&&!t.nextStart){var n=s.getState(e);return n===$||"OK"===n}return!1},n.onMediaSeeking=function(){var t=this.config,i=this.media,e=this.mediaBuffer,s=this.state,n=i?i.currentTime:null,r=U.bufferInfo(e||i,n,this.config.maxBufferHole);if(Object(a.a)(n)&&c.b.log("media seeking to "+n.toFixed(3)),s===ot){var h=this.fragCurrent;if(0===r.len&&h){var o=t.maxFragLookUpTolerance,l=h.start-o,u=h.start+h.duration+o;n<l||n>u?(h.loader&&(c.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),h.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=ht):c.b.log("seeking outside of buffer but within currently loaded fragment range")}}else"ENDED"===s&&(0===r.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=ht);i&&(this.lastCurrentTime=n),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=n),this.tick()},n.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},n.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},n.onHandlerDestroyed=function(){this.state=rt,this.fragmentTracker=null},n.computeLivePosition=function(t,i){var e=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*i.targetduration;return t+Math.max(0,i.totalduration-e)},s}(function(t){var i,e;function s(i){for(var e,s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return(e=t.call.apply(t,[this,i].concat(n))||this).wi=void 0,e.ki=null,e.Si=null,e.Oi=0,e.wi=e.tick.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)),e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},n.hasInterval=function(){return!!this.Si},n.hasNextTick=function(){return!!this.ki},n.setInterval=function(t){return!this.Si&&(this.Si=self.setInterval(this.wi,t),!0)},n.clearInterval=function(){return!!this.Si&&(self.clearInterval(this.Si),this.Si=null,!0)},n.clearNextTick=function(){return!!this.ki&&(self.clearTimeout(this.ki),this.ki=null,!0)},n.tick=function(){this.Oi++,1===this.Oi&&(this.doTick(),this.Oi>1&&(this.clearNextTick(),this.ki=self.setTimeout(this.wi,0)),this.Oi=0)},n.doTick=function(){},s}(u)));function gt(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}window.performance;var mt,yt=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.MANIFEST_LOADED,o.a.LEVEL_LOADED,o.a.AUDIO_TRACK_SWITCHED,o.a.FRAG_LOADED,o.a.ERROR)||this).canload=!1,e.currentLevelIndex=null,e.manualLevelIndex=-1,e.timer=null,mt=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n,r,a=s.prototype;return a.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},a.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},a.startLoad=function(){var t=this._i;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var i=t.details;i&&i.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},a.stopLoad=function(){this.canload=!1},a.onManifestLoaded=function(t){var i,e=[],s=[],n={},r=null,a=!1,l=!1;if(t.levels.forEach(function(t){var i=t.attrs;t.loadError=0,t.fragmentError=!1,a=a||!!t.videoCodec,l=l||!!t.audioCodec,mt&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),(r=n[t.bitrate])?r.url.push(t.url):(t.url=[t.url],t.urlId=0,n[t.bitrate]=t,e.push(t)),i&&(i.AUDIO&&(l=!0,X(r||t,"audio",i.AUDIO)),i.SUBTITLES&&X(r||t,"text",i.SUBTITLES))}),a&&l&&(e=e.filter(function(t){return!!t.videoCodec})),e=e.filter(function(t){var i=t.audioCodec,e=t.videoCodec;return(!i||O(i,"audio"))&&(!e||O(e,"video"))}),t.audioTracks&&(s=t.audioTracks.filter(function(t){return!t.audioCodec||O(t.audioCodec,"audio")})).forEach(function(t,i){t.id=i}),e.length>0){i=e[0].bitrate,e.sort(function(t,i){return t.bitrate-i.bitrate}),this._i=e;for(var u=0;u<e.length;u++)if(e[u].bitrate===i){this.ji=u,c.b.log("manifest loaded,"+e.length+" level(s) found, first bitrate:"+i);break}this.hls.trigger(o.a.MANIFEST_PARSED,{levels:e,audioTracks:s,firstLevel:this.ji,stats:t.stats,audio:l,video:a,altAudio:s.some(function(t){return!!t.url})})}else this.hls.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},a.setLevelInternal=function(t){var i=this._i,e=this.hls;if(t>=0&&t<i.length){if(this.clearTimer(),this.currentLevelIndex!==t){c.b.log("switching to level "+t),this.currentLevelIndex=t;var s=i[t];s.level=t,e.trigger(o.a.LEVEL_SWITCHING,s)}var n=i[t],r=n.details;if(!r||r.live){var a=n.urlId;e.trigger(o.a.LEVEL_LOADING,{url:n.url[a],level:t,id:a})}}else e.trigger(o.a.ERROR,{type:h.b.OTHER_ERROR,details:h.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},a.onError=function(t){if(t.fatal)t.type===h.b.NETWORK_ERROR&&this.clearTimer();else{var i,e=!1,s=!1;switch(t.details){case h.a.FRAG_LOAD_ERROR:case h.a.FRAG_LOAD_TIMEOUT:case h.a.KEY_LOAD_ERROR:case h.a.KEY_LOAD_TIMEOUT:i=t.frag.level,s=!0;break;case h.a.LEVEL_LOAD_ERROR:case h.a.LEVEL_LOAD_TIMEOUT:i=t.context.level,e=!0;break;case h.a.REMUX_ALLOC_ERROR:i=t.level,e=!0}void 0!==i&&this.recoverLevel(t,i,e,s)}},a.recoverLevel=function(t,i,e,s){var n,r,h,a=this,o=this.hls.config,l=t.details,u=this._i[i];if(u.loadError++,u.fragmentError=s,e){if(!(this.levelRetryCount+1<=o.levelLoadingMaxRetry))return c.b.error("level controller, cannot recover from "+l+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);r=Math.min(Math.pow(2,this.levelRetryCount)*o.levelLoadingRetryDelay,o.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return a.loadLevel()},r),t.levelRetry=!0,this.levelRetryCount++,c.b.warn("level controller, "+l+", retry in "+r+" ms, current retry count is "+this.levelRetryCount)}(e||s)&&((n=u.url.length)>1&&u.loadError<n?(u.urlId=(u.urlId+1)%n,u.details=void 0,c.b.warn("level controller, "+l+" for level "+i+": switching to redundant URL-id "+u.urlId)):-1===this.manualLevelIndex?(h=0===i?this._i.length-1:i-1,c.b.warn("level controller, "+l+": switch to "+h),this.hls.nextAutoLevel=this.currentLevelIndex=h):s&&(c.b.warn("level controller, "+l+": reload a fragment"),this.currentLevelIndex=null))},a.onFragLoaded=function(t){var i=t.frag;if(void 0!==i&&"main"===i.type){var e=this._i[i.level];void 0!==e&&(e.fragmentError=!1,e.loadError=0,this.levelRetryCount=0)}},a.onLevelLoaded=function(t){var i=this,e=t.level,s=t.details;if(e===this.currentLevelIndex){var n=this._i[e];if(n.fragmentError||(n.loadError=0,this.levelRetryCount=0),s.live){var r=function(t,i,e){var s=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),n=s/2;return t&&i.endSN===t.endSN&&(s=n),e&&(s=Math.max(n,s-(window.performance.now()-e))),Math.round(s)}(n.details,s,t.stats.trequest);c.b.log("live playlist, reload in "+Math.round(r)+" ms"),this.timer=setTimeout(function(){return i.loadLevel()},r)}else this.clearTimer()}},a.onAudioTrackSwitched=function(t){var i=this.hls.audioTracks[t.id].groupId,e=this.hls.levels[this.currentLevelIndex];if(e&&e.audioGroupIds){for(var s=-1,n=0;n<e.audioGroupIds.length;n++)if(e.audioGroupIds[n]===i){s=n;break}s!==e.urlId&&(e.urlId=s,this.startLoad())}},a.loadLevel=function(){if(c.b.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this._i[this.currentLevelIndex];if("object"==typeof t&&t.url.length>0){var i=this.currentLevelIndex,e=t.urlId,s=t.url[e];c.b.log("Attempt loading level index "+i+" with URL-id "+e),this.hls.trigger(o.a.LEVEL_LOADING,{url:s,level:i,id:e})}}},n=s,(r=[{key:"levels",get:function(){return this._i}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var i=this._i;i&&(t=Math.min(t,i.length-1),this.currentLevelIndex===t&&i[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this.Ai&&(this.Ai=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this.ji},set:function(t){this.ji=t}},{key:"startLevel",get:function(){if(void 0===this.Ai){var t=this.hls.config.startLevel;return void 0!==t?t:this.ji}return this.Ai},set:function(t){this.Ai=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}])&&gt(n.prototype,r),s}(u),xt=e(4);function wt(t,i){var e;try{e=new Event("addtrack")}catch(t){(e=document.createEvent("Event")).initEvent("addtrack",!1,!1)}e.track=t,i.dispatchEvent(e)}var kt=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.FRAG_PARSING_METADATA,o.a.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,e.media=void 0,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){u.prototype.destroy.call(this)},n.onMediaAttached=function(t){this.media=t.media,this.media},n.onMediaDetaching=function(){!function(t){if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}(this.id3Track),this.id3Track=void 0,this.media=void 0},n.getID3Track=function(t){for(var i=0;i<t.length;i++){var e=t[i];if("metadata"===e.kind&&"id3"===e.label)return wt(e,this.media),e}return this.media.addTextTrack("metadata","id3")},n.onFragParsingMetadata=function(t){var i=t.frag,e=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var s=this.hls.config.cnxRenderWindow.WebKitDataCue||his.hls.config.cnxRenderWindow.VTTCue||his.hls.config.cnxRenderWindow.TextTrackCue,n=0;n<e.length;n++){var r=xt.a.getID3Frames(e[n].data);if(r){var h=e[n].pts,a=n<e.length-1?e[n+1].pts:i.endPTS;h===a?a+=1e-4:h>a&&(c.b.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),a=h+.25);for(var o=0;o<r.length;o++){var l=r[o];if(!xt.a.isTimeStampFrame(l)){var u=new s(h,a,"");u.value=l,this.id3Track.addCue(u)}}}}},n.onLiveBackBufferReached=function(t){var i=t.bufferEnd,e=this.id3Track;if(e&&e.cues&&e.cues.length){var s=function(t,i){if(i<t[0].endTime)return t[0];if(i>t[t.length-1].endTime)return t[t.length-1];for(var e=0,s=t.length-1;e<=s;){var n=Math.floor((s+e)/2);if(i<t[n].endTime)s=n-1;else{if(!(i>t[n].endTime))return t[n];e=n+1}}return t[e].endTime-i<i-t[s].endTime?t[e]:t[s]}(e.cues,i);if(s)for(;e.cues[0]!==s;)e.removeCue(e.cues[0])}},s}(u),St=function(){function t(t){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}var i=t.prototype;return i.sample=function(t,i){var e=Math.pow(this.alpha_,t);this.estimate_=i*(1-e)+e*this.estimate_,this.totalWeight_+=t},i.getTotalWeight=function(){return this.totalWeight_},i.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),Ot=function(){function t(t,i,e,s){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=t,this.defaultEstimate_=s,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new St(i),this.fast_=new St(e)}var i=t.prototype;return i.sample=function(t,i){var e=(t=Math.max(t,this.minDelayMs_))/1e3,s=8*i/e;this.fast_.sample(e,s),this.slow_.sample(e,s)},i.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},i.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},i.destroy=function(){},t}();function _t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var jt=window.performance,At=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.FRAG_LOADING,o.a.FRAG_LOADED,o.a.FRAG_BUFFERED,o.a.ERROR)||this).lastLoadedFragLevel=0,e.Ti=-1,e.hls=i,e.timer=null,e.bwEstimator=null,e.onCheck=e.Ci.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)),e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n,r,l=s.prototype;return l.destroy=function(){this.clearTimer(),u.prototype.destroy.call(this)},l.onFragLoading=function(t){var i=t.frag;if("main"===i.type&&(this.timer||(this.fragCurrent=i,this.timer=setInterval(this.onCheck,100)),!this.bwEstimator)){var e,s,n=this.hls,r=n.config,h=i.level;n.levels[h].details.live?(e=r.abrEwmaFastLive,s=r.abrEwmaSlowLive):(e=r.abrEwmaFastVoD,s=r.abrEwmaSlowVoD),this.bwEstimator=new Ot(n,s,e,r.abrEwmaDefaultEstimate)}},l.Ci=function(){var t=this.hls,i=t.media,e=this.fragCurrent;if(e){var s=e.loader,n=t.minAutoLevel;if(!s||s.stats&&s.stats.aborted)return c.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this.Ti=-1);var r=s.stats;if(i&&r&&(!i.paused&&0!==i.playbackRate||!i.readyState)&&e.autoLevel&&e.level){var h=jt.now()-r.trequest,a=Math.abs(i.playbackRate);if(h>500*e.duration/a){var l=t.levels,u=Math.max(1,r.bw?r.bw/8:1e3*r.loaded/h),d=l[e.level],f=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,p=r.total?r.total:Math.max(r.loaded,Math.round(e.duration*f/8)),b=i.currentTime,v=(p-r.loaded)/u,g=(U.bufferInfo(i,b,t.config.maxBufferHole).end-b)/a;if(g<2*e.duration/a&&v>g){var m;for(m=e.level-1;m>n;m--){var y=l[m].realBitrate?Math.max(l[m].realBitrate,l[m].bitrate):l[m].bitrate;if(e.duration*y/(6.4*u)<g)break}void 0<v&&(c.b.warn("loading too slow, abort fragment loading and switch to level "+m+":fragLoadedDelay["+m+"]<fragLoadedDelay["+(e.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+v.toFixed(1)+":"+g.toFixed(1)),t.nextLoadLevel=m,this.bwEstimator.sample(h,r.loaded),s.abort(),this.clearTimer(),t.trigger(o.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,stats:r}))}}}}},l.onFragLoaded=function(t){var i=t.frag;if("main"===i.type&&Object(a.a)(i.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=i.level,this.Ti=-1,this.hls.config.abrMaxWithRealBitrate){var e=this.hls.levels[i.level],s=(e.loaded?e.loaded.bytes:0)+t.stats.loaded,n=(e.loaded?e.loaded.duration:0)+t.frag.duration;e.loaded={bytes:s,duration:n},e.realBitrate=Math.round(8*s/n)}if(t.frag.bitrateTest){var r=t.stats;r.tparsed=r.tbuffered=r.tload,this.onFragBuffered(t)}}},l.onFragBuffered=function(t){var i=t.stats,e=t.frag;if(!0!==i.aborted&&"main"===e.type&&Object(a.a)(e.sn)&&(!e.bitrateTest||i.tload===i.tbuffered)){var s=i.tparsed-i.trequest;c.b.log("latency/loading/parsing/append/kbps:"+Math.round(i.tfirst-i.trequest)+"/"+Math.round(i.tload-i.tfirst)+"/"+Math.round(i.tparsed-i.tload)+"/"+Math.round(i.tbuffered-i.tparsed)+"/"+Math.round(8*i.loaded/(i.tbuffered-i.trequest))),this.bwEstimator.sample(s,i.loaded),i.bwEstimate=this.bwEstimator.getEstimate(),e.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}},l.onError=function(t){switch(t.details){case h.a.FRAG_LOAD_ERROR:case h.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},l.clearTimer=function(){clearInterval(this.timer),this.timer=null},l.Ii=function(t,i,e,s,n,r,h,a,o){for(var l=n;l>=s;l--){var u=o[l];if(u){var d=u.details,f=d?d.totalduration/d.fragments.length:i,p=!!d&&d.live,b=void 0;b=l<=t?h*e:a*e;var v=o[l].realBitrate?Math.max(o[l].realBitrate,o[l].bitrate):o[l].bitrate,g=v*f/b;if(c.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(b)+"/"+v+"/"+f+"/"+r+"/"+g),b>v&&(!g||p&&!this.bitrateTestDelay||g<r))return l}}return-1},n=s,(r=[{key:"nextAutoLevel",get:function(){var t=this.Ti,i=this.bwEstimator;if(!(-1===t||i&&i.canEstimate()))return t;var e=this.nextABRAutoLevel;return-1!==t&&(e=Math.min(t,e)),e},set:function(t){this.Ti=t}},{key:"nextABRAutoLevel",get:function(){var t=this.hls,i=t.maxAutoLevel,e=t.levels,s=t.config,n=t.minAutoLevel,r=t.media,h=this.lastLoadedFragLevel,a=this.fragCurrent?this.fragCurrent.duration:0,o=r?r.currentTime:0,l=r&&0!==r.playbackRate?Math.abs(r.playbackRate):1,u=this.bwEstimator?this.bwEstimator.getEstimate():s.abrEwmaDefaultEstimate,d=(U.bufferInfo(r,o,s.maxBufferHole).end-o)/l,f=this.Ii(h,a,u,n,i,d,s.abrBandWidthFactor,s.abrBandWidthUpFactor,e);if(f>=0)return f;c.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=a?Math.min(a,s.maxStarvationDelay):s.maxStarvationDelay,b=s.abrBandWidthFactor,v=s.abrBandWidthUpFactor;if(0===d){var g=this.bitrateTestDelay;g&&(p=(a?Math.min(a,s.maxLoadingDelay):s.maxLoadingDelay)-g,c.b.trace("bitrate test took "+Math.round(1e3*g)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),b=v=1)}return f=this.Ii(h,a,u,n,i,d+p,b,v,e),Math.max(f,0)}}])&&_t(n.prototype,r),s}(u),Tt=z(),Ct=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.MEDIA_ATTACHING,o.a.MEDIA_DETACHING,o.a.MANIFEST_PARSED,o.a.BUFFER_RESET,o.a.BUFFER_APPENDING,o.a.BUFFER_CODECS,o.a.BUFFER_EOS,o.a.BUFFER_FLUSHING,o.a.LEVEL_PTS_UPDATED,o.a.LEVEL_UPDATED)||this).Pi=null,e.Mi=null,e.Ei=10,e.Li=null,e.Ri=null,e.Di=!1,e.Bi=!1,e.config=void 0,e.audioTimestampOffset=void 0,e.bufferCodecEventsExpected=0,e.$i=0,e.media=null,e.mediaSource=null,e.segments=[],e.parent=void 0,e.appending=!1,e.appended=0,e.appendError=0,e.flushBufferCounter=0,e.tracks={},e.pendingTracks={},e.sourceBuffer={},e.flushRange=[],e.Fi=function(){c.b.log("media source opened"),e.hls.trigger(o.a.MEDIA_ATTACHED,{media:e.media});var t=e.mediaSource;t&&t.removeEventListener("sourceopen",e.Fi),e.checkPendingTracks()},e.Vi=function(){c.b.log("media source closed")},e.Ui=function(){c.b.log("media source ended")},e.Ni=function(){if(e.audioTimestampOffset&&e.sourceBuffer.audio){var t=e.sourceBuffer.audio;c.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+e.audioTimestampOffset),t.timestampOffset=e.audioTimestampOffset,delete e.audioTimestampOffset}e.Di&&e.doFlush(),e.Bi&&e.checkEos(),e.appending=!1;var i=e.parent,s=e.segments.reduce(function(t,e){return e.parent===i?t+1:t},0),n={},r=e.sourceBuffer;for(var h in r){var a=r[h];if(!a)throw Error("handling source buffer update end error: source buffer for "+h+" uninitilized and unable to update buffered TimeRanges.");n[h]=a.buffered}e.hls.trigger(o.a.BUFFER_APPENDED,{parent:i,pending:s,timeRanges:n}),e.Di||e.doAppending(),e.updateMediaElementDuration(),0===s&&e.flushLiveBackBuffer()},e.Hi=function(t){c.b.error("sourceBuffer error:",t),e.hls.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.config=i.config,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){u.prototype.destroy.call(this)},n.onLevelPtsUpdated=function(t){var i=t.type,e=this.tracks.audio;if("audio"===i&&e&&"audio/mpeg"===e.container){var s=this.sourceBuffer.audio;if(!s)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(s.timestampOffset-t.start)>.1){var n=s.updating;try{s.abort()}catch(t){c.b.warn("can not abort audio buffer: "+t)}n?this.audioTimestampOffset=t.start:(c.b.warn("change mpeg audio timestamp offset from "+s.timestampOffset+" to "+t.start),s.timestampOffset=t.start)}}},n.onManifestParsed=function(t){this.bufferCodecEventsExpected=this.$i=t.altAudio?2:1,c.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},n.onMediaAttaching=function(t){var i=this.media=t.media;if(i&&Tt){var e=this.mediaSource=new Tt;e.addEventListener("sourceopen",this.Fi),e.addEventListener("sourceended",this.Ui),e.addEventListener("sourceclose",this.Vi),i.src=window.URL.createObjectURL(e),this.Ri=i.src}},n.onMediaDetaching=function(){c.b.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){c.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.Fi),t.removeEventListener("sourceended",this.Ui),t.removeEventListener("sourceclose",this.Vi),this.media&&(this.Ri&&this.hls.config.cnxRenderWindow.URL.revokeObjectURL(this.Ri),this.media.src===this.Ri?(this.media.removeAttribute("src"),this.media.load()):c.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this.Ri=null,this.bufferCodecEventsExpected=this.$i,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(o.a.MEDIA_DETACHED)},n.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,i=this.pendingTracks,e=Object.keys(i).length;(e&&!t||2===e)&&(this.createSourceBuffers(i),this.pendingTracks={},this.doAppending())},n.onBufferReset=function(){var t=this.sourceBuffer;for(var i in t){var e=t[i];try{e&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(e),e.removeEventListener("updateend",this.Ni),e.removeEventListener("error",this.Hi))}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},n.onBufferCodecs=function(t){var i=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach(function(e){i.pendingTracks[e]=t[e]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},n.createSourceBuffers=function(t){var i=this.sourceBuffer,e=this.mediaSource;if(!e)throw Error("createSourceBuffers called when mediaSource was null");for(var s in t)if(!i[s]){var n=t[s];if(!n)throw Error("source buffer exists for track "+s+", however track does not");var r=n.levelCodec||n.codec,a=n.container+";codecs="+r;c.b.log("creating sourceBuffer("+a+")");try{var l=i[s]=e.addSourceBuffer(a);l.addEventListener("updateend",this.Ni),l.addEventListener("error",this.Hi),this.tracks[s]={buffer:l,codec:r,id:n.id,container:n.container,levelCodec:n.levelCodec}}catch(t){c.b.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:a})}}this.hls.trigger(o.a.BUFFER_CREATED,{tracks:this.tracks})},n.onBufferAppending=function(t){this.Di||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},n.onBufferEos=function(t){for(var i in this.sourceBuffer)if(!t.type||t.type===i){var e=this.sourceBuffer[i];e&&!e.ended&&(e.ended=!0,c.b.log(i+" sourceBuffer now EOS"))}this.checkEos()},n.checkEos=function(){var t=this.sourceBuffer,i=this.mediaSource;if(i&&"open"===i.readyState){for(var e in t){var s=t[e];if(s){if(!s.ended)return;if(s.updating)return void(this.Bi=!0)}}c.b.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{i.endOfStream()}catch(t){c.b.warn("exception while calling mediaSource.endOfStream()")}this.Bi=!1}else this.Bi=!1},n.onBufferFlushing=function(t){t.type?this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}):(this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"video"}),this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},n.flushLiveBackBuffer=function(){if(this.Li){var t=this.config.liveBackBufferLength;if(isFinite(t)&&!(t<0))if(this.media)for(var i=this.media.currentTime,e=this.sourceBuffer,s=Object.keys(e),n=i-Math.max(t,this.Ei),r=s.length-1;r>=0;r--){var h=s[r],a=e[h];if(a){var l=a.buffered;l.length>0&&n>l.start(0)&&this.removeBufferRange(h,a,0,n)&&this.hls.trigger(o.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n})}}else c.b.error("flushLiveBackBuffer called without attaching media")}},n.onLevelUpdated=function(t){var i=t.details;i.fragments.length>0&&(this.Mi=i.totalduration+i.fragments[0].start,this.Ei=i.averagetargetduration||i.targetduration||10,this.Li=i.live,this.updateMediaElementDuration())},n.updateMediaElementDuration=function(){var t,i=this.config;if(null!==this.Mi&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var e in this.sourceBuffer){var s=this.sourceBuffer[e];if(s&&!0===s.updating)return}t=this.media.duration,null===this.Pi&&(this.Pi=this.mediaSource.duration),!0===this.Li&&!0===i.liveDurationInfinity?(c.b.log("Media Source duration is set to Infinity"),this.Pi=this.mediaSource.duration=1/0):(this.Mi>this.Pi&&this.Mi>t||!Object(a.a)(t))&&(c.b.log("Updating Media Source duration to "+this.Mi.toFixed(3)),this.Pi=this.mediaSource.duration=this.Mi)}},n.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this.Di=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this.Di=!1;var i=0,e=this.sourceBuffer;try{for(var s in e){var n=e[s];n&&(i+=n.buffered.length)}}catch(t){c.b.error("error while accessing sourceBuffer.buffered")}this.appended=i,this.hls.trigger(o.a.BUFFER_FLUSHED)}},n.doAppending=function(){var t=this.config,i=this.hls,e=this.segments,s=this.sourceBuffer;if(Object.keys(s).length){if(!this.media||this.media.error)return this.segments=[],void c.b.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var n=e.shift();if(n)try{var r=s[n.type];if(!r)return void this.Ni();if(r.updating)return void e.unshift(n);r.ended=!1,this.parent=n.parent,r.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0}catch(s){c.b.error("error while trying to append buffer:"+s.message),e.unshift(n);var a={type:h.b.MEDIA_ERROR,parent:n.parent,details:"",fatal:!1};22===s.code?(this.segments=[],a.details=h.a.BUFFER_FULL_ERROR):(this.appendError++,a.details=h.a.BUFFER_APPEND_ERROR,this.appendError>t.appendErrorMaxRetry&&(c.b.log("fail "+t.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],a.fatal=!0)),i.trigger(o.a.ERROR,a)}}}},n.flushBuffer=function(t,i,e){var s=this.sourceBuffer;if(!Object.keys(s).length)return!0;var n="null";if(this.media&&(n=this.media.currentTime.toFixed(3)),c.b.log("flushBuffer,pos/start/end: "+n+"/"+t+"/"+i),this.flushBufferCounter>=this.appended)return c.b.warn("abort flushing too many retries"),!0;var r=s[e];if(r){if(r.ended=!1,r.updating)return c.b.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(e,r,t,i))return this.flushBufferCounter++,!1}return c.b.log("buffer flushed"),!0},n.removeBufferRange=function(t,i,e,s){try{for(var n=0;n<i.buffered.length;n++){var r=i.buffered.start(n),h=i.buffered.end(n),a=Math.max(r,e),o=Math.min(h,s);if(Math.min(o,h)-a>.5){var l="null";return this.media&&(l=this.media.currentTime.toString()),c.b.log("sb remove "+t+" ["+a+","+o+"], of ["+r+","+h+"], pos:"+l),i.remove(a,o),!0}}}catch(t){c.b.warn("removeBufferRange failed",t)}return!1},s}(u);function It(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var Pt,Mt=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.FPS_DROP_LEVEL_CAPPING,o.a.MEDIA_ATTACHING,o.a.MANIFEST_PARSED,o.a.BUFFER_CODECS,o.a.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,e.firstLevel=null,e.levels=[],e.media=null,e.restrictedLevels=[],e.timer=null,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n,r,h,a=s.prototype;return a.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.stopCapping())},a.onFpsDropLevelCapping=function(t){s.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},a.onMediaAttaching=function(t){this.media=t.media instanceof this.hls.config.cnxRenderWindow.HTMLVideoElement?t.media:null},a.onManifestParsed=function(t){var i=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()},a.onBufferCodecs=function(t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},a.onLevelsUpdated=function(t){this.levels=t.levels},a.onMediaDetaching=function(){this.stopCapping()},a.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var i=this.hls;i.autoLevelCapping=this.getMaxLevel(t-1),i.autoLevelCapping>this.autoLevelCapping&&i.streamController.nextLevelSwitch(),this.autoLevelCapping=i.autoLevelCapping}}},a.getMaxLevel=function(t){var i=this;if(!this.levels)return-1;var e=this.levels.filter(function(e,n){return s.isLevelAllowed(n,i.restrictedLevels)&&n<=t});return s.getMaxLevelByMediaSize(e,this.mediaWidth,this.mediaHeight)},a.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},a.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},s.isLevelAllowed=function(t,i){return void 0===i&&(i=[]),-1===i.indexOf(t)},s.getMaxLevelByMediaSize=function(t,i,e){if(!t||t&&!t.length)return-1;for(var s,n,r=t.length-1,h=0;h<t.length;h+=1){var a=t[h];if((a.width>=i||a.height>=e)&&(s=a,!(n=t[h+1])||s.width!==n.width||s.height!==n.height)){r=h;break}}return r},n=s,h=[{key:"contentScaleFactor",get:function(){return 1}}],(r=[{key:"mediaWidth",get:function(){var t,i=this.media;return i&&(t=i.width||i.clientWidth||i.offsetWidth,t*=s.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t,i=this.media;return i&&(t=i.height||i.clientHeight||i.offsetHeight,t*=s.contentScaleFactor),t}}])&&It(n.prototype,r),h&&It(n,h),s}(u),Et=window.performance,Lt=function(t){var i,e;function s(i){return t.call(this,i,o.a.MEDIA_ATTACHING)||this}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},n.onMediaAttaching=function(t){var i=this.hls.config;i.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof this.hls.config.cnxRenderWindow.HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod))},n.checkFPS=function(t,i,e){var s=Et.now();if(i){if(this.lastTime){var n=s-this.lastTime,r=e-this.lastDroppedFrames,h=i-this.lastDecodedFrames,a=1e3*r/n,l=this.hls;if(l.trigger(o.a.FPS_DROP,{currentDropped:r,currentDecoded:h,totalDroppedFrames:e}),a>0&&r>l.config.fpsDroppedMonitoringThreshold*h){var u=l.currentLevel;c.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=u)&&(u-=1,l.trigger(o.a.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:l.currentLevel}),l.autoLevelCapping=u,l.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=e,this.lastDecodedFrames=i}},n.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var i=t.getVideoPlaybackQuality();this.checkFPS(t,i.totalVideoFrames,i.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},s}(u),Rt=window,Dt=Rt.performance,Bt=Rt.XMLHttpRequest,$t=function(){function t(t){t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}var i=t.prototype;return i.destroy=function(){this.abort(),this.loader=null},i.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},i.load=function(t,i,e){this.context=t,this.config=i,this.callbacks=e,this.stats={trequest:Dt.now(),retry:0},this.retryDelay=i.retryDelay,this.loadInternal()},i.loadInternal=function(){var t,i=this.context;t=this.loader=new Bt;var e=this.stats;e.tfirst=0,e.loaded=0;var s=this.xhrSetup;try{if(s)try{s(t,i.url)}catch(e){t.open("GET",i.url,!0),s(t,i.url)}t.readyState||t.open("GET",i.url,!0)}catch(e){return void this.callbacks.onError({code:t.status,text:e.message},i,t)}i.rangeEnd&&t.setRequestHeader("Range","bytes="+i.rangeStart+"-"+(i.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=i.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},i.readystatechange=function(t){var i=t.currentTarget,e=i.readyState,s=this.stats,n=this.context,r=this.config;if(!s.aborted&&e>=2)if(window.clearTimeout(this.requestTimeout),0===s.tfirst&&(s.tfirst=Math.max(Dt.now(),s.trequest)),4===e){var h=i.status;if(h>=200&&h<300){var a,o;s.tload=Math.max(s.tfirst,Dt.now()),o="arraybuffer"===n.responseType?(a=i.response).byteLength:(a=i.responseText).length,s.loaded=s.total=o;var l={url:i.responseURL,data:a};this.callbacks.onSuccess(l,s,n,i)}else s.retry>=r.maxRetry||h>=400&&h<499?(c.b.error(h+" while loading "+n.url),this.callbacks.onError({code:h,text:i.statusText},n,i)):(c.b.warn(h+" while loading "+n.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,r.maxRetryDelay),s.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),r.timeout)},i.loadtimeout=function(){c.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},i.loadprogress=function(t){var i=t.currentTarget,e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total);var s=this.callbacks.onProgress;s&&s(e,this.context,null,i)},t}();e(6),function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(Pt||(Pt={}));var Ft=function(){var t=window.cnxRenderWindow;return void 0!==t&&t.navigator&&t.navigator.requestMediaKeySystemAccess?t.navigator.requestMediaKeySystemAccess.bind(t.navigator):null}();function Vt(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var Ut=function(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{},s=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.forEach(function(i){Vt(t,i,e[i])})}return t}({cnxRenderWindow:window,autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:$t,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:At,bufferController:Ct,capLevelController:Mt,fpsController:Lt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:Ft},{},{subtitleStreamController:void 0,subtitleTrackController:void 0,timelineController:void 0,audioStreamController:void 0,audioTrackController:void 0,emeController:void 0});function Nt(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function Ht(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qt(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function zt(t,i,e){return i&&qt(t.prototype,i),e&&qt(t,e),t}e.d(i,"default",function(){return Wt});var Wt=function(t){var i,e;function s(i){var e;void 0===i&&(i={}),(e=t.call(this)||this).config=void 0,e.qi=void 0,e.abrController=void 0,e.capLevelController=void 0,e.levelController=void 0,e.streamController=void 0,e.networkControllers=void 0,e.audioTrackController=void 0,e.subtitleTrackController=void 0,e.emeController=void 0,e.coreComponents=void 0,e.media=null,e.url=null;var n=s.DefaultConfig;if((i.liveSyncDurationCount||i.liveMaxLatencyDurationCount)&&(i.liveSyncDuration||i.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");e.config=function(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{},s=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.forEach(function(i){Nt(t,i,e[i])})}return t}({},n,i),window.cnxRenderWindow=e.config.cnxRenderWindow;var r=Ht(e).config;if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(void 0===r.liveSyncDuration||r.liveMaxLatencyDuration<=r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(c.a)(r.debug),e.qi=-1;var h=e.abrController=new r.abrController(Ht(e)),a=new r.bufferController(Ht(e)),o=e.capLevelController=new r.capLevelController(Ht(e)),l=new r.fpsController(Ht(e)),u=new E(Ht(e)),d=new L(Ht(e)),f=new R(Ht(e)),p=new kt(Ht(e)),b=e.levelController=new yt(Ht(e)),v=new F(Ht(e)),g=[b,e.streamController=new vt(Ht(e),v)],m=r.audioStreamController;m&&g.push(new m(Ht(e),v)),e.networkControllers=g;var y=[u,d,f,h,a,o,l,p,v];if(m=r.audioTrackController){var x=new m(Ht(e));e.audioTrackController=x,y.push(x)}if(m=r.subtitleTrackController){var w=new m(Ht(e));e.subtitleTrackController=w,g.push(w)}if(m=r.emeController){var k=new m(Ht(e));e.emeController=k,y.push(k)}return(m=r.subtitleStreamController)&&g.push(new m(Ht(e),v)),(m=r.timelineController)&&y.push(new m(Ht(e))),e.coreComponents=y,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e,s.isSupported=function(){return function(){var t=z();if(!t)return!1;var i=self.SourceBuffer||self.WebKitSourceBuffer,e=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),s=!i||i.prototype&&"function"==typeof i.prototype.appendBuffer&&"function"==typeof i.prototype.remove;return!!e&&!!s}()},zt(s,null,[{key:"version",get:function(){}},{key:"Events",get:function(){return o.a}},{key:"ErrorTypes",get:function(){return h.b}},{key:"ErrorDetails",get:function(){return h.a}},{key:"DefaultConfig",get:function(){return s.defaultConfig?s.defaultConfig:Ut},set:function(t){s.defaultConfig=t}}]);var n=s.prototype;return n.destroy=function(){c.b.log("destroy"),this.trigger(o.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.removeAllListeners(),this.qi=-1},n.attachMedia=function(t){c.b.log("attachMedia"),this.media=t,this.trigger(o.a.MEDIA_ATTACHING,{media:t})},n.detachMedia=function(){c.b.log("detachMedia"),this.trigger(o.a.MEDIA_DETACHING),this.media=null},n.loadSource=function(t){t=r.buildAbsoluteURL(this.config.cnxRenderWindow.location.href,t,{alwaysNormalize:!0}),c.b.log("loadSource:"+t),this.url=t,this.trigger(o.a.MANIFEST_LOADING,{url:t})},n.startLoad=function(t){void 0===t&&(t=-1),c.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(i){i.startLoad(t)})},n.stopLoad=function(){c.b.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},n.swapAudioCodec=function(){c.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},n.recoverMediaError=function(){c.b.log("recoverMediaError");var t=this.media;this.detachMedia(),t&&this.attachMedia(t)},zt(s,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){c.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){c.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){c.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){c.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){c.b.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",set:function(t){var i=!!t;i!==this.config.capLevelToPlayerSize&&(i?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=i)}},{key:"autoLevelCapping",get:function(){return this.qi},set:function(t){c.b.log("set autoLevelCapping:"+t),this.qi=t}},{key:"bandwidthEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,i=this.config.minAutoBitrate,e=t?t.length:0,s=0;s<e;s++)if((t[s].realBitrate?Math.max(t[s].realBitrate,t[s].bitrate):t[s].bitrate)>i)return s;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,i=this.autoLevelCapping;return-1===i&&t&&t.length?t.length-1:i}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var i=this.audioTrackController;i&&(i.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var i=this.subtitleTrackController;i&&(i.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var i=this.subtitleTrackController;i&&(i.subtitleDisplay=t)}}]),s}(G);Wt.defaultConfig=void 0}]).default)},function(t,i,e){"use strict";e.d(i,"a",function(){return s}),e.d(i,"b",function(){return n});const s=JSON.parse('{"version":69602,"domainPrefix":"","logToConsole":true,"logToServer":true,"env":"production"}'),n=!0},function(t,i,e){"use strict";var s;e.d(i,"b",function(){return s}),e.d(i,"a",function(){return n}),function(t){t.SessionRendered="rendered",t.SessionClick="click",t.SessionView="enter_view"}(s||(s={}));const n={UserInteraction:"userInteraction",GeneralUserInteraction:"generalUserInteraction",CanStart:"canStart",Destroy:"destroy"}},function(t,i,e){"use strict";var s,n;e.d(i,"a",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"b",function(){return r}),e.d(i,"c",function(){return h}),function(t){t.Chrome="chrome",t.Firefox="firefox",t.Edge="edge",t.Safari="safari",t.Opera="opera",t.Samsung="samsung",t.Facebook="facebook",t.InternetExplorer="ie"}(s||(s={})),function(t){t.Standard="standard",t.Webkit="webkit",t.Moz="moz",t.Ms="ms",t.O="o"}(n||(n={}));const r=[{name:n.Standard,keys:{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitFullscreenEnabled",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitSupportsFullscreen",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitEnterFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Moz,keys:{fullscreenEnabled:"mozFullScreenEnabled",fullscreenElement:"mozFullScreenElement",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenchange:"mozfullscreenchange",fullscreenerror:"mozfullscreenerror"}},{name:n.Ms,keys:{fullscreenEnabled:"msFullscreenEnabled",fullscreenElement:"msFullscreenElement",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenchange:"MSFullscreenChange",fullscreenerror:"MSFullscreenError"}}];var h;!function(t){t.Self="_self",t.Blank="_blank",t.Parent="_parent",t.Top="_top"}(h||(h={}))},function(t,i,e){"use strict";e.d(i,"b",function(){return s}),e.d(i,"a",function(){return n});const s=Object.assign(Object.assign(Object.assign({Ready:"ready",Removed:"removed",SetupError:"setupError",IsViewable:"isViewable",SizeChanged:"sizeChanged",BrandingClicked:"brandingClicked"},{Play:"play",Pause:"pause",QualityChanged:"qualityChanged",PlayError:"playError",VolumeChanged:"volumeChanged"}),{FullscreenChanged:"fullscreenChanged"}),{AdClick:"adClick",AdPlay:"adPlay",AdPause:"adPause",AdImpression:"adImpression",AdCompleted25:"adCompleted25",AdCompleted50:"adCompleted50",AdCompleted75:"adCompleted75",AdCompleted100:"adCompleted100",AdSkipped:"adSkipped",AdError:"adError",AdStopped:"adStopped",AdCompanion:"adCompanion"});var n;!function(t){t.SetupError="SetupError",t.NoPlayer="NoPlayer",t.RenderError="RenderError"}(n||(n={}))},function(t,i,e){"use strict";var s,n,r=e(48),h=r.Reader,a=r.Writer,o=r.util,c=r.roots.default||(r.roots.default={});c.ProtoElementsRequest=function(){function t(t){if(this.tokens=[],this.queryJsTargeting={},this.reloadedPlayers={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.tokens=o.emptyArray,t.prototype.pageUrl="",t.prototype.userId="",t.prototype.forceLineItemId="",t.prototype.forcePlayerId="",t.prototype.forceMediaId="",t.prototype.forcePlaylistId="",t.prototype.version=0,t.prototype.clientAb0=0,t.prototype.clientAb1=0,t.prototype.customParam1="",t.prototype.customParam2="",t.prototype.customParam3="",t.prototype.forceExploration=!1,t.prototype.es6=!1,t.prototype.bundleId="",t.prototype.forceSourceItemId="",t.prototype.parseDomain=!1,t.prototype.implementationType=0,t.prototype.queryJsTargeting=o.emptyObject,t.prototype.isConsentConnatix=!0,t.prototype.reloadedPlayers=o.emptyObject,t.prototype.skipServingRules=!1,t.prototype.disableTracking=!1,t.prototype.referrer="",t.encode=function(t,i){if(i||(i=a.create()),null!=t.tokens&&t.tokens.length)for(var e=0;e<t.tokens.length;++e)i.uint32(10).string(t.tokens[e]);if(null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&i.uint32(26).string(t.pageUrl),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(42).string(t.userId),null!=t.forceLineItemId&&t.hasOwnProperty("forceLineItemId")&&i.uint32(50).string(t.forceLineItemId),null!=t.forcePlayerId&&t.hasOwnProperty("forcePlayerId")&&i.uint32(58).string(t.forcePlayerId),null!=t.forceMediaId&&t.hasOwnProperty("forceMediaId")&&i.uint32(66).string(t.forceMediaId),null!=t.forcePlaylistId&&t.hasOwnProperty("forcePlaylistId")&&i.uint32(74).string(t.forcePlaylistId),null!=t.version&&t.hasOwnProperty("version")&&i.uint32(80).int32(t.version),null!=t.clientAb0&&t.hasOwnProperty("clientAb0")&&i.uint32(96).int32(t.clientAb0),null!=t.clientAb1&&t.hasOwnProperty("clientAb1")&&i.uint32(104).int32(t.clientAb1),null!=t.customParam1&&t.hasOwnProperty("customParam1")&&i.uint32(130).string(t.customParam1),null!=t.customParam2&&t.hasOwnProperty("customParam2")&&i.uint32(138).string(t.customParam2),null!=t.customParam3&&t.hasOwnProperty("customParam3")&&i.uint32(146).string(t.customParam3),null!=t.forceExploration&&t.hasOwnProperty("forceExploration")&&i.uint32(160).bool(t.forceExploration),null!=t.es6&&t.hasOwnProperty("es6")&&i.uint32(168).bool(t.es6),null!=t.bundleId&&t.hasOwnProperty("bundleId")&&i.uint32(178).string(t.bundleId),null!=t.forceSourceItemId&&t.hasOwnProperty("forceSourceItemId")&&i.uint32(186).string(t.forceSourceItemId),null!=t.parseDomain&&t.hasOwnProperty("parseDomain")&&i.uint32(192).bool(t.parseDomain),null!=t.implementationType&&t.hasOwnProperty("implementationType")&&i.uint32(200).int32(t.implementationType),null!=t.queryJsTargeting&&t.hasOwnProperty("queryJsTargeting")){var s=Object.keys(t.queryJsTargeting);for(e=0;e<s.length;++e)i.uint32(210).fork().uint32(10).string(s[e]).uint32(18).string(t.queryJsTargeting[s[e]]).ldelim()}if(null!=t.isConsentConnatix&&t.hasOwnProperty("isConsentConnatix")&&i.uint32(216).bool(t.isConsentConnatix),null!=t.reloadedPlayers&&t.hasOwnProperty("reloadedPlayers"))for(s=Object.keys(t.reloadedPlayers),e=0;e<s.length;++e)i.uint32(234).fork().uint32(10).string(s[e]).uint32(18).string(t.reloadedPlayers[s[e]]).ldelim();return null!=t.skipServingRules&&t.hasOwnProperty("skipServingRules")&&i.uint32(240).bool(t.skipServingRules),null!=t.disableTracking&&t.hasOwnProperty("disableTracking")&&i.uint32(248).bool(t.disableTracking),null!=t.referrer&&t.hasOwnProperty("referrer")&&i.uint32(258).string(t.referrer),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e,s=void 0===i?t.len:t.pos+i,n=new c.ProtoElementsRequest;t.pos<s;){var r=t.uint32();switch(r>>>3){case 1:n.tokens&&n.tokens.length||(n.tokens=[]),n.tokens.push(t.string());break;case 3:n.pageUrl=t.string();break;case 5:n.userId=t.string();break;case 6:n.forceLineItemId=t.string();break;case 7:n.forcePlayerId=t.string();break;case 8:n.forceMediaId=t.string();break;case 9:n.forcePlaylistId=t.string();break;case 10:n.version=t.int32();break;case 12:n.clientAb0=t.int32();break;case 13:n.clientAb1=t.int32();break;case 16:n.customParam1=t.string();break;case 17:n.customParam2=t.string();break;case 18:n.customParam3=t.string();break;case 20:n.forceExploration=t.bool();break;case 21:n.es6=t.bool();break;case 22:n.bundleId=t.string();break;case 23:n.forceSourceItemId=t.string();break;case 24:n.parseDomain=t.bool();break;case 25:n.implementationType=t.int32();break;case 26:t.skip().pos++,n.queryJsTargeting===o.emptyObject&&(n.queryJsTargeting={}),e=t.string(),t.pos++,n.queryJsTargeting[e]=t.string();break;case 27:n.isConsentConnatix=t.bool();break;case 29:t.skip().pos++,n.reloadedPlayers===o.emptyObject&&(n.reloadedPlayers={}),e=t.string(),t.pos++,n.reloadedPlayers[e]=t.string();break;case 30:n.skipServingRules=t.bool();break;case 31:n.disableTracking=t.bool();break;case 32:n.referrer=t.string();break;default:t.skipType(7&r)}}return n},t.fromObject=function(t){if(t instanceof c.ProtoElementsRequest)return t;var i=new c.ProtoElementsRequest;if(t.tokens){if(!Array.isArray(t.tokens))throw TypeError(".ProtoElementsRequest.tokens: array expected");i.tokens=[];for(var e=0;e<t.tokens.length;++e)i.tokens[e]=String(t.tokens[e])}switch(null!=t.pageUrl&&(i.pageUrl=String(t.pageUrl)),null!=t.userId&&(i.userId=String(t.userId)),null!=t.forceLineItemId&&(i.forceLineItemId=String(t.forceLineItemId)),null!=t.forcePlayerId&&(i.forcePlayerId=String(t.forcePlayerId)),null!=t.forceMediaId&&(i.forceMediaId=String(t.forceMediaId)),null!=t.forcePlaylistId&&(i.forcePlaylistId=String(t.forcePlaylistId)),null!=t.version&&(i.version=0|t.version),null!=t.clientAb0&&(i.clientAb0=0|t.clientAb0),null!=t.clientAb1&&(i.clientAb1=0|t.clientAb1),null!=t.customParam1&&(i.customParam1=String(t.customParam1)),null!=t.customParam2&&(i.customParam2=String(t.customParam2)),null!=t.customParam3&&(i.customParam3=String(t.customParam3)),null!=t.forceExploration&&(i.forceExploration=Boolean(t.forceExploration)),null!=t.es6&&(i.es6=Boolean(t.es6)),null!=t.bundleId&&(i.bundleId=String(t.bundleId)),null!=t.forceSourceItemId&&(i.forceSourceItemId=String(t.forceSourceItemId)),null!=t.parseDomain&&(i.parseDomain=Boolean(t.parseDomain)),t.implementationType){case"Web":case 0:i.implementationType=0;break;case"Amp":case 1:i.implementationType=1}if(t.queryJsTargeting){if("object"!=typeof t.queryJsTargeting)throw TypeError(".ProtoElementsRequest.queryJsTargeting: object expected");i.queryJsTargeting={};var s=Object.keys(t.queryJsTargeting);for(e=0;e<s.length;++e)i.queryJsTargeting[s[e]]=String(t.queryJsTargeting[s[e]])}if(null!=t.isConsentConnatix&&(i.isConsentConnatix=Boolean(t.isConsentConnatix)),t.reloadedPlayers){if("object"!=typeof t.reloadedPlayers)throw TypeError(".ProtoElementsRequest.reloadedPlayers: object expected");i.reloadedPlayers={};for(s=Object.keys(t.reloadedPlayers),e=0;e<s.length;++e)i.reloadedPlayers[s[e]]=String(t.reloadedPlayers[s[e]])}return null!=t.skipServingRules&&(i.skipServingRules=Boolean(t.skipServingRules)),null!=t.disableTracking&&(i.disableTracking=Boolean(t.disableTracking)),null!=t.referrer&&(i.referrer=String(t.referrer)),i},t.toObject=function(t,i){i||(i={});var e,s={};if((i.arrays||i.defaults)&&(s.tokens=[]),(i.objects||i.defaults)&&(s.queryJsTargeting={},s.reloadedPlayers={}),i.defaults&&(s.pageUrl="",s.userId="",s.forceLineItemId="",s.forcePlayerId="",s.forceMediaId="",s.forcePlaylistId="",s.version=0,s.clientAb0=0,s.clientAb1=0,s.customParam1="",s.customParam2="",s.customParam3="",s.forceExploration=!1,s.es6=!1,s.bundleId="",s.forceSourceItemId="",s.parseDomain=!1,s.implementationType=i.enums===String?"Web":0,s.isConsentConnatix=!0,s.skipServingRules=!1,s.disableTracking=!1,s.referrer=""),t.tokens&&t.tokens.length){s.tokens=[];for(var n=0;n<t.tokens.length;++n)s.tokens[n]=t.tokens[n]}if(null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&(s.pageUrl=t.pageUrl),null!=t.userId&&t.hasOwnProperty("userId")&&(s.userId=t.userId),null!=t.forceLineItemId&&t.hasOwnProperty("forceLineItemId")&&(s.forceLineItemId=t.forceLineItemId),null!=t.forcePlayerId&&t.hasOwnProperty("forcePlayerId")&&(s.forcePlayerId=t.forcePlayerId),null!=t.forceMediaId&&t.hasOwnProperty("forceMediaId")&&(s.forceMediaId=t.forceMediaId),null!=t.forcePlaylistId&&t.hasOwnProperty("forcePlaylistId")&&(s.forcePlaylistId=t.forcePlaylistId),null!=t.version&&t.hasOwnProperty("version")&&(s.version=t.version),null!=t.clientAb0&&t.hasOwnProperty("clientAb0")&&(s.clientAb0=t.clientAb0),null!=t.clientAb1&&t.hasOwnProperty("clientAb1")&&(s.clientAb1=t.clientAb1),null!=t.customParam1&&t.hasOwnProperty("customParam1")&&(s.customParam1=t.customParam1),null!=t.customParam2&&t.hasOwnProperty("customParam2")&&(s.customParam2=t.customParam2),null!=t.customParam3&&t.hasOwnProperty("customParam3")&&(s.customParam3=t.customParam3),null!=t.forceExploration&&t.hasOwnProperty("forceExploration")&&(s.forceExploration=t.forceExploration),null!=t.es6&&t.hasOwnProperty("es6")&&(s.es6=t.es6),null!=t.bundleId&&t.hasOwnProperty("bundleId")&&(s.bundleId=t.bundleId),null!=t.forceSourceItemId&&t.hasOwnProperty("forceSourceItemId")&&(s.forceSourceItemId=t.forceSourceItemId),null!=t.parseDomain&&t.hasOwnProperty("parseDomain")&&(s.parseDomain=t.parseDomain),null!=t.implementationType&&t.hasOwnProperty("implementationType")&&(s.implementationType=i.enums===String?c.ProtoImplementationType[t.implementationType]:t.implementationType),t.queryJsTargeting&&(e=Object.keys(t.queryJsTargeting)).length){s.queryJsTargeting={};for(n=0;n<e.length;++n)s.queryJsTargeting[e[n]]=t.queryJsTargeting[e[n]]}if(null!=t.isConsentConnatix&&t.hasOwnProperty("isConsentConnatix")&&(s.isConsentConnatix=t.isConsentConnatix),t.reloadedPlayers&&(e=Object.keys(t.reloadedPlayers)).length){s.reloadedPlayers={};for(n=0;n<e.length;++n)s.reloadedPlayers[e[n]]=t.reloadedPlayers[e[n]]}return null!=t.skipServingRules&&t.hasOwnProperty("skipServingRules")&&(s.skipServingRules=t.skipServingRules),null!=t.disableTracking&&t.hasOwnProperty("disableTracking")&&(s.disableTracking=t.disableTracking),null!=t.referrer&&t.hasOwnProperty("referrer")&&(s.referrer=t.referrer),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoOutstreamInitialRenderingEnum=(s={},(n=Object.create(s))[s[0]="ExpandWithAd"]=0,n[s[1]="FullyRendered"]=1,n),c.ProtoOutstreamEndAdBreakPolicyEnum=function(){var t={},i=Object.create(t);return i[t[0]="Hide"]=0,i[t[1]="HouseScreen"]=1,i}(),c.ProtoGalleryStyleMode=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="Detailed"]=1,i[t[2]="Visual"]=2,i}(),c.ProtoLogoPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="ControlBar"]=1,i[t[2]="BottomRight"]=2,i[t[3]="BottomLeft"]=3,i[t[4]="TopRight"]=4,i[t[5]="TopLeft"]=5,i[t[6]="Center"]=6,i}(),c.ProtoGalleryOrientationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Landscape"]=0,i[t[1]="Portrait"]=1,i}(),c.ProtoElementsTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="InStream"]=0,i[t[1]="OutStream"]=1,i[t[2]="InStreamInApp"]=2,i[t[3]="Live"]=3,i}(),c.ProtoPlayerUpNextMode=function(){var t={},i=Object.create(t);return i[t[0]="Loop"]=0,i[t[1]="Next"]=1,i[t[2]="Stop"]=2,i}(),c.ProtoPlaylistItem=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.mediaId="",t.prototype.revisionNumber=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.mediaId&&t.hasOwnProperty("mediaId")&&i.uint32(10).string(t.mediaId),null!=t.revisionNumber&&t.hasOwnProperty("revisionNumber")&&i.uint32(16).int32(t.revisionNumber),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlaylistItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.mediaId=t.string();break;case 2:s.revisionNumber=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoPlaylistItem)return t;var i=new c.ProtoPlaylistItem;return null!=t.mediaId&&(i.mediaId=String(t.mediaId)),null!=t.revisionNumber&&(i.revisionNumber=0|t.revisionNumber),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.mediaId="",e.revisionNumber=0),null!=t.mediaId&&t.hasOwnProperty("mediaId")&&(e.mediaId=t.mediaId),null!=t.revisionNumber&&t.hasOwnProperty("revisionNumber")&&(e.revisionNumber=t.revisionNumber),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoElements=function(){function t(t){if(this.sharingDestinations=[],this.floatingDeviceMode=[],this.lineItems=[],this.playlist=[],this.adBreaks=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.playerId="",t.prototype.playbackMode=0,t.prototype.soundMode=0,t.prototype.upNextMode=1,t.prototype.containerSelector="",t.prototype.position=0,t.prototype.insertPosition=0,t.prototype.forceInsertPath=!1,t.prototype.renderInFrame=!1,t.prototype.scrollHijackingProtection=!1,t.prototype.preRollBreak=0,t.prototype.postRollBreak=0,t.prototype.midRollNumber=-1,t.prototype.timeBetweenAds=0,t.prototype.minTimeBeforeFirstAd=0,t.prototype.adViewabilityPolicy=0,t.prototype.responsive=!1,t.prototype.ratioWidth=0,t.prototype.ratioHeight=0,t.prototype.fixedWidth=0,t.prototype.fixedHeight=0,t.prototype.casting=!1,t.prototype.sharingDestinations=o.emptyArray,t.prototype.closedCaption=!1,t.prototype.muteWatermark=!1,t.prototype.expandButton=!1,t.prototype.closeButtonMode=0,t.prototype.floatingMode=0,t.prototype.floatingDeviceMode=o.emptyArray,t.prototype.floatingCloseButtonMode=0,t.prototype.floatingFixedPosition=0,t.prototype.floatingPageElement="",t.prototype.floatingUseElementWidth=!1,t.prototype.floatingScrollPosition=0,t.prototype.floatingGutterX=0,t.prototype.floatingGutterY=0,t.prototype.floatingWidth=0,t.prototype.iconsColor="",t.prototype.accentColor="",t.prototype.tooltipTextColor="",t.prototype.tooltipBackgroundColor="",t.prototype.html="",t.prototype.galleryStyle=0,t.prototype.logoPosition=0,t.prototype.logoUrl="",t.prototype.lineItems=o.emptyArray,t.prototype.adPlaybackMode=0,t.prototype.css="",t.prototype.sessionId="",t.prototype.playlistId="",t.prototype.playerType=0,t.prototype.outstreamInitialRendering=0,t.prototype.outstreamHouseBackgroundColor="",t.prototype.outstreamTotalAdBreakLength=0,t.prototype.outstreamEndAdBreakPolicy=0,t.prototype.galleryOrientation=0,t.prototype.playlist=o.emptyArray,t.prototype.floatingAppendLocation=0,t.prototype.floatingYAxisPadding=0,t.prototype.customJsCode="",t.prototype.initializationSettingsJson="",t.prototype.adSkippability=0,t.prototype.skipAdAfter=5,t.prototype.adBreaks=o.emptyArray,t.prototype.amazonTamSlotId="",t.prototype.limitClientSideApiUse=!1,t.encode=function(t,i){if(i||(i=a.create()),null!=t.playerId&&t.hasOwnProperty("playerId")&&i.uint32(10).string(t.playerId),null!=t.playbackMode&&t.hasOwnProperty("playbackMode")&&i.uint32(16).int32(t.playbackMode),null!=t.soundMode&&t.hasOwnProperty("soundMode")&&i.uint32(24).int32(t.soundMode),null!=t.upNextMode&&t.hasOwnProperty("upNextMode")&&i.uint32(32).int32(t.upNextMode),null!=t.containerSelector&&t.hasOwnProperty("containerSelector")&&i.uint32(42).string(t.containerSelector),null!=t.position&&t.hasOwnProperty("position")&&i.uint32(48).int32(t.position),null!=t.insertPosition&&t.hasOwnProperty("insertPosition")&&i.uint32(56).int32(t.insertPosition),null!=t.forceInsertPath&&t.hasOwnProperty("forceInsertPath")&&i.uint32(64).bool(t.forceInsertPath),null!=t.renderInFrame&&t.hasOwnProperty("renderInFrame")&&i.uint32(72).bool(t.renderInFrame),null!=t.scrollHijackingProtection&&t.hasOwnProperty("scrollHijackingProtection")&&i.uint32(80).bool(t.scrollHijackingProtection),null!=t.preRollBreak&&t.hasOwnProperty("preRollBreak")&&i.uint32(88).int32(t.preRollBreak),null!=t.postRollBreak&&t.hasOwnProperty("postRollBreak")&&i.uint32(96).int32(t.postRollBreak),null!=t.midRollNumber&&t.hasOwnProperty("midRollNumber")&&i.uint32(104).int32(t.midRollNumber),null!=t.timeBetweenAds&&t.hasOwnProperty("timeBetweenAds")&&i.uint32(112).int32(t.timeBetweenAds),null!=t.minTimeBeforeFirstAd&&t.hasOwnProperty("minTimeBeforeFirstAd")&&i.uint32(120).int32(t.minTimeBeforeFirstAd),null!=t.adViewabilityPolicy&&t.hasOwnProperty("adViewabilityPolicy")&&i.uint32(128).int32(t.adViewabilityPolicy),null!=t.responsive&&t.hasOwnProperty("responsive")&&i.uint32(144).bool(t.responsive),null!=t.ratioWidth&&t.hasOwnProperty("ratioWidth")&&i.uint32(152).int32(t.ratioWidth),null!=t.ratioHeight&&t.hasOwnProperty("ratioHeight")&&i.uint32(160).int32(t.ratioHeight),null!=t.fixedWidth&&t.hasOwnProperty("fixedWidth")&&i.uint32(168).int32(t.fixedWidth),null!=t.fixedHeight&&t.hasOwnProperty("fixedHeight")&&i.uint32(176).int32(t.fixedHeight),null!=t.casting&&t.hasOwnProperty("casting")&&i.uint32(184).bool(t.casting),null!=t.sharingDestinations&&t.sharingDestinations.length){i.uint32(194).fork();for(var e=0;e<t.sharingDestinations.length;++e)i.int32(t.sharingDestinations[e]);i.ldelim()}if(null!=t.closedCaption&&t.hasOwnProperty("closedCaption")&&i.uint32(200).bool(t.closedCaption),null!=t.muteWatermark&&t.hasOwnProperty("muteWatermark")&&i.uint32(208).bool(t.muteWatermark),null!=t.expandButton&&t.hasOwnProperty("expandButton")&&i.uint32(216).bool(t.expandButton),null!=t.closeButtonMode&&t.hasOwnProperty("closeButtonMode")&&i.uint32(224).int32(t.closeButtonMode),null!=t.floatingMode&&t.hasOwnProperty("floatingMode")&&i.uint32(232).int32(t.floatingMode),null!=t.floatingDeviceMode&&t.floatingDeviceMode.length){i.uint32(242).fork();for(e=0;e<t.floatingDeviceMode.length;++e)i.int32(t.floatingDeviceMode[e]);i.ldelim()}if(null!=t.floatingCloseButtonMode&&t.hasOwnProperty("floatingCloseButtonMode")&&i.uint32(248).int32(t.floatingCloseButtonMode),null!=t.floatingFixedPosition&&t.hasOwnProperty("floatingFixedPosition")&&i.uint32(256).int32(t.floatingFixedPosition),null!=t.floatingPageElement&&t.hasOwnProperty("floatingPageElement")&&i.uint32(266).string(t.floatingPageElement),null!=t.floatingUseElementWidth&&t.hasOwnProperty("floatingUseElementWidth")&&i.uint32(272).bool(t.floatingUseElementWidth),null!=t.floatingScrollPosition&&t.hasOwnProperty("floatingScrollPosition")&&i.uint32(280).int32(t.floatingScrollPosition),null!=t.floatingGutterX&&t.hasOwnProperty("floatingGutterX")&&i.uint32(288).int32(t.floatingGutterX),null!=t.floatingGutterY&&t.hasOwnProperty("floatingGutterY")&&i.uint32(296).int32(t.floatingGutterY),null!=t.floatingWidth&&t.hasOwnProperty("floatingWidth")&&i.uint32(304).int32(t.floatingWidth),null!=t.iconsColor&&t.hasOwnProperty("iconsColor")&&i.uint32(314).string(t.iconsColor),null!=t.accentColor&&t.hasOwnProperty("accentColor")&&i.uint32(322).string(t.accentColor),null!=t.tooltipTextColor&&t.hasOwnProperty("tooltipTextColor")&&i.uint32(330).string(t.tooltipTextColor),null!=t.tooltipBackgroundColor&&t.hasOwnProperty("tooltipBackgroundColor")&&i.uint32(338).string(t.tooltipBackgroundColor),null!=t.html&&t.hasOwnProperty("html")&&i.uint32(346).string(t.html),null!=t.galleryStyle&&t.hasOwnProperty("galleryStyle")&&i.uint32(360).int32(t.galleryStyle),null!=t.logoPosition&&t.hasOwnProperty("logoPosition")&&i.uint32(368).int32(t.logoPosition),null!=t.logoUrl&&t.hasOwnProperty("logoUrl")&&i.uint32(378).string(t.logoUrl),null!=t.lineItems&&t.lineItems.length)for(e=0;e<t.lineItems.length;++e)c.ProtoLineItem.encode(t.lineItems[e],i.uint32(394).fork()).ldelim();if(null!=t.adPlaybackMode&&t.hasOwnProperty("adPlaybackMode")&&i.uint32(400).int32(t.adPlaybackMode),null!=t.css&&t.hasOwnProperty("css")&&i.uint32(410).string(t.css),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&i.uint32(418).string(t.sessionId),null!=t.playlistId&&t.hasOwnProperty("playlistId")&&i.uint32(426).string(t.playlistId),null!=t.playerType&&t.hasOwnProperty("playerType")&&i.uint32(432).int32(t.playerType),null!=t.outstreamInitialRendering&&t.hasOwnProperty("outstreamInitialRendering")&&i.uint32(440).int32(t.outstreamInitialRendering),null!=t.outstreamHouseBackgroundColor&&t.hasOwnProperty("outstreamHouseBackgroundColor")&&i.uint32(450).string(t.outstreamHouseBackgroundColor),null!=t.outstreamTotalAdBreakLength&&t.hasOwnProperty("outstreamTotalAdBreakLength")&&i.uint32(456).int32(t.outstreamTotalAdBreakLength),null!=t.outstreamEndAdBreakPolicy&&t.hasOwnProperty("outstreamEndAdBreakPolicy")&&i.uint32(464).int32(t.outstreamEndAdBreakPolicy),null!=t.galleryOrientation&&t.hasOwnProperty("galleryOrientation")&&i.uint32(472).int32(t.galleryOrientation),null!=t.playlist&&t.playlist.length)for(e=0;e<t.playlist.length;++e)c.ProtoPlaylistItem.encode(t.playlist[e],i.uint32(482).fork()).ldelim();if(null!=t.floatingAppendLocation&&t.hasOwnProperty("floatingAppendLocation")&&i.uint32(488).int32(t.floatingAppendLocation),null!=t.floatingYAxisPadding&&t.hasOwnProperty("floatingYAxisPadding")&&i.uint32(496).int32(t.floatingYAxisPadding),null!=t.customJsCode&&t.hasOwnProperty("customJsCode")&&i.uint32(506).string(t.customJsCode),null!=t.initializationSettingsJson&&t.hasOwnProperty("initializationSettingsJson")&&i.uint32(522).string(t.initializationSettingsJson),null!=t.adSkippability&&t.hasOwnProperty("adSkippability")&&i.uint32(528).int32(t.adSkippability),null!=t.skipAdAfter&&t.hasOwnProperty("skipAdAfter")&&i.uint32(536).int32(t.skipAdAfter),null!=t.adBreaks&&t.adBreaks.length)for(e=0;e<t.adBreaks.length;++e)c.ProtoAdBreak.encode(t.adBreaks[e],i.uint32(546).fork()).ldelim();return null!=t.amazonTamSlotId&&t.hasOwnProperty("amazonTamSlotId")&&i.uint32(554).string(t.amazonTamSlotId),null!=t.limitClientSideApiUse&&t.hasOwnProperty("limitClientSideApiUse")&&i.uint32(568).bool(t.limitClientSideApiUse),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoElements;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.playerId=t.string();break;case 2:s.playbackMode=t.int32();break;case 3:s.soundMode=t.int32();break;case 4:s.upNextMode=t.int32();break;case 5:s.containerSelector=t.string();break;case 6:s.position=t.int32();break;case 7:s.insertPosition=t.int32();break;case 8:s.forceInsertPath=t.bool();break;case 9:s.renderInFrame=t.bool();break;case 10:s.scrollHijackingProtection=t.bool();break;case 11:s.preRollBreak=t.int32();break;case 12:s.postRollBreak=t.int32();break;case 13:s.midRollNumber=t.int32();break;case 14:s.timeBetweenAds=t.int32();break;case 15:s.minTimeBeforeFirstAd=t.int32();break;case 16:s.adViewabilityPolicy=t.int32();break;case 18:s.responsive=t.bool();break;case 19:s.ratioWidth=t.int32();break;case 20:s.ratioHeight=t.int32();break;case 21:s.fixedWidth=t.int32();break;case 22:s.fixedHeight=t.int32();break;case 23:s.casting=t.bool();break;case 24:if(s.sharingDestinations&&s.sharingDestinations.length||(s.sharingDestinations=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.sharingDestinations.push(t.int32());else s.sharingDestinations.push(t.int32());break;case 25:s.closedCaption=t.bool();break;case 26:s.muteWatermark=t.bool();break;case 27:s.expandButton=t.bool();break;case 28:s.closeButtonMode=t.int32();break;case 29:s.floatingMode=t.int32();break;case 30:if(s.floatingDeviceMode&&s.floatingDeviceMode.length||(s.floatingDeviceMode=[]),2==(7&n))for(r=t.uint32()+t.pos;t.pos<r;)s.floatingDeviceMode.push(t.int32());else s.floatingDeviceMode.push(t.int32());break;case 31:s.floatingCloseButtonMode=t.int32();break;case 32:s.floatingFixedPosition=t.int32();break;case 33:s.floatingPageElement=t.string();break;case 34:s.floatingUseElementWidth=t.bool();break;case 35:s.floatingScrollPosition=t.int32();break;case 36:s.floatingGutterX=t.int32();break;case 37:s.floatingGutterY=t.int32();break;case 38:s.floatingWidth=t.int32();break;case 39:s.iconsColor=t.string();break;case 40:s.accentColor=t.string();break;case 41:s.tooltipTextColor=t.string();break;case 42:s.tooltipBackgroundColor=t.string();break;case 43:s.html=t.string();break;case 45:s.galleryStyle=t.int32();break;case 46:s.logoPosition=t.int32();break;case 47:s.logoUrl=t.string();break;case 49:s.lineItems&&s.lineItems.length||(s.lineItems=[]),s.lineItems.push(c.ProtoLineItem.decode(t,t.uint32()));break;case 50:s.adPlaybackMode=t.int32();break;case 51:s.css=t.string();break;case 52:s.sessionId=t.string();break;case 53:s.playlistId=t.string();break;case 54:s.playerType=t.int32();break;case 55:s.outstreamInitialRendering=t.int32();break;case 56:s.outstreamHouseBackgroundColor=t.string();break;case 57:s.outstreamTotalAdBreakLength=t.int32();break;case 58:s.outstreamEndAdBreakPolicy=t.int32();break;case 59:s.galleryOrientation=t.int32();break;case 60:s.playlist&&s.playlist.length||(s.playlist=[]),s.playlist.push(c.ProtoPlaylistItem.decode(t,t.uint32()));break;case 61:s.floatingAppendLocation=t.int32();break;case 62:s.floatingYAxisPadding=t.int32();break;case 63:s.customJsCode=t.string();break;case 65:s.initializationSettingsJson=t.string();break;case 66:s.adSkippability=t.int32();break;case 67:s.skipAdAfter=t.int32();break;case 68:s.adBreaks&&s.adBreaks.length||(s.adBreaks=[]),s.adBreaks.push(c.ProtoAdBreak.decode(t,t.uint32()));break;case 69:s.amazonTamSlotId=t.string();break;case 71:s.limitClientSideApiUse=t.bool();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoElements)return t;var i=new c.ProtoElements;switch(null!=t.playerId&&(i.playerId=String(t.playerId)),t.playbackMode){case"Autoplay":case 0:i.playbackMode=0;break;case"ScrollToPlay":case 1:i.playbackMode=1;break;case"ClickToPlay":case 2:i.playbackMode=2}switch(t.soundMode){case"Mute":case 0:i.soundMode=0;break;case"On":case 1:i.soundMode=1;break;case"Hover":case 2:i.soundMode=2}switch(t.upNextMode){case"Loop":case 0:i.upNextMode=0;break;case"Next":case 1:i.upNextMode=1;break;case"Stop":case 2:i.upNextMode=2}switch(null!=t.containerSelector&&(i.containerSelector=String(t.containerSelector)),null!=t.position&&(i.position=0|t.position),t.insertPosition){case"WithinContainer":case 0:i.insertPosition=0;break;case"BeforeContainer":case 1:i.insertPosition=1;break;case"AfterContainer":case 2:i.insertPosition=2;break;case"ReplaceContainer":case 3:i.insertPosition=3;break;case"HideContainer":case 4:i.insertPosition=4}switch(null!=t.forceInsertPath&&(i.forceInsertPath=Boolean(t.forceInsertPath)),null!=t.renderInFrame&&(i.renderInFrame=Boolean(t.renderInFrame)),null!=t.scrollHijackingProtection&&(i.scrollHijackingProtection=Boolean(t.scrollHijackingProtection)),null!=t.preRollBreak&&(i.preRollBreak=0|t.preRollBreak),null!=t.postRollBreak&&(i.postRollBreak=0|t.postRollBreak),null!=t.midRollNumber&&(i.midRollNumber=0|t.midRollNumber),null!=t.timeBetweenAds&&(i.timeBetweenAds=0|t.timeBetweenAds),null!=t.minTimeBeforeFirstAd&&(i.minTimeBeforeFirstAd=0|t.minTimeBeforeFirstAd),t.adViewabilityPolicy){case"Default":case 0:i.adViewabilityPolicy=0;break;case"Strict":case 1:i.adViewabilityPolicy=1}if(null!=t.responsive&&(i.responsive=Boolean(t.responsive)),null!=t.ratioWidth&&(i.ratioWidth=0|t.ratioWidth),null!=t.ratioHeight&&(i.ratioHeight=0|t.ratioHeight),null!=t.fixedWidth&&(i.fixedWidth=0|t.fixedWidth),null!=t.fixedHeight&&(i.fixedHeight=0|t.fixedHeight),null!=t.casting&&(i.casting=Boolean(t.casting)),t.sharingDestinations){if(!Array.isArray(t.sharingDestinations))throw TypeError(".ProtoElements.sharingDestinations: array expected");i.sharingDestinations=[];for(var e=0;e<t.sharingDestinations.length;++e)switch(t.sharingDestinations[e]){default:case"Facebook":case 0:i.sharingDestinations[e]=0;break;case"Twitter":case 1:i.sharingDestinations[e]=1;break;case"LinkedIn":case 2:i.sharingDestinations[e]=2}}switch(null!=t.closedCaption&&(i.closedCaption=Boolean(t.closedCaption)),null!=t.muteWatermark&&(i.muteWatermark=Boolean(t.muteWatermark)),null!=t.expandButton&&(i.expandButton=Boolean(t.expandButton)),t.closeButtonMode){case"Off":case 0:i.closeButtonMode=0;break;case"OnHover":case 1:i.closeButtonMode=1;break;case"OnHoverAfterFirstAd":case 2:i.closeButtonMode=2;break;case"AlwaysOn":case 3:i.closeButtonMode=3}switch(t.floatingMode){case"Off":case 0:i.floatingMode=0;break;case"OnPageLoad":case 1:i.floatingMode=1;break;case"AfterInView":case 2:i.floatingMode=2;break;case"Always":case 3:i.floatingMode=3}if(t.floatingDeviceMode){if(!Array.isArray(t.floatingDeviceMode))throw TypeError(".ProtoElements.floatingDeviceMode: array expected");i.floatingDeviceMode=[];for(e=0;e<t.floatingDeviceMode.length;++e)switch(t.floatingDeviceMode[e]){default:case"Desktop":case 0:i.floatingDeviceMode[e]=0;break;case"Smartphone":case 1:i.floatingDeviceMode[e]=1;break;case"Tablet":case 2:i.floatingDeviceMode[e]=2;break;case"GameConsole":case 3:i.floatingDeviceMode[e]=3;break;case"SmartTV":case 4:i.floatingDeviceMode[e]=4;break;case"WearableComputer":case 5:i.floatingDeviceMode[e]=5;break;case"PDA":case 6:i.floatingDeviceMode[e]=6;break;case"Unrecognized":case 7:i.floatingDeviceMode[e]=7}}switch(t.floatingCloseButtonMode){case"Off":case 0:i.floatingCloseButtonMode=0;break;case"OnHover":case 1:i.floatingCloseButtonMode=1;break;case"OnHoverAfterFirstAd":case 2:i.floatingCloseButtonMode=2;break;case"AlwaysOn":case 3:i.floatingCloseButtonMode=3}switch(t.floatingFixedPosition){case"Page":case 0:i.floatingFixedPosition=0;break;case"Element":case 1:i.floatingFixedPosition=1}switch(null!=t.floatingPageElement&&(i.floatingPageElement=String(t.floatingPageElement)),null!=t.floatingUseElementWidth&&(i.floatingUseElementWidth=Boolean(t.floatingUseElementWidth)),t.floatingScrollPosition){case"BottomRight":case 0:i.floatingScrollPosition=0;break;case"BottomLeft":case 1:i.floatingScrollPosition=1;break;case"TopRight":case 2:i.floatingScrollPosition=2;break;case"TopLeft":case 3:i.floatingScrollPosition=3}switch(null!=t.floatingGutterX&&(i.floatingGutterX=0|t.floatingGutterX),null!=t.floatingGutterY&&(i.floatingGutterY=0|t.floatingGutterY),null!=t.floatingWidth&&(i.floatingWidth=0|t.floatingWidth),null!=t.iconsColor&&(i.iconsColor=String(t.iconsColor)),null!=t.accentColor&&(i.accentColor=String(t.accentColor)),null!=t.tooltipTextColor&&(i.tooltipTextColor=String(t.tooltipTextColor)),null!=t.tooltipBackgroundColor&&(i.tooltipBackgroundColor=String(t.tooltipBackgroundColor)),null!=t.html&&(i.html=String(t.html)),t.galleryStyle){case"None":case 0:i.galleryStyle=0;break;case"Detailed":case 1:i.galleryStyle=1;break;case"Visual":case 2:i.galleryStyle=2}switch(t.logoPosition){case"None":case 0:i.logoPosition=0;break;case"ControlBar":case 1:i.logoPosition=1;break;case"BottomRight":case 2:i.logoPosition=2;break;case"BottomLeft":case 3:i.logoPosition=3;break;case"TopRight":case 4:i.logoPosition=4;break;case"TopLeft":case 5:i.logoPosition=5;break;case"Center":case 6:i.logoPosition=6}if(null!=t.logoUrl&&(i.logoUrl=String(t.logoUrl)),t.lineItems){if(!Array.isArray(t.lineItems))throw TypeError(".ProtoElements.lineItems: array expected");i.lineItems=[];for(e=0;e<t.lineItems.length;++e){if("object"!=typeof t.lineItems[e])throw TypeError(".ProtoElements.lineItems: object expected");i.lineItems[e]=c.ProtoLineItem.fromObject(t.lineItems[e])}}switch(t.adPlaybackMode){case"Autoplay":case 0:i.adPlaybackMode=0;break;case"ScrollToPlay":case 1:i.adPlaybackMode=1}switch(null!=t.css&&(i.css=String(t.css)),null!=t.sessionId&&(i.sessionId=String(t.sessionId)),null!=t.playlistId&&(i.playlistId=String(t.playlistId)),t.playerType){case"InStream":case 0:i.playerType=0;break;case"OutStream":case 1:i.playerType=1;break;case"InStreamInApp":case 2:i.playerType=2;break;case"Live":case 3:i.playerType=3}switch(t.outstreamInitialRendering){case"ExpandWithAd":case 0:i.outstreamInitialRendering=0;break;case"FullyRendered":case 1:i.outstreamInitialRendering=1}switch(null!=t.outstreamHouseBackgroundColor&&(i.outstreamHouseBackgroundColor=String(t.outstreamHouseBackgroundColor)),null!=t.outstreamTotalAdBreakLength&&(i.outstreamTotalAdBreakLength=0|t.outstreamTotalAdBreakLength),t.outstreamEndAdBreakPolicy){case"Hide":case 0:i.outstreamEndAdBreakPolicy=0;break;case"HouseScreen":case 1:i.outstreamEndAdBreakPolicy=1}switch(t.galleryOrientation){case"Landscape":case 0:i.galleryOrientation=0;break;case"Portrait":case 1:i.galleryOrientation=1}if(t.playlist){if(!Array.isArray(t.playlist))throw TypeError(".ProtoElements.playlist: array expected");i.playlist=[];for(e=0;e<t.playlist.length;++e){if("object"!=typeof t.playlist[e])throw TypeError(".ProtoElements.playlist: object expected");i.playlist[e]=c.ProtoPlaylistItem.fromObject(t.playlist[e])}}switch(t.floatingAppendLocation){case"Above":case 0:i.floatingAppendLocation=0;break;case"Below":case 1:i.floatingAppendLocation=1;break;case"Within":case 2:i.floatingAppendLocation=2}switch(null!=t.floatingYAxisPadding&&(i.floatingYAxisPadding=0|t.floatingYAxisPadding),null!=t.customJsCode&&(i.customJsCode=String(t.customJsCode)),null!=t.initializationSettingsJson&&(i.initializationSettingsJson=String(t.initializationSettingsJson)),t.adSkippability){case"IfLongerThan31Sec":case 0:i.adSkippability=0;break;case"Always":case 1:i.adSkippability=1;break;case"NoRestrictions":case 2:i.adSkippability=2}if(null!=t.skipAdAfter&&(i.skipAdAfter=0|t.skipAdAfter),t.adBreaks){if(!Array.isArray(t.adBreaks))throw TypeError(".ProtoElements.adBreaks: array expected");i.adBreaks=[];for(e=0;e<t.adBreaks.length;++e){if("object"!=typeof t.adBreaks[e])throw TypeError(".ProtoElements.adBreaks: object expected");i.adBreaks[e]=c.ProtoAdBreak.fromObject(t.adBreaks[e])}}return null!=t.amazonTamSlotId&&(i.amazonTamSlotId=String(t.amazonTamSlotId)),null!=t.limitClientSideApiUse&&(i.limitClientSideApiUse=Boolean(t.limitClientSideApiUse)),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.sharingDestinations=[],e.floatingDeviceMode=[],e.lineItems=[],e.playlist=[],e.adBreaks=[]),i.defaults&&(e.playerId="",e.playbackMode=i.enums===String?"Autoplay":0,e.soundMode=i.enums===String?"Mute":0,e.upNextMode=i.enums===String?"Next":1,e.containerSelector="",e.position=0,e.insertPosition=i.enums===String?"WithinContainer":0,e.forceInsertPath=!1,e.renderInFrame=!1,e.scrollHijackingProtection=!1,e.preRollBreak=0,e.postRollBreak=0,e.midRollNumber=-1,e.timeBetweenAds=0,e.minTimeBeforeFirstAd=0,e.adViewabilityPolicy=i.enums===String?"Default":0,e.responsive=!1,e.ratioWidth=0,e.ratioHeight=0,e.fixedWidth=0,e.fixedHeight=0,e.casting=!1,e.closedCaption=!1,e.muteWatermark=!1,e.expandButton=!1,e.closeButtonMode=i.enums===String?"Off":0,e.floatingMode=i.enums===String?"Off":0,e.floatingCloseButtonMode=i.enums===String?"Off":0,e.floatingFixedPosition=i.enums===String?"Page":0,e.floatingPageElement="",e.floatingUseElementWidth=!1,e.floatingScrollPosition=i.enums===String?"BottomRight":0,e.floatingGutterX=0,e.floatingGutterY=0,e.floatingWidth=0,e.iconsColor="",e.accentColor="",e.tooltipTextColor="",e.tooltipBackgroundColor="",e.html="",e.galleryStyle=i.enums===String?"None":0,e.logoPosition=i.enums===String?"None":0,e.logoUrl="",e.adPlaybackMode=i.enums===String?"Autoplay":0,e.css="",e.sessionId="",e.playlistId="",e.playerType=i.enums===String?"InStream":0,e.outstreamInitialRendering=i.enums===String?"ExpandWithAd":0,e.outstreamHouseBackgroundColor="",e.outstreamTotalAdBreakLength=0,e.outstreamEndAdBreakPolicy=i.enums===String?"Hide":0,e.galleryOrientation=i.enums===String?"Landscape":0,e.floatingAppendLocation=i.enums===String?"Above":0,e.floatingYAxisPadding=0,e.customJsCode="",e.initializationSettingsJson="",e.adSkippability=i.enums===String?"IfLongerThan31Sec":0,e.skipAdAfter=5,e.amazonTamSlotId="",e.limitClientSideApiUse=!1),null!=t.playerId&&t.hasOwnProperty("playerId")&&(e.playerId=t.playerId),null!=t.playbackMode&&t.hasOwnProperty("playbackMode")&&(e.playbackMode=i.enums===String?c.ProtoPlayerPlaybackModeEnum[t.playbackMode]:t.playbackMode),null!=t.soundMode&&t.hasOwnProperty("soundMode")&&(e.soundMode=i.enums===String?c.ProtoPlayerSoundMode[t.soundMode]:t.soundMode),null!=t.upNextMode&&t.hasOwnProperty("upNextMode")&&(e.upNextMode=i.enums===String?c.ProtoPlayerUpNextMode[t.upNextMode]:t.upNextMode),null!=t.containerSelector&&t.hasOwnProperty("containerSelector")&&(e.containerSelector=t.containerSelector),null!=t.position&&t.hasOwnProperty("position")&&(e.position=t.position),null!=t.insertPosition&&t.hasOwnProperty("insertPosition")&&(e.insertPosition=i.enums===String?c.ProtoPlayerInsertMode[t.insertPosition]:t.insertPosition),null!=t.forceInsertPath&&t.hasOwnProperty("forceInsertPath")&&(e.forceInsertPath=t.forceInsertPath),null!=t.renderInFrame&&t.hasOwnProperty("renderInFrame")&&(e.renderInFrame=t.renderInFrame),null!=t.scrollHijackingProtection&&t.hasOwnProperty("scrollHijackingProtection")&&(e.scrollHijackingProtection=t.scrollHijackingProtection),null!=t.preRollBreak&&t.hasOwnProperty("preRollBreak")&&(e.preRollBreak=t.preRollBreak),null!=t.postRollBreak&&t.hasOwnProperty("postRollBreak")&&(e.postRollBreak=t.postRollBreak),null!=t.midRollNumber&&t.hasOwnProperty("midRollNumber")&&(e.midRollNumber=t.midRollNumber),null!=t.timeBetweenAds&&t.hasOwnProperty("timeBetweenAds")&&(e.timeBetweenAds=t.timeBetweenAds),null!=t.minTimeBeforeFirstAd&&t.hasOwnProperty("minTimeBeforeFirstAd")&&(e.minTimeBeforeFirstAd=t.minTimeBeforeFirstAd),null!=t.adViewabilityPolicy&&t.hasOwnProperty("adViewabilityPolicy")&&(e.adViewabilityPolicy=i.enums===String?c.ProtoAdViewabilityPolicy[t.adViewabilityPolicy]:t.adViewabilityPolicy),null!=t.responsive&&t.hasOwnProperty("responsive")&&(e.responsive=t.responsive),null!=t.ratioWidth&&t.hasOwnProperty("ratioWidth")&&(e.ratioWidth=t.ratioWidth),null!=t.ratioHeight&&t.hasOwnProperty("ratioHeight")&&(e.ratioHeight=t.ratioHeight),null!=t.fixedWidth&&t.hasOwnProperty("fixedWidth")&&(e.fixedWidth=t.fixedWidth),null!=t.fixedHeight&&t.hasOwnProperty("fixedHeight")&&(e.fixedHeight=t.fixedHeight),null!=t.casting&&t.hasOwnProperty("casting")&&(e.casting=t.casting),t.sharingDestinations&&t.sharingDestinations.length){e.sharingDestinations=[];for(var s=0;s<t.sharingDestinations.length;++s)e.sharingDestinations[s]=i.enums===String?c.ProtoSharingDestination[t.sharingDestinations[s]]:t.sharingDestinations[s]}if(null!=t.closedCaption&&t.hasOwnProperty("closedCaption")&&(e.closedCaption=t.closedCaption),null!=t.muteWatermark&&t.hasOwnProperty("muteWatermark")&&(e.muteWatermark=t.muteWatermark),null!=t.expandButton&&t.hasOwnProperty("expandButton")&&(e.expandButton=t.expandButton),null!=t.closeButtonMode&&t.hasOwnProperty("closeButtonMode")&&(e.closeButtonMode=i.enums===String?c.ProtoPlayerCloseButtonMode[t.closeButtonMode]:t.closeButtonMode),null!=t.floatingMode&&t.hasOwnProperty("floatingMode")&&(e.floatingMode=i.enums===String?c.ProtoPlayerFloatingMode[t.floatingMode]:t.floatingMode),t.floatingDeviceMode&&t.floatingDeviceMode.length){e.floatingDeviceMode=[];for(s=0;s<t.floatingDeviceMode.length;++s)e.floatingDeviceMode[s]=i.enums===String?c.ProtoDeviceType[t.floatingDeviceMode[s]]:t.floatingDeviceMode[s]}if(null!=t.floatingCloseButtonMode&&t.hasOwnProperty("floatingCloseButtonMode")&&(e.floatingCloseButtonMode=i.enums===String?c.ProtoPlayerCloseButtonMode[t.floatingCloseButtonMode]:t.floatingCloseButtonMode),null!=t.floatingFixedPosition&&t.hasOwnProperty("floatingFixedPosition")&&(e.floatingFixedPosition=i.enums===String?c.ProtoFloatingFixedPositionMode[t.floatingFixedPosition]:t.floatingFixedPosition),null!=t.floatingPageElement&&t.hasOwnProperty("floatingPageElement")&&(e.floatingPageElement=t.floatingPageElement),null!=t.floatingUseElementWidth&&t.hasOwnProperty("floatingUseElementWidth")&&(e.floatingUseElementWidth=t.floatingUseElementWidth),null!=t.floatingScrollPosition&&t.hasOwnProperty("floatingScrollPosition")&&(e.floatingScrollPosition=i.enums===String?c.ProtoPositionMode[t.floatingScrollPosition]:t.floatingScrollPosition),null!=t.floatingGutterX&&t.hasOwnProperty("floatingGutterX")&&(e.floatingGutterX=t.floatingGutterX),null!=t.floatingGutterY&&t.hasOwnProperty("floatingGutterY")&&(e.floatingGutterY=t.floatingGutterY),null!=t.floatingWidth&&t.hasOwnProperty("floatingWidth")&&(e.floatingWidth=t.floatingWidth),null!=t.iconsColor&&t.hasOwnProperty("iconsColor")&&(e.iconsColor=t.iconsColor),null!=t.accentColor&&t.hasOwnProperty("accentColor")&&(e.accentColor=t.accentColor),null!=t.tooltipTextColor&&t.hasOwnProperty("tooltipTextColor")&&(e.tooltipTextColor=t.tooltipTextColor),null!=t.tooltipBackgroundColor&&t.hasOwnProperty("tooltipBackgroundColor")&&(e.tooltipBackgroundColor=t.tooltipBackgroundColor),null!=t.html&&t.hasOwnProperty("html")&&(e.html=t.html),null!=t.galleryStyle&&t.hasOwnProperty("galleryStyle")&&(e.galleryStyle=i.enums===String?c.ProtoGalleryStyleMode[t.galleryStyle]:t.galleryStyle),null!=t.logoPosition&&t.hasOwnProperty("logoPosition")&&(e.logoPosition=i.enums===String?c.ProtoLogoPositionMode[t.logoPosition]:t.logoPosition),null!=t.logoUrl&&t.hasOwnProperty("logoUrl")&&(e.logoUrl=t.logoUrl),t.lineItems&&t.lineItems.length){e.lineItems=[];for(s=0;s<t.lineItems.length;++s)e.lineItems[s]=c.ProtoLineItem.toObject(t.lineItems[s],i)}if(null!=t.adPlaybackMode&&t.hasOwnProperty("adPlaybackMode")&&(e.adPlaybackMode=i.enums===String?c.ProtoAdPlaybackMode[t.adPlaybackMode]:t.adPlaybackMode),null!=t.css&&t.hasOwnProperty("css")&&(e.css=t.css),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&(e.sessionId=t.sessionId),null!=t.playlistId&&t.hasOwnProperty("playlistId")&&(e.playlistId=t.playlistId),null!=t.playerType&&t.hasOwnProperty("playerType")&&(e.playerType=i.enums===String?c.ProtoElementsTypeEnum[t.playerType]:t.playerType),null!=t.outstreamInitialRendering&&t.hasOwnProperty("outstreamInitialRendering")&&(e.outstreamInitialRendering=i.enums===String?c.ProtoOutstreamInitialRenderingEnum[t.outstreamInitialRendering]:t.outstreamInitialRendering),null!=t.outstreamHouseBackgroundColor&&t.hasOwnProperty("outstreamHouseBackgroundColor")&&(e.outstreamHouseBackgroundColor=t.outstreamHouseBackgroundColor),null!=t.outstreamTotalAdBreakLength&&t.hasOwnProperty("outstreamTotalAdBreakLength")&&(e.outstreamTotalAdBreakLength=t.outstreamTotalAdBreakLength),null!=t.outstreamEndAdBreakPolicy&&t.hasOwnProperty("outstreamEndAdBreakPolicy")&&(e.outstreamEndAdBreakPolicy=i.enums===String?c.ProtoOutstreamEndAdBreakPolicyEnum[t.outstreamEndAdBreakPolicy]:t.outstreamEndAdBreakPolicy),null!=t.galleryOrientation&&t.hasOwnProperty("galleryOrientation")&&(e.galleryOrientation=i.enums===String?c.ProtoGalleryOrientationEnum[t.galleryOrientation]:t.galleryOrientation),t.playlist&&t.playlist.length){e.playlist=[];for(s=0;s<t.playlist.length;++s)e.playlist[s]=c.ProtoPlaylistItem.toObject(t.playlist[s],i)}if(null!=t.floatingAppendLocation&&t.hasOwnProperty("floatingAppendLocation")&&(e.floatingAppendLocation=i.enums===String?c.ProtoFloatingAppendLocationEnum[t.floatingAppendLocation]:t.floatingAppendLocation),null!=t.floatingYAxisPadding&&t.hasOwnProperty("floatingYAxisPadding")&&(e.floatingYAxisPadding=t.floatingYAxisPadding),null!=t.customJsCode&&t.hasOwnProperty("customJsCode")&&(e.customJsCode=t.customJsCode),null!=t.initializationSettingsJson&&t.hasOwnProperty("initializationSettingsJson")&&(e.initializationSettingsJson=t.initializationSettingsJson),null!=t.adSkippability&&t.hasOwnProperty("adSkippability")&&(e.adSkippability=i.enums===String?c.ProtoPlayerAdSkippability[t.adSkippability]:t.adSkippability),null!=t.skipAdAfter&&t.hasOwnProperty("skipAdAfter")&&(e.skipAdAfter=t.skipAdAfter),t.adBreaks&&t.adBreaks.length){e.adBreaks=[];for(s=0;s<t.adBreaks.length;++s)e.adBreaks[s]=c.ProtoAdBreak.toObject(t.adBreaks[s],i)}return null!=t.amazonTamSlotId&&t.hasOwnProperty("amazonTamSlotId")&&(e.amazonTamSlotId=t.amazonTamSlotId),null!=t.limitClientSideApiUse&&t.hasOwnProperty("limitClientSideApiUse")&&(e.limitClientSideApiUse=t.limitClientSideApiUse),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoElementsResponse=function(){function t(t){if(this.players=[],this.lineItems=[],this.cookieSyncUrls={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.errorMessage="",t.prototype.players=o.emptyArray,t.prototype.browser=null,t.prototype.geoLocation=null,t.prototype.lineItems=o.emptyArray,t.prototype.cookieSyncUrls=o.emptyObject,t.prototype.explorationMode=!1,t.prototype.supplyChain=null,t.prototype.secondLevelDomain="",t.prototype.geneticAlgoInformation=null,t.prototype.userInformation=null,t.prototype.serverAb0=0,t.prototype.serverAb1=0,t.prototype.isSeoTraffic=!1,t.encode=function(t,i){if(i||(i=a.create()),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&i.uint32(10).string(t.errorMessage),null!=t.players&&t.players.length)for(var e=0;e<t.players.length;++e)c.ProtoElements.encode(t.players[e],i.uint32(82).fork()).ldelim();if(null!=t.browser&&t.hasOwnProperty("browser")&&c.Browser.encode(t.browser,i.uint32(90).fork()).ldelim(),null!=t.geoLocation&&t.hasOwnProperty("geoLocation")&&c.GeoLocation.encode(t.geoLocation,i.uint32(98).fork()).ldelim(),null!=t.lineItems&&t.lineItems.length)for(e=0;e<t.lineItems.length;++e)c.ProtoLineItem.encode(t.lineItems[e],i.uint32(106).fork()).ldelim();if(null!=t.cookieSyncUrls&&t.hasOwnProperty("cookieSyncUrls")){var s=Object.keys(t.cookieSyncUrls);for(e=0;e<s.length;++e)i.uint32(114).fork().uint32(8).int32(s[e]).uint32(18).string(t.cookieSyncUrls[s[e]]).ldelim()}return null!=t.explorationMode&&t.hasOwnProperty("explorationMode")&&i.uint32(120).bool(t.explorationMode),null!=t.supplyChain&&t.hasOwnProperty("supplyChain")&&c.ProtoSupplyChain.encode(t.supplyChain,i.uint32(138).fork()).ldelim(),null!=t.secondLevelDomain&&t.hasOwnProperty("secondLevelDomain")&&i.uint32(146).string(t.secondLevelDomain),null!=t.geneticAlgoInformation&&t.hasOwnProperty("geneticAlgoInformation")&&c.ProtoGeneticAlgoInformation.encode(t.geneticAlgoInformation,i.uint32(154).fork()).ldelim(),null!=t.userInformation&&t.hasOwnProperty("userInformation")&&c.ProtoUserInformation.encode(t.userInformation,i.uint32(162).fork()).ldelim(),null!=t.serverAb0&&t.hasOwnProperty("serverAb0")&&i.uint32(168).int32(t.serverAb0),null!=t.serverAb1&&t.hasOwnProperty("serverAb1")&&i.uint32(176).int32(t.serverAb1),null!=t.isSeoTraffic&&t.hasOwnProperty("isSeoTraffic")&&i.uint32(184).bool(t.isSeoTraffic),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e,s=void 0===i?t.len:t.pos+i,n=new c.ProtoElementsResponse;t.pos<s;){var r=t.uint32();switch(r>>>3){case 1:n.errorMessage=t.string();break;case 10:n.players&&n.players.length||(n.players=[]),n.players.push(c.ProtoElements.decode(t,t.uint32()));break;case 11:n.browser=c.Browser.decode(t,t.uint32());break;case 12:n.geoLocation=c.GeoLocation.decode(t,t.uint32());break;case 13:n.lineItems&&n.lineItems.length||(n.lineItems=[]),n.lineItems.push(c.ProtoLineItem.decode(t,t.uint32()));break;case 14:t.skip().pos++,n.cookieSyncUrls===o.emptyObject&&(n.cookieSyncUrls={}),e=t.int32(),t.pos++,n.cookieSyncUrls[e]=t.string();break;case 15:n.explorationMode=t.bool();break;case 17:n.supplyChain=c.ProtoSupplyChain.decode(t,t.uint32());break;case 18:n.secondLevelDomain=t.string();break;case 19:n.geneticAlgoInformation=c.ProtoGeneticAlgoInformation.decode(t,t.uint32());break;case 20:n.userInformation=c.ProtoUserInformation.decode(t,t.uint32());break;case 21:n.serverAb0=t.int32();break;case 22:n.serverAb1=t.int32();break;case 23:n.isSeoTraffic=t.bool();break;default:t.skipType(7&r)}}return n},t.fromObject=function(t){if(t instanceof c.ProtoElementsResponse)return t;var i=new c.ProtoElementsResponse;if(null!=t.errorMessage&&(i.errorMessage=String(t.errorMessage)),t.players){if(!Array.isArray(t.players))throw TypeError(".ProtoElementsResponse.players: array expected");i.players=[];for(var e=0;e<t.players.length;++e){if("object"!=typeof t.players[e])throw TypeError(".ProtoElementsResponse.players: object expected");i.players[e]=c.ProtoElements.fromObject(t.players[e])}}if(null!=t.browser){if("object"!=typeof t.browser)throw TypeError(".ProtoElementsResponse.browser: object expected");i.browser=c.Browser.fromObject(t.browser)}if(null!=t.geoLocation){if("object"!=typeof t.geoLocation)throw TypeError(".ProtoElementsResponse.geoLocation: object expected");i.geoLocation=c.GeoLocation.fromObject(t.geoLocation)}if(t.lineItems){if(!Array.isArray(t.lineItems))throw TypeError(".ProtoElementsResponse.lineItems: array expected");i.lineItems=[];for(e=0;e<t.lineItems.length;++e){if("object"!=typeof t.lineItems[e])throw TypeError(".ProtoElementsResponse.lineItems: object expected");i.lineItems[e]=c.ProtoLineItem.fromObject(t.lineItems[e])}}if(t.cookieSyncUrls){if("object"!=typeof t.cookieSyncUrls)throw TypeError(".ProtoElementsResponse.cookieSyncUrls: object expected");i.cookieSyncUrls={};var s=Object.keys(t.cookieSyncUrls);for(e=0;e<s.length;++e)i.cookieSyncUrls[s[e]]=String(t.cookieSyncUrls[s[e]])}if(null!=t.explorationMode&&(i.explorationMode=Boolean(t.explorationMode)),null!=t.supplyChain){if("object"!=typeof t.supplyChain)throw TypeError(".ProtoElementsResponse.supplyChain: object expected");i.supplyChain=c.ProtoSupplyChain.fromObject(t.supplyChain)}if(null!=t.secondLevelDomain&&(i.secondLevelDomain=String(t.secondLevelDomain)),null!=t.geneticAlgoInformation){if("object"!=typeof t.geneticAlgoInformation)throw TypeError(".ProtoElementsResponse.geneticAlgoInformation: object expected");i.geneticAlgoInformation=c.ProtoGeneticAlgoInformation.fromObject(t.geneticAlgoInformation)}if(null!=t.userInformation){if("object"!=typeof t.userInformation)throw TypeError(".ProtoElementsResponse.userInformation: object expected");i.userInformation=c.ProtoUserInformation.fromObject(t.userInformation)}return null!=t.serverAb0&&(i.serverAb0=0|t.serverAb0),null!=t.serverAb1&&(i.serverAb1=0|t.serverAb1),null!=t.isSeoTraffic&&(i.isSeoTraffic=Boolean(t.isSeoTraffic)),i},t.toObject=function(t,i){i||(i={});var e,s={};if((i.arrays||i.defaults)&&(s.players=[],s.lineItems=[]),(i.objects||i.defaults)&&(s.cookieSyncUrls={}),i.defaults&&(s.errorMessage="",s.browser=null,s.geoLocation=null,s.explorationMode=!1,s.supplyChain=null,s.secondLevelDomain="",s.geneticAlgoInformation=null,s.userInformation=null,s.serverAb0=0,s.serverAb1=0,s.isSeoTraffic=!1),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&(s.errorMessage=t.errorMessage),t.players&&t.players.length){s.players=[];for(var n=0;n<t.players.length;++n)s.players[n]=c.ProtoElements.toObject(t.players[n],i)}if(null!=t.browser&&t.hasOwnProperty("browser")&&(s.browser=c.Browser.toObject(t.browser,i)),null!=t.geoLocation&&t.hasOwnProperty("geoLocation")&&(s.geoLocation=c.GeoLocation.toObject(t.geoLocation,i)),t.lineItems&&t.lineItems.length){s.lineItems=[];for(n=0;n<t.lineItems.length;++n)s.lineItems[n]=c.ProtoLineItem.toObject(t.lineItems[n],i)}if(t.cookieSyncUrls&&(e=Object.keys(t.cookieSyncUrls)).length){s.cookieSyncUrls={};for(n=0;n<e.length;++n)s.cookieSyncUrls[e[n]]=t.cookieSyncUrls[e[n]]}return null!=t.explorationMode&&t.hasOwnProperty("explorationMode")&&(s.explorationMode=t.explorationMode),null!=t.supplyChain&&t.hasOwnProperty("supplyChain")&&(s.supplyChain=c.ProtoSupplyChain.toObject(t.supplyChain,i)),null!=t.secondLevelDomain&&t.hasOwnProperty("secondLevelDomain")&&(s.secondLevelDomain=t.secondLevelDomain),null!=t.geneticAlgoInformation&&t.hasOwnProperty("geneticAlgoInformation")&&(s.geneticAlgoInformation=c.ProtoGeneticAlgoInformation.toObject(t.geneticAlgoInformation,i)),null!=t.userInformation&&t.hasOwnProperty("userInformation")&&(s.userInformation=c.ProtoUserInformation.toObject(t.userInformation,i)),null!=t.serverAb0&&t.hasOwnProperty("serverAb0")&&(s.serverAb0=t.serverAb0),null!=t.serverAb1&&t.hasOwnProperty("serverAb1")&&(s.serverAb1=t.serverAb1),null!=t.isSeoTraffic&&t.hasOwnProperty("isSeoTraffic")&&(s.isSeoTraffic=t.isSeoTraffic),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoCreativeTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="ThirdParty"]=0,i[t[1]="MediaFile"]=1,i[t[2]="Rtb"]=2,i[t[3]="External"]=3,i[t[4]="HeaderBidder"]=4,i[t[7]="Tam"]=7,i}(),c.ProtoResetCapTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="TimeCapping"]=0,i[t[1]="ContentCapping"]=1,i[t[2]="OpportunityCapping"]=2,i}(),c.ProtoAdSlotsEnum=function(){var t={},i=Object.create(t);return i[t[0]="PreRoll"]=0,i[t[1]="MidRoll"]=1,i[t[2]="PostRoll"]=2,i}(),c.ProtoLineItmePriority=function(){var t={},i=Object.create(t);return i[t[0]="House"]=0,i[t[1]="Default"]=1,i[t[2]="Preferred"]=2,i[t[3]="Top"]=3,i}(),c.ProtoAdSkipMode=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="Never"]=2,i[t[3]="NotAplicable"]=3,i}(),c.ProtoAdType=function(){var t={},i=Object.create(t);return i[t[0]="Video"]=0,i[t[1]="Overlay"]=1,i}(),c.ProtoChoiceCriteriaEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="All"]=1,i[t[2]="SingleAd"]=2,i[t[3]="AdPod"]=3,i}(),c.ProtoLineItemTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdSlotTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="SpecificSlots"]=1,i[t[2]="Interval"]=2,i}(),c.ProtoLineItemAdBreakTargeting=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adRollType=0,t.prototype.adBreakTypeEnum=1,t.encode=function(t,i){return i||(i=a.create()),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&i.uint32(8).int32(t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&i.uint32(16).int32(t.adBreakTypeEnum),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adRollType=t.int32();break;case 2:s.adBreakTypeEnum=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdBreakTargeting)return t;var i=new c.ProtoLineItemAdBreakTargeting;switch(t.adRollType){case"None":case 0:i.adRollType=0;break;case"PreRoll":case 1:i.adRollType=1;break;case"MidRoll":case 2:i.adRollType=2;break;case"PostRoll":case 3:i.adRollType=3}switch(t.adBreakTypeEnum){case"All":case 1:i.adBreakTypeEnum=1;break;case"SingleAd":case 2:i.adBreakTypeEnum=2;break;case"AdPod":case 3:i.adBreakTypeEnum=3}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.adRollType=i.enums===String?"None":0,e.adBreakTypeEnum=i.enums===String?"All":1),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&(e.adRollType=i.enums===String?c.ProtoAdBreakTypeEnum[t.adRollType]:t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&(e.adBreakTypeEnum=i.enums===String?c.ProtoLineItemAdBreakTypeEnum[t.adBreakTypeEnum]:t.adBreakTypeEnum),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItemAdPodTargeting=function(){function t(t){if(this.adSlotPositions=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.targetingType=0,t.prototype.adSlotTargetingType=1,t.prototype.adSlotPositions=o.emptyArray,t.encode=function(t,i){if(i||(i=a.create()),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&i.uint32(8).int32(t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&i.uint32(16).int32(t.adSlotTargetingType),null!=t.adSlotPositions&&t.adSlotPositions.length){i.uint32(26).fork();for(var e=0;e<t.adSlotPositions.length;++e)i.int32(t.adSlotPositions[e]);i.ldelim()}return i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdPodTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.targetingType=t.int32();break;case 2:s.adSlotTargetingType=t.int32();break;case 3:if(s.adSlotPositions&&s.adSlotPositions.length||(s.adSlotPositions=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.adSlotPositions.push(t.int32());else s.adSlotPositions.push(t.int32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdPodTargeting)return t;var i=new c.ProtoLineItemAdPodTargeting;switch(t.targetingType){case"Only":case 0:i.targetingType=0;break;case"Except":case 1:i.targetingType=1}switch(t.adSlotTargetingType){case"SpecificSlots":case 1:i.adSlotTargetingType=1;break;case"Interval":case 2:i.adSlotTargetingType=2}if(t.adSlotPositions){if(!Array.isArray(t.adSlotPositions))throw TypeError(".ProtoLineItemAdPodTargeting.adSlotPositions: array expected");i.adSlotPositions=[];for(var e=0;e<t.adSlotPositions.length;++e)i.adSlotPositions[e]=0|t.adSlotPositions[e]}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adSlotPositions=[]),i.defaults&&(e.targetingType=i.enums===String?"Only":0,e.adSlotTargetingType=i.enums===String?"SpecificSlots":1),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&(e.targetingType=i.enums===String?c.ProtoLineItemTargetingTypeEnum[t.targetingType]:t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&(e.adSlotTargetingType=i.enums===String?c.ProtoLineItemAdSlotTargetingTypeEnum[t.adSlotTargetingType]:t.adSlotTargetingType),t.adSlotPositions&&t.adSlotPositions.length){e.adSlotPositions=[];for(var s=0;s<t.adSlotPositions.length;++s)e.adSlotPositions[s]=t.adSlotPositions[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItemAdBreakSettings=function(){function t(t){if(this.adBreakTargeting=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adBreakTargeting=o.emptyArray,t.prototype.adPodTargeting=null,t.encode=function(t,i){if(i||(i=a.create()),null!=t.adBreakTargeting&&t.adBreakTargeting.length)for(var e=0;e<t.adBreakTargeting.length;++e)c.ProtoLineItemAdBreakTargeting.encode(t.adBreakTargeting[e],i.uint32(10).fork()).ldelim();return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&c.ProtoLineItemAdPodTargeting.encode(t.adPodTargeting,i.uint32(18).fork()).ldelim(),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakSettings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adBreakTargeting&&s.adBreakTargeting.length||(s.adBreakTargeting=[]),s.adBreakTargeting.push(c.ProtoLineItemAdBreakTargeting.decode(t,t.uint32()));break;case 2:s.adPodTargeting=c.ProtoLineItemAdPodTargeting.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdBreakSettings)return t;var i=new c.ProtoLineItemAdBreakSettings;if(t.adBreakTargeting){if(!Array.isArray(t.adBreakTargeting))throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: array expected");i.adBreakTargeting=[];for(var e=0;e<t.adBreakTargeting.length;++e){if("object"!=typeof t.adBreakTargeting[e])throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: object expected");i.adBreakTargeting[e]=c.ProtoLineItemAdBreakTargeting.fromObject(t.adBreakTargeting[e])}}if(null!=t.adPodTargeting){if("object"!=typeof t.adPodTargeting)throw TypeError(".ProtoLineItemAdBreakSettings.adPodTargeting: object expected");i.adPodTargeting=c.ProtoLineItemAdPodTargeting.fromObject(t.adPodTargeting)}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adBreakTargeting=[]),i.defaults&&(e.adPodTargeting=null),t.adBreakTargeting&&t.adBreakTargeting.length){e.adBreakTargeting=[];for(var s=0;s<t.adBreakTargeting.length;++s)e.adBreakTargeting[s]=c.ProtoLineItemAdBreakTargeting.toObject(t.adBreakTargeting[s],i)}return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&(e.adPodTargeting=c.ProtoLineItemAdPodTargeting.toObject(t.adPodTargeting,i)),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItem=function(){function t(t){if(this.trackers=[],this.renditions=[],this.floorPrices=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.adTag="",t.prototype.creativeType=0,t.prototype.yoScore=0,t.prototype.sound=!1,t.prototype.viewability=!1,t.prototype.impressionTimeout=0,t.prototype.vendorId="",t.prototype.trackers=o.emptyArray,t.prototype.duration=0,t.prototype.renditions=o.emptyArray,t.prototype.mediaCreativeId="",t.prototype.ignoreFilledRequests=!1,t.prototype.requestCap=3,t.prototype.impressionCap=0,t.prototype.successRate=0,t.prototype.lineItemPriority=0,t.prototype.headerBidderBids="",t.prototype.headerBidderTimeout=0,t.prototype.mediaCreativeClickUrl="",t.prototype.resetRequestsCapTime=60,t.prototype.resetImpressionsCapTime=60,t.prototype.resetCapType=0,t.prototype.creativeHlsFileName="",t.prototype.timeBetweenRequests=0,t.prototype.skipMode=0,t.prototype.mediaIdTargeting=null,t.prototype.mediaKeywordsTargeting=null,t.prototype.mediaLanguageTargeting=null,t.prototype.adType=0,t.prototype.overlayTime=30,t.prototype.floorPrice=0,t.prototype.adBreakSettings=null,t.prototype.floorPrices=o.emptyArray,t.prototype.playerSize="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.publisherLineItemId=t.string();break;case 2:s.advertiserLineItemId=t.string();break;case 3:s.adTag=t.string();break;case 4:s.creativeType=t.int32();break;case 5:s.yoScore=t.double();break;case 6:s.sound=t.bool();break;case 7:s.viewability=t.bool();break;case 9:s.impressionTimeout=t.int32();break;case 10:s.vendorId=t.string();break;case 12:s.trackers&&s.trackers.length||(s.trackers=[]),s.trackers.push(c.CreativeTrackerViewModel.decode(t,t.uint32()));break;case 13:s.duration=t.int32();break;case 14:s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(c.ProtoRendition.decode(t,t.uint32()));break;case 15:s.mediaCreativeId=t.string();break;case 16:s.ignoreFilledRequests=t.bool();break;case 17:s.requestCap=t.int32();break;case 18:s.impressionCap=t.int32();break;case 19:s.successRate=t.double();break;case 20:s.lineItemPriority=t.int32();break;case 21:s.headerBidderBids=t.string();break;case 22:s.headerBidderTimeout=t.int32();break;case 23:s.mediaCreativeClickUrl=t.string();break;case 24:s.resetRequestsCapTime=t.int32();break;case 25:s.resetImpressionsCapTime=t.int32();break;case 26:s.resetCapType=t.int32();break;case 27:s.creativeHlsFileName=t.string();break;case 28:s.timeBetweenRequests=t.int32();break;case 29:s.skipMode=t.int32();break;case 30:s.mediaIdTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 31:s.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 32:s.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 33:s.adType=t.int32();break;case 34:s.overlayTime=t.int32();break;case 35:s.floorPrice=t.double();break;case 36:s.adBreakSettings=c.ProtoLineItemAdBreakSettings.decode(t,t.uint32());break;case 38:if(s.floorPrices&&s.floorPrices.length||(s.floorPrices=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.floorPrices.push(t.double());else s.floorPrices.push(t.double());break;case 101:s.playerSize=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.trackers=[],e.renditions=[],e.floorPrices=[]),i.defaults&&(e.publisherLineItemId="",e.advertiserLineItemId="",e.adTag="",e.creativeType=i.enums===String?"ThirdParty":0,e.yoScore=0,e.sound=!1,e.viewability=!1,e.impressionTimeout=0,e.vendorId="",e.duration=0,e.mediaCreativeId="",e.ignoreFilledRequests=!1,e.requestCap=3,e.impressionCap=0,e.successRate=0,e.lineItemPriority=i.enums===String?"House":0,e.headerBidderBids="",e.headerBidderTimeout=0,e.mediaCreativeClickUrl="",e.resetRequestsCapTime=60,e.resetImpressionsCapTime=60,e.resetCapType=i.enums===String?"TimeCapping":0,e.creativeHlsFileName="",e.timeBetweenRequests=0,e.skipMode=i.enums===String?"IfLongerThan31Sec":0,e.mediaIdTargeting=null,e.mediaKeywordsTargeting=null,e.mediaLanguageTargeting=null,e.adType=i.enums===String?"Video":0,e.overlayTime=30,e.floorPrice=0,e.adBreakSettings=null,e.playerSize=""),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&(e.publisherLineItemId=t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&(e.advertiserLineItemId=t.advertiserLineItemId),null!=t.adTag&&t.hasOwnProperty("adTag")&&(e.adTag=t.adTag),null!=t.creativeType&&t.hasOwnProperty("creativeType")&&(e.creativeType=i.enums===String?c.ProtoCreativeTypeEnum[t.creativeType]:t.creativeType),null!=t.yoScore&&t.hasOwnProperty("yoScore")&&(e.yoScore=i.json&&!isFinite(t.yoScore)?String(t.yoScore):t.yoScore),null!=t.sound&&t.hasOwnProperty("sound")&&(e.sound=t.sound),null!=t.viewability&&t.hasOwnProperty("viewability")&&(e.viewability=t.viewability),null!=t.impressionTimeout&&t.hasOwnProperty("impressionTimeout")&&(e.impressionTimeout=t.impressionTimeout),null!=t.vendorId&&t.hasOwnProperty("vendorId")&&(e.vendorId=t.vendorId),t.trackers&&t.trackers.length){e.trackers=[];for(var s=0;s<t.trackers.length;++s)e.trackers[s]=c.CreativeTrackerViewModel.toObject(t.trackers[s],i)}if(null!=t.duration&&t.hasOwnProperty("duration")&&(e.duration=t.duration),t.renditions&&t.renditions.length){e.renditions=[];for(s=0;s<t.renditions.length;++s)e.renditions[s]=c.ProtoRendition.toObject(t.renditions[s],i)}if(null!=t.mediaCreativeId&&t.hasOwnProperty("mediaCreativeId")&&(e.mediaCreativeId=t.mediaCreativeId),null!=t.ignoreFilledRequests&&t.hasOwnProperty("ignoreFilledRequests")&&(e.ignoreFilledRequests=t.ignoreFilledRequests),null!=t.requestCap&&t.hasOwnProperty("requestCap")&&(e.requestCap=t.requestCap),null!=t.impressionCap&&t.hasOwnProperty("impressionCap")&&(e.impressionCap=t.impressionCap),null!=t.successRate&&t.hasOwnProperty("successRate")&&(e.successRate=i.json&&!isFinite(t.successRate)?String(t.successRate):t.successRate),null!=t.lineItemPriority&&t.hasOwnProperty("lineItemPriority")&&(e.lineItemPriority=i.enums===String?c.ProtoLineItmePriority[t.lineItemPriority]:t.lineItemPriority),null!=t.headerBidderBids&&t.hasOwnProperty("headerBidderBids")&&(e.headerBidderBids=t.headerBidderBids),null!=t.headerBidderTimeout&&t.hasOwnProperty("headerBidderTimeout")&&(e.headerBidderTimeout=t.headerBidderTimeout),null!=t.mediaCreativeClickUrl&&t.hasOwnProperty("mediaCreativeClickUrl")&&(e.mediaCreativeClickUrl=t.mediaCreativeClickUrl),null!=t.resetRequestsCapTime&&t.hasOwnProperty("resetRequestsCapTime")&&(e.resetRequestsCapTime=t.resetRequestsCapTime),null!=t.resetImpressionsCapTime&&t.hasOwnProperty("resetImpressionsCapTime")&&(e.resetImpressionsCapTime=t.resetImpressionsCapTime),null!=t.resetCapType&&t.hasOwnProperty("resetCapType")&&(e.resetCapType=i.enums===String?c.ProtoResetCapTypeEnum[t.resetCapType]:t.resetCapType),null!=t.creativeHlsFileName&&t.hasOwnProperty("creativeHlsFileName")&&(e.creativeHlsFileName=t.creativeHlsFileName),null!=t.timeBetweenRequests&&t.hasOwnProperty("timeBetweenRequests")&&(e.timeBetweenRequests=t.timeBetweenRequests),null!=t.skipMode&&t.hasOwnProperty("skipMode")&&(e.skipMode=i.enums===String?c.ProtoAdSkipMode[t.skipMode]:t.skipMode),null!=t.mediaIdTargeting&&t.hasOwnProperty("mediaIdTargeting")&&(e.mediaIdTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaIdTargeting,i)),null!=t.mediaKeywordsTargeting&&t.hasOwnProperty("mediaKeywordsTargeting")&&(e.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaKeywordsTargeting,i)),null!=t.mediaLanguageTargeting&&t.hasOwnProperty("mediaLanguageTargeting")&&(e.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaLanguageTargeting,i)),null!=t.adType&&t.hasOwnProperty("adType")&&(e.adType=i.enums===String?c.ProtoAdType[t.adType]:t.adType),null!=t.overlayTime&&t.hasOwnProperty("overlayTime")&&(e.overlayTime=t.overlayTime),null!=t.floorPrice&&t.hasOwnProperty("floorPrice")&&(e.floorPrice=i.json&&!isFinite(t.floorPrice)?String(t.floorPrice):t.floorPrice),null!=t.adBreakSettings&&t.hasOwnProperty("adBreakSettings")&&(e.adBreakSettings=c.ProtoLineItemAdBreakSettings.toObject(t.adBreakSettings,i)),t.floorPrices&&t.floorPrices.length){e.floorPrices=[];for(s=0;s<t.floorPrices.length;++s)e.floorPrices[s]=i.json&&!isFinite(t.floorPrices[s])?String(t.floorPrices[s]):t.floorPrices[s]}return null!=t.playerSize&&t.hasOwnProperty("playerSize")&&(e.playerSize=t.playerSize),e},t}(),c.ProtoTargetingChoiceModel=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.choiceCriteria=0,t.prototype.items=o.emptyArray,t.encode=function(t,i){if(i||(i=a.create()),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&i.uint32(8).int32(t.choiceCriteria),null!=t.items&&t.items.length)for(var e=0;e<t.items.length;++e)i.uint32(18).string(t.items[e]);return i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTargetingChoiceModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.choiceCriteria=t.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(t.string());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoTargetingChoiceModel)return t;var i=new c.ProtoTargetingChoiceModel;switch(t.choiceCriteria){case"Only":case 0:i.choiceCriteria=0;break;case"Except":case 1:i.choiceCriteria=1}if(t.items){if(!Array.isArray(t.items))throw TypeError(".ProtoTargetingChoiceModel.items: array expected");i.items=[];for(var e=0;e<t.items.length;++e)i.items[e]=String(t.items[e])}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.choiceCriteria=i.enums===String?"Only":0),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&(e.choiceCriteria=i.enums===String?c.ProtoChoiceCriteriaEnum[t.choiceCriteria]:t.choiceCriteria),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=t.items[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTrackerType=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Javascript"]=1,i}(),c.ProtoTrackerTriggerType=function(){var t={},i=Object.create(t);return i[t[0]="Impression"]=0,i[t[1]="Complete25Pc"]=1,i[t[2]="Complete50Pc"]=2,i[t[3]="Complete75Pc"]=3,i[t[4]="ViewCompletion"]=4,i[t[5]="VideoClick"]=5,i[t[6]="Pause"]=6,i[t[7]="Resume"]=7,i[t[8]="Mute"]=8,i[t[9]="Unmute"]=9,i}(),c.CreativeTrackerViewModel=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.Type=0,t.prototype.Trigger=0,t.prototype.url="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.CreativeTrackerViewModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.Type=t.int32();break;case 2:s.Trigger=t.int32();break;case 3:s.url=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.Type=i.enums===String?"Image":0,e.Trigger=i.enums===String?"Impression":0,e.url=""),null!=t.Type&&t.hasOwnProperty("Type")&&(e.Type=i.enums===String?c.ProtoTrackerType[t.Type]:t.Type),null!=t.Trigger&&t.hasOwnProperty("Trigger")&&(e.Trigger=i.enums===String?c.ProtoTrackerTriggerType[t.Trigger]:t.Trigger),null!=t.url&&t.hasOwnProperty("url")&&(e.url=t.url),e},t}(),c.ProtoRendition=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.height=0,t.prototype.codec="",t.prototype.file="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRendition;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.height=t.int32();break;case 2:s.codec=t.string();break;case 3:s.file=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.height=0,e.codec="",e.file=""),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.codec&&t.hasOwnProperty("codec")&&(e.codec=t.codec),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),e},t}(),c.ProtoPlayerPlaybackModeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i[t[2]="ClickToPlay"]=2,i}(),c.ProtoPlayerCloseButtonMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnHover"]=1,i[t[2]="OnHoverAfterFirstAd"]=2,i[t[3]="AlwaysOn"]=3,i}(),c.ProtoPlayerFloatingMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnPageLoad"]=1,i[t[2]="AfterInView"]=2,i[t[3]="Always"]=3,i}(),c.ProtoPlayerSoundMode=function(){var t={},i=Object.create(t);return i[t[0]="Mute"]=0,i[t[1]="On"]=1,i[t[2]="Hover"]=2,i}(),c.ProtoPlayerInsertMode=function(){var t={},i=Object.create(t);return i[t[0]="WithinContainer"]=0,i[t[1]="BeforeContainer"]=1,i[t[2]="AfterContainer"]=2,i[t[3]="ReplaceContainer"]=3,i[t[4]="HideContainer"]=4,i}(),c.ProtoAdViewabilityPolicy=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoSharingDestination=function(){var t={},i=Object.create(t);return i[t[0]="Facebook"]=0,i[t[1]="Twitter"]=1,i[t[2]="LinkedIn"]=2,i}(),c.ProtoFloatingFixedPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="Page"]=0,i[t[1]="Element"]=1,i}(),c.ProtoPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="BottomRight"]=0,i[t[1]="BottomLeft"]=1,i[t[2]="TopRight"]=2,i[t[3]="TopLeft"]=3,i}(),c.ProtoAdPlaybackMode=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i}(),c.ProtoFloatingAppendLocationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Above"]=0,i[t[1]="Below"]=1,i[t[2]="Within"]=2,i}(),c.ProtoPlayerAdSkippability=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="NoRestrictions"]=2,i}(),c.ProtoImplementationType=function(){var t={},i=Object.create(t);return i[t[0]="Web"]=0,i[t[1]="Amp"]=1,i}(),c.ProtoAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="PreRoll"]=1,i[t[2]="MidRoll"]=2,i[t[3]="PostRoll"]=3,i}(),c.ProtoAdSlotAdTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="SingleAd"]=0,i[t[1]="AdPod"]=1,i}(),c.ProtoDeviceType=function(){var t={},i=Object.create(t);return i[t[0]="Desktop"]=0,i[t[1]="Smartphone"]=1,i[t[2]="Tablet"]=2,i[t[3]="GameConsole"]=3,i[t[4]="SmartTV"]=4,i[t[5]="WearableComputer"]=5,i[t[6]="PDA"]=6,i[t[7]="Unrecognized"]=7,i}(),c.Browser=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.browserVersion="",t.prototype.browserType="",t.prototype.osCode="",t.prototype.device=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&i.uint32(10).string(t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&i.uint32(18).string(t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&i.uint32(26).string(t.osCode),null!=t.device&&t.hasOwnProperty("device")&&i.uint32(32).int32(t.device),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.Browser;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.browserVersion=t.string();break;case 2:s.browserType=t.string();break;case 3:s.osCode=t.string();break;case 4:s.device=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.Browser)return t;var i=new c.Browser;switch(null!=t.browserVersion&&(i.browserVersion=String(t.browserVersion)),null!=t.browserType&&(i.browserType=String(t.browserType)),null!=t.osCode&&(i.osCode=String(t.osCode)),t.device){case"Desktop":case 0:i.device=0;break;case"Smartphone":case 1:i.device=1;break;case"Tablet":case 2:i.device=2;break;case"GameConsole":case 3:i.device=3;break;case"SmartTV":case 4:i.device=4;break;case"WearableComputer":case 5:i.device=5;break;case"PDA":case 6:i.device=6;break;case"Unrecognized":case 7:i.device=7}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.browserVersion="",e.browserType="",e.osCode="",e.device=i.enums===String?"Desktop":0),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&(e.browserVersion=t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&(e.browserType=t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&(e.osCode=t.osCode),null!=t.device&&t.hasOwnProperty("device")&&(e.device=i.enums===String?c.ProtoDeviceType[t.device]:t.device),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.GeoLocation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.countryGeoId=0,t.prototype.cityId=0,t.prototype.subdivisionId=0,t.prototype.dmaId=0,t.prototype.ip="",t.prototype.lat=0,t.prototype.lon=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&i.uint32(8).int32(t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&i.uint32(16).int32(t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&i.uint32(24).int32(t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&i.uint32(32).int32(t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&i.uint32(42).string(t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&i.uint32(49).double(t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&i.uint32(57).double(t.lon),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.GeoLocation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.countryGeoId=t.int32();break;case 2:s.cityId=t.int32();break;case 3:s.subdivisionId=t.int32();break;case 4:s.dmaId=t.int32();break;case 5:s.ip=t.string();break;case 6:s.lat=t.double();break;case 7:s.lon=t.double();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.GeoLocation)return t;var i=new c.GeoLocation;return null!=t.countryGeoId&&(i.countryGeoId=0|t.countryGeoId),null!=t.cityId&&(i.cityId=0|t.cityId),null!=t.subdivisionId&&(i.subdivisionId=0|t.subdivisionId),null!=t.dmaId&&(i.dmaId=0|t.dmaId),null!=t.ip&&(i.ip=String(t.ip)),null!=t.lat&&(i.lat=Number(t.lat)),null!=t.lon&&(i.lon=Number(t.lon)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.countryGeoId=0,e.cityId=0,e.subdivisionId=0,e.dmaId=0,e.ip="",e.lat=0,e.lon=0),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&(e.countryGeoId=t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&(e.cityId=t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&(e.subdivisionId=t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&(e.dmaId=t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&(e.ip=t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&(e.lat=i.json&&!isFinite(t.lat)?String(t.lat):t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&(e.lon=i.json&&!isFinite(t.lon)?String(t.lon):t.lon),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoSupplyChain=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.businessDomain="",t.prototype.supplyChainId="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSupplyChain;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.businessDomain=t.string();break;case 3:s.supplyChainId=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.businessDomain="",e.supplyChainId=""),null!=t.businessDomain&&t.hasOwnProperty("businessDomain")&&(e.businessDomain=t.businessDomain),null!=t.supplyChainId&&t.hasOwnProperty("supplyChainId")&&(e.supplyChainId=t.supplyChainId),e},t}(),c.ProtoGeneticAlgoInformation=function(){function t(t){if(this.rtbAuctionPattern=[],this.resetRequestCapByTimeRatios=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.generationId=0,t.prototype.individualId=0,t.prototype.rtbRequestResetTime=60,t.prototype.rtbAuctionPattern=o.emptyArray,t.prototype.resetRequestCapByTimeRatios=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoGeneticAlgoInformation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.generationId=t.int32();break;case 2:s.individualId=t.int32();break;case 3:s.rtbRequestResetTime=t.int32();break;case 4:if(s.rtbAuctionPattern&&s.rtbAuctionPattern.length||(s.rtbAuctionPattern=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.rtbAuctionPattern.push(t.int32());else s.rtbAuctionPattern.push(t.int32());break;case 5:s.resetRequestCapByTimeRatios&&s.resetRequestCapByTimeRatios.length||(s.resetRequestCapByTimeRatios=[]),s.resetRequestCapByTimeRatios.push(c.ProtoResetRequestCapByTimeRatio.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.rtbAuctionPattern=[],e.resetRequestCapByTimeRatios=[]),i.defaults&&(e.generationId=0,e.individualId=0,e.rtbRequestResetTime=60),null!=t.generationId&&t.hasOwnProperty("generationId")&&(e.generationId=t.generationId),null!=t.individualId&&t.hasOwnProperty("individualId")&&(e.individualId=t.individualId),null!=t.rtbRequestResetTime&&t.hasOwnProperty("rtbRequestResetTime")&&(e.rtbRequestResetTime=t.rtbRequestResetTime),t.rtbAuctionPattern&&t.rtbAuctionPattern.length){e.rtbAuctionPattern=[];for(var s=0;s<t.rtbAuctionPattern.length;++s)e.rtbAuctionPattern[s]=t.rtbAuctionPattern[s]}if(t.resetRequestCapByTimeRatios&&t.resetRequestCapByTimeRatios.length){e.resetRequestCapByTimeRatios=[];for(s=0;s<t.resetRequestCapByTimeRatios.length;++s)e.resetRequestCapByTimeRatios[s]=c.ProtoResetRequestCapByTimeRatio.toObject(t.resetRequestCapByTimeRatios[s],i)}return e},t}(),c.ProtoResetRequestCapByTimeRatio=function(){function t(t){if(this.range=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.range=o.emptyArray,t.prototype.ratio=1,t.encode=function(t,i){if(i||(i=a.create()),null!=t.range&&t.range.length){i.uint32(10).fork();for(var e=0;e<t.range.length;++e)i.double(t.range[e]);i.ldelim()}return null!=t.ratio&&t.hasOwnProperty("ratio")&&i.uint32(17).double(t.ratio),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoResetRequestCapByTimeRatio;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:if(s.range&&s.range.length||(s.range=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.range.push(t.double());else s.range.push(t.double());break;case 2:s.ratio=t.double();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoResetRequestCapByTimeRatio)return t;var i=new c.ProtoResetRequestCapByTimeRatio;if(t.range){if(!Array.isArray(t.range))throw TypeError(".ProtoResetRequestCapByTimeRatio.range: array expected");i.range=[];for(var e=0;e<t.range.length;++e)i.range[e]=Number(t.range[e])}return null!=t.ratio&&(i.ratio=Number(t.ratio)),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.range=[]),i.defaults&&(e.ratio=1),t.range&&t.range.length){e.range=[];for(var s=0;s<t.range.length;++s)e.range[s]=i.json&&!isFinite(t.range[s])?String(t.range[s]):t.range[s]}return null!=t.ratio&&t.hasOwnProperty("ratio")&&(e.ratio=i.json&&!isFinite(t.ratio)?String(t.ratio):t.ratio),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoUserInformation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.userId="",t.prototype.lookupId="",t.prototype.lookupResponseCode=0,t.prototype.callFraudSensor=!1,t.prototype.publisherAdsTxt="",t.encode=function(t,i){return i||(i=a.create()),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(10).string(t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&i.uint32(26).string(t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&i.uint32(32).int32(t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&i.uint32(40).bool(t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&i.uint32(50).string(t.publisherAdsTxt),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoUserInformation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.userId=t.string();break;case 3:s.lookupId=t.string();break;case 4:s.lookupResponseCode=t.int32();break;case 5:s.callFraudSensor=t.bool();break;case 6:s.publisherAdsTxt=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoUserInformation)return t;var i=new c.ProtoUserInformation;return null!=t.userId&&(i.userId=String(t.userId)),null!=t.lookupId&&(i.lookupId=String(t.lookupId)),null!=t.lookupResponseCode&&(i.lookupResponseCode=0|t.lookupResponseCode),null!=t.callFraudSensor&&(i.callFraudSensor=Boolean(t.callFraudSensor)),null!=t.publisherAdsTxt&&(i.publisherAdsTxt=String(t.publisherAdsTxt)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.userId="",e.lookupId="",e.lookupResponseCode=0,e.callFraudSensor=!1,e.publisherAdsTxt=""),null!=t.userId&&t.hasOwnProperty("userId")&&(e.userId=t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&(e.lookupId=t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&(e.lookupResponseCode=t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&(e.callFraudSensor=t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&(e.publisherAdsTxt=t.publisherAdsTxt),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoAdBreak=function(){function t(t){if(this.types=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.types=o.emptyArray,t.prototype.maxAdPodDuration=0,t.prototype.maxAdSlotDuration=180,t.prototype.numberOfAdSlots=1,t.encode=function(t,i){if(i||(i=a.create()),null!=t.types&&t.types.length){i.uint32(10).fork();for(var e=0;e<t.types.length;++e)i.int32(t.types[e]);i.ldelim()}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&i.uint32(16).int32(t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&i.uint32(24).int32(t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&i.uint32(32).int32(t.numberOfAdSlots),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoAdBreak;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:if(s.types&&s.types.length||(s.types=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.types.push(t.int32());else s.types.push(t.int32());break;case 2:s.maxAdPodDuration=t.int32();break;case 3:s.maxAdSlotDuration=t.int32();break;case 4:s.numberOfAdSlots=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoAdBreak)return t;var i=new c.ProtoAdBreak;if(t.types){if(!Array.isArray(t.types))throw TypeError(".ProtoAdBreak.types: array expected");i.types=[];for(var e=0;e<t.types.length;++e)switch(t.types[e]){default:case"None":case 0:i.types[e]=0;break;case"PreRoll":case 1:i.types[e]=1;break;case"MidRoll":case 2:i.types[e]=2;break;case"PostRoll":case 3:i.types[e]=3}}return null!=t.maxAdPodDuration&&(i.maxAdPodDuration=0|t.maxAdPodDuration),null!=t.maxAdSlotDuration&&(i.maxAdSlotDuration=0|t.maxAdSlotDuration),null!=t.numberOfAdSlots&&(i.numberOfAdSlots=0|t.numberOfAdSlots),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.types=[]),i.defaults&&(e.maxAdPodDuration=0,e.maxAdSlotDuration=180,e.numberOfAdSlots=1),t.types&&t.types.length){e.types=[];for(var s=0;s<t.types.length;++s)e.types[s]=i.enums===String?c.ProtoAdBreakTypeEnum[t.types[s]]:t.types[s]}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&(e.maxAdPodDuration=t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&(e.maxAdSlotDuration=t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&(e.numberOfAdSlots=t.numberOfAdSlots),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t.exports=c},function(t,i,e){"use strict";e.d(i,"a",function(){return s});var s,n=e(5),r=e(0),h=e(8),a=e(2),o=e(14);!function(t){const i=3e4;function e(t,e){const s=function({requestUrl:t,requestType:e="POST",contentType:s="",responseType:n="",withCredentials:r=!1}){const h=new XMLHttpRequest;return h.open(e,t,!0),s.length>0&&h.setRequestHeader("Content-Type",s),n.length>0&&(h.responseType=n),h.timeout=i,h.withCredentials=r,h}(t);return new Promise((t,i)=>{s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200===s.status)t(s.response);else{let t="";""!==s.responseType&&"text"!==s.responseType||(t=` Response: ${s.responseText||""}.`),i(new Error(`Request fail status:${s.status}.${t} text:${s.statusText}`))}},s.ontimeout=()=>{i(new Error(`Request timeout status:${s.status}`))},s.send(e)})}function s(t,i,e){try{const s=t.fromObject(i);return t.encode(s).finish()}catch(t){throw Object(n.a)({throttle:10,sendMaxLog:!0,exception:e,level:r.ProtoLoggingLevelEnum.FATAL,callStack:JSON.stringify(i),message:"Protobuf_encode"}),Error()}}function c(t,i,s="POST",h,a){return function(t,i,e){return new Promise((s,h)=>{i.then(i=>{if(t){let a=null;try{a=t.toObject(t.decode(new Uint8Array(i)),{defaults:!0,arrays:!0,objects:!0})}catch(t){Object(n.a)({exception:`${e}__${t.message}`,message:"Protobuf_decode",callStack:t.stack,level:r.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0,throttle:100})}a&&a.errorMessage&&"500"===a.errorMessage&&h(a.errorMessage),s(a)}}).catch(t=>{h(t)})})}(t,e({requestUrl:i,requestType:s,withCredentials:a,contentType:"POST"===s?"multipart/form-data":"",responseType:"arraybuffer"},h),i)}t.fetchXMLRequest=function(t,i=!0){const s=e({requestUrl:t,requestType:"GET",withCredentials:i});return new Promise((t,i)=>{s.then(i=>{t(i)}).catch(t=>{i(t)})})},t.sendProtoRequest=function({ProtoResponse:t,ProtoRequest:i,requestData:e,endpoint:l,requestType:u,withCredentials:d,queryParams:f}){const p=e?s(i,e,l):null;return c(t,l=function(t,i){return Object(a.f)(i)?(Object.keys(i).forEach(e=>t=Object(o.f)(t,e,i[e])),t):t}(l,f),u,p,d).catch(t=>{Object(h.l)([95,5])&&Object(n.a)({message:"XhrUtils_ProtoRequest_fail",exception:l,callStack:`${t}`,level:r.ProtoLoggingLevelEnum.INFO});const i=Object(a.h)(t)?`sendProtoRequest_error_${t}`:"sendProtoRequest_error";throw new Error(i)})},t.sendProtoBeaconRequest=function({ProtoRequest:t,requestData:i,endpoint:e}){const n=i?s(t,i,e):null;return navigator.sendBeacon(e,n)},t.trackPixel=function(t){try{(new Image).src=t}catch(t){Object(n.a)({message:"Xhr_trackPixel",exception:t.message,callStack:t.stack,level:r.ProtoLoggingLevelEnum.FATAL})}}}(s||(s={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return r}),e.d(i,"c",function(){return h}),e.d(i,"b",function(){return a});var s=e(8),n=e(2);const r=t=>Object.keys(t).map(i=>t[i]);function h(t){for(const i in t)t.hasOwnProperty(i)&&"string"==typeof t[i]&&(t[i]=`%22${encodeURIComponent(t[i])}%22`);return JSON.stringify(t).cnx_replaceAll('"',"")}function a(t,i){if(!Object(n.f)(t)||!Object(n.f)(i))return!1;const e=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(i);return e.length===r.length&&e.every(e=>Object(s.i)(t[e],i[e]))}},function(t,i,e){"use strict";e.d(i,"j",function(){return s}),e.d(i,"k",function(){return n}),e.d(i,"i",function(){return r}),e.d(i,"d",function(){return h}),e.d(i,"g",function(){return a}),e.d(i,"h",function(){return o}),e.d(i,"b",function(){return c}),e.d(i,"f",function(){return l}),e.d(i,"c",function(){return u}),e.d(i,"e",function(){return d}),e.d(i,"a",function(){return f});const s="1.3.1-iab2040",n="1.3.5-iab2135",r="Connatix";var h,a,o,c,l,u,d,f;!function(t){t.Generic="generic",t.Video="video"}(h||(h={})),function(t){t.Click="click",t.InvitationAccept="invitationAccept"}(a||(a={})),function(t){t.PreRoll="preroll",t.MidRoll="midroll",t.PostRoll="postroll",t.Standalone="standalone"}(o||(o={})),function(t){t.SessionStart="sessionStart",t.SessionError="sessionError",t.SessionFinish="sessionFinish"}(c||(c={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.BeginToRender="beginToRender"}(l||(l={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.Video="video"}(u||(u={})),function(t){t.sessionError="sessionError",t.geometryChange="geometryChange"}(d||(d={})),function(t){t.backgrounded="backgrounded",t.notFound="notFound"}(f||(f={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return r}),e.d(i,"e",function(){return h}),e.d(i,"b",function(){return a}),e.d(i,"g",function(){return o}),e.d(i,"c",function(){return c}),e.d(i,"d",function(){return l}),e.d(i,"f",function(){return u});var s=e(2),n=e(10);function r(t){let i,e;return Object(s.g)(t)&&(i=t.match(n.b))&&(e=parseInt(i[1],10)*n.d+parseInt(i[2],10)*n.e+parseInt(i[3],10)*n.f+parseInt(i[5]||0,10)),isNaN(e)?null:e}function h(t,i){return/^\d+(\.\d+)?%$/g.test(t)?i?i*parseFloat(t.replace("%",""))/100:null:r(t)}function a(t){return Date.now()+t*n.a}function o(t,i=":"){const e=t=>t>=10?t:`0${t}`;return`${e(Math.floor(t/60))}${i}${e(Math.floor(t%60))}`}function c(){return Date.now()}function l(t,i){return Math.ceil(Math.abs(i-t)/n.f)}function u(t){const i=Date.parse(t+" GMT");if(!Object(s.d)(i))return;const e=Math.floor((Date.parse(new Date(Date.now()).toUTCString())-i)/1e3);if(!Object(s.e)(e))return"just now";const n=[{value:1,symbol:"s"},{value:60,symbol:"m"},{value:3599,symbol:"h"},{value:86399,symbol:"d"}];let r;for(r=n.length-1;r>0&&!(e>=n[r].value);r--);return Math.floor(e/n[r].value).toFixed(0)+n[r].symbol+" ago"}},function(t,i,e){"use strict";e.d(i,"a",function(){return n}),e.d(i,"b",function(){return r});var s=e(0);const n=[s.ProtoDeviceType.Smartphone,s.ProtoDeviceType.Tablet];var r;!function(t){t.Ios="ios",t.Android="android",t.Mac="macos",t.Windows="windows",t.Linux="linux"}(r||(r={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return s});class s{}s.MaxLogOverflow=1e3,s.maxLogOverflowCount={},s.logCount={},s.maxLogSent={},s.sessionId="",s.pageFocus=!1,s.incrementLogCount=t=>{s.logCount[t]?(++s.maxLogOverflowCount[t],++s.logCount[t]):(s.logCount[t]=1,s.maxLogOverflowCount[t]=1)},s.isMaxLog=(t,i)=>!!(s.logCount[t]&&s.logCount[t]>i),s.isMaxLogOverflow=t=>s.maxLogOverflowCount[t]>s.MaxLogOverflow&&(s.maxLogOverflowCount[t]=1,!0),s.setMaxLogSent=t=>{s.maxLogSent[t]=!0},s.isMaxLogSent=t=>!!s.maxLogSent[t]},function(t,i,e){"use strict";e.d(i,"e",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"b",function(){return r}),e.d(i,"a",function(){return h}),e.d(i,"c",function(){return a});const s=200,n=31,r=2e3,h=1e3,a="connatix.com"},function(t,i,e){"use strict";e.d(i,"b",function(){return r}),e.d(i,"a",function(){return h});class s{}s.clientAb0=0,s.clientAb1=0;class n{}var r;n.clientAb0=0,n.clientAb1=0,function(t){t[t.ElementsABService=0]="ElementsABService",t[t.PlayspaceABService=1]="PlayspaceABService"}(r||(r={}));class h{static get clientAb0(){return this.getABValueForKey("clientAb0")}static get clientAb1(){return this.getABValueForKey("clientAb1")}static getABValueForKey(t){switch(this.abServiceType){case r.PlayspaceABService:return n[t];default:return s[t]}}}},function(t,i,e){"use strict";e.d(i,"a",function(){return s}),e.d(i,"b",function(){return n});const s="https://connatix.com/privacy-policy/",n="v"},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"_",{value:!0}),s(e(138)),s(e(139)),s(e(140)),s(e(141))},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"_",{value:!0}),s(e(62)),s(e(142)),s(e(63)),s(e(64)),s(e(143)),s(e(50)),s(e(65)),s(e(144)),s(e(145))},function(t,i,e){"use strict";e.d(i,"a",function(){return s});class s{constructor(){this.zi=!1,this.promise=new Promise((t,i)=>{this.Wi=t,this.Gi=i})}Qi(){this.zi||(this.zi=!0)}resolve(t){this.Qi(),this.Wi(t)}reject(t){this.Qi(),this.Gi(t)}get isPending(){return!this.zi}}},function(t,i,e){"use strict";(function(t){var s=i;function n(t,i,e){for(var s=Object.keys(i),n=0;n<s.length;++n)void 0!==t[s[n]]&&e||(t[s[n]]=i[s[n]]);return t}function r(t){function i(t,e){if(!(this instanceof i))return new i(t,e);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),e&&n(this,e)}return(i.prototype=Object.create(Error.prototype)).constructor=i,Object.defineProperty(i.prototype,"name",{get:function(){return t}}),i.prototype.toString=function(){return this.name+": "+this.message},i}s.asPromise=e(125),s.base64=e(126),s.EventEmitter=e(127),s.float=e(128),s.inquire=e(129),s.utf8=e(130),s.pool=e(131),s.LongBits=e(132),s.global="undefined"!=typeof window&&window||void 0!==t&&t||"undefined"!=typeof self&&self||this,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isNode=Boolean(s.global.process&&s.global.process.versions&&s.global.process.versions.node),s.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},s.isString=function(t){return"string"==typeof t||t instanceof String},s.isObject=function(t){return t&&"object"==typeof t},s.isset=s.isSet=function(t,i){var e=t[i];return!(null==e||!t.hasOwnProperty(i))&&("object"!=typeof e||(Array.isArray(e)?e.length:Object.keys(e).length)>0)},s.Buffer=function(){try{var t=s.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),s.Ji=null,s.Xi=null,s.newBuffer=function(t){return"number"==typeof t?s.Buffer?s.Xi(t):new s.Array(t):s.Buffer?s.Ji(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},s.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(t){return t?s.LongBits.from(t).toHash():s.LongBits.zeroHash},s.longFromHash=function(t,i){var e=s.LongBits.fromHash(t);return s.Long?s.Long.fromBits(e.lo,e.hi,i):e.toNumber(Boolean(i))},s.merge=n,s.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},s.newError=r,s.ProtocolError=r("ProtocolError"),s.oneOfGetter=function(t){for(var i={},e=0;e<t.length;++e)i[t[e]]=1;return function(){for(var t=Object.keys(this),e=t.length-1;e>-1;--e)if(1===i[t[e]]&&void 0!==this[t[e]]&&null!==this[t[e]])return t[e]}},s.oneOfSetter=function(t){return function(i){for(var e=0;e<t.length;++e)t[e]!==i&&delete this[t[e]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s.Yi=function(){var t=s.Buffer;t?(s.Ji=t.from!==Uint8Array.from&&t.from||function(i,e){return new t(i,e)},s.Xi=t.allocUnsafe||function(i){return new t(i)}):s.Ji=s.Xi=null}}).call(this,e(58))},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(31),n=function(){function t(){}return t.encode=function(t,i){var e;if("string"==typeof t&&(t=parseInt(t,10)),(e=t.toString(2)).length>i||t<0)throw new s.EncodingError(t+" too large to encode into "+i);return e.length<i&&(e="0".repeat(i-e.length)+e),e},t.decode=function(t,i){if(i!==t.length)throw new s.DecodingError("invalid bit length");return parseInt(t,2)},t}();i.IntEncoder=n},function(t,i,e){"use strict";var s=this&&this.Ki||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"_",{value:!0});var n=function(){function t(){}return t.prototype.clone=function(){var t=this,i=new this.constructor;return Object.keys(this).forEach(function(e){var s=t.deepClone(t[e]);void 0!==s&&(i[e]=s)}),i},t.prototype.deepClone=function(t){var i,e,n=typeof t;if("number"===n||"string"===n||"boolean"===n)return t;if(null!==t&&"object"===n){if("function"==typeof t.clone)return t.clone();if(t instanceof Date)return new Date(t.getTime());if(void 0!==t[Symbol.iterator]){var r=[];try{for(var h=s(t),a=h.next();!a.done;a=h.next()){var o=a.value;r.push(this.deepClone(o))}}catch(t){i={error:t}}finally{try{a&&!a.done&&(e=h.return)&&e.call(h)}finally{if(i)throw i.error}}return t instanceof Array?r:new t.constructor(r)}var c={};for(var l in t)t.hasOwnProperty(l)&&(c[l]=this.deepClone(t[l]));return c}},t}();i.Cloneable=n},function(t,i){t.exports='<svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd"><path d="M5 21.453c2.022 1.627 4.6 2.602 7.387 2.602 3.973 0 7.485-1.967 9.622-4.977l-4.596-3.34a3.87 3.87 0 0 0-4.548 0L5 21.453zM22 4.977A11.75 11.75 0 0 0 12.387 0 11.74 11.74 0 0 0 5 2.602l7.9 5.74a3.81 3.81 0 0 0 4.479 0l4.63-3.364zm1.563 11.395c.494-1.3.767-2.712.767-4.186S24.057 9.3 23.563 8l-3.858 2.803a1.71 1.71 0 0 0 0 2.766l3.858 2.803z" fill="#fff"></path><path d="M2.378 5c-.024-.017-.057-.012-.074.01A11.74 11.74 0 0 0 0 12.025a11.74 11.74 0 0 0 2.304 7.004c.017.023.05.028.074.01l8.013-5.822c.81-.59.81-1.797 0-2.386L2.378 5z" fill="#09f"></path></svg>'},function(t,i){t.exports="<cnx class=cnx-ui-progress-label> <cnx-span></cnx-span> </cnx> "},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=function(){function t(){}return t.encode=function(t){return+t+""},t.decode=function(t){return"1"===t},t}();i.BooleanEncoder=s},function(t,i,e){"use strict";var s,n=e(8);!function(t){t.Connatix="143",t.Pubmatic="76",t.AppNexus="32",t.Telaria="202",t.Openx="69",t.Sizmek="68",t.Adaptv="25",t.Spotx="165",t.Rubicon="52"}(s||(s={}));s.Pubmatic,s.AppNexus,s.Sizmek,s.Adaptv,s.Openx;const r="cnx_usr_storage",h=5332921,a=["1YNY"];var o=e(22),c=e(0),l=e(15),u=e(2),d=e(30),f=e(17);class p{constructor(t){this.Zi=t,this.te=!0,this.ie="",this.ee=!1,this.se=[]}static getInstance(t){const i=r,e=Object(n.f)(t).topFrame;return e[i]||(e[i]=new p(e)),e[i]}get userId(){if(Object(u.h)(this.ne))return this.ne.split("_")[0]}set userId(t){this.ne=t}get isCcpaApplicable(){return this.te}set isCcpaApplicable(t){this.te=t}get usPrivacyString(){return this.ie}set usPrivacyString(t){this.ie=t}get consentPayload(){return this.re}set consentPayload(t){this.re||(this.re=t)}getScope(){return this.Zi}syncDemandPartner(t){if(this.userId){const i={userId:this.userId,demandPartner:parseInt(t.demandPartner,10),demandPartnerUserId:t.demandPartnerUserId};o.a.sendProtoRequest({ProtoRequest:c.ProtoUserSyncRequest,endpoint:l.a.endPoints.api.syncUrls,requestData:i,queryParams:{[d.b]:f.a.version}}).then(t=>{}).catch(t=>{})}}registerPlsCall(t){return this.ee?(this.se.push(t),()=>{}):this.userId?(t(),()=>{}):(this.ee=!0,t(),()=>{this.ee=!1,this.se.forEach(t=>t()),this.se=[]})}}var b,v,g=e(25),m=e(5),y=e(7);!function(t){t.USER_ID="cnx_userId"}(b||(b={}));class x{constructor(t,i){this.he=t,this.ae=i,this.ce={[b.USER_ID]:30},this.le=["Facebook App","Google App","Flipboard App","Instagram App","Pinterest App"],this.ue=!1}de({name:t,value:i}){switch(t){case b.USER_ID:this.he.userId=this.fe(i)}}pe(t){let i="";const e=this.ce[t.name];if(e){i=`; expires=${new Date(Object(g.b)(e)).toUTCString()}`}this.ae.document.cookie=`${t.name}=${t.value}${i}; path=/`}be(t,i){if(!Object(y.h)(t))return;const e={cookieList:t,secureMode:i?c.ProtoCookieSecureModeEnum.Unsecure:c.ProtoCookieSecureModeEnum.Auto,browserInfo:this.ve};return o.a.sendProtoRequest({requestData:e,ProtoRequest:c.ProtoCookieSyncRequest,endpoint:l.a.endPoints.api.cookie,withCredentials:!0,queryParams:{[d.b]:f.a.version}}).catch(t=>Object(m.a)({message:"UserCookieManager_setThirdPartyCookie",exception:t.message,callStack:t.callStack,level:c.ProtoLoggingLevelEnum.FATAL}))}fe(t){return t.split("_")[0]}ge(t){try{const i=t+"=",e=decodeURIComponent(this.ae.document.cookie).split(";");for(let t of e){for(;" "===t.charAt(0);)t=t.substring(1);if(0===t.indexOf(i))return this.fe(t.substring(i.length,t.length))}}catch(t){}return""}getUserId(){return this.he.userId}syncFirstPartyCookie(t){const i={name:t,value:"",timestamp:Object(g.b)(this.ce[t])};switch(t){case b.USER_ID:i.value=this.he.userId}Object(u.h)(i.value)&&this.pe(i)}syncThirdPartyCookieList(t){const i=[b.USER_ID],e=[];i.forEach(t=>{switch(t){case b.USER_ID:Object(u.h)(this.he.userId)&&e.push({name:b.USER_ID,value:this.he.userId,timestamp:Object(g.b)(this.ce[b.USER_ID])})}}),this.be(e,t)}setBrowserInfo(t,i){this.ve=t,this.ue=this.le.includes(t.browserType),this.ue&&i&&this.syncThirdPartyCookieList(this.ue)}setUserInformation(t){t&&this.de({name:b.USER_ID,value:t.userId})}fetchCookies(){[b.USER_ID].map(t=>({name:t,value:this.ge(t)})).filter(({value:t})=>Object(u.h)(t)).forEach(t=>this.de(t))}get unsecuredCookieSync(){return this.ue}}!function(t){t[t.CmpApi=0]="CmpApi",t[t.TcfApi=1]="TcfApi"}(v||(v={}));const w={[v.CmpApi]:{windowPropertyName:"__cmp",framePropertyName:"__cmpLocator",getVendorConsentDataMethodName:"getVendorConsents",getConsentDataMethodName:"getConsentData"},[v.TcfApi]:{windowPropertyName:"__tcfapi",framePropertyName:"__tcfapiLocator",getVendorConsentDataMethodName:"getTCData",consentUpdateMethodName:"addEventListener",removeUpdateListenerMethodName:"removeEventListener"}};var k=e(1),S=e(73),O=e(74);const _=(t,i)=>{const e=w[i].windowPropertyName;return Object(k.s)(t,e)},j=(t,i)=>{const e=w[i].framePropertyName;return Object(k.r)(t,e)},A=(t,i)=>null!==_(t,i)||null!==j(t,i),T=t=>{const i={};for(let e=0;e<t.length;e++)i[e+1]="1"===t[e];return i},C=t=>{try{const i=S.TCString.decode(t),e={},s={};return i.vendorConsents.forEach((t,i)=>e[i]=t),i.purposeConsents.forEach((t,i)=>s[i]=t),{vendorConsents:e,purposeConsents:s,tcString:t}}catch(i){return Object(m.a)({message:"UserManagerService_TCF_consent_decoding_crash",level:c.ProtoLoggingLevelEnum.INFO,exception:t}),null}},I=t=>{const i=O.decodeConsentString(t);let e="";const s=i.maxVendorId;for(let t=1;t<=s;t++)e+="0";const n=e.split("");return i.allowedVendorIds.forEach(t=>{n[t-1]="1"}),n.join("")},P=t=>{try{const i=I(t.consentString);return Object(u.h)(t.parsedVendorConsents)&&i!==t.parsedVendorConsents&&Object(m.a)({message:"UserManagerService_decode_consent_data_diff_inApp",level:c.ProtoLoggingLevelEnum.INFO,callStack:i,exception:t.parsedVendorConsents}),i}catch(i){return Object(m.a)({message:"UserManagerService_CMP_consent_decoding_crash",level:c.ProtoLoggingLevelEnum.INFO,callStack:JSON.stringify(t)}),null}};class M{constructor(t,i){this.me=t,this.ye=i,this.xe={},this.re=null,this.we=t=>new Promise((i,e)=>{try{const s="string"==typeof t.data?JSON.parse(t.data):t.data;if("object"==typeof s&&s.ke)if(s.ke.callId===this.Se){const t=s.ke.returnValue&&s.ke.returnValue.vendorConsents;this.Oe(t).then(()=>i(this.Se))}else if(s.ke.callId===this._e){const t=s.ke.returnValue&&s.ke.returnValue.consentData;this.je(t).then(()=>i(this._e))}}catch(t){e()}})}isApiOnPage(){return null!==this.me||null!==this.ye}bindToApi(){return null!==this.me?new Promise((t,i)=>{this.Ae(this.me).then(()=>t()).catch(t=>i(t))}):null!==this.ye?this.Te(this.ye):Promise.reject()}isVendorConsentProvided(t){return!!this.xe[t]}isConnatixConsentProvided(){return!!this.xe[s.Connatix]}getConsentPayload(){return this.re}setInAppConsentData(t){const i=I(t),e=T(i);this.Oe(e)}setInAppConsentPayload(t){this.je(t)}hasIvtConsent(){return this.isVendorConsentProvided(s.Connatix)}Te(t){this._e=Object(n.c)(),this.Se=Object(n.c)();const i={};return new Promise(e=>{const s=t=>{this.we(t).then(t=>{i[t]=!0,i[this._e]&&i[this.Se]&&(window.removeEventListener("message",s,!1),e())}).catch(t=>{})};window.addEventListener("message",s,!1);const n=w[v.CmpApi].getVendorConsentDataMethodName,r=w[v.CmpApi].getConsentDataMethodName;t.postMessage({Ce:{command:n,parameter:null,callId:this.Se}},"*"),t.postMessage({Ce:{command:r,parameter:null,callId:this._e}},"*")})}Ae(t){const i=w[v.CmpApi].windowPropertyName,e=w[v.CmpApi].getVendorConsentDataMethodName,s=w[v.CmpApi].getConsentDataMethodName;if(t&&t[i]){const n=new Promise(s=>{t[i](e,null,(t,i)=>{if(i){const{vendorConsents:i}=t;this.Oe(i).then(()=>s())}})}),r=new Promise(e=>{t[i](s,null,(t,i)=>{if(i){const{consentData:i}=t;this.je(i).then(()=>e())}})});return Promise.all([n,r])}return Promise.reject()}Oe(t){return Object(u.f)(t)?(this.xe=t,Promise.resolve()):Promise.reject()}je(t){return Object(u.g)(t)?(this.re=t,Promise.resolve()):Promise.reject()}}const E="useractioncomplete",L="tcloaded";class R{constructor(t,i){this.Ie=t,this.Pe=i,this.Me=t=>new Promise((i,e)=>{try{let s=t.data;if("string"==typeof t.data)try{s=JSON.parse(t.data)}catch(t){s=void 0}if("object"==typeof s&&s.Ee&&s.Ee.callId===this.Le){const t=s.Ee.returnValue.tcString;this.Oe(t).then(()=>i(this.Le)).catch(t=>e())}}catch(t){e()}})}isApiOnPage(){return null!==this.Ie||null!==this.Pe}bindToApi(){return null!==this.Ie?new Promise((t,i)=>{this.Ae(this.Ie).then(()=>t()).catch(t=>i(t))}):null!==this.Pe?this.Te(this.Pe):Promise.reject()}isVendorConsentProvided(t){var i,e;return!(null===(i=this.Re)||void 0===i||!i.vendorConsents)&&!!(null===(e=this.Re)||void 0===e?void 0:e.vendorConsents[t])}isConnatixConsentProvided(){var t,i,e,n,r,h;if(null===(t=this.Re)||void 0===t?void 0:t.purposeConsents){const t=this.isVendorConsentProvided(s.Connatix);return!!((null===(i=this.Re)||void 0===i?void 0:i.purposeConsents[1])&&(null===(e=this.Re)||void 0===e?void 0:e.purposeConsents[2])&&(null===(n=this.Re)||void 0===n?void 0:n.purposeConsents[4])&&(null===(r=this.Re)||void 0===r?void 0:r.purposeConsents[7])&&(null===(h=this.Re)||void 0===h?void 0:h.purposeConsents[8]))&&t}return!1}getConsentPayload(){var t;return null===(t=this.Re)||void 0===t?void 0:t.tcString}setInAppConsentData(t){const i=C(t);this.Re=Object.assign(Object.assign({},this.Re),i)}setInAppConsentPayload(t){this.Re.tcString=t}hasIvtConsent(){return!0}Te(t){this.Le=Object(n.c)();const i={};return new Promise(e=>{const s=t=>{this.Me(t).then(t=>{i[t]=!0,i[this.Le]&&(window.removeEventListener("message",s,!1),e())}).catch(t=>{})};window.addEventListener("message",s,!1);const n=w[v.TcfApi].getVendorConsentDataMethodName;t.postMessage({De:{command:n,parameter:null,callId:this.Le}},"*")})}Ae(t){const i=w[v.TcfApi].windowPropertyName,e=w[v.TcfApi].consentUpdateMethodName,s=w[v.TcfApi].removeUpdateListenerMethodName;return t&&t[i]?new Promise(t=>{this.Ie[i](e,2,(e,n)=>{if(n&&(e.eventStatus===E||e.eventStatus===L)){const n=e.tcString;this.Oe(n).then(()=>t()),this.Ie[i](s,2,()=>void 0,e.listenerId)}})}):Promise.reject()}Oe(t){const i=C(t);return Object(u.f)(i)?(this.Re=i,Promise.resolve()):Promise.reject()}}class D{constructor(t,i,e={}){var s,n,r;this.Be=t,this.ae=i;let h=!1;if(Object(u.h)(null===(s=e.cmp)||void 0===s?void 0:s.consentString)){const t=P(e.cmp);Object(u.h)(t)||(h=!0,e.tcf.tcString=e.cmp.consentString)}const a=Object(u.h)(null===(n=e.tcf)||void 0===n?void 0:n.tcString)||A(this.ae,v.TcfApi),o=Object(u.h)(null===(r=e.cmp)||void 0===r?void 0:r.consentString)||A(this.ae,v.CmpApi);!a||o&&!h?(this.$e(v.CmpApi),this.Fe(e.cmp.consentString)):(this.$e(v.TcfApi),this.Ve(e.tcf.tcString))}setAmpUserConsent(t){var i,e;if(!this.isConsentRequired())return;const s=t.consentStringTypeEnum.TCF_V2,n=t.consentStringTypeEnum.US_PRIVACY_STRING,r=null===(i=t.consentMetadata)||void 0===i?void 0:i.consentStringType;if(r===n||r===s)return;this.Ue=new M(null,null);const h=t.encodeConsentString||(null===(e=t.consentMetadata)||void 0===e?void 0:e.additionalConsent);Object(u.h)(h)?(this.Ue.setInAppConsentData(h),this.Ue.setInAppConsentPayload(h)):Object(m.a)({level:c.ProtoLoggingLevelEnum.INFO,message:"AMP_no_consent_string_provided",callStack:JSON.stringify(t),exception:`${this.Be}`})}isConsentRequired(){return this.Be}isConsent(t){return!this.isConsentRequired()||this.Ue.isVendorConsentProvided(t)}isConsentConnatix(){return!this.isConsentRequired()||this.Ue.isConnatixConsentProvided()}getConsentDataPayload(){return this.Ue.getConsentPayload()}bindToConsentApi(){return this.Ue.bindToApi()}isConsentApiOnPage(){return this.Ue.isApiOnPage()}hasIVTConsent(){return this.Ue.hasIvtConsent()}Fe(t){Object(u.h)(t)&&(this.Ue.setInAppConsentData(t),this.Ue.setInAppConsentPayload(t))}Ve(t){Object(u.h)(t)&&this.Ue.setInAppConsentData(t)}$e(t){const i=_(this.ae,t),e=j(this.ae,t);switch(t){case v.TcfApi:this.Ue=new R(i,e);break;default:this.Ue=new M(i,e)}}}var B=e(14);class ${constructor(t,i){this.Ne=t,this.Be=i,this.He=[]}replaceuserIdMacros(t,i){let e=t;return e=(e=(e=e.replace("%5BuserId%5D",i)).replace("[userId]",i)).replace("%7bUSER_ID%7d",i)}qe(t,i){try{if(t.vendorId===s.Pubmatic||t.vendorId===s.Rubicon){const e=i.document.createElement("iframe");e.setAttribute("style","width:1px;height:1px;border:0px;margin:0px;padding:0px"),e.src=t.url,i.document.body.appendChild(e)}else Object(k.A)({src:t.url},i.document.head,i,null,null,1===Object(n.l)([95,5]),"UserManager_unable_to_insert_sync_url_script");return!0}catch(t){return!1}}syncUrls(t,i){this.He.forEach(e=>{if(this.Ne.isConsent(e.vendorId)&&!e.synced){if((e.vendorId===s.Pubmatic||e.vendorId===s.Rubicon)&&this.Be){e.url=Object(B.f)(e.url,"gdpr","1");const t=this.Ne.getConsentDataPayload();e.url=Object(B.f)(e.url,"gdpr_consent",t)}if(-1!==e.url.indexOf("openx.net"))return e.url=`${e.url.split("r=")[0]}&r=\n                        ${encodeURIComponent(`https://capi.connatix.com/core/us?DemandPartner=8&UserId=${t}&DemandPartnerUserId=`)}`,e.url=this.replaceuserIdMacros(e.url,t),o.a.trackPixel(e.url),void(e.synced=!0);e.url.indexOf("pixel.advertising.com")>-1&&(e.url=e.url.replace("gdpr=",`gdpr=${this.Ne.isConsentRequired()?1:0}`),e.url=e.url.replace("gdpr_consent=","gdpr_consent=0")),e.url=this.replaceuserIdMacros(e.url,t),this.qe(e,i)&&(e.synced=!0)}})}setSyncUrls(t={}){return!(this.He.length>0)&&(this.He=[],Object.keys(t).forEach(i=>{this.He.push({vendorId:i,url:t[i],synced:!1})}),!0)}}var F,V,U=e(33);class N{constructor(t,i){this.he=t,this.ze=1,this.We="__uspapi",this.Ge="getUSPData",this.it=!1,this.Qe=1577829601e3,Date.now()-this.Qe>=0&&(this.it=!0),this.Je(i)}getUsPrivacyString(){if(this.he.usPrivacyString||this.he.isCcpaApplicable)return this.he.usPrivacyString}isCcpaApplicable(){return this.he.isCcpaApplicable}isSellUserAllowed(){return!this.he.isCcpaApplicable||this.Xe()}setGeoLocation(t){this.it&&t.subdivisionId===h||(this.he.isCcpaApplicable=!1)}fetchUsPrivacyString(){return this.isCcpaApplicable()?new Promise(t=>{this.getUsPrivacyString()?t():t(this.Ye())}):Promise.resolve()}Ye(){return new Promise((t,i)=>{const e=this.he.getScope()[this.We];e?e(this.Ge,this.ze,(e,s)=>{s?(this.Je(e.uspString),t()):i()}):i()})}Xe(){return!this.he.usPrivacyString||Object(y.g)(this.he.usPrivacyString,a)}Je(t){this.he.usPrivacyString=t}}e.d(i,"a",function(){return F}),e.d(i,"b",function(){return H}),function(t){t.CCPA_INFO_RECEIVED="ccpaInfoReceived",t.CONSENT_DATA_UPDATE="consentDataUpdate"}(F||(F={})),function(t){t.SYNC_URLS_RECEIVED="thirdPartySyncUrlsReceived",t.USER_INFO_RECEIVED="userInfoReceived"}(V||(V={}));class H{constructor(t,i,e,s={}){this.Ke=i,this.Ze=e,this._appSettings=s,this.gdprConsentMode=c.ProtoGdprConsentModeEnum.Unknown,this.ts={},this.es="",this.ss=!1,this.ns=()=>{!this.Ne.isConsentRequired()||this.Ke?this.resolveEvent(F.CONSENT_DATA_UPDATE):(this.gdprConsentMode=this.Ne.isConsentApiOnPage()||this.Ze?c.ProtoGdprConsentModeEnum.NoConsent:c.ProtoGdprConsentModeEnum.NoCmp,this.Ne.bindToConsentApi().then(()=>{this.isConsentConnatix()||(this.gdprConsentMode=c.ProtoGdprConsentModeEnum.NoConnatixConsent),this.resolveEvent(F.CONSENT_DATA_UPDATE)}).catch(t=>{}))},this.rs=()=>{this.isConsentConnatix()&&!this.Ke&&(this.onEvent([V.USER_INFO_RECEIVED]).then(()=>{this.ss&&(this.hs.syncThirdPartyCookieList(),this.hs.unsecuredCookieSync&&this.hs.syncThirdPartyCookieList(this.hs.unsecuredCookieSync),this.hs.syncFirstPartyCookie(b.USER_ID))}),this.onEvent([V.SYNC_URLS_RECEIVED,F.CONSENT_DATA_UPDATE,F.CCPA_INFO_RECEIVED]).then(()=>{if(this.isConsentConnatix()&&this.as.isSellUserAllowed())try{this.cs.syncUrls(this.he.userId,this.he.getScope())}catch(t){Object(m.a)({level:c.ProtoLoggingLevelEnum.WARNING,message:"UserManager_syncUrls",exception:t.message,callStack:t.stack})}}))};try{this.he=p.getInstance(t),this.Ke||(this.hs=new x(this.he,t));const{cmp:i,tcf:e}=this._appSettings;this.Ne=new D(!!this.es,t,{cmp:i,tcf:e}),this.cs=new $(this.Ne,this.isGDPR()),this.as=new N(this.he,this._appSettings.usPrivacyString),this.ls()}catch(t){Object(m.a)({callStack:t.stack,exception:t.message,message:"UserManager_constructor",level:c.ProtoLoggingLevelEnum.FATAL})}}ls(){this.hs&&this.hs.fetchCookies(),this.ns(),this.onEvent([F.CONSENT_DATA_UPDATE]).then(()=>{setTimeout(()=>{try{if(this.Ke)return;this.rs()}catch(t){Object(m.a)({callStack:t.stack,exception:t.message,message:"UserManager_consent_data_received",level:c.ProtoLoggingLevelEnum.FATAL})}},0)})}us(t){return void 0===this.ts[t]&&(this.ts[t]=new U.a,this.ts[t].promise.catch(()=>this.ts[t].reject())),this.ts[t]}resolveEvent(t,i){this.us(t).resolve(i)}setAmpUserConsent(t){this.Ne.setAmpUserConsent(t),this.resolveEvent(F.CONSENT_DATA_UPDATE)}onEvent(t){const i=t.map(t=>this.us(t).promise);return Promise.all(i)}isConsent(t){return this.Ne.isConsent(t)}isConsentConnatix(){return this.Ne.isConsentConnatix()}getConsentPayload(){return this.Ne.getConsentDataPayload()}isConsentRequired(){return this.Ne.isConsentRequired()}setThirdPartySyncUrls(t){this.Ke||this.cs.setSyncUrls(t)&&this.resolveEvent(V.SYNC_URLS_RECEIVED)}setGeoLocation(t){this.as.setGeoLocation(t);try{this.as.fetchUsPrivacyString().then(()=>{this.resolveEvent(F.CCPA_INFO_RECEIVED)}).catch(()=>{this.resolveEvent(F.CCPA_INFO_RECEIVED)})}catch(t){this.resolveEvent(F.CCPA_INFO_RECEIVED)}}getUserId(){if(this.isConsentConnatix()&&this.hs)return this.hs.getUserId()}ds(){return this.hs&&this.hs.getUserId()}setUserInformation(t){this.hs&&(this.hs.setUserInformation(t),this.resolveEvent(V.USER_INFO_RECEIVED),!this.Ke&&this.isConsentConnatix()&&this.hs.syncFirstPartyCookie(b.USER_ID))}isGDPR(){return!!this.es}getUsPrivacyString(){return this.as.getUsPrivacyString()}isCcpaApplicable(){return this.as.isCcpaApplicable()}isSellUserAllowed(){return this.Ke||this.as.isSellUserAllowed()}getDeviceId(){if(this.isConsentConnatix())return this._appSettings.deviceID}fs(){return this._appSettings.deviceID}getTrackableUser(){return this.Ke?this.getDeviceId():this.getUserId()}getForcedTrackableUser(){return this.Ke?this.fs():this.ds()}registerPlsCall(t){return this.isConsentConnatix()||(this.ss=!0),this.he.registerPlsCall(t)}setBrowserInfo(t){this.hs&&this.hs.setBrowserInfo(t,this.isConsentConnatix())}}},function(t,i,e){"use strict";e.d(i,"a",function(){return s}),e.d(i,"b",function(){return r});var s,n=e(0);!function(t){t[t.PreRoll=0]="PreRoll",t[t.MidRoll=1]="MidRoll",t[t.PostRoll=2]="PostRoll",t[t.Standalone=3]="Standalone"}(s||(s={}));const r={[n.ProtoAdSlotsEnum.PreRoll]:s.PreRoll,[n.ProtoAdSlotsEnum.MidRoll]:s.MidRoll,[n.ProtoAdSlotsEnum.PostRoll]:s.PostRoll}},function(t,i){t.exports='<cnx class="cnx-icon-button cnx-button-settings cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-settings-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewBox="0 0 22 22"><path d="M18.454 5.847l-2.642 1.05-1.03-.784c-.444-.338-.904-.603-1.39-.8l-1.205-.488-.404-2.786h-1.563l-.404 2.786-1.205.488c-.465.188-.93.46-1.413.817L6.17 6.9 3.546 5.847l-.783 1.34 2.232 1.727-.16 1.266c-.042.33-.062.59-.062.82s.02.49.062.82l.16 1.266-2.233 1.727.783 1.34 2.642-1.05 1.03.784c.444.338.904.603 1.39.8l1.205.488.404 2.786h1.563l.404-2.786 1.205-.488c.465-.188.93-.46 1.413-.817l1.025-.76 2.625 1.043.783-1.34-2.233-1.727.16-1.266c.043-.337.062-.584.062-.82s-.02-.483-.062-.82l-.16-1.266 2.233-1.727-.783-1.34zm.71 6.227l2.32 1.81c.21.164.264.46.132.702l-2.198 3.793c-.132.24-.418.34-.67.24l-2.736-1.096c-.57.427-1.187.8-1.857 1.074l-.418 2.905c-.033.263-.264.46-.538.46H8.802c-.275 0-.506-.197-.538-.46l-.418-2.905c-.67-.274-1.286-.636-1.857-1.074l-2.736 1.096c-.242.088-.538 0-.67-.24L.385 14.584c-.132-.24-.077-.537.132-.702l2.32-1.81A8.67 8.67 0 0 1 2.758 11a8.67 8.67 0 0 1 .077-1.074l-2.32-1.81a.54.54 0 0 1-.132-.702l2.198-3.793c.132-.24.418-.34.67-.24L5.99 4.478c.57-.427 1.187-.8 1.857-1.074L8.264.5c.033-.263.264-.46.538-.46h4.396c.275 0 .506.197.538.46l.418 2.905c.67.274 1.286.636 1.857 1.074l2.736-1.096c.242-.088.538 0 .67.24l2.198 3.793c.132.24.077.537-.132.702l-2.32 1.81A8.52 8.52 0 0 1 19.242 11a8.52 8.52 0 0 1-.077 1.074zM11 14.256A3.26 3.26 0 0 0 14.256 11 3.26 3.26 0 0 0 11 7.744 3.26 3.26 0 0 0 7.744 11 3.26 3.26 0 0 0 11 14.256zm0-2A1.26 1.26 0 0 1 9.744 11 1.26 1.26 0 0 1 11 9.744 1.26 1.26 0 0 1 12.256 11 1.26 1.26 0 0 1 11 12.256z"/></svg> </cnx> <cnx class=cnx-hd-flag> <svg markup-inline xmlns=http://www.w3.org/2000/svg viewBox="0 0 17 11"><g fill=none><rect class=cnx-color-accent width=17 height=11 rx=2 fill=#09F /><path class=cnx-color-icon d="M8 9L6.9 9 6.9 5.9 4.1 5.9 4.1 9 3 9 3 2 4.1 2 4.1 4.9 6.9 4.9 6.9 2 8 2 8 9ZM10 9L10 2 12 2C12.6 2 13.1 2.2 13.6 2.4 14 2.7 14.4 3.1 14.6 3.6 14.9 4.1 15 4.7 15 5.3L15 5.7C15 6.4 14.9 6.9 14.6 7.4 14.4 7.9 14 8.3 13.5 8.6 13.1 8.9 12.5 9 11.9 9L10 9ZM11 3L11 8 12.2 8C12.8 8 13.2 7.8 13.5 7.4 13.8 7 14 6.4 14 5.7L14 5.3C14 4.6 13.8 4 13.5 3.6 13.2 3.2 12.8 3 12.2 3L11 3Z"/></g></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-icon-button cnx-button-caption cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-caption-off-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M20.556 5H3.444C3.163 5 3 5.15 3 5.25v13.5c0 .1.163.25.444.25h17.11c.275 0 .444-.156.444-.25V5.25c0-.094-.17-.25-.444-.25zm0-2C21.9 3 23 4.013 23 5.25v13.5c0 1.238-1.1 2.25-2.444 2.25H3.444C2.088 21 1 19.988 1 18.75V5.25C1 4.013 2.088 3 3.444 3h17.11zM11 11H9.5v-.5h-2v3h2V13H11v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1zm7 0h-1.5v-.5h-2v3h2V13H18v1c0 .55-.45 1-1 1h-3c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1z" fill-rule=evenodd /></svg> </cnx> <cnx class=cnx-caption-on-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><g fill=none><path d="M20.6 3C21.9 3 23 4 23 5.3L23 18.8C23 20 21.9 21 20.6 21L3.4 21C2.1 21 1 20 1 18.8L1 5.3C1 4 2.1 3 3.4 3L20.6 3Z" class=cnx-color-accent /><path d="M11 11L9.5 11 9.5 10.5 7.5 10.5 7.5 13.5 9.5 13.5 9.5 13 11 13 11 14C11 14.6 10.6 15 10 15L7 15C6.5 15 6 14.6 6 14L6 10C6 9.5 6.5 9 7 9L10 9C10.6 9 11 9.5 11 10L11 11ZM18 11L16.5 11 16.5 10.5 14.5 10.5 14.5 13.5 16.5 13.5 16.5 13 18 13 18 14C18 14.6 17.6 15 17 15L14 15C13.5 15 13 14.6 13 14L13 10C13 9.5 13.5 9 14 9L17 9C17.6 9 18 9.5 18 10L18 11Z" class=cnx-color-icon /></g></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-progress-bar cnx-video-progress"> <cnx class=cnx-progress-rail-container> <cnx class=cnx-progress-rail></cnx> <cnx class="cnx-progress-fill cnx-color-accent"></cnx> <cnx class=cnx-progress-follow></cnx> </cnx> <cnx class="cnx-progress-handle cnx-color-accent"></cnx> <cnx class=cnx-progress-hitarea></cnx> </cnx> '},function(t,i){t.exports='<cnx class=cnx-ui-loader> <svg class=cnx-color-accent version=1.1 viewBox="0 0 79 90" xmlns=http://www.w3.org/2000/svg><polygon points="21 73.322 11 79 11 12 21 17.678" fill=none stroke-linecap=round stroke-linejoin=round /><polygon points="27 70 27 21 38 27.267 38 63.733" fill=transparent stroke-linecap=round stroke-linejoin=round /><polygon points="44 61 44 31 54 36.769 54 55.231" fill=none stroke-linecap=round stroke-linejoin=round /><polygon points="60 51 60 40 70 45.5" fill=none stroke-linecap=round stroke-linejoin=round /></svg> </cnx> '},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 14" fill-rule="evenodd"><path d="M21.886 14H2.114C.97 14 0 13.008 0 11.842V2.158C0 .992.97 0 2.114 0H21.83C23.03 0 24 .992 24 2.158v9.625C24 13.008 23.03 14 21.886 14z" fill="#ffc800"></path><path d="M14 3h1.49c.866 0 3.51.868 3.51 4 0 3.046-2.328 4-3.51 4H13V3h1zm0 1.006v6.04h1.49C16.7 10.046 18.026 9 18.026 7s-1.322-2.994-2.535-2.994H14zM10.18 9H6.816L6.1 11H5l3.005-7.987L8 3h.963l-.005.013L12.006 11h-1.1l-.726-2zm-.363-1l-1.33-3.665L7.174 8h2.643z" fill="#000"></path></svg>'},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 27 20" version="1.1"><path d="M3.07619048,0 C1.37619048,0 0,1.41666667 0,3.08333333 L0,16.8333333 C0,18.5833333 1.37619048,20 2.9952381,20 L27,20 L27,0 L3.07619048,0 Z" fill="#FFC800"></path><path d="M9.61385787,4.28571429 L9.606,4.30471429 L13.9249985,15.7142857 L12.3665146,15.7142857 L11.337,12.8567143 L6.572,12.8567143 L5.55848393,15.7142857 L4,15.7142857 L8.256,4.30471429 L8.25,4.28571429 L9.61385787,4.28571429 Z M15.3333333,15.7142857 L15.3333333,4.28571429 L18.8623641,4.28571429 L18.8623641,4.28571429 C20.0898911,4.28571429 23.8333333,5.52590267 23.8333333,10 C23.8333333,14.3513179 20.5347016,15.7142857 18.8623641,15.7142857 L15.3333333,15.7142857 Z M16.749,14.3507143 L18.8623641,14.3513179 L18.8623641,14.3513179 C20.5749549,14.3513179 22.4529227,12.8571429 22.4529227,10 C22.4529227,7.14285714 20.5795594,5.72298834 18.8623641,5.72298834 L16.749,5.72271429 L16.749,14.3507143 Z M8.936,6.19271429 L7.079,11.4277143 L10.822,11.4277143 L8.936,6.19271429 Z" fill="#000000"></path></svg>'},function(t,i,e){"use strict";t.exports=e(124)},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(32),n=function(){function t(){}var i,e,n,r,h,a,o,c,l,u,d,f,p,b,v,g,m,y;return i=s.Fields.cmpId,e=s.Fields.cmpVersion,n=s.Fields.consentLanguage,r=s.Fields.consentScreen,h=s.Fields.created,a=s.Fields.isServiceSpecific,o=s.Fields.lastUpdated,c=s.Fields.policyVersion,l=s.Fields.publisherCountryCode,u=s.Fields.publisherLegitimateInterests,d=s.Fields.publisherConsents,f=s.Fields.purposeConsents,p=s.Fields.purposeLegitimateInterests,b=s.Fields.purposeOneTreatment,v=s.Fields.specialFeatureOptins,g=s.Fields.useNonStandardStacks,m=s.Fields.vendorListVersion,y=s.Fields.version,t[i]=12,t[e]=12,t[n]=12,t[r]=6,t[h]=36,t[a]=1,t[o]=36,t[c]=6,t[l]=12,t[u]=24,t[d]=24,t[f]=24,t[p]=24,t[b]=1,t[v]=12,t[g]=1,t[m]=12,t[y]=6,t.anyBoolean=1,t.encodingType=1,t.maxId=16,t.numCustomPurposes=6,t.numEntries=12,t.numRestrictions=12,t.purposeId=6,t.restrictionType=2,t.segmentType=3,t.singleOrRange=1,t.vendorId=16,t}();i.BitLength=n},function(t,i,e){"use strict";var s;Object.defineProperty(i,"_",{value:!0}),(s=i.RestrictionType||(i.RestrictionType={}))[s.NOT_ALLOWED=0]="NOT_ALLOWED",s[s.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",s[s.REQUIRE_LI=2]="REQUIRE_LI"},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(39),n=e(31),r=e(32),h=function(){function t(){}return t.encode=function(t,i){for(var e="",n=1;n<=i;n++)e+=s.BooleanEncoder.encode(t.has(n));return e},t.decode=function(t,i){if(t.length!==i)throw new n.DecodingError("bitfield encoding length mismatch");for(var e=new r.Vector,h=1;h<=i;h++)s.BooleanEncoder.decode(t[h-1])&&e.set(h);return e.bitLength=t.length,e},t}();i.FixedVectorEncoder=h},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><path d="M8.6 16.6l4.58-4.6L8.6 7.4 10 6l6 6-6 6-1.4-1.4z"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.6 3H10v2H5v5H3V4.6A1.58 1.58 0 0 1 4.6 3zM5 14v5h5v2H4.6A1.58 1.58 0 0 1 3 19.4V14h2zM19.4 3A1.58 1.58 0 0 1 21 4.6V10h-2V5h-5V3h5.4zM19 14h2v5.4a1.58 1.58 0 0 1-1.6 1.6H14v-2h5v-5z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><g stroke-width="3" viewBox="0 0 32 32"><circle class="cnx-svg-circle-stroke" cx="16" cy="17" r="14"></circle></g></svg>'},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" class="cnx-color-accent" viewBox="0 0 13 10"><path d="M7 6.9C7 6.2 7.1 5.5 7.3 4.7 7.5 4 7.9 3.4 8.4 2.8 8.8 2.2 9.5 1.7 10.2 1.2 11 0.7 11.9 0.3 13 0L13 1.5C11.8 1.9 10.9 2.3 10.4 2.8 9.8 3.4 9.5 4 9.5 4.7 9.5 4.9 9.6 5.1 9.7 5.2 9.9 5.4 10 5.5 10.2 5.7 10.4 5.8 10.6 5.9 10.9 6 11.1 6.1 11.3 6.3 11.5 6.4 11.7 6.6 11.9 6.8 12 7 12.1 7.3 12.2 7.6 12.2 7.9 12.2 8.6 12 9.1 11.5 9.5 11.1 9.8 10.5 10 9.8 10 9.5 10 9.1 9.9 8.8 9.8 8.4 9.7 8.1 9.5 7.8 9.2 7.6 9 7.4 8.6 7.2 8.2 7.1 7.9 7 7.4 7 6.9ZM0 6.9C0 6.2 0.1 5.5 0.3 4.7 0.5 4 0.9 3.4 1.4 2.8 1.8 2.2 2.5 1.7 3.2 1.2 4 0.7 4.9 0.3 6 0L6 1.5C4.8 1.9 3.9 2.3 3.4 2.8 2.8 3.4 2.5 4 2.5 4.7 2.5 4.9 2.6 5.1 2.7 5.2 2.8 5.4 3 5.5 3.2 5.7 3.4 5.8 3.6 5.9 3.9 6 4.1 6.1 4.3 6.3 4.5 6.4 4.7 6.6 4.9 6.8 5 7 5.1 7.3 5.2 7.6 5.2 7.9 5.2 8.6 5 9.1 4.5 9.5 4.1 9.8 3.5 10 2.8 10 2.4 10 2.1 9.9 1.7 9.8 1.4 9.7 1.1 9.5 0.8 9.2 0.6 9 0.4 8.6 0.2 8.2 0.1 7.9 0 7.4 0 6.9Z"></path></svg>'},function(t,i,e){"use strict";t.exports=u;var s,n=e(34),r=n.LongBits,h=n.base64,a=n.utf8;function o(t,i,e){this.fn=t,this.len=i,this.next=void 0,this.val=e}function c(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function u(){this.len=0,this.head=new o(c,0,0),this.tail=this.head,this.states=null}function d(t,i,e){i[e]=255&t}function f(t,i){this.len=t,this.next=void 0,this.val=i}function p(t,i,e){for(;t.hi;)i[e++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)i[e++]=127&t.lo|128,t.lo=t.lo>>>7;i[e++]=t.lo}function b(t,i,e){i[e]=255&t,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24}u.create=n.Buffer?function(){return(u.create=function(){return new s})()}:function(){return new u},u.alloc=function(t){return new n.Array(t)},n.Array!==Array&&(u.alloc=n.pool(u.alloc,n.Array.prototype.subarray)),u.prototype.ps=function(t,i,e){return this.tail=this.tail.next=new o(t,i,e),this.len+=i,this},f.prototype=Object.create(o.prototype),f.prototype.fn=function(t,i,e){for(;t>127;)i[e++]=127&t|128,t>>>=7;i[e]=t},u.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},u.prototype.int32=function(t){return t<0?this.ps(p,10,r.fromNumber(t)):this.uint32(t)},u.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},u.prototype.uint64=function(t){var i=r.from(t);return this.ps(p,i.length(),i)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(t){var i=r.from(t).zzEncode();return this.ps(p,i.length(),i)},u.prototype.bool=function(t){return this.ps(d,1,t?1:0)},u.prototype.fixed32=function(t){return this.ps(b,4,t>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(t){var i=r.from(t);return this.ps(b,4,i.lo).ps(b,4,i.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(t){return this.ps(n.float.writeFloatLE,4,t)},u.prototype.double=function(t){return this.ps(n.float.writeDoubleLE,8,t)};var v=n.Array.prototype.set?function(t,i,e){i.set(t,e)}:function(t,i,e){for(var s=0;s<t.length;++s)i[e+s]=t[s]};u.prototype.bytes=function(t){var i=t.length>>>0;if(!i)return this.ps(d,1,0);if(n.isString(t)){var e=u.alloc(i=h.length(t));h.decode(t,e,0),t=e}return this.uint32(i).ps(v,i,t)},u.prototype.string=function(t){var i=a.length(t);return i?this.uint32(i).ps(a.write,i,t):this.ps(d,1,0)},u.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new o(c,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new o(c,0,0),this.len=0),this},u.prototype.ldelim=function(){var t=this.head,i=this.tail,e=this.len;return this.reset().uint32(e),e&&(this.tail.next=t.next,this.tail=i,this.len+=e),this},u.prototype.finish=function(){for(var t=this.head.next,i=this.constructor.alloc(this.len),e=0;t;)t.fn(t.val,i,e),e+=t.len,t=t.next;return i},u.Yi=function(t){s=t}},function(t,i){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,i,e){"use strict";t.exports=o;var s,n=e(34),r=n.LongBits,h=n.utf8;function a(t,i){return RangeError("index out of range: "+t.pos+" + "+(i||1)+" > "+t.len)}function o(t){this.buf=t,this.pos=0,this.len=t.length}var c,l="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new o(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new o(t);throw Error("illegal buffer")};function u(){var t=new r(0,0),i=0;if(!(this.len-this.pos>4)){for(;i<3;++i){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*i)>>>0,t}for(;i<4;++i)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(i=0,this.len-this.pos>4){for(;i<5;++i)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}else for(;i<5;++i){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function d(t,i){return(t[i-4]|t[i-3]<<8|t[i-2]<<16|t[i-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new r(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}o.create=n.Buffer?function(t){return(o.create=function(t){return n.Buffer.isBuffer(t)?new s(t):l(t)})(t)}:l,o.prototype.bs=n.Array.prototype.subarray||n.Array.prototype.slice,o.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),o.prototype.int32=function(){return 0|this.uint32()},o.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},o.prototype.bool=function(){return 0!==this.uint32()},o.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)},o.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4)},o.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},o.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},o.prototype.bytes=function(){var t=this.uint32(),i=this.pos,e=this.pos+t;if(e>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(i,e):i===e?new this.buf.constructor(0):this.bs.call(this.buf,i,e)},o.prototype.string=function(){var t=this.bytes();return h.read(t,0,t.length)},o.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},o.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},o.Yi=function(t){s=t;var i=n.Long?"toLong":"toNumber";n.merge(o.prototype,{int64:function(){return u.call(this)[i](!1)},uint64:function(){return u.call(this)[i](!0)},sint64:function(){return u.call(this).zzDecode()[i](!1)},fixed64:function(){return f.call(this)[i](!0)},sfixed64:function(){return f.call(this)[i](!1)}})}},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"_",{value:!0}),s(e(61)),s(e(49)),s(e(146)),s(e(150)),s(e(66)),s(e(72))},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(31),n=function(){function t(){}return t.encode=function(t){if(!/^[0-1]+$/.test(t))throw new s.EncodingError("Invalid bitField");var i=t.length%this.LCM;t+=i?"0".repeat(this.LCM-i):"";for(var e="",n=0;n<t.length;n+=this.BASIS)e+=this.DICT[parseInt(t.substr(n,this.BASIS),2)];return e},t.decode=function(t){if(!/^[A-Za-z0-9\-_]+$/.test(t))throw new s.DecodingError("Invalidly encoded Base64URL string");for(var i="",e=0;e<t.length;e++){var n=this.REVERSE_DICT.get(t[e]).toString(2);i+="0".repeat(this.BASIS-n.length)+n}return i},t.DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",t.REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]),t.BASIS=6,t.LCM=24,t}();i.Base64Url=n},function(t,i,e){"use strict";var s,n=this&&this.vs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.root=null,i}return n(i,t),i.prototype.isEmpty=function(){return!this.root},i.prototype.add=function(t){var i,e={value:t,left:null,right:null};if(this.isEmpty())this.root=e;else for(i=this.root;;)if(t<i.value){if(null===i.left){i.left=e;break}i=i.left}else{if(!(t>i.value))break;if(null===i.right){i.right=e;break}i=i.right}},i.prototype.get=function(){for(var t=[],i=this.root;i;)if(i.left){for(var e=i.left;e.right&&e.right!=i;)e=e.right;e.right==i?(e.right=null,t.push(i.value),i=i.right):(e.right=i,i=i.left)}else t.push(i.value),i=i.right;return t},i.prototype.contains=function(t){for(var i=!1,e=this.root;e;){if(e.value===t){i=!0;break}t>e.value?e=e.right:t<e.value&&(e=e.left)}return i},i.prototype.min=function(t){var i;for(void 0===t&&(t=this.root);t;)t.left?t=t.left:(i=t.value,t=null);return i},i.prototype.max=function(t){var i;for(void 0===t&&(t=this.root);t;)t.right?t=t.right:(i=t.value,t=null);return i},i.prototype.remove=function(t,i){void 0===i&&(i=this.root);for(var e=null,s="left";i;)if(t<i.value)e=i,i=i.left,s="left";else if(t>i.value)e=i,i=i.right,s="right";else{if(i.left||i.right)if(i.left)if(i.right){var n=this.min(i.right);this.remove(n,i.right),i.value=n}else e?e[s]=i.left:this.root=i.left;else e?e[s]=i.right:this.root=i.right;else e?e[s]=null:this.root=null;i=null}},i}(e(36).Cloneable);i.BinarySearchTree=r},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=function(){function t(){}return t.cmpId="cmpId",t.cmpVersion="cmpVersion",t.consentLanguage="consentLanguage",t.consentScreen="consentScreen",t.created="created",t.supportOOB="supportOOB",t.isServiceSpecific="isServiceSpecific",t.lastUpdated="lastUpdated",t.numCustomPurposes="numCustomPurposes",t.policyVersion="policyVersion",t.publisherCountryCode="publisherCountryCode",t.publisherCustomConsents="publisherCustomConsents",t.publisherCustomLegitimateInterests="publisherCustomLegitimateInterests",t.publisherLegitimateInterests="publisherLegitimateInterests",t.publisherConsents="publisherConsents",t.publisherRestrictions="publisherRestrictions",t.purposeConsents="purposeConsents",t.purposeLegitimateInterests="purposeLegitimateInterests",t.purposeOneTreatment="purposeOneTreatment",t.specialFeatureOptins="specialFeatureOptins",t.useNonStandardStacks="useNonStandardStacks",t.vendorConsents="vendorConsents",t.vendorLegitimateInterests="vendorLegitimateInterests",t.vendorListVersion="vendorListVersion",t.vendorsAllowed="vendorsAllowed",t.vendorsDisclosed="vendorsDisclosed",t.version="version",t}();i.Fields=s},function(t,i,e){"use strict";var s,n=this&&this.vs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=e(36),h=e(31),a=e(50),o=function(t){function i(i,e){var s=t.call(this)||this;return void 0!==i&&(s.purposeId=i),void 0!==e&&(s.restrictionType=e),s}return n(i,t),i.unHash=function(t){var e=t.split(this.hashSeparator),s=new i;if(2!==e.length)throw new h.TCModelError("hash",t);return s.purposeId=parseInt(e[0],10),s.restrictionType=parseInt(e[1],10),s},Object.defineProperty(i.prototype,"hash",{get:function(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return""+this.purposeId+i.hashSeparator+this.restrictionType},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"purposeId",{get:function(){return this.purposeId_},set:function(t){this.purposeId_=t},enumerable:!0,configurable:!0}),i.prototype.isValid=function(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===a.RestrictionType.NOT_ALLOWED||this.restrictionType===a.RestrictionType.REQUIRE_CONSENT||this.restrictionType===a.RestrictionType.REQUIRE_LI)},i.prototype.isSameAs=function(t){return this.purposeId===t.purposeId&&this.restrictionType===t.restrictionType},i.hashSeparator="-",i}(r.Cloneable);i.PurposeRestriction=o},function(t,i,e){"use strict";var s;Object.defineProperty(i,"_",{value:!0}),(s=i.Segment||(i.Segment={})).CORE="core",s.VENDORS_DISCLOSED="vendorsDisclosed",s.VENDORS_ALLOWED="vendorsAllowed",s.PUBLISHER_TC="publisherTC"},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"_",{value:!0}),s(e(39)),s(e(67)),s(e(147)),s(e(51)),s(e(35)),s(e(68)),s(e(69)),s(e(71)),s(e(70))},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(35),n=e(31),r=function(){function t(){}return t.encode=function(t,i){return s.IntEncoder.encode(Math.round(t.getTime()/100),i)},t.decode=function(t,i){if(i!==t.length)throw new n.DecodingError("invalid bit length");var e=new Date;return e.setTime(100*s.IntEncoder.decode(t,i)),e},t}();i.DateEncoder=r},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(35),n=e(31),r=function(){function t(){}return t.encode=function(t,i){var e=(t=t.toUpperCase()).charCodeAt(0)-65,r=t.charCodeAt(1)-65;if(e<0||e>25||r<0||r>25)throw new n.EncodingError("invalid language code: "+t);if(i%2==1)throw new n.EncodingError("numBits must be even, "+i+" is not valid");return i/=2,s.IntEncoder.encode(e,i)+s.IntEncoder.encode(r,i)},t.decode=function(t,i){if(i!==t.length||t.length%2)throw new n.DecodingError("invalid bit length for language");var e=t.length/2,r=s.IntEncoder.decode(t.slice(0,e),e)+65,h=s.IntEncoder.decode(t.slice(e),e)+65;return String.fromCharCode(r)+String.fromCharCode(h)},t}();i.LangEncoder=r},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(49),n=e(39),r=e(31),h=e(35),a=e(32),o=function(){function t(){}return t.encode=function(t){var i=h.IntEncoder.encode(t.numRestrictions,s.BitLength.numRestrictions);return t.isEmpty()||t.getRestrictions().forEach(function(e){i+=h.IntEncoder.encode(e.purposeId,s.BitLength.purposeId),i+=h.IntEncoder.encode(e.restrictionType,s.BitLength.restrictionType);for(var r=t.getVendors(e),a=r.length,o=0,c=0,l="",u=0;u<a;u++){var d=r[u];if(0===c&&(o++,c=d),u===a-1||r[u+1]>d+1){var f=!(d===c);l+=n.BooleanEncoder.encode(f),l+=h.IntEncoder.encode(c,s.BitLength.vendorId),f&&(l+=h.IntEncoder.encode(d,s.BitLength.vendorId)),c=0}}i+=h.IntEncoder.encode(o,s.BitLength.numEntries),i+=l}),i},t.decode=function(t){var i=0,e=new a.PurposeRestrictionVector,o=h.IntEncoder.decode(t.substr(i,s.BitLength.numRestrictions),s.BitLength.numRestrictions);i+=s.BitLength.numRestrictions;for(var c=0;c<o;c++){var l=h.IntEncoder.decode(t.substr(i,s.BitLength.purposeId),s.BitLength.purposeId);i+=s.BitLength.purposeId;var u=h.IntEncoder.decode(t.substr(i,s.BitLength.restrictionType),s.BitLength.restrictionType);i+=s.BitLength.restrictionType;var d=new a.PurposeRestriction(l,u),f=h.IntEncoder.decode(t.substr(i,s.BitLength.numEntries),s.BitLength.numEntries);i+=s.BitLength.numEntries;for(var p=0;p<f;p++){var b=n.BooleanEncoder.decode(t.substr(i,s.BitLength.anyBoolean));i+=s.BitLength.anyBoolean;var v=h.IntEncoder.decode(t.substr(i,s.BitLength.vendorId),s.BitLength.vendorId);if(i+=s.BitLength.vendorId,b){var g=h.IntEncoder.decode(t.substr(i,s.BitLength.vendorId),s.BitLength.vendorId);if(i+=s.BitLength.vendorId,g<v)throw new r.DecodingError("Invalid RangeEntry: endVendorId "+g+" is less than "+v);for(var m=v;m<=g;m++)e.add(m,d)}else e.add(v,d)}}return e.bitLength=i,e},t}();i.PurposeRestrictionVectorEncoder=o},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(32),n=e(60),r=e(35),h=e(39),a=e(51),o=e(71),c=e(31),l=function(){function t(){}return t.encode=function(t){var i,e=[],s=[],a=r.IntEncoder.encode(t.maxId,n.BitLength.maxId),c="",l=n.BitLength.maxId+n.BitLength.encodingType,u=l+t.maxId,d=2*n.BitLength.vendorId+n.BitLength.singleOrRange+n.BitLength.numEntries,f=l+n.BitLength.numEntries;return t.forEach(function(r,a){c+=h.BooleanEncoder.encode(r),(i=t.maxId>d&&f<u)&&r&&(t.has(a+1)?0===s.length&&(s.push(a),f+=n.BitLength.singleOrRange,f+=n.BitLength.vendorId):(s.push(a),f+=n.BitLength.vendorId,e.push(s),s=[]))}),i?(a+=o.VectorEncodingType.RANGE+"",a+=this.buildRangeEncoding(e)):(a+=o.VectorEncodingType.FIELD+"",a+=c),a},t.decode=function(t,i){var e,l=0,u=r.IntEncoder.decode(t.substr(l,n.BitLength.maxId),n.BitLength.maxId);l+=n.BitLength.maxId;var d=r.IntEncoder.decode(t.charAt(l),n.BitLength.encodingType);if(l+=n.BitLength.encodingType,d===o.VectorEncodingType.RANGE){if(e=new s.Vector,1===i){if("1"===t.substr(l,1))throw new c.DecodingError("Unable to decode default consent=1");l++}var f=r.IntEncoder.decode(t.substr(l,n.BitLength.numEntries),n.BitLength.numEntries);l+=n.BitLength.numEntries;for(var p=0;p<f;p++){var b=h.BooleanEncoder.decode(t.charAt(l));l+=n.BitLength.singleOrRange;var v=r.IntEncoder.decode(t.substr(l,n.BitLength.vendorId),n.BitLength.vendorId);if(l+=n.BitLength.vendorId,b){var g=r.IntEncoder.decode(t.substr(l,n.BitLength.vendorId),n.BitLength.vendorId);l+=n.BitLength.vendorId;for(var m=v;m<=g;m++)e.set(m)}else e.set(v)}}else{var y=t.substr(l,u);l+=u,e=a.FixedVectorEncoder.decode(y,u)}return e.bitLength=l,e},t.buildRangeEncoding=function(t){var i=t.length,e=r.IntEncoder.encode(i,n.BitLength.numEntries);return t.forEach(function(t){var i=1===t.length;e+=h.BooleanEncoder.encode(!i),e+=r.IntEncoder.encode(t[0],n.BitLength.vendorId),i||(e+=r.IntEncoder.encode(t[1],n.BitLength.vendorId))}),e},t}();i.VendorVectorEncoder=l},function(t,i,e){"use strict";var s;Object.defineProperty(i,"_",{value:!0}),(s=i.VectorEncodingType||(i.VectorEncodingType={}))[s.FIELD=0]="FIELD",s[s.RANGE=1]="RANGE"},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"_",{value:!0}),s(e(148)),s(e(149))},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(60),n=e(32),r=e(35),h=e(151),a=function(){function t(){}return t.encode=function(t,i){var e,n,r="";return t=s.SemanticPreEncoder.process(t,i),(n=Array.isArray(null===(e=i)||void 0===e?void 0:e.segments)?i.segments:new s.SegmentSequence(t,i)[""+t.version]).forEach(function(i,e){var h="";e<n.length-1&&(h="."),r+=s.SegmentEncoder.encode(t,i)+h}),r},t.decode=function(t,i){var e=t.split("."),a=e.length;i||(i=new h.TCModel);for(var o=0;o<a;o++){var c=e[o],l=s.Base64Url.decode(c.charAt(0)).substr(0,s.BitLength.segmentType),u=n.SegmentIDs.ID_TO_KEY[r.IntEncoder.decode(l,s.BitLength.segmentType).toString()];s.SegmentEncoder.decode(c,i,u)}return i},t}();i.TCString=a},function(t,i,e){"use strict";var s=e(154).decodeConsentString;t.exports={decodeConsentString:s}},function(t,i,e){"use strict";e.d(i,"a",function(){return E});var s=e(0),n=e.n(s),r=e(5),h=e(8),a=e(1),o=e(123),c=e(76),l=e(77),u=e(78),d=e(14),f=e(17),p=e(27),b=e(2),v=e(7),g=e(20),m=e(79),y=e(29),x=e(40),w=e(80),k=e(120),S=e(121),O=e(24),_=e(19),j=e(81),A=e(12),T=e(18),C=e(3),I=e(82),P=e(122);const M="player_instance";class E extends A.a{constructor(t,i,e,s,n,r){super(),this.services=t,this.GLOBAL=i,this.Ke=e,this.Ze=s,this.gs=n,this.readyCallback=r,this.ms={},this.ys="<cnx-placeholder></cnx-placeholder>",this.ws=100,this.ks=1e3,this.isServerlessMode=!1,this.Ss=!1,this.Os=[],this._s="{{omidVerificationClient}}",this.Ke&&this.js(),this.As=this.Ts(this.GLOBAL),this.Cs=Object(a.p)(this.GLOBAL)}Is(){const t={playerId:this.externalAttributes.playerId,_appSettings:this.externalAttributes._appSettings,settings:{_connatixInternals:this.externalAttributes.settings._connatixInternals,advertising:{},customization:{},rendering:{},plugins:{}}};this.externalAttributes.customParam1&&(t.customParam1=this.externalAttributes.customParam1),this.externalAttributes.customParam2&&(t.customParam2=this.externalAttributes.customParam2),this.externalAttributes.customParam3&&(t.customParam3=this.externalAttributes.customParam3),this.externalAttributes.settings.useExternalViewabilityService&&(t.settings.useExternalViewabilityService=this.externalAttributes.settings.useExternalViewabilityService),this.externalAttributes=t}Ps(t){const i=this.GLOBAL.frameElement;if(!Object(a.D)(i))return;let e=!0;i&&t&&(e=!1),e?Object(a.v)(i):Object(a.P)(i)}Es(t,i){try{return this.Ls(t,i)}catch(t){return null}}Rs(t){let i;try{i=eval(t)}catch(e){i=t.replace(/\[(\d+)]/g,":nth-child($1)")}return i}Ds(t,i){const e=this.Es(t,i);return null===e?new Promise(e=>{setTimeout(()=>{e(this.Ds(t,i))},this.ws)}):Promise.resolve(e)}Bs(t,i){const e=this.Rs(t);return Promise.resolve(this.Ds(e,i))}Ls(t,i){let e;return t.split(/(\.cnxEq\(\d+\))/).filter(t=>t).forEach(t=>{e=-1===t.indexOf("cnxEq")?e?e.querySelectorAll(t):Object(a.H)(t,i):this.$s(e,t)}),e?(e.hasOwnProperty("length")&&(e=e.length>0?e[0]:null),e):null}$s(t,i){const e=/\d+/g.exec(i),s=parseInt(e[0],10);return s>t.length?Object(v.c)(t)[t.length-1]:Object(v.c)(t)[s]}Fs(){return this.Ze?s.ProtoImplementationType.Amp:s.ProtoImplementationType.Web}Vs(t,i){const e=Object(h.f)(this.GLOBAL);let s;return s=Object(b.a)(this.externalAttributes.settings.rendering.forceInsertPath)?this.externalAttributes.settings.rendering.forceInsertPath:i.forceInsertPath,new Promise((n,r)=>{let h=Object(a.g)(this.ys,this.GLOBAL);if(s||t.tag.parentNode===this.GLOBAL.document.head&&(!e.topChildFrame||i.renderInFrame)){let t,s,r;e.topChildFrame&&Object(a.I)(e.topChildFrame.frameElement,C.h.DisplayNone),t=Object(b.h)(this.externalAttributes.settings.rendering.containerSelector)?this.externalAttributes.settings.rendering.containerSelector:i.containerSelector,s=Object(b.a)(this.externalAttributes.settings.rendering.insertPosition)?this.externalAttributes.settings.rendering.insertPosition:i.insertPosition,r=Object(b.a)(this.externalAttributes.settings.rendering.position)?this.externalAttributes.settings.rendering.position:i.position,this.Bs(t,e.topFrame).then(t=>{this.Us(t,h,s,r),n({insertContainer:h,insertWindow:e.topFrame})})}else e.topChildFrame&&!i.renderInFrame?(h=Object(a.g)(this.ys,e.topFrame),e.topChildFrame.frameElement.parentNode.insertBefore(h,e.topChildFrame.frameElement),Object(a.a)(e.topChildFrame.frameElement,C.h.DisplayNone),n({insertContainer:h,insertWindow:e.topFrame})):(t.tag.parentNode.insertBefore(h,t.tag),n({insertContainer:h}))})}Ns(t,i,e){Object(a.y)(i,t,e)}Hs(t,i,e){switch(e){case s.ProtoPlayerInsertMode.BeforeContainer:t.parentElement.insertBefore(i,t);break;case s.ProtoPlayerInsertMode.ReplaceContainer:t.parentElement.insertBefore(i,t),Object(a.J)(t);break;case s.ProtoPlayerInsertMode.HideContainer:t.parentElement.insertBefore(i,t),Object(a.v)(t);break;case s.ProtoPlayerInsertMode.AfterContainer:t.nextElementSibling?t.parentElement.insertBefore(i,t.nextElementSibling):t.parentElement.appendChild(i)}}Us(t,i,e,n){e===s.ProtoPlayerInsertMode.WithinContainer?this.Ns(t,i,n):this.Hs(t,i,e)}qs(t,i=[]){t.lineItems=[...t.lineItems,...i];const e=t.lineItems.length;t.lineItems=Object(v.d)("advertiserLineItemId",t.lineItems);const n=this.GLOBAL.cnxOverrideLineitems;this.queryParams.cnxOverrideLineitems&&Object(v.h)(n)&&t.lineItems.forEach((i,e)=>{const s=n.find(({advertiserLineItemId:t})=>t===i.advertiserLineItemId);s&&(t.lineItems[e]=Object.assign(Object.assign({},i),s))}),e!==t.lineItems.length&&Object(r.a)({level:s.ProtoLoggingLevelEnum.WARNING,message:"Loader_duplicated_adsources",callStack:"_"})}zs(t,i,e){const n=i.players[e],{playerModel:a,globalDomUtilsService:o}=this.ms[e];if(this.As||this.services.UserManagerService.setThirdPartySyncUrls(i.cookieSyncUrls),this.services.UserManagerService.setGeoLocation(i.geoLocation),p.a.sessionId=n.sessionId,this.Ws.addPlayerSession(n.playerId,n.sessionId),!a)return void this.registerApiError(g.a.SetupError,"No playlist was provided!");const d=new u.a({browser:i.browser,geoLocation:i.geoLocation,pageUrl:this.pageUrl,playerId:a.playerId,explorationMode:i.explorationMode,bundleID:this.externalAttributes._appSettings.bundleID,appID:this.externalAttributes._appSettings.appID,domainURL:this.externalAttributes._appSettings.domainURL,storeURL:this.externalAttributes._appSettings.storeURL,appCategories:this.externalAttributes._appSettings.appCategories,appIsPaid:this.externalAttributes._appSettings.appIsPaid,appName:this.externalAttributes._appSettings.appName,appPrivacyPolicy:this.externalAttributes._appSettings.appPrivacyPolicy,appVersion:this.externalAttributes._appSettings.appVersion,deviceId:this.externalAttributes._appSettings.deviceID}),f=d.browser.browserType===_.a.InternetExplorer,v=new m.a(o),y=this.getViewabilityService(a,v,f),w=this.As;if(this.As=this.Ts(a.global),w!==this.As&&Object(r.a)({message:"Loader_adBlockerDetection_changed_after_new_global",throttle:2,sendMaxLog:!1,level:s.ProtoLoggingLevelEnum.INFO,exception:`${w}`}),this.As){Object(h.l)([95,5])&&Object(r.a)({message:"Loader_adBlockerDetected",throttle:2,sendMaxLog:!1,level:s.ProtoLoggingLevelEnum.INFO})}const k=new l.a(a,i.geoLocation,d.pageUrl,d.pageDomain,this.externalAttributes._appSettings,this.Cs),S={services:{GlobalDomUtilsService:o,ViewabilityService:y,TrackingService:this.Gs(a,i,e),ResizeObserver:new c.a(a.global),UserManagerService:this.services.UserManagerService,MacrosService:k,EventsStorageService:this.services.EventsStorageService,PageFocusService:v},config:d},O=this.Fs();S.services.TrackingService.setImplementationTypeOnMeta(O),a.externalMacros&&S.services.MacrosService.addExtraMacros(a.externalMacros),S.services.UserManagerService.onEvent([x.a.CCPA_INFO_RECEIVED]).then(()=>{S.services.MacrosService.setUsPrivacyString(S.services.UserManagerService.getUsPrivacyString())}),S.services.UserManagerService.onEvent([x.a.CONSENT_DATA_UPDATE]).then(()=>{S.services.TrackingService.updateMetadataModel({userId:S.services.UserManagerService.getTrackableUser()});const t=S.services.UserManagerService.getConsentPayload();if(S.services.TrackingService.hasGdprConsentPayload=Object(b.h)(t),this.services.UserManagerService.gdprConsentMode===s.ProtoGdprConsentModeEnum.NoConsent){const t=a.lineItemSettings.lineItems.filter(t=>Object(b.h)(t.vendorId)).every(t=>this.services.UserManagerService.isConsent(t.vendorId));this.services.UserManagerService.gdprConsentMode=t?s.ProtoGdprConsentModeEnum.AllGood:s.ProtoGdprConsentModeEnum.NotAllDemandConsent}});const j={wasPlayerReloaded:this.Ws.wasPlayerReloaded(n.playerId),wasPlayerInView:this.Ws.getSessionInView(n.playerId)};this.renderer=this.getRendererInstance(a,S,this.As,j,this.externalAttributes._appSettings),this.subscribe(T.b.SessionView,this.renderer,()=>{this.Ws.addSessionInView(n.playerId)}),this.subscribe(T.b.SessionRendered,this.renderer,()=>{if(this.Qs){const t=this.services.UserManagerService.getUserId();new P.a(k,o,this.Qs,t).addFraudSensorScript()}});const A=this.renderer.init(),C=Object.assign({configEnums:this.getApiConfigEnums(),configEvents:this.getApiConfigEvents()},this.renderer.getApiMethods());let I=n.customJsCode;if(I){const t=`${M}_${S.config.appId}`;this.GLOBAL[t]=C,I=I.cnx_replaceAll(`"{{${M}}}"`,`window.${t}`)}A?this.registerApiSuccess(C,I):this.registerApiError(g.a.RenderError,"Player size under supported value")}Gs(t,i,e){return t.disableTracking?new w.a:new o.a({userManagerService:this.services.UserManagerService,browser:i.browser,geoLocation:i.geoLocation,playerId:t.playerId,userId:this.services.UserManagerService.getTrackableUser(),sessionId:i.players[e].sessionId,pageUrl:this.pageUrl,bundleId:this.externalAttributes._appSettings.bundleID,generationId:i.geneticAlgoInformation.generationId,individualId:i.geneticAlgoInformation.individualId,customParam1:this.externalAttributes.customParam1,customParam2:this.externalAttributes.customParam2,customParam3:this.externalAttributes.customParam3})}Js(t,i={useSafeMode:!0}){if(!t)return;const{global:e,useSafeMode:s}=i,n=e||this.GLOBAL;let r;r=s?`\n        (function() {\n            "use strict";\n            try {\n                ${t}\n            }catch(e){\n                console.warn('---CnxCustomApiError---');\n                console.warn(e.message);\n            }\n          })()\n        `:t,Object(a.z)(n.document.head,n,r.trim())}js(){if(this._s.includes("{{omidVerificationClient"))return;const t={useSafeMode:!1,global:window};this.Js(decodeURI(this._s),t)}Ys(){const{playerId:t,parseDomain:i}=this.Ks;return this.Zs({parseDomain:i,tokens:[t]}).catch(t=>{const i=new Error(t);throw Object(r.a)({callStack:i.stack,level:s.ProtoLoggingLevelEnum.FATAL,exception:i.message,message:"Loader_player_id_call_get_pls"}),this.registerApiError(g.a.SetupError,"player data call error"),this.tn(),i})}in(t){const{browser:i,userInformation:e}=t;if(this.services.UserManagerService.setUserInformation(e),this.services.UserManagerService.setBrowserInfo(i),e&&e.callFraudSensor){const{lookupId:t,lookupResponseCode:s,publisherAdsTxt:n}=e;this.Qs={lookupId:t,lookupResponseCode:s,publisherAdsTxt:n,deviceType:i.device}}y.a.serverAb0=t.serverAb0,y.a.serverAb1=t.serverAb1,Object(v.h)(t.players)?(t.players.length>1&&(this.Is(),this.Ss=!0),Object.keys(t.players).forEach(i=>{this.en(t,this.Ks,i)})):this.registerApiError(g.a.NoPlayer,`No player available for given player id:${this.Ks.playerId}`),this.tn()}tn(){this.nn(),this.rn()}rn(){setTimeout(()=>{if(!this.Ss){const t=this.Os[0];this.readyCallback&&this.readyCallback(t.apiErrorObj,t.apiConfigObj)}this.hn()})}hn(){this.Os.filter(t=>t.apiErrorObj).forEach(()=>{this.services.EventsStorageService.emitRenderError()}),this.Os.filter(t=>t.customJs).forEach(t=>{this.Js(t.customJs)})}en(t,i,e){const s=t.players[e];this.Ps(s.renderInFrame),this.zs(i,t,e),this.an(t.secondLevelDomain)}Ts(t){try{let i=!1;t.document.body.insertAdjacentHTML("beforeend",'<style>.adBanner{background-color: transparent; height: 1px !important; width: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important; display:block !important; }</style><div id="cnxtestadblock" class="adBanner"></div>');const e=t.document.getElementById("cnxtestadblock");return 0!==e.getBoundingClientRect().height&&0!==e.getBoundingClientRect().width||(i=!0),t.document.body.removeChild(e),i}catch(t){return!1}}Zs(t){let i=Object.assign({referrer:this.Cs,pageUrl:this.pageUrl},t);i.bundleId=this.externalAttributes._appSettings.bundleID,this.queryParams.cnxLineItemId&&(i.forceLineItemId=this.queryParams.cnxLineItemId),this.queryParams.cnxPlayerId&&(i.forcePlayerId=this.queryParams.cnxPlayerId),this.queryParams.cnxExplorationMode&&(i.forceExploration=!0);const{queryJsTargeting:e}=this.externalAttributes.settings;Object(b.f)(e)&&Object.keys(e).length>0&&(i.queryJsTargeting=Object.keys(e).reduce((t,i)=>Object.assign(Object.assign({},t),{[i]:`${e[i]}`}),{})),i.customParam1=this.externalAttributes.customParam1,i.customParam2=this.externalAttributes.customParam2,i.customParam3=this.externalAttributes.customParam3;const{disableTracking:s,skipServingRules:n}=this.externalAttributes.settings._connatixInternals;return i.disableTracking=s,i.skipServingRules=n,i.version=f.a.version,i.es6=f.b,i.userId=this.services.UserManagerService.getForcedTrackableUser(),i.isConsentConnatix=this.services.UserManagerService.isConsentConnatix(),i.clientAb0=y.a.clientAb0,i.clientAb1=y.a.clientAb1,i.implementationType=this.Fs(),i.reloadedPlayers=this.Ws.getCookiePlayersSession(),i=Object.assign(Object.assign({},i),this.getSpecificRequestData()),this.Ks.playerId?this.getPlayerResponse(i):new Promise((t,i)=>{this.isServerlessMode=!0,t(this.defaultInitFromProto())})}cn(){const t=Object(d.b)("cnxVideoPosition",this.pageUrl),i=parseInt(Object(d.b)("cnxStoryPosition",this.pageUrl),10);return{cnxStoryId:Object(d.b)("cnxStoryId",this.pageUrl),cnxLineItemId:Object(d.b)("cnxLineItemId",this.pageUrl),cnxPlayerId:Object(d.b)("cnxPlayerId",this.pageUrl),cnxMediaId:Object(d.b)("cnxMediaId",this.pageUrl),cnxPlaylistId:Object(d.b)("cnxPlaylistId",this.pageUrl),cnxVideoPosition:t?parseInt(t,10):null,cnxExplorationMode:"true"===Object(d.b)("cnxExplorationMode",this.pageUrl),cnxStoryPosition:Object(b.e)(i)?i:null,cnxSkipAdsFlag:"true"===Object(d.b)("cnxSkipAdsFlag",this.pageUrl),cnxReloadTime:parseInt(Object(d.b)("cnxReloadTime",this.pageUrl),10),cnxOverrideLineitems:"true"===Object(d.b)("cnxOverrideLineitems",this.pageUrl),cnxIsSeoTraffic:"true"===Object(d.b)("cnxIsSeoTraffic",this.pageUrl)}}ln(){const t=this.getDelegateHandler();this.un=new k.a(this.GLOBAL,this.services.EventsStorageService,this.externalAttributes.settings.plugins,t)}an(t){this.un&&this.un.start(t,f.a.version)}dn(){const t=this.GLOBAL.OmidSessionClient&&this.GLOBAL.OmidSessionClient[O.j];t?this.pn=new S.a(t,this.services.EventsStorageService,this.externalAttributes._appSettings.sdkVersion):Object(r.a)({message:"OmidSessionClient not found.",level:s.ProtoLoggingLevelEnum.FATAL})}bn(t){const i=()=>new Promise((i,e)=>{const s=this.vn();t.addCssStylesheetToHead(s,()=>i(),t=>e(t))});return Object(h.k)(()=>i()).catch(t=>{throw Object(r.a)({message:"Loader_add_css_link",exception:t,level:s.ProtoLoggingLevelEnum.INFO}),new Error(t)})}updateQueryParams(){this.queryParams=this.cn()}loadScriptTag(t,i){let e;if(this.externalAttributes=t,i&&(e=this.GLOBAL.document.getElementById(i)),!e)return Object(r.a)({message:"Loader_no_script_id",exception:`${t.playerId}`,level:s.ProtoLoggingLevelEnum.FATAL}),this.registerApiError(g.a.SetupError,"Could not locate any script tag ids in the page"),!1;const{plugins:n}=t.settings,h=Object(b.f)(n)&&Object(b.f)(n.adobeAnalyticsSettings);return h&&this.ln(),this.gs&&this.dn(),this.Ks={parseDomain:h,playerId:t.playerId,tag:e},!0}insertRenderer(){try{this.Ws=new j.a(this.queryParams.cnxReloadTime),this.Ps();const t=()=>{this.Ys().then(t=>{const i=[];t.players.forEach((e,n)=>{t.players[n].limitClientSideApiUse&&this.Is();const h=this.Vs(this.Ks,e).then(i=>{this.qs(e,t.lineItems);const s=this.getPlayerModel(i,t,n.toString()),r=new I.a(s.global);return this.ms[n]={playerModel:s,globalDomUtilsService:r},this.bn(r)}).catch(t=>{this.registerApiError(g.a.SetupError,"rendering error"),Object(r.a)({message:"Loader_send_data_to_renderer",exception:t.message,callStack:t.stack,level:s.ProtoLoggingLevelEnum.FATAL})});i.push(h)}),Promise.all(i).then(()=>this.in(t))})};this.nn=this.services.UserManagerService.registerPlsCall(t)}catch(t){Object(r.a)({message:"Loader_insert_renderer",exception:t.message,callStack:t.stack,level:s.ProtoLoggingLevelEnum.FATAL})}}findPageUrl(t){if(t.cnx_page_url)this.pageUrl=t.cnx_page_url;else try{t["cnxAmpAd)"]?this.pageUrl=t.context.sourceUrl||t.context.location.href:this.pageUrl=Object(h.d)(Object(h.f)(this.GLOBAL),this.GLOBAL)}catch(t){}if(!this.pageUrl||0===this.pageUrl.length)return new Promise(i=>{setTimeout(()=>{this.findPageUrl(t).then(()=>i())},this.ks)});try{return this.pageUrl=Object(d.e)(this.pageUrl),Promise.resolve()}catch(t){return Object(r.a)({message:"Loader_find_page_url",exception:t.message,callStack:t.stack,level:s.ProtoLoggingLevelEnum.FATAL}),Promise.reject()}}registerApiError(t=g.a.SetupError,i=""){this.Os.push({apiErrorObj:{type:t,message:i}})}registerApiSuccess(t,i){this.Os.push({apiConfigObj:t,customJs:i})}}},function(t,i,e){"use strict";e.d(i,"a",function(){return o});var s=e(5),n=e(19),r=e(1),h=e(0);const a=[{name:n.d.Standard,keys:{animationStart:"animationstart",animationName:"animationName",keyFramePrefix:""}},{name:n.d.Webkit,keys:{animationStart:"webkitAnimationStart",animationName:"WebkitAnimationName",keyFramePrefix:"-webkit-"}},{name:n.d.Moz,keys:{animationStart:"animationstart",animationName:"MozAnimationName",keyFramePrefix:"-moz-"}},{name:n.d.O,keys:{animationStart:"oAnimationStart",animationName:"OAnimationName",keyFramePrefix:"-o-"}},{name:n.d.Ms,keys:{animationStart:"MSAnimationStart",animationName:"msAnimationName",keyFramePrefix:"-ms-"}}];class o{constructor(t){this.ae=t,this.gn="cnx-resize-observer-style",this.mn='<div class="cnx-resize-triggers"><div class="cnx-expand-trigger"><div></div></div><div class="cnx-contract-trigger"></div></div>',this.yn="resizeanim",this.xn=[],this.wn=t=>{try{const i=t.target.parentElement.parentElement;try{const t=this.kn(i);if(!t)return;this.resetTriggers(t),t.requestAnimationFrameID&&Object(r.f)(this.ae,t.requestAnimationFrameID),t.requestAnimationFrameID=Object(r.N)(this.ae,()=>{this.Sn(t)&&(t.resizeLast.width=t.element.offsetWidth,t.resizeLast.height=t.element.offsetHeight,t.callbacks.forEach(t=>{t()}))})}catch(t){Object(s.a)({message:"ResizeObserver_scrollListener",callStack:t.stack,exception:`classes: ${i.className} ${t.message}`,level:h.ProtoLoggingLevelEnum.FATAL})}}catch(t){Object(s.a)({callStack:t.stack,exception:t.message,message:"ResizeObserver_scrollListener_not_found",level:h.ProtoLoggingLevelEnum.FATAL})}};try{this._n(),Object(r.n)(this.gn,this.ae)||this.jn()}catch(t){Object(s.a)({message:"ResizeObserver_constructor",callStack:t.stack,exception:t.message,level:h.ProtoLoggingLevelEnum.FATAL})}}_n(){const t=this.ae.document.createElement("fakeelement");this.animationKeys=a.find(i=>{if(i.keys.animationName in t.style)return!0})}jn(){const t=`${`@${this.animationKeys.keys.keyFramePrefix}keyframes ${this.yn} { from { opacity: 0; } to { opacity: 0; } }`} .cnx-resize-triggers { ${`${this.animationKeys.keys.keyFramePrefix} animation: 1ms ${this.yn};`} visibility: hidden; opacity: 0; } .cnx-resize-triggers, .cnx-resize-triggers > div,\n        .cnx-contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; }\n        .cnx-resize-triggers > div { background: #eee; overflow: auto; } .cnx-contract-trigger:before { width: 200%; height: 200%; }`;Object(r.b)(t,this.gn,this.ae)}kn(t){return this.xn.find(i=>i.element===t)}An(t,i){const e=this.kn(t);e?e.callbacks.push(i):this.xn.push({element:t,callbacks:[i],resizeLast:{height:0,width:0}})}resetTriggers(t){try{const i=t.resizeTriggers,e=i.firstElementChild,n=i.lastElementChild,r=e.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,r.style.width=`${e.offsetWidth+1}px`,r.style.height=`${e.offsetHeight+1}px`,e.scrollLeft=e.scrollWidth,e.scrollTop=e.scrollHeight}catch(t){Object(s.a)({message:"ResizeObserver_resetTriggers",callStack:t.stack,exception:t.message,level:h.ProtoLoggingLevelEnum.FATAL})}}Sn(t){return t.element.offsetWidth!==t.resizeLast.width||t.element.offsetHeight!==t.resizeLast.height}on(t,i){try{let e=this.kn(t);e?e.callbacks.push(i):("static"===Object(r.m)(t,this.ae).position&&(t.style.position="relative"),this.An(t,i),(e=this.kn(t)).resizeTriggers=Object(r.g)(this.mn,this.ae),e.element.appendChild(e.resizeTriggers),this.resetTriggers(e),e.element.addEventListener("scroll",this.wn,!0),e.resizeTriggers.addEventListener(this.animationKeys.keys.animationStart,t=>{t&&t.animationName===this.yn&&this.resetTriggers(e)}))}catch(i){Object(s.a)({callStack:i.stack,exception:`classes: ${t.className} ${i.message}`,message:"ResizeObserver_on",level:h.ProtoLoggingLevelEnum.FATAL})}}off(t,i){try{const e=this.kn(t);e&&(e.callbacks.splice(e.callbacks.indexOf(i),1),e.callbacks.length||(e.element.removeEventListener("scroll",this.wn,!0),e.element.removeChild(e.resizeTriggers),this.xn.splice(this.xn.indexOf(e),1)))}catch(t){Object(s.a)({callStack:t.stack,exception:t.message,message:"ResizeObserver_off",level:h.ProtoLoggingLevelEnum.FATAL})}}destroy(){this.xn.forEach(t=>{t.callbacks.forEach(i=>{this.off(t.element,i)})})}}},function(t,i,e){"use strict";e.d(i,"a",function(){return l});var s,n=e(0),r=e(8),h=e(1),a=e(23),o=e(2),c=e(28);!function(t){t.AppUrl="APP_URL",t.AppBundle="APP_BUNDLE",t.AppName="APP_NAME",t.Uuid="UUID",t.PageUrl="PAGE_URL",t.AdPosition="AD_POSITION",t.VideoTitle="VIDEO_TITLE",t.MediaTitle="MEDIA_TITLE",t.VideoDuration="VIDEO_DURATION",t.ContentLength="CONTENT_LENGTH",t.VideoDescription="VIDEO_DESCRIPTION",t.VideoUrl="VIDEO_URL",t.VideoId="VIDEO_ID",t.VideoTime="VIDEO_TIME",t.DescriptionUrl="DESCRIPTION_URL",t.VideoKeywords="VIDEO_KEYWORDS",t.Autoplay="AUTOPLAY",t.UserAgent="UA",t.Ip="IP",t.CashBuster="CB",t.Width="WIDTH",t.Height="HEIGHT",t.Domain="DOMAIN",t.SourceReferrer="SOURCE_REFERRER",t.Gdpr="GDPR",t.GdprConsent="GDPR_CONSENT",t.Consent="CONSENT",t.Ctd="CTD",t.Publisher="PUBLISHER",t.Random="RAND",t.Site="SITE",t.SubId="SUB_ID",t.Url="URL",t.UserLat="USER_LAT",t.UserLong="USER_LONG",t.UsPrivacyString="US_PRIVACY",t.DoNotTrack="DNT",t.FraudSensorUserId="FS_USER_ID",t.PublisherId="PUBLISHER_ID",t.SessionId="SESSION_ID",t.FraudSensorDeviceType="FS_DEVICE_TYPE",t.FraudSensorLookupId="MGID",t.FraudSensorLookupResponseCode="MGTO",t.FraudSensorMediaType="FS_MEDIA_TYPE",t.CnxSupplierId="CNX_SUPPLIER_ID"}(s||(s={}));class l{constructor(t,i,e,r,h,a){this.Tn=new Map,this.Cn="[",this.In="]",this.Tn.set(s.Autoplay,t.playbackMode===n.ProtoPlayerPlaybackModeEnum.Autoplay),this.Tn.set(s.UserAgent,navigator.userAgent),this.Tn.set(s.UserLong,i.lon),this.Tn.set(s.UserLat,i.lat),this.Tn.set(s.Ip,i.ip),this.Pn(h),this.Mn(a),this.En(e),this.Ln(),this.Tn.set(s.Domain,r),this.Tn.set(s.CnxSupplierId,c.c),this.Tn.set(s.SessionId,t.sessionId)}Pn(t){this.Tn.set(s.AppBundle,t.bundleID),this.Tn.set(s.AppName,t.appName),this.Tn.set(s.AppUrl,t.storeURL)}Mn(t){this.Tn.set(s.SourceReferrer,t)}Ln(){const t=Object(h.C)()?1:0;this.Tn.set(s.DoNotTrack,t)}En(t){this.Tn.set(s.PageUrl,t),this.Tn.set(s.Url,t),this.Tn.set(s.Publisher,t),this.Tn.set(s.Site,t),this.Tn.set(s.DescriptionUrl,t)}Rn(){const t=Object(r.c)(2);this.Tn.set(s.CashBuster,t),this.Tn.set(s.Random,t),this.Tn.set(s.Ctd,t)}Dn(t){return t.split("?")[0]}Bn(t){return t.split("?").slice(1).join("?")}$n(t,i,e){return 0===t.indexOf(i)&&t.indexOf(e,e.length)===t.length-i.length}Fn(t,i){const e=this.Dn(t),s=this.Vn(this.Bn(t),i);return`${e}${s?`?${s}`:""}`}Vn(t,i,e=!1){let s=t;return s.split("&").forEach(t=>{const n=t.split("=");if(n[1])if(this.$n(n[1],this.Cn,this.In))s=s.replace(n[1],this.Un(n[1].toLowerCase(),i,e));else if(decodeURIComponent(n[1]).split("=").length>1){const t=this.Vn(decodeURIComponent(n[1]),i,!0);s=s.replace(n[1],encodeURIComponent(t))}}),this.Nn(s)}Nn(t){return t.indexOf(this.Cn)>-1&&(t=t.cnx_replaceAll(this.Cn,encodeURIComponent(this.Cn))),t.indexOf(this.In)>-1&&(t=t.cnx_replaceAll(this.In,encodeURIComponent(this.In))),t}Un(t,i,e){let s,n=t;return i.forEach((t,i)=>{for(;n.indexOf(this.Cn+i.toLowerCase()+this.In)>-1;)s=e?t:encodeURIComponent(t),n=n.replace(this.Cn+i.toLowerCase()+this.In,s)}),n}setAdWidth(t){this.Tn.set(s.Width,Math.floor(t))}setAdHeight(t){this.Tn.set(s.Height,Math.floor(t))}setSubId(t){this.Tn.set(s.SubId,t)}setGDPR(t){this.Tn.set(s.Gdpr,t)}setUUID(t){this.Tn.set(s.Uuid,t)}setGDPRConsent(t){this.Tn.set(s.GdprConsent,t)}setConsent(t){this.Tn.set(s.Consent,t)}setVideoId(t){this.Tn.set(s.VideoId,t)}setVideoTime(t){this.Tn.set(s.VideoTime,Math.floor(t))}setVideoUrl(t){this.Tn.set(s.VideoUrl,t)}setVideoDescription(t){this.Tn.set(s.VideoDescription,t)}setVideoDuration(t){this.Tn.set(s.VideoDuration,t),this.Tn.set(s.ContentLength,t)}setVideoTitle(t){let i;this.Tn.set(s.VideoTitle,t),this.Tn.set(s.MediaTitle,t),t&&(i=t.split(" ").join(",")),this.Tn.set(s.VideoKeywords,i)}setAdPosition(t="midRoll"){this.Tn.set(s.AdPosition,t)}setupMacros(t){return this.Rn(),this.Fn(t,this.Tn)}addExtraMacros(t){const i=Object(a.a)(s);Object.keys(t).filter(t=>!i.includes(t.toUpperCase())).forEach(i=>{this.Tn.set(i,t[i])})}getExtraMacros(){const t=Object(a.a)(s),i={};return this.Tn.forEach((e,s)=>{!t.includes(s)&&Object(o.h)(e)&&(i[s]=e)}),i}setUsPrivacyString(t){const i=t||"";this.Tn.set(s.UsPrivacyString,i)}setUserId(t){this.Tn.set(s.FraudSensorUserId,t)}setPublisherId(t){this.Tn.set(s.PublisherId,t)}setFraudSensorMacros(t){this.Tn.set(s.FraudSensorDeviceType,t.deviceType),this.Tn.set(s.FraudSensorLookupId,t.lookupId),this.Tn.set(s.FraudSensorLookupResponseCode,t.lookupResponseCode),this.Tn.set(s.FraudSensorMediaType,t.mediaType)}destroy(){}}},function(t,i,e){"use strict";e.d(i,"a",function(){return a});var s=e(26),n=e(8),r=e(19),h=e(14);class a{constructor(t){this.Hn=t,this.qn=100,this.zn=Object(n.f)(window).topFrame,this.Wn=s.a.indexOf(this.Hn.browser.device)>-1,this.Gn=Object(n.c)(1),this.Qn={browserType:this.Jn(),browserVersion:this.Hn.browser.browserVersion},this.Xn=this.Yn(),this.Kn=this.pageUrl.substr(0,this.qn),this.Zn=Object(h.a)(this.Kn)}Jn(){let t;return Object.keys(r.a).forEach(i=>{this.Hn.browser.browserType.toLowerCase().indexOf(r.a[i])>-1&&(t=r.a[i])}),t}Yn(){let t,i=0;const e=this.Hn.browser.osCode.split("_"),n=e[0].toLowerCase();return Object.keys(s.b).forEach(i=>{n.indexOf(s.b[i])>-1&&(t=s.b[i])}),e.length>1&&(i=parseFloat(`${e[1]||0}.${e[2]||0}`)),{os:t,osVersion:i}}get device(){return this.Hn.browser.device}get browser(){return this.Qn}get os(){return this.Xn}get geoLocation(){return this.Hn.geoLocation}get pageUrl(){return this.Hn.pageUrl||""}get pageUrlTrunc(){return this.Kn}get pageDomain(){return this.Zn}get isMobile(){return this.Wn}get playerId(){return this.Hn.playerId}get appId(){return this.Gn}get bundleID(){return this.Hn.bundleID}get iOSAppID(){return this.Hn.appID}get domainURL(){return this.Hn.domainURL}get storeURL(){return this.Hn.storeURL}get explorationMode(){return this.Hn.explorationMode}get appName(){return this.Hn.appName}get appCategories(){return this.Hn.appCategories}get appVersion(){return this.Hn.appVersion}get appPrivacyPolicy(){return this.Hn.appPrivacyPolicy}get appIsPaid(){return this.Hn.appIsPaid}get deviceId(){return this.Hn.deviceId}get topWindow(){return this.zn}}},function(t,i,e){"use strict";var s,n;e.d(i,"a",function(){return r}),function(t){t.hidden="hidden",t.msHidden="msHidden",t.webkitHidden="webkitHidden"}(s||(s={})),function(t){t.visibilitychange="visibilitychange",t.msvisibilitychange="msvisibilitychange",t.webkitvisibilitychange="webkitvisibilitychange"}(n||(n={}));class r{constructor(t){this.tr=t,this.ir=[],this.er(),this.sr()}on(t){this.ir.push(t),t(this.isDocumentVisible())}off(t){this.ir=this.ir.filter(i=>i!==t)}er(){void 0!==this.tr.getDocumentProperty(s.hidden)?(this.nr=s.hidden,this.rr=n.visibilitychange):void 0!==this.tr.getDocumentProperty(s.msHidden)?(this.nr=s.msHidden,this.rr=n.msvisibilitychange):void 0!==this.tr.getDocumentProperty(s.webkitHidden)&&(this.nr=s.webkitHidden,this.rr=n.webkitvisibilitychange)}sr(){this.tr.addEventListenerOnGlobal(this.rr,()=>{this.ir.forEach(t=>{t(this.isDocumentVisible())})},!0,!1)}isDocumentVisible(){return!this.tr.getDocumentProperty(this.nr)}}},function(t,i,e){"use strict";e.d(i,"a",function(){return s});class s{setNewMedia(){}updateMediaMetadata(){}setMediaStart(){}setContentStart(){}setSessionPlayback(){}setSessionViewability(){}trackSessionRendered(){}trackSessionViewability(){}trackSessionClick(){}trackMediaQuartile(){}trackMediaClick(){}setAdViewability(){}setAdViewabilityDelay(){}setAdStart(){}startBidRequests(){}addPrebid(){}addPostBid(){}addBid(){}adFinished(){}trackVideoAdImpression(){}trackVideoAdQuartile(){}trackAdClick(){}trackAdOpportunity(){}getMetadataModel(){}updateMetadataModel(){}setIsConsentPayload(){}destroy(){}publish(){}setImplementationTypeOnMeta(){}}},function(t,i,e){"use strict";e.d(i,"a",function(){return a});var s=e(8),n=e(5),r=e(0),h=e(10);class a{constructor(t){this.RELOAD_TIME=h.a,this.RELOAD_COOKIES="cnx_player_reload",this.SESSION_IN_VIEW_FLAG="_sessionWasViewed",this.hr={},this.ar={},this.or={},this.zn=Object(s.f)(window).topFrame,this.cr(t);try{this.lr()}catch(t){Object(n.a)({message:"PlayerReloader_cookie_fetch_failed",level:r.ProtoLoggingLevelEnum.WARNING,exception:t})}}wasPlayerReloaded(t){return!!this.hr[t]}addPlayerSession(t,i){this.ar[t]=i}getCookiePlayersSession(){return this.hr}addSessionInView(t){this.ar[t]+=this.SESSION_IN_VIEW_FLAG}getSessionInView(t){return this.or[t]}cr(t){setTimeout(()=>{this.ur(),this.zn.location.reload()},t||this.RELOAD_TIME)}lr(){decodeURIComponent(this.zn.document.cookie).split(";").forEach(t=>{const i=t.split("=");i[0].indexOf(this.RELOAD_COOKIES)>-1&&(this.hr=JSON.parse(i[1]))}),this.dr(),this.pr()}dr(){Object.keys(this.hr).forEach(t=>{const i=this.hr[t].indexOf(this.SESSION_IN_VIEW_FLAG);i>-1&&(this.hr[t]=this.hr[t].substr(0,i),this.or[t]=!0)})}pr(){this.zn.document.cookie=`${this.RELOAD_COOKIES}=; expires = Thu, 01 Jan 1970 00:00:00 GMT; path=/`}ur(){Object.keys(this.or).forEach(t=>{-1===this.ar[t].indexOf(this.SESSION_IN_VIEW_FLAG)&&this.addSessionInView(t)});const t=new Date;let i=t.getTime();i+=h.g*h.f,t.setTime(i),this.zn.document.cookie=`${this.RELOAD_COOKIES}=${JSON.stringify(this.ar)}; expires=${t.toUTCString()}; path=/`}}},function(t,i,e){"use strict";e.d(i,"a",function(){return u});var s=e(8),n=e(1),r=e(15),h=e(7),a=e(5),o=e(0),c=e(16),l=e(2);class u{constructor(t){this.createElement=(t,i=this.ae)=>i.document.createElement(t),this.ae=t,this.addPreconnect()}initHls(t){return t.cnxRenderWindow=this.ae,new c(t)}addCssString(t,i=""){return Object(n.b)(t,i,this.ae)}addPreconnect(){Object(n.d)(r.a.endPoints.base.video,this.ae),Object(n.d)(r.a.endPoints.base.core,this.ae)}getLineHeightPropertyValue(t){return Object(n.m)(t,this.ae).getPropertyValue("line-height")}getFontSizePropertyValue(t){return Object(n.m)(t,this.ae).getPropertyValue("font-size")}getFontWeightPropertyValue(t){return Object(n.m)(t,this.ae).getPropertyValue("font-weight")}getTransformPropertyValue(t){return Object(n.m)(t,this.ae).getPropertyValue("transform")}getPaddingTopPropertyValue(t){return Object(n.m)(t,this.ae).getPropertyValue("padding-top")}getPaddingBottomPropertyValue(t){return Object(n.m)(t,this.ae).getPropertyValue("padding-bottom")}getMarginTopPropertyValue(t){return Object(n.m)(t,this.ae).getPropertyValue("margin-top")}getMarginBottomPropertyValue(t){return Object(n.m)(t,this.ae).getPropertyValue("margin-bottom")}getMarginLeftPropertyValue(t){return Object(n.m)(t,this.ae).getPropertyValue("margin-left")}getMarginRightPropertyValue(t){return Object(n.m)(t,this.ae).getPropertyValue("margin-right")}createElementByString(t,i=this.ae){return Object(n.g)(t,i)}isHttpsProtocolUsed(){return Object(n.E)(this.ae)}isURLSameDomainToTop(t){return Object(n.F)(t,this.ae)}isDetachedFromDOM(t){let i=t;for(;i.parentNode;)if((i=i.parentNode)===this.ae.document.body)return!1;return!0}querySelector(t,i=this.ae){let e;try{e=i.document.querySelector(t)}catch(t){}return e}addCssStylesheetToHead(t,i,e){const s=this.ae.document;s.getElementById(t.id)?Object(l.b)(i)&&i():Object(n.B)(t,s.head,this.ae,i,e)}getFullscreenKeys(t){return Object(n.o)(t||this.ae.document)}exitFullscreen(t,i){(i||this.ae.document)[t]()}getDocumentProperty(t){return this.ae.document[t]}addEventListenerOnGlobal(t,i,e,s=!1){(e?this.ae.document:this.ae).addEventListener(t,i,s)}removeEventListenerOnGlobal(t,i,e,s=!1){(e?this.ae.document:this.ae).removeEventListener(t,i,s)}trackWithImages(t,i){Object(s.m)(t,this.ae,i)}getElementCoordinates(t){let{top:i,left:e}=t.getBoundingClientRect();const{width:s,height:n}=t.getBoundingClientRect(),r=this.ae.pageYOffset;return{clientX:e+=this.ae.pageXOffset,clientY:i+=r,width:s,height:n}}requestAnimationFrameHelper(t){return Object(n.N)(this.ae,t)}cancelRequestAnimationFrame(t){return Object(n.f)(this.ae,t)}getGlobalLocationProperties(){const t=this.ae.location;return{hostname:t.hostname,pathname:t.pathname,href:t.href,protocol:t.protocol,host:t.host,port:t.port,search:t.search,hash:t.hash}}open(t,i){this.ae.open(t,i)}getComputedTranslateX(t){let i=0;const e=Object(n.m)(t,this.ae).getPropertyValue("transform").match(/^matrix\((.+)\)$/);return Object(h.h)(e)&&(i=parseFloat(e[1].split(", ")[4])),i}getBodyDimensions(){try{const t=Object(s.f)(this.ae).topFrame.document.body;let{offsetWidth:i,offsetHeight:e}=t;const r=Object(n.m)(t,this.ae);return{width:i+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10),height:e+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}}catch(t){return Object(a.a)({message:"DomUtils_error_getting_body_dimensions",exception:t.message,callStack:t.stack,level:o.ProtoLoggingLevelEnum.FATAL}),{width:0,height:0}}}getViewportWidth(){return Object(s.f)(this.ae).topFrame.innerWidth}getViewportHeight(){return Object(s.f)(this.ae).topFrame.innerHeight}getGlobalClosestTop(){return Object(s.f)(this.ae)}stripHtmlTags(t){return Object(n.Q)(t,this.ae)}getComputedStyle(t){return Object(n.m)(t,this.ae)}getElementById(t){return Object(n.n)(t,this.ae)}insertScript(t,i,e){this.ae.document.getElementById(t.id)?Object(l.b)(i)&&i():Object(n.A)(t,this.ae.document.head,this.ae,i,null,!0,e)}destroy(){}}},function(t,i){t.exports="<cnx class=cnx-tooltip-holder> <cnx class=cnx-tooltip-text>TEST</cnx> </cnx> "},function(t,i){t.exports='<cnx class="cnx-up-next-container cnx-hide-on-single-video"> <cnx class=cnx-up-next-box> <cnx class=cnx-up-next-box-image> <img> </cnx> <cnx class=cnx-up-next-box-gradient></cnx> <cnx class=cnx-up-next-box-text></cnx> <cnx class=cnx-up-next-box-button> <cnx class=cnx-up-next-box-button-text>NEXT</cnx> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-ui-cm cnx-ui-cm-context"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-ui-cm cnx-ui-cm-settings"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><path d="M15.4 16.6L10.83 12l4.58-4.6L14 6l-6 6 6 6 1.4-1.4z"></path></svg>'},function(t,i){t.exports="<cnx class=cnx-captions> <cnx class=cnx-captions-container> <cnx-span class=cnx-captions-text-holder></cnx-span> </cnx> </cnx> "},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 21H3V3h6v18zm12 0h-6V3h6v18z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<cnx class=cnx-progress-bar> <cnx class=cnx-progress-rail-container> <cnx class=cnx-progress-rail></cnx> <cnx class="cnx-progress-fill cnx-color-icon"></cnx> </cnx> <cnx class="cnx-progress-handle cnx-color-icon"></cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-icon-button cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-expand-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M4.6 3H10v2H5v5H3V4.6A1.58 1.58 0 0 1 4.6 3zM5 14v5h5v2H4.6A1.58 1.58 0 0 1 3 19.4V14h2zM19.4 3A1.58 1.58 0 0 1 21 4.6V10h-2V5h-5V3h5.4zM19 14h2v5.4a1.58 1.58 0 0 1-1.6 1.6H14v-2h5v-5z" fill-rule=evenodd /></svg> </cnx> <cnx class=cnx-collapse-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" fill-rule=evenodd><path d="M16.6 15a1.58 1.58 0 0 0-1.6 1.6V22h2v-5h5v-2h-5.4zM17 2h-2v5.4A1.58 1.58 0 0 0 16.6 9H22V7h-5V2zM7.4 15A1.58 1.58 0 0 1 9 16.6V22H7v-5H2v-2h5.4zM7 2h2v5.4A1.58 1.58 0 0 1 7.4 9H2V7h5V2z"/></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-ui-cm cnx-ui-cm-quality"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(t,i){t.exports='<svg viewBox="0 0 22 22" class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M18 5.4L16.6 4 11 9.6 5.4 4 4 5.4 9.6 11 4 16.6 5.4 18l5.6-5.6 5.6 5.6 1.4-1.4-5.6-5.6z"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 22 22"><path d="M11 7c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>'},function(t,i){t.exports='<cnx class="cnx-ui-btn cnx-skip-ad-container"> <cnx class="cnx-icon-button cnx-skip-ad-button"> <cnx class=cnx-skip-ad-text> Skip <cnx-span></cnx-span> </cnx> <cnx class=cnx-skip-ad-icon> <svg markup-inline viewBox="0 0 24 24" class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule=evenodd /></svg> </cnx> <cnx class=cnx-timer-loader> <svg markup-inline viewBox="0 0 28 28" xmlns=http://www.w3.org/2000/svg viewBox="0 0 28 28"><circle class=cnx-svg-circle-stroke cx=14 cy=14 r=13 /></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="2 2 20 20"><path d="M14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3m-2 16H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7h-2v7z"></path></svg>'},function(t,i){t.exports="<cnx class=cnx-pod-loading-screen-container> <img class=cnx-pod-loading-background /> <cnx class=cnx-pod-loading-info> <cnx class=cnx-pod-open-new-icon> </cnx> <cnx class=cnx-pod-visit-website-text> <cnx-span>Visit Advertiser website</cnx-span> </cnx> <cnx class=cnx-pod-read-more-container> <cnx-span class=cnx-pod-read-more-btn>GO TO PAGE</cnx-span> </cnx> </cnx> <cnx class=cnx-pod-loading-fallback> <cnx class=cnx-pod-loading-spinner></cnx> <cnx-span class=cnx-pod-slot-count-text></cnx-span> </cnx> </cnx>"},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.9 12.7c.05-.23.1-.46.1-.7s-.04-.47-.1-.7l7.05-4.1c.54.5 1.25.8 2.04.8 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.1.7L8.04 9.8C7.5 9.3 6.8 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.8 0 1.5-.3 2.04-.8l7.12 4.16a2.82 2.82 0 0 0-.08.65c0 1.6 1.3 2.92 2.92 2.92s2.92-1.3 2.92-2.92-1.3-2.92-2.92-2.92z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<cnx class=cnx-icon-button> <cnx class=cnx-btn-container> <cnx class=cnx-unmute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M0 7.913v7.913h4.946l5.935 5.045V1.978L4.946 7.913zm16.815 3.957c.03-2.078-1.12-3.994-2.967-4.946v9.9c1.847-.952 2.997-2.867 2.967-4.945zM13.848 0v2.077a10.39 10.39 0 0 1 0 19.585v2.077a12.05 12.05 0 0 0 8.9-11.87A12.05 12.05 0 0 0 13.848 0z"/></svg> </cnx> <cnx class=cnx-mute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 0 0 .2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 0 0 3.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0 0 14 0v1.6A10.53 10.53 0 0 1 20 16l1.45 1.45A11.99 11.99 0 0 0 23 11.5z"/></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="nonzero"><path d="M22 15.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13z" fill="#FFF"></path><path d="M22 18a4 4 0 110 8 4 4 0 010-8z" fill="#FF4047"></path><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill="#FFF"></path><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill="#FFF" transform="matrix(-1 0 0 1 12.626 0)"></path></g></svg>'},function(t,i){t.exports='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="#FFF" fill-rule="evenodd"><rect class="cnx-live-icon-svg-rectangle" transform="rotate(90 22.06 21.43)" x="20.059" y="15.929"></rect><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill-rule="nonzero" opacity=".5"></path><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill-rule="nonzero" opacity=".5" transform="matrix(-1 0 0 1 12.626 0)"></path></g></svg>'},function(t,i){t.exports='<cnx class="cnx-live-poster cnx-mod-active"> <cnx class=cnx-live-broadcast> <cnx class=cnx-live-icon> <svg class=cnx-live-icon-starting markup-inline viewBox="0 0 44 44" xmlns=http://www.w3.org/2000/svg><g fill=none fill-rule=nonzero><path d="M22 15.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13z" fill=#FFF /><path d="M22 18a4 4 0 110 8 4 4 0 010-8z" fill=#FF4047 /><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill=#FFF /><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill=#FFF transform="matrix(-1 0 0 1 12.626 0)"/></g></svg> <svg class=cnx-live-icon-ended markup-inline viewBox="0 0 44 44" xmlns=http://www.w3.org/2000/svg><g fill=#FFF fill-rule=evenodd><rect class=cnx-live-icon-svg-rectangle transform="rotate(90 22.06 21.43)" x=20.059 y=15.929 /><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill-rule=nonzero opacity=.5 /><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill-rule=nonzero opacity=.5 transform="matrix(-1 0 0 1 12.626 0)"/></g></svg> </cnx> <cnx class=cnx-live-message> <cnx-span></cnx-span> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-ui-live-badge-wrapper cnx-d-md-none"> <cnx class=cnx-ui-live-badge> <svg markup-inline xmlns=http://www.w3.org/2000/svg viewBox="0 0 37 9" fill-rule=nonzero><path d="M15.223 9V7.816H11.35V.47H9.868V9h5.356zm3.7 0V.47h-1.477V9h1.477zm6.555 0L28.55.47h-1.63l-2.168 6.674L22.608.47h-1.623L24.043 9h1.436zm10.6 0V7.816h-4.096V5.2h3.504V4.02h-3.504V1.664h4.055V.47H30.5V9h5.578zM3 2a3 3 0 1 0 0 6 3 3 0 1 0 0-6z" fill=#fff /><path d="M3 3a2 2 0 1 1 0 4 2 2 0 1 1 0-4z" fill=#ff4047 /></svg> </cnx> </cnx> '},function(t,i){t.exports='<cnx class=cnx-progress-bar> <cnx class=cnx-progress-rail-container> <cnx class=cnx-progress-rail></cnx> <cnx class="cnx-progress-fill cnx-color-accent"></cnx> <cnx class=cnx-progress-follow></cnx> </cnx> <cnx class=cnx-progress-hitarea></cnx> </cnx> '},function(t,i){t.exports="<cnx class=cnx-slides-progress-bar> </cnx> "},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill-rule="evenodd"><path d="M16.6 15a1.58 1.58 0 0 0-1.6 1.6V22h2v-5h5v-2h-5.4zM17 2h-2v5.4A1.58 1.58 0 0 0 16.6 9H22V7h-5V2zM7.4 15A1.58 1.58 0 0 1 9 16.6V22H7v-5H2v-2h5.4zM7 2h2v5.4A1.58 1.58 0 0 1 7.4 9H2V7h5V2z"></path></svg>'},function(t,i){t.exports='<cnx class="cnx-ui-cm cnx-ui-cm-settings"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-icon-button cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-unmute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M0 7.913v7.913h4.946l5.935 5.045V1.978L4.946 7.913zm16.815 3.957c.03-2.078-1.12-3.994-2.967-4.946v9.9c1.847-.952 2.997-2.867 2.967-4.945zM13.848 0v2.077a10.39 10.39 0 0 1 0 19.585v2.077a12.05 12.05 0 0 0 8.9-11.87A12.05 12.05 0 0 0 13.848 0z"/></svg> </cnx> <cnx class=cnx-mute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 0 0 .2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 0 0 3.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0 0 14 0v1.6A10.53 10.53 0 0 1 20 16l1.45 1.45A11.99 11.99 0 0 0 23 11.5z"/></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M14.2,0A5.8,5.8,0,0,1,20,5.8v8.4A5.8,5.8,0,0,1,14.2,20H5.8A5.8,5.8,0,0,1,0,14.2V5.8A5.8,5.8,0,0,1,5.8,0ZM2,5.6v8.8A3.59,3.59,0,0,0,5.6,18h8.8A3.59,3.59,0,0,0,18,14.4V5.6A3.59,3.59,0,0,0,14.4,2H5.6A3.59,3.59,0,0,0,2,5.6Zm14.5-.8a1.3,1.3,0,1,1-1.3-1.3A1.32,1.32,0,0,1,16.5,4.8ZM15,10a5,5,0,1,1-5-5A5,5,0,0,1,15,10ZM10,7a3,3,0,0,0-3,3,3,3,0,0,0,3,3,3,3,0,0,0,3-3A3,3,0,0,0,10,7Z"></path></svg>'},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 12"><polygon points="0 5 16.17 5 12.59 1.41 14 0 20 6 14 12 12.59 10.59 16.17 7 0 7 0 5"></polygon></svg>'},function(t,i){t.exports='<cnx class=cnx-ui-click-to-play-btn> <cnx class=cnx-ui-click-to-play-btn-content> <svg markup-inline class="cnx-click-to-play-btn-icon cnx-color-accent" class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><polygon points="5 1 5 23 23 11.9165764"></polygon></svg> <cnx class=cnx-onion-ring></cnx> <cnx-span class=cnx-click-to-play-btn-text>PLAY</cnx-span> </cnx> </cnx> '},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M5.55,9.4h0C2.85,6.8,1.15,5,1.15,3.3a2,2,0,0,1,1.9-2.1,2.28,2.28,0,0,1,2,1.4h1a2.17,2.17,0,0,1,2-1.4A2,2,0,0,1,10,3.3c0,1.7-1.8,3.4-4.4,6.1ZM8,0a3.34,3.34,0,0,0-2.5,1.2A3.13,3.13,0,0,0,3.05,0a3.09,3.09,0,0,0-3,3.3c0,2.3,1.9,4.1,4.7,6.9l.8.8.8-.8c2.8-2.8,4.7-4.7,4.7-6.9A3.16,3.16,0,0,0,8,0Z" style="fill:#a0a0a0;opacity:0.8598999977111816"></path></svg>'},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path style="opacity:0.8598999977111816;fill:#a0a0a0" d="M3.85,11a.58.58,0,0,1-.6-.6V8.8H1.05A1.11,1.11,0,0,1,0,7.7V1.1A1.11,1.11,0,0,1,1.05,0h8.8A1.11,1.11,0,0,1,11,1.1V7.7a1.11,1.11,0,0,1-1.1,1.1H6.45l-2,2a.52.52,0,0,1-.4.2h-.2m.6-3.3V9.4l1.7-1.7H10V1.1H1.15V7.7h3.3M2.25,2.8h6.6V3.9H2.25V2.8m0,2.1h4.9V6H2.25Z"></path></svg>'},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12"><path style="opacity:0.8598999977111816;fill:#a0a0a0" d="M6.05,11a5,5,0,0,0,5-5,5,5,0,0,0-5-5,5,5,0,0,0-5,5,5,5,0,0,0,5,5m0-11a5.6,5.6,0,0,1,4.2,1.8A6.37,6.37,0,0,1,12.05,6a6,6,0,0,1-12,0,6,6,0,0,1,6-6m0,3V5.9l3,1.5-.5.6L5.05,6.3V3Z"></path></svg>'},function(t,i){t.exports=" <cnx class=cnx-button-text-label>1 min. story</cnx> "},function(t,i){t.exports='<cnx class="cnx-ui-ps-image-container cnx-ui-ps-image-background"> </cnx>'},function(t,i){t.exports="<cnx class=cnx-ui-ps-video-container></cnx> "},function(t,i,e){"use strict";var s,n=e(1);class r{constructor(t){this.br=[],this.vr=t=>{this.br.push(t)},this.gr=t.subscribe(this.vr)}get cachedEvents(){return this.br}destroy(){this.br=null,this.gr()}}!function(t){t.AdobeAnalytics="AdobeAnalytics"}(s||(s={}));const h={AdobeAnalytics:{id:"cnx-adobe-analytics-plugin",src:"//cds.connatix.com/p/plugins/connatix.external.measurement.js"}};var a=e(2),o=e(5),c=e(0),l=e(7),u=e(23),d=e(8),f=e(14);e.d(i,"a",function(){return p});class p{constructor(t,i,e,s){this.mr=i,this.Hn=e,this.yr=s,this.xr=[],this.wr=t=>{try{this.kr(t);const i=this.xr.find(i=>i.name===t.type);let e;if(i&&!i.started){i.started=!0;const t=i.eventsCacheHandler;e=t.cachedEvents,t.destroy()}const{adobeAnalyticsSettings:s,Sr:n}=this.Hn,r={cachedEvents:e,adobeAnalyticsSettings:s,Sr:n,pageName:this.Or,pageUrl:this._r,secondLevelDomain:this.jr,version:this.Ar,delegateHandlers:this.yr};t.getInstance().start(this.mr,r)}catch(t){Object(o.a)({callStack:t.stack,exception:t.message,level:c.ProtoLoggingLevelEnum.FATAL,message:"PluginsHandler_initPlugin"})}};const n=Object(d.f)(t);this.ae=n.topFrame,this._r=Object(d.d)(n,this.ae),this._r=Object(f.e)(this._r),this.Or=Object(f.a)(this._r)}start(t,i){this.jr=t,this.Ar=i,this.Tr(),this.Cr(),this.ae.cnxPlugins.pluginsHandlers.push(this.wr)}Tr(){let t=[];Array.isArray(this.ae.cnxPlugins)&&this.ae.cnxPlugins.length>0&&(t=this.ae.cnxPlugins).forEach(t=>this.wr(t)),Object(a.f)(this.ae.cnxPlugins)||this.Ir(t)}Cr(){const t=this.Pr();Object(l.h)(t)&&this.Mr(t)}Er(t){const i=this.ae.cnxPlugins.cachedPlugins;if(Object(l.h)(i))return i.find(i=>i.type===t)}kr(t){this.Er(t.type)||this.ae.cnxPlugins.cachedPlugins.push(t)}Ir(t){this.ae.cnxPlugins={cachedPlugins:t,pluginsHandlers:[],push:function(t){this.pluginsHandlers.forEach(i=>{i(t)})}}}Mr(t){t.forEach(t=>{this.Er(t)||this.xr.push({name:t,started:!1,eventsCacheHandler:new r(this.mr)})}),this.xr.forEach(({name:t})=>this.Lr(t))}Rr(t){return Object(u.a)(t).every(t=>Object(a.h)(t))}Pr(){const t=[];return this.Hn.adobeAnalyticsSettings&&this.Rr(this.Hn.adobeAnalyticsSettings)&&t.push(s.AdobeAnalytics),t}Lr(t){const i=h[t];this.ae.document.getElementById(i.id)||Object(n.A)(i,this.ae.document.head,this.ae,null,null,!0,"PluginsHandler_unable_to_insert_plugin_script")}}},function(t,i,e){"use strict";var s,n,r=e(24),h=e(11),a=e(41);!function(t){t.Minimized="minimized",t.Collapsed="collapsed",t.Normal="normal",t.Expanded="expanded",t.Fullscreen="fullscreen"}(s||(s={})),function(t){t.StateChanged="stateChanged"}(n||(n={}));class o{constructor(t){this.mediator=t}computeState(t){const i=this.Dr(t);this.Br&&this.Br.name===i||this.mediator.publish(this,n.StateChanged,{payload:{state:i}}),this.Br={dimensions:t,name:i},this.$r||i!==s.Normal||(this.$r=Object.assign({},this.Br))}setPlayerState(t){this.Br&&this.Br.name===t||this.mediator.publish(this,n.StateChanged,{payload:{state:t}}),this.Br={name:t},this.$r||t!==s.Normal||(this.$r=Object.assign({},this.Br))}get currentState(){return this.Br&&this.Br.name}Dr(t){if(!this.$r)return s.Normal;const{width:i,height:e}=this.$r.dimensions,n=i*e,r=t.width*t.height;switch(!0){case n<r:return s.Expanded;case n>r:return s.Collapsed;default:return s.Normal}}}var c=e(12),l=e(5),u=e(0);e.d(i,"a",function(){return d});class d extends c.a{constructor(t,i,e){super(),this.Fr=t,this.mr=i,this.Vr=new o(this),this.Ur=!1,this.Nr={[h.a.AdError]:()=>this.Hr(),[h.a.PlayError]:()=>this.qr(),[h.a.RenderError]:()=>this.zr(),[h.a.AdImpression]:()=>this.Wr(),[h.a.AdComplete]:()=>this.Gr(),[h.a.AdVideoStart]:({adVideoStartMetadata:t})=>this.Qr(t),[h.a.AdVideoFirstQuartile]:()=>this.Jr(),[h.a.AdVideoMidpoint]:()=>this.Xr(),[h.a.AdVideoThirdQuartile]:()=>this.Yr(),[h.a.AdVideoComplete]:()=>this.Kr(),[h.a.VolumeChange]:({volume:t})=>this.Zr(t),[h.a.AdPause]:()=>this.th(),[h.a.AdPlay]:()=>this.ih(),[h.a.AdSkipped]:()=>this.eh(),[h.a.AdClickThru]:()=>this.sh(),[h.a.AdInteraction]:()=>this.nh(),[h.a.AdLoaded]:({adLoadedMetadata:t})=>this.rh(t),[h.a.AdStateChange]:({adStateChangedMetadata:t})=>this.hh(t),[h.a.PlayerResized]:({playerDimensionsMetadata:t})=>this.ah(t),[h.a.OnEnterFullscreen]:()=>this.oh(),[h.a.PlayerCollapsed]:()=>this.lh(),[h.a.PlayerExpanded]:()=>this.uh(),[h.a.Destroy]:()=>this.unsubscribeAll(this.Vr)},this.dh=t=>{try{const i=this.Nr[t.name];if(!i)return;i(t.metadata)}catch(t){Object(l.a)({message:"SessionClientWrapper_omsdk__onEventStorageEvent",exception:t.message,callStack:t.callStack,level:u.ProtoLoggingLevelEnum.WARNING})}};try{const{AdSession:t,AdEvents:i,MediaEvents:s}=this.Fr,r=this.fh(e);this.ph=new t(r),this.bh=new i(this.ph),this.vh=new s(this.ph),this.mr.subscribe(this.dh),this.subscribe(n.StateChanged,this.Vr,({payload:{state:t}})=>{this.gh(t)}),this.mh()}catch(t){Object(l.a)({message:"SessionClientWrapper_omsdk_classes_init_err",exception:t.message,callStack:t.callStack,level:u.ProtoLoggingLevelEnum.WARNING})}}Hr(){this.ph.error(r.d.Video,h.a.AdError)}qr(){this.ph.error(r.d.Video,h.a.PlayError)}zr(){this.ph.error(r.d.Generic,h.a.RenderError)}fh(t){const{Partner:i,Context:e}=this.Fr;return new e(new i(r.i,t))}Wr(){this.Ur=!0,this.bh.impressionOccurred();const t=this.Vr.currentState;t!==s.Normal&&this.gh(t)}Gr(){this.Ur=!1}Qr(t){const{duration:i,mediaPlayerVolume:e}=t;this.vh.start(i,e)}Jr(){this.vh.firstQuartile()}Xr(){this.vh.midpoint()}Yr(){this.vh.thirdQuartile()}Kr(){this.vh.complete()}Zr(t){this.Ur&&this.vh.volumeChange(t)}th(){this.vh.pause()}ih(){this.vh.resume()}eh(){this.vh.skipped()}sh(){this.vh.adUserInteraction(r.g.Click)}nh(){this.vh.adUserInteraction(r.g.InvitationAccept)}rh(t){const{isSkippable:i,skipOffset:e,isAutoPlay:s}=t,{VastProperties:n}=this.Fr,r=new n(i,e,s,this.yh);this.bh.loaded(r)}hh({state:t}){this.yh=r.h[a.a[t]]}gh(t){t&&this.vh.playerStateChange(t)}xh(t){this.Vr.computeState(t)}wh(t){this.Vr.setPlayerState(t)}ah(t){this.xh(t)}oh(){this.wh(s.Fullscreen)}lh(){this.wh(s.Minimized)}uh(){this.wh(s.Normal)}mh(){this.ph.registerSessionObserver(t=>{t.type===r.b.SessionStart?this.kh(t):t.type===r.b.SessionError&&Object(l.a)({message:"SessionClientWrapper_omsdk_session_error",exception:t.type,callStack:JSON.stringify(t),level:u.ProtoLoggingLevelEnum.WARNING,throttle:1,sendMaxLog:!1})})}kh(t){t.data.creativeType===r.c.DefinedByJavascript&&this.ph.setCreativeType(r.c.Video),t.data.impressionType===r.f.DefinedByJavascript&&this.ph.setImpressionType(r.f.BeginToRender)}}},function(t,i,e){"use strict";var s,n=e(2),r=e(0);!function(t){t[t.Desktop=2]="Desktop",t[t.SmartTV=3]="SmartTV",t[t.Smartphone=4]="Smartphone",t[t.Tablet=5]="Tablet",t[t.GameConsole=6]="GameConsole",t[t.Unrecognized=7]="Unrecognized"}(s||(s={}));const h={[r.ProtoDeviceType.Desktop]:s.Desktop,[r.ProtoDeviceType.Smartphone]:s.Smartphone,[r.ProtoDeviceType.Tablet]:s.Tablet,[r.ProtoDeviceType.GameConsole]:s.GameConsole,[r.ProtoDeviceType.SmartTV]:s.SmartTV,[r.ProtoDeviceType.WearableComputer]:s.Unrecognized,[r.ProtoDeviceType.PDA]:s.Unrecognized,[r.ProtoDeviceType.Unrecognized]:s.Unrecognized},a="https://s.srvsynd.com/2/234175/analytics.js?dt=2341751597675869250012&di=[DOMAIN]&ui=[FS_USER_ID]&md=[FS_MEDIA_TYPE]&ap=[APP_BUNDLE]&sr=[CNX_SUPPLIER_ID]&pp=[PUBLISHER_ID]&ti=[SESSION_ID]&de=[FS_DEVICE_TYPE]&to=[MGTO]&pv=[MGID]",o="cnx_fraud_sensor",c="00000000-0000-0000-0000-000000000000",l=2;e.d(i,"a",function(){return u});class u{constructor(t,i,e,s){this.Sh=t,this.Oh=i,this.Qs=e,this._h(s)}addFraudSensorScript(){if(this.Oh.getElementById(o))return;const t={id:o,src:this.Sh.setupMacros(a)};this.Oh.insertScript(t,null,"FraudSensor_script_error")}_h(t){t=Object(n.h)(t)?t:c;const{lookupId:i,lookupResponseCode:e,publisherAdsTxt:s}=this.Qs,r=h[this.Qs.deviceType];this.Sh.setPublisherId(s),this.Sh.setUserId(t),this.Sh.setFraudSensorMacros({lookupId:i,lookupResponseCode:e,deviceType:r,mediaType:l})}}},function(t,i,e){"use strict";var s=e(22),n=e(0),r=e(17),h=e(15),a=e(10);class o{constructor(t){this.jh=t,this.Ah=null,this.Th=0}Ch(){if(null===this.Ah)return;const t=(new Date).getTime();this.Th=t-this.Ah}startCountingTime(){this.Ah=(new Date).getTime()}stopCountingTime(){this.Ch(),this.Ah=null}fetchTime(){this.Ch();let t=this.Th;return this.Th=0,null!==this.Ah&&this.startCountingTime(),t>this.jh&&(t=this.jh),Math.round(t/a.f)}}var c=e(12),l=e(2),u=e(29),d=e(30),f=e(8);e.d(i,"a",function(){return b});const p=500;class b extends c.a{constructor({userId:t,playerId:i,geoLocation:e,browser:s,sessionId:n,pageUrl:h,bundleId:a,generationId:c,individualId:l,Ih:d,userManagerService:p,customParam1:b,customParam2:v,customParam3:g}){super(),this.hasGdprConsentPayload=!1,this.Ph={},this.Mh={},this.Eh=!1,this.Lh=!1,this.Rh=!1,this.Dh=!1,this.Bh=new Map,this.$h=[],this.Fh=[],this.Vh=[],this.Uh=[],this.Nh=[],this.Hh=[],this.qh=5e3,this.zh=3e4,this.Wh=!1,this.Gh=!1,this.Ih=!1,this.Qh=[{delay:7,timesRepeatDelay:1},{delay:8,timesRepeatDelay:1},{delay:15,timesRepeatDelay:3},{delay:30,timesRepeatDelay:2},{delay:60,timesRepeatDelay:1},{delay:120,timesRepeatDelay:1},{delay:300,timesRepeatDelay:8},{delay:600,timesRepeatDelay:13},{delay:1800}],this.Jh=0,this.Xh=()=>{this.Yh||(this.Yh=setTimeout(()=>{this.Kh()},this.Zh))},this.ta=()=>{this.Yh&&(clearTimeout(this.Yh),this.Yh=void 0)},this.Ph.trackAllRequests=1===Object(f.l)([99,1]),this.ia=p,this.Ph.userId=t,this.Ph.playerId=i,this.Ph.geo=e,this.Ph.browser=s,this.Ph.version=r.a.version,this.Ph.sessionId=n,this.Ph.clientAb0=u.a.clientAb0,this.Ph.clientAb1=u.a.clientAb1,this.Ph.serverAb0=u.a.serverAb0,this.Ph.serverAb1=u.a.serverAb1,this.Ph.pageUrl=h,this.Ph.bundleId=a,this.Ph.customParam1=b,this.Ph.customParam2=v,this.Ph.customParam3=g,this.ea=new o(this.zh),this.sa=new o(this.zh),this.na=c,this.ra=l,2635167===e.countryGeoId&&h&&(h.indexOf("independent.co.uk")>-1||h.indexOf("standard.co.uk")>-1||h.indexOf("denofgeek.com")>-1||h.indexOf("rawstory.com")>-1||h.indexOf("britannica.com")>-1)?this.Ih=!0:this.Ih=d||!1}ha(t,i=n.ProtoTrackingRequest,e,h=!0){s.a.sendProtoRequest({ProtoRequest:i,requestData:Object.assign({trackingRequestMeta:h?this.Ph:void 0},e),endpoint:t,queryParams:{[d.b]:r.a.version}}).catch(t=>{})}aa(t,i,e=n.ProtoMediaTrackingRequest){const s=Object.assign({},i);Object(l.h)(this.Mh.mediaId)&&(s.mediaGuid=this.Mh.mediaId),this.ha(t,e,s)}oa(){this.Gh||(this.Gh=!0,this.ha(h.a.endPoints.tracking.playerStart,n.ProtoTrackingRequest))}ca(t,i,e=n.ProtoMediaTrackingRequest){this.ha(t,e,Object.assign({mediaGuid:this.Mh.mediaId},i))}la(t){this.Bh.get(t)||(this.aa(h.a.endPoints.tracking.media_quartile,{baseMeta:this.Mh,mediaId:this.Mh.mediaId,quartile:t}),this.Bh.set(t,!0))}ua(){this.da(this.Fh,this.$h,this.Vh,this.na,this.ra),this.Fh=[],this.$h=[],this.Vh=[],this.da(this.Nh,this.Uh,this.Hh),this.Nh=[],this.Uh=[],this.Hh=[]}da(t,i,e,s,r){if(0===t.length&&0===i.length&&0===e.length)return;e.forEach(t=>{t.error&&t.error.length>0&&(t.error=t.error.substring(0,p))});const a={mediaGuid:this.Mh.mediaId,prebids:t,bids:i,postBids:e,logEveryting:this.Ih,hasGdprConsentPayload:this.hasGdprConsentPayload,gdprConsentMode:this.ia.gdprConsentMode};Object(l.d)(s)&&Object(l.d)(r)&&(a.generationId=s,a.individualId=r),this.ha(h.a.endPoints.tracking.bids,n.ProtoBidTrackingsRequest,a)}Kh(){this.fa&&(this.ca(h.a.endPoints.tracking.ad_impression_viewable,this.fa,n.ProtoVideoAdImpressionViewableRequest),this.fa=null)}pa(t){this.ha(h.a.endPoints.tracking.ad_click,n.ProtoAdClickTrackingRequest,Object.assign({mediaGuid:this.Mh.mediaId},t))}ba(){const t=this.Qh[this.Jh];clearTimeout(this.va),this.va=setTimeout(()=>{this.ga(t.delay),Object(l.e)(t.timesRepeatDelay)&&t.timesRepeatDelay--,0===t.timesRepeatDelay&&this.Jh++,this.ba()},1e3*t.delay)}ga(t){this.ha(h.a.endPoints.tracking.session_time,n.ProtoSessionTimeTrackingRequest,{trackingRequestMeta:this.Ph,sessionTime:t,timePlayed:this.ea.fetchTime(),timePlayedInView:this.sa.fetchTime()})}ma(t){const{sessionId:i}=this.Ph;this.ha(h.a.endPoints.tracking.adOpportunity,n.ProtoAdOpportunityRequest,{sessionId:i,adBreak:t.adBreakType})}setNewMedia(t){this.Mh=t,this.Bh=new Map}updateMediaMetadata(t){this.Mh=t}setImplementationTypeOnMeta(t){this.Ph.implementationType=t}setMediaStart(){this.la(n.ProtoQuartilesEnum.Start)}setContentStart(){this.oa()}setSessionPlayback(t){this.Rh!==t&&(this.Rh=t,this.Dh&&this.Rh&&this.sa.startCountingTime(),this.Rh?this.ea.startCountingTime():(this.ea.stopCountingTime(),this.sa.stopCountingTime()))}setSessionViewability(t){this.Dh!==t&&(this.Dh=t,this.Dh&&this.Rh?this.sa.startCountingTime():this.Dh||this.sa.stopCountingTime())}trackSessionRendered(t){this.Eh||(this.ha(h.a.endPoints.tracking.session_rendered,n.ProtoTrackingRequest,{generationId:this.na,individualId:this.ra,hasAdBlocker:t}),this.Eh=!0,this.ba())}trackSessionViewability(){this.Lh||(this.ha(h.a.endPoints.tracking.session_view),this.Lh=!0)}trackSessionClick(){this.aa(h.a.endPoints.tracking.session_engagement_click)}trackMediaQuartile(t){this.la(t)}trackMediaClick(t=n.ProtoMediaClickTypeEnum.Click){const i={type:t,clickUrl:t===n.ProtoMediaClickTypeEnum.UrlClick?this.Mh.clickUrl:void 0,slideTitle:this.Mh.slideTitle,slideNumber:this.Mh.slideNumber,slideMediaType:this.Mh.slideMediaType};this.aa(h.a.endPoints.tracking.media_click,i,n.ProtoMediaClickTrackingRequest)}setAdViewability(t){this.Wh=t,this.fa&&(t?this.Xh():this.ta())}setAdViewabilityDelay(t){this.Zh=t}setAdStart(){this.oa()}startBidRequests(){this.ya=setInterval(()=>{this.ua()},this.qh)}addPrebid(t,i){i?this.Nh.push(t):this.Fh.push(t)}addPostBid(t,i){Object(l.g)(t.error)||(t.error=JSON.stringify(t.error)),i?this.Hh.push(t):this.Vh.push(t)}addBid(t,i){i?this.Uh.push(t):this.$h.push(t)}adFinished(){this.fa=null,this.ta()}trackVideoAdImpression(t,i){i||(t.generationId=this.na,t.individualId=this.ra),this.ca(h.a.endPoints.tracking.ad_impression,t,n.ProtoVideoAdImpressionRequest),this.fa={advertiserLineItemId:t.advertiserLineItemId,publisherLineItemId:t.publisherLineItemId},this.Wh&&this.Xh()}trackVideoAdQuartile(t){this.aa(h.a.endPoints.tracking.ad_quartile,t,n.ProtoVideoAdQuartilesRequest)}trackAdClick(t){this.pa(t)}trackAdOpportunity(t){this.ma(t)}getMetadataModel(){return this.Ph}updateMetadataModel(t){this.Ph=Object.assign(Object.assign({},this.Ph),t)}destroy(){clearInterval(this.va),clearInterval(this.ya),clearTimeout(this.Yh)}}},function(t,i,e){"use strict";var s=i;function n(){s.Reader.Yi(s.BufferReader),s.util.Yi()}s.build="minimal",s.Writer=e(57),s.BufferWriter=e(133),s.Reader=e(59),s.BufferReader=e(134),s.util=e(34),s.rpc=e(135),s.roots=e(137),s.configure=n,s.Writer.Yi(s.BufferWriter),n()},function(t,i,e){"use strict";t.exports=function(t,i){var e=new Array(arguments.length-1),s=0,n=2,r=!0;for(;n<arguments.length;)e[s++]=arguments[n++];return new Promise(function(n,h){e[s]=function(t){if(r)if(r=!1,t)h(t);else{for(var i=new Array(arguments.length-1),e=0;e<i.length;)i[e++]=arguments[e];n.apply(null,i)}};try{t.apply(i||null,e)}catch(t){r&&(r=!1,h(t))}})}},function(t,i,e){"use strict";var s=i;s.length=function(t){var i=t.length;if(!i)return 0;for(var e=0;--i%4>1&&"="===t.charAt(i);)++e;return Math.ceil(3*t.length)/4-e};for(var n=new Array(64),r=new Array(123),h=0;h<64;)r[n[h]=h<26?h+65:h<52?h+71:h<62?h-4:h-59|43]=h++;s.encode=function(t,i,e){for(var s,r=null,h=[],a=0,o=0;i<e;){var c=t[i++];switch(o){case 0:h[a++]=n[c>>2],s=(3&c)<<4,o=1;break;case 1:h[a++]=n[s|c>>4],s=(15&c)<<2,o=2;break;case 2:h[a++]=n[s|c>>6],h[a++]=n[63&c],o=0}a>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,h)),a=0)}return o&&(h[a++]=n[s],h[a++]=61,1===o&&(h[a++]=61)),r?(a&&r.push(String.fromCharCode.apply(String,h.slice(0,a))),r.join("")):String.fromCharCode.apply(String,h.slice(0,a))};s.decode=function(t,i,e){for(var s,n=e,h=0,a=0;a<t.length;){var o=t.charCodeAt(a++);if(61===o&&h>1)break;if(void 0===(o=r[o]))throw Error("invalid encoding");switch(h){case 0:s=o,h=1;break;case 1:i[e++]=s<<2|(48&o)>>4,s=o,h=2;break;case 2:i[e++]=(15&s)<<4|(60&o)>>2,s=o,h=3;break;case 3:i[e++]=(3&s)<<6|o,h=0}}if(1===h)throw Error("invalid encoding");return e-n},s.test=function(t){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(t)}},function(t,i,e){"use strict";function s(){this.xa={}}t.exports=s,s.prototype.on=function(t,i,e){return(this.xa[t]||(this.xa[t]=[])).push({fn:i,ctx:e||this}),this},s.prototype.off=function(t,i){if(void 0===t)this.xa={};else if(void 0===i)this.xa[t]=[];else for(var e=this.xa[t],s=0;s<e.length;)e[s].fn===i?e.splice(s,1):++s;return this},s.prototype.emit=function(t){var i=this.xa[t];if(i){for(var e=[],s=1;s<arguments.length;)e.push(arguments[s++]);for(s=0;s<i.length;)i[s].fn.apply(i[s++].ctx,e)}return this}},function(t,i,e){"use strict";function s(t){return"undefined"!=typeof Float32Array?function(){var i=new Float32Array([-0]),e=new Uint8Array(i.buffer),s=128===e[3];function n(t,s,n){i[0]=t,s[n]=e[0],s[n+1]=e[1],s[n+2]=e[2],s[n+3]=e[3]}function r(t,s,n){i[0]=t,s[n]=e[3],s[n+1]=e[2],s[n+2]=e[1],s[n+3]=e[0]}function h(t,s){return e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],i[0]}function a(t,s){return e[3]=t[s],e[2]=t[s+1],e[1]=t[s+2],e[0]=t[s+3],i[0]}t.writeFloatLE=s?n:r,t.writeFloatBE=s?r:n,t.readFloatLE=s?h:a,t.readFloatBE=s?a:h}():function(){function i(t,i,e,s){var n=i<0?1:0;if(n&&(i=-i),0===i)t(1/i>0?0:2147483648,e,s);else if(isNaN(i))t(2143289344,e,s);else if(i>3.4028234663852886e38)t((n<<31|2139095040)>>>0,e,s);else if(i<1.1754943508222875e-38)t((n<<31|Math.round(i/1.401298464324817e-45))>>>0,e,s);else{var r=Math.floor(Math.log(i)/Math.LN2);t((n<<31|r+127<<23|8388607&Math.round(i*Math.pow(2,-r)*8388608))>>>0,e,s)}}function e(t,i,e){var s=t(i,e),n=2*(s>>31)+1,r=s>>>23&255,h=8388607&s;return 255===r?h?NaN:n*(1/0):0===r?1.401298464324817e-45*n*h:n*Math.pow(2,r-150)*(h+8388608)}t.writeFloatLE=i.bind(null,n),t.writeFloatBE=i.bind(null,r),t.readFloatLE=e.bind(null,h),t.readFloatBE=e.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var i=new Float64Array([-0]),e=new Uint8Array(i.buffer),s=128===e[7];function n(t,s,n){i[0]=t,s[n]=e[0],s[n+1]=e[1],s[n+2]=e[2],s[n+3]=e[3],s[n+4]=e[4],s[n+5]=e[5],s[n+6]=e[6],s[n+7]=e[7]}function r(t,s,n){i[0]=t,s[n]=e[7],s[n+1]=e[6],s[n+2]=e[5],s[n+3]=e[4],s[n+4]=e[3],s[n+5]=e[2],s[n+6]=e[1],s[n+7]=e[0]}function h(t,s){return e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],e[4]=t[s+4],e[5]=t[s+5],e[6]=t[s+6],e[7]=t[s+7],i[0]}function a(t,s){return e[7]=t[s],e[6]=t[s+1],e[5]=t[s+2],e[4]=t[s+3],e[3]=t[s+4],e[2]=t[s+5],e[1]=t[s+6],e[0]=t[s+7],i[0]}t.writeDoubleLE=s?n:r,t.writeDoubleBE=s?r:n,t.readDoubleLE=s?h:a,t.readDoubleBE=s?a:h}():function(){function i(t,i,e,s,n,r){var h=s<0?1:0;if(h&&(s=-s),0===s)t(0,n,r+i),t(1/s>0?0:2147483648,n,r+e);else if(isNaN(s))t(0,n,r+i),t(2146959360,n,r+e);else if(s>1.7976931348623157e308)t(0,n,r+i),t((h<<31|2146435072)>>>0,n,r+e);else{var a;if(s<2.2250738585072014e-308)t((a=s/5e-324)>>>0,n,r+i),t((h<<31|a/4294967296)>>>0,n,r+e);else{var o=Math.floor(Math.log(s)/Math.LN2);1024===o&&(o=1023),t(4503599627370496*(a=s*Math.pow(2,-o))>>>0,n,r+i),t((h<<31|o+1023<<20|1048576*a&1048575)>>>0,n,r+e)}}}function e(t,i,e,s,n){var r=t(s,n+i),h=t(s,n+e),a=2*(h>>31)+1,o=h>>>20&2047,c=4294967296*(1048575&h)+r;return 2047===o?c?NaN:a*(1/0):0===o?5e-324*a*c:a*Math.pow(2,o-1075)*(c+4503599627370496)}t.writeDoubleLE=i.bind(null,n,0,4),t.writeDoubleBE=i.bind(null,r,4,0),t.readDoubleLE=e.bind(null,h,0,4),t.readDoubleBE=e.bind(null,a,4,0)}(),t}function n(t,i,e){i[e]=255&t,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24}function r(t,i,e){i[e]=t>>>24,i[e+1]=t>>>16&255,i[e+2]=t>>>8&255,i[e+3]=255&t}function h(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16|t[i+3]<<24)>>>0}function a(t,i){return(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3])>>>0}t.exports=s(s)},function(t,i,e){"use strict";function s(t){try{var i=eval("quire".replace(/^/,"re"))(t);if(i&&(i.length||Object.keys(i).length))return i}catch(t){}return null}t.exports=s},function(t,i,e){"use strict";var s=i;s.length=function(t){for(var i=0,e=0,s=0;s<t.length;++s)(e=t.charCodeAt(s))<128?i+=1:e<2048?i+=2:55296==(64512&e)&&56320==(64512&t.charCodeAt(s+1))?(++s,i+=4):i+=3;return i},s.read=function(t,i,e){if(e-i<1)return"";for(var s,n=null,r=[],h=0;i<e;)(s=t[i++])<128?r[h++]=s:s>191&&s<224?r[h++]=(31&s)<<6|63&t[i++]:s>239&&s<365?(s=((7&s)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536,r[h++]=55296+(s>>10),r[h++]=56320+(1023&s)):r[h++]=(15&s)<<12|(63&t[i++])<<6|63&t[i++],h>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,r)),h=0);return n?(h&&n.push(String.fromCharCode.apply(String,r.slice(0,h))),n.join("")):String.fromCharCode.apply(String,r.slice(0,h))},s.write=function(t,i,e){for(var s,n,r=e,h=0;h<t.length;++h)(s=t.charCodeAt(h))<128?i[e++]=s:s<2048?(i[e++]=s>>6|192,i[e++]=63&s|128):55296==(64512&s)&&56320==(64512&(n=t.charCodeAt(h+1)))?(s=65536+((1023&s)<<10)+(1023&n),++h,i[e++]=s>>18|240,i[e++]=s>>12&63|128,i[e++]=s>>6&63|128,i[e++]=63&s|128):(i[e++]=s>>12|224,i[e++]=s>>6&63|128,i[e++]=63&s|128);return e-r}},function(t,i,e){"use strict";t.exports=function(t,i,e){var s=e||8192,n=s>>>1,r=null,h=s;return function(e){if(e<1||e>n)return t(e);h+e>s&&(r=t(s),h=0);var a=i.call(r,h,h+=e);return 7&h&&(h=1+(7|h)),a}}},function(t,i,e){"use strict";t.exports=n;var s=e(34);function n(t,i){this.lo=t>>>0,this.hi=i>>>0}var r=n.zero=new n(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var h=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(t){if(0===t)return r;var i=t<0;i&&(t=-t);var e=t>>>0,s=(t-e)/4294967296>>>0;return i&&(s=~s>>>0,e=~e>>>0,++e>4294967295&&(e=0,++s>4294967295&&(s=0))),new n(e,s)},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(s.isString(t)){if(!s.Long)return n.fromNumber(parseInt(t,10));t=s.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):r},n.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var i=1+~this.lo>>>0,e=~this.hi>>>0;return i||(e=e+1>>>0),-(i+4294967296*e)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return s.Long?new s.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;n.fromHash=function(t){return t===h?r:new n((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,i=(this.lo>>>28|this.hi<<4)>>>0,e=this.hi>>>24;return 0===e?0===i?t<16384?t<128?1:2:t<2097152?3:4:i<16384?i<128?5:6:i<2097152?7:8:e<128?9:10}},function(t,i,e){"use strict";t.exports=h;var s=e(57);(h.prototype=Object.create(s.prototype)).constructor=h;var n=e(34),r=n.Buffer;function h(){s.call(this)}h.alloc=function(t){return(h.alloc=n.Xi)(t)};var a=r&&r.prototype instanceof Uint8Array&&"set"===r.prototype.set.name?function(t,i,e){i.set(t,e)}:function(t,i,e){if(t.copy)t.copy(i,e,0,t.length);else for(var s=0;s<t.length;)i[e++]=t[s++]};function o(t,i,e){t.length<40?n.utf8.write(t,i,e):i.utf8Write(t,e)}h.prototype.bytes=function(t){n.isString(t)&&(t=n.Ji(t,"base64"));var i=t.length>>>0;return this.uint32(i),i&&this.ps(a,i,t),this},h.prototype.string=function(t){var i=r.byteLength(t);return this.uint32(i),i&&this.ps(o,i,t),this}},function(t,i,e){"use strict";t.exports=r;var s=e(59);(r.prototype=Object.create(s.prototype)).constructor=r;var n=e(34);function r(t){s.call(this,t)}n.Buffer&&(r.prototype.bs=n.Buffer.prototype.slice),r.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len))}},function(t,i,e){"use strict";i.Service=e(136)},function(t,i,e){"use strict";t.exports=n;var s=e(34);function n(t,i,e){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");s.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(i),this.responseDelimited=Boolean(e)}(n.prototype=Object.create(s.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function t(i,e,n,r,h){if(!r)throw TypeError("request must be specified");var a=this;if(!h)return s.asPromise(t,a,i,e,n,r);if(a.rpcImpl)try{return a.rpcImpl(i,e[a.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(t,e){if(t)return a.emit("error",t,i),h(t);if(null!==e){if(!(e instanceof n))try{e=n[a.responseDelimited?"decodeDelimited":"decode"](e)}catch(t){return a.emit("error",t,i),h(t)}return a.emit("data",e,i),h(null,e)}a.end(!0)})}catch(t){return a.emit("error",t,i),void setTimeout(function(){h(t)},0)}else setTimeout(function(){h(Error("already ended"))},0)},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(t,i,e){"use strict";t.exports={}},function(t,i,e){"use strict";var s,n=this&&this.vs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=function(t){function i(i){var e=t.call(this,i)||this;return e.name="DecodingError",e}return n(i,t),i}(Error);i.DecodingError=r},function(t,i,e){"use strict";var s,n=this&&this.vs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=function(t){function i(i){var e=t.call(this,i)||this;return e.name="EncodingError",e}return n(i,t),i}(Error);i.EncodingError=r},function(t,i,e){"use strict";var s,n=this&&this.vs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=function(t){function i(i){var e=t.call(this,i)||this;return e.name="GVLError",e}return n(i,t),i}(Error);i.GVLError=r},function(t,i,e){"use strict";var s,n=this&&this.vs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=function(t){function i(i,e,s){void 0===s&&(s="");var n=t.call(this,"invalid value "+e+" passed for "+i+" "+s)||this;return n.name="TCModelError",n}return n(i,t),i}(Error);i.TCModelError=r},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=function(){function t(){}return t.prototype.has=function(i){return t.langSet.has(i)},t.prototype.forEach=function(i){t.langSet.forEach(i)},Object.defineProperty(t.prototype,"size",{get:function(){return t.langSet.size},enumerable:!0,configurable:!0}),t.langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","ZH"]),t}();i.ConsentLanguages=s},function(t,i,e){"use strict";var s,n=this&&this.vs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=e(64),h=e(62),a=e(50),o=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.bitLength=0,i.map=new Map,i}return n(i,t),i.prototype.has=function(t){return this.map.has(t)},i.prototype.isOkToHave=function(t,i,e){var s,n=!0;if(null===(s=this.gvl)||void 0===s?void 0:s.vendors){var r=this.gvl.vendors[e];if(r)if(t===a.RestrictionType.NOT_ALLOWED)n=r.legIntPurposes.includes(i)||r.purposes.includes(i);else if(r.flexiblePurposes.length)switch(t){case a.RestrictionType.REQUIRE_CONSENT:n=r.flexiblePurposes.includes(i)&&r.legIntPurposes.includes(i);break;case a.RestrictionType.REQUIRE_LI:n=r.flexiblePurposes.includes(i)&&r.purposes.includes(i)}else n=!1;else n=!1}return n},i.prototype.add=function(t,i){if(this.isOkToHave(i.restrictionType,i.purposeId,t)){var e=i.hash;this.has(e)||(this.map.set(e,new h.BinarySearchTree),this.bitLength=0),this.map.get(e).add(t)}},i.prototype.getVendors=function(t){var i=[];if(t){var e=t.hash;this.has(e)&&(i=this.map.get(e).get())}else{var s=new Set;this.map.forEach(function(t){t.get().forEach(function(t){s.add(t)})}),i=Array.from(s)}return i},i.prototype.getRestrictionType=function(t,i){var e;return this.getRestrictions(t).forEach(function(t){t.purposeId===i&&(void 0===e||e>t.restrictionType)&&(e=t.restrictionType)}),e},i.prototype.vendorHasRestriction=function(t,i){for(var e=!1,s=this.getRestrictions(t),n=0;n<s.length&&!e;n++)e=i.isSameAs(s[n]);return e},i.prototype.getMaxVendorId=function(){var t=0;return this.map.forEach(function(i){t=Math.max(i.max(),t)}),t},i.prototype.getRestrictions=function(t){var i=[];return this.map.forEach(function(e,s){t?e.contains(t)&&i.push(r.PurposeRestriction.unHash(s)):i.push(r.PurposeRestriction.unHash(s))}),i},i.prototype.getPurposes=function(){var t=new Set;return this.map.forEach(function(i,e){t.add(r.PurposeRestriction.unHash(e).purposeId)}),Array.from(t)},i.prototype.remove=function(t,i){var e=i.hash,s=this.map.get(e);s&&(s.remove(t),s.isEmpty()&&(this.map.delete(e),this.bitLength=0))},Object.defineProperty(i.prototype,"gvl",{get:function(){return this.gvl_},set:function(t){var i=this;this.gvl_||(this.gvl_=t,this.map.forEach(function(t,e){var s=r.PurposeRestriction.unHash(e);t.get().forEach(function(e){i.isOkToHave(s.restrictionType,s.purposeId,e)||t.remove(e)})}))},enumerable:!0,configurable:!0}),i.prototype.isEmpty=function(){return 0===this.map.size},Object.defineProperty(i.prototype,"numRestrictions",{get:function(){return this.map.size},enumerable:!0,configurable:!0}),i}(e(36).Cloneable);i.PurposeRestrictionVector=o},function(t,i,e){"use strict";var s;Object.defineProperty(i,"_",{value:!0});var n=e(65),r=function(){function t(){}return t.ID_TO_KEY=[n.Segment.CORE,n.Segment.VENDORS_DISCLOSED,n.Segment.VENDORS_ALLOWED,n.Segment.PUBLISHER_TC],t.KEY_TO_ID=((s={})[n.Segment.CORE]=0,s[n.Segment.VENDORS_DISCLOSED]=1,s[n.Segment.VENDORS_ALLOWED]=2,s[n.Segment.PUBLISHER_TC]=3,s),t}();i.SegmentIDs=r},function(t,i,e){"use strict";var s,n=this&&this.vs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),r=this&&this.wa||function(t,i){var e,s,n,r,h={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;h;)try{if(e=1,s&&(n=2&r[0]?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return h.label++,{value:r[1],done:!1};case 5:h.label++,s=r[1],r=[0];continue;case 7:r=h.ops.pop(),h.trys.pop();continue;default:if(!(n=(n=h.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){h=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){h.label=r[1];break}if(6===r[0]&&h.label<n[1]){h.label=n[1],n=r;break}if(n&&h.label<n[2]){h.label=n[2],h.ops.push(r);break}n[2]&&h.ops.pop(),h.trys.pop();continue}r=i.call(t,h)}catch(t){r=[6,t],s=0}finally{e=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},h=this&&this.Ki||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"_",{value:!0});var a=e(36),o=e(31),c=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.bitLength=0,i.maxId_=0,i.set_=new Set,i}return n(i,t),i.prototype[Symbol.iterator]=function(){var t;return r(this,function(i){switch(i.label){case 0:t=1,i.label=1;case 1:return t<=this.maxId?[4,[t,this.has(t)]]:[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}})},i.prototype.values=function(){return this.set_.values()},Object.defineProperty(i.prototype,"maxId",{get:function(){return this.maxId_},enumerable:!0,configurable:!0}),i.prototype.has=function(t){return this.set_.has(t)},i.prototype.unset=function(t){var i=this;Array.isArray(t)?t.forEach(function(t){return i.unset(t)}):"object"==typeof t?this.unset(Object.keys(t).map(function(t){return+t})):(this.set_.delete(t),this.bitLength=0,t===this.maxId&&(this.maxId_=0,this.set_.forEach(function(t){i.maxId_=Math.max(i.maxId,t)})))},i.prototype.isIntMap=function(t){var i=this,e="object"==typeof t;return e&&Object.keys(t).every(function(e){var s=Number.isInteger(parseInt(e,10));return(s=s&&i.isValidNumber(t[e].id))&&void 0!==t[e].name})},i.prototype.isValidNumber=function(t){return parseInt(t,10)>0},i.prototype.isSet=function(t){var i=!1;return t instanceof Set&&(i=Array.from(t).every(this.isValidNumber)),i},i.prototype.set=function(t){var i=this;if(Array.isArray(t))t.forEach(function(t){return i.set(t)});else if(this.isSet(t))this.set(Array.from(t));else if(this.isIntMap(t))this.set(Object.keys(t).map(function(t){return+t}));else{if(!this.isValidNumber(t))throw new o.TCModelError("set()",t,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(t),this.maxId_=Math.max(this.maxId,t),this.bitLength=0}},i.prototype.empty=function(){this.set_=new Set},i.prototype.forEach=function(t){var i,e;try{for(var s=h(this),n=s.next();!n.done;n=s.next()){var r=n.value;t(r[1],r[0])}}catch(t){i={error:t}}finally{try{n&&!n.done&&(e=s.return)&&e.call(s)}finally{if(i)throw i.error}}},Object.defineProperty(i.prototype,"size",{get:function(){return this.set_.size},enumerable:!0,configurable:!0}),i.prototype.setAll=function(t){this.set(t)},i}(a.Cloneable);i.Vector=c},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(61),n=e(49),r=e(66),h=e(72),a=e(31),o=e(63),c=e(32),l=function(){function t(){}return t.encode=function(t,i){var e,h=this;try{e=this.fieldSequence[""+t.version][i]}catch(e){throw new a.EncodingError("Unable to encode version: "+t.version+", segment: "+i)}var l="";return i!==c.Segment.CORE&&(l=r.IntEncoder.encode(c.SegmentIDs.KEY_TO_ID[i],n.BitLength.segmentType)),e.forEach(function(e){var s=t[e],c=r.FieldEncoderMap[e],u=n.BitLength[e];void 0===u&&h.isPublisherCustom(e)&&(u=+t[o.Fields.numCustomPurposes]);try{l+=c.encode(s,u)}catch(t){throw new a.EncodingError("Error encoding "+i+"->"+e+": "+t.message)}}),s.Base64Url.encode(l)},t.decode=function(t,i,e){var h=this,l=s.Base64Url.decode(t),u=0;return e===c.Segment.CORE&&(i.version=r.IntEncoder.decode(l.substr(u,n.BitLength[o.Fields.version]),n.BitLength[o.Fields.version])),e!==c.Segment.CORE&&(u+=n.BitLength.segmentType),this.fieldSequence[""+i.version][e].forEach(function(t){var e=r.FieldEncoderMap[t],s=n.BitLength[t];if(void 0===s&&h.isPublisherCustom(t)&&(s=+i[o.Fields.numCustomPurposes]),0!==s){var c=l.substr(u,s);if(e===r.VendorVectorEncoder?i[t]=e.decode(c,i.version):i[t]=e.decode(c,s),Number.isInteger(s))u+=s;else{if(!Number.isInteger(i[t].bitLength))throw new a.DecodingError(t);u+=i[t].bitLength}}}),i},t.isPublisherCustom=function(t){return 0===t.indexOf("publisherCustom")},t.fieldSequence=new h.FieldSequence,t}();i.SegmentEncoder=l},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(32),n=e(39),r=e(67),h=e(51),a=e(35),o=e(68),c=e(69),l=e(70),u=function(){function t(){}var i,e,u,d,f,p,b,v,g,m,y,x,w,k,S,O,_,j,A,T,C,I,P,M,E,L;return i=s.Fields.version,e=s.Fields.created,u=s.Fields.lastUpdated,d=s.Fields.cmpId,f=s.Fields.cmpVersion,p=s.Fields.consentScreen,b=s.Fields.consentLanguage,v=s.Fields.vendorListVersion,g=s.Fields.policyVersion,m=s.Fields.isServiceSpecific,y=s.Fields.useNonStandardStacks,x=s.Fields.specialFeatureOptins,w=s.Fields.purposeConsents,k=s.Fields.purposeLegitimateInterests,S=s.Fields.purposeOneTreatment,O=s.Fields.publisherCountryCode,_=s.Fields.vendorConsents,j=s.Fields.vendorLegitimateInterests,A=s.Fields.publisherRestrictions,T=s.Fields.vendorsDisclosed,C=s.Fields.vendorsAllowed,I=s.Fields.publisherConsents,P=s.Fields.publisherLegitimateInterests,M=s.Fields.numCustomPurposes,E=s.Fields.publisherCustomConsents,L=s.Fields.publisherCustomLegitimateInterests,t[i]=a.IntEncoder,t[e]=r.DateEncoder,t[u]=r.DateEncoder,t[d]=a.IntEncoder,t[f]=a.IntEncoder,t[p]=a.IntEncoder,t[b]=o.LangEncoder,t[v]=a.IntEncoder,t[g]=a.IntEncoder,t[m]=n.BooleanEncoder,t[y]=n.BooleanEncoder,t[x]=h.FixedVectorEncoder,t[w]=h.FixedVectorEncoder,t[k]=h.FixedVectorEncoder,t[S]=n.BooleanEncoder,t[O]=o.LangEncoder,t[_]=l.VendorVectorEncoder,t[j]=l.VendorVectorEncoder,t[A]=c.PurposeRestrictionVectorEncoder,t.segmentType=a.IntEncoder,t[T]=l.VendorVectorEncoder,t[C]=l.VendorVectorEncoder,t[I]=h.FixedVectorEncoder,t[P]=h.FixedVectorEncoder,t[M]=a.IntEncoder,t[E]=h.FixedVectorEncoder,t[L]=h.FixedVectorEncoder,t}();i.FieldEncoderMap=u},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(32);i.FieldSequence=function(){var t,i;this[1]=((t={})[s.Segment.CORE]=[s.Fields.version,s.Fields.created,s.Fields.lastUpdated,s.Fields.cmpId,s.Fields.cmpVersion,s.Fields.consentScreen,s.Fields.consentLanguage,s.Fields.vendorListVersion,s.Fields.purposeConsents,s.Fields.vendorConsents],t),this[2]=((i={})[s.Segment.CORE]=[s.Fields.version,s.Fields.created,s.Fields.lastUpdated,s.Fields.cmpId,s.Fields.cmpVersion,s.Fields.consentScreen,s.Fields.consentLanguage,s.Fields.vendorListVersion,s.Fields.policyVersion,s.Fields.isServiceSpecific,s.Fields.useNonStandardStacks,s.Fields.specialFeatureOptins,s.Fields.purposeConsents,s.Fields.purposeLegitimateInterests,s.Fields.purposeOneTreatment,s.Fields.publisherCountryCode,s.Fields.vendorConsents,s.Fields.vendorLegitimateInterests,s.Fields.publisherRestrictions],i[s.Segment.PUBLISHER_TC]=[s.Fields.publisherConsents,s.Fields.publisherLegitimateInterests,s.Fields.numCustomPurposes,s.Fields.publisherCustomConsents,s.Fields.publisherCustomLegitimateInterests],i[s.Segment.VENDORS_ALLOWED]=[s.Fields.vendorsAllowed],i[s.Segment.VENDORS_DISCLOSED]=[s.Fields.vendorsDisclosed],i)}},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(32);i.SegmentSequence=function(t,i){if(this[1]=[s.Segment.CORE],this[2]=[s.Segment.CORE],2===t.version)if(t.isServiceSpecific)this[2].push(s.Segment.PUBLISHER_TC);else{var e=!(!i||!i.isForVendors);e&&!0!==t[s.Fields.supportOOB]||this[2].push(s.Segment.VENDORS_DISCLOSED),e&&(t[s.Fields.supportOOB]&&t[s.Fields.vendorsAllowed].size>0&&this[2].push(s.Segment.VENDORS_ALLOWED),this[2].push(s.Segment.PUBLISHER_TC))}}},function(t,i,e){"use strict";var s=this&&this.Ki||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.ka||function(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var s,n,r=e.call(t),h=[];try{for(;(void 0===i||i-- >0)&&!(s=r.next()).done;)h.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return h};Object.defineProperty(i,"_",{value:!0});var r=e(31),h=e(32),a=function(){function t(){}return t.process=function(t,i){var e,s,n=t.gvl;if(!n)throw new r.EncodingError("Unable to encode TCModel without a GVL");if(!n.isReady)throw new r.EncodingError("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(t=t.clone()).consentLanguage=n.language.toUpperCase(),(null===(e=i)||void 0===e?void 0:e.version)>0&&(null===(s=i)||void 0===s?void 0:s.version)<=this.processor.length?t.version=i.version:t.version=this.processor.length;var h=t.version-1;if(!this.processor[h])throw new r.EncodingError("Invalid version: "+t.version);return this.processor[h](t,n)},t.processor=[function(t){return t},function(t,i){var e,r,a,o;t.publisherRestrictions.gvl=i,t.purposeLegitimateInterests.unset(1);var c=new Map;c.set("legIntPurposes",t.vendorLegitimateInterests),c.set("purposes",t.vendorConsents);try{for(var l=s(c),u=l.next();!u.done;u=l.next()){var d=n(u.value,2),f=d[0],p=d[1];try{for(var b=(a=void 0,s(p.values())),v=b.next();!v.done;v=b.next()){var g=v.value,m=i.vendors[g];if(!m||m.deletedDate)p.unset(g);else if(0===m[f].length)if(t.isServiceSpecific)if(0===m.flexiblePurposes.length)p.unset(g);else{for(var y=t.publisherRestrictions.getRestrictions(g),x=!1,w=0,k=y.length;w<k&&!x;w++)x=y[w].restrictionType===h.RestrictionType.REQUIRE_CONSENT&&"purposes"===f||y[w].restrictionType===h.RestrictionType.REQUIRE_LI&&"legIntPurposes"===f;x||p.unset(g)}else p.unset(g)}}catch(t){a={error:t}}finally{try{v&&!v.done&&(o=b.return)&&o.call(b)}finally{if(a)throw a.error}}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return t.vendorsDisclosed.set(i.vendors),t}],t}();i.SemanticPreEncoder=a},function(t,i,e){"use strict";var s,n=this&&this.vs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=e(36),h=e(31),a=e(152),o=e(32),c=function(t){function i(i){var e=t.call(this)||this;return e.isServiceSpecific_=!1,e.supportOOB_=!0,e.useNonStandardStacks_=!1,e.purposeOneTreatment_=!1,e.publisherCountryCode_="AA",e.version_=2,e.consentScreen_=0,e.policyVersion_=2,e.consentLanguage_="EN",e.cmpId_=0,e.cmpVersion_=0,e.vendorListVersion_=0,e.numCustomPurposes_=0,e.specialFeatureOptins=new o.Vector,e.purposeConsents=new o.Vector,e.purposeLegitimateInterests=new o.Vector,e.publisherConsents=new o.Vector,e.publisherLegitimateInterests=new o.Vector,e.publisherCustomConsents=new o.Vector,e.publisherCustomLegitimateInterests=new o.Vector,e.vendorConsents=new o.Vector,e.vendorLegitimateInterests=new o.Vector,e.vendorsDisclosed=new o.Vector,e.vendorsAllowed=new o.Vector,e.publisherRestrictions=new o.PurposeRestrictionVector,i&&(e.gvl=i),e.created=new Date,e.updated(),e}return n(i,t),Object.defineProperty(i.prototype,"gvl",{get:function(){return this.gvl_},set:function(t){a.GVL.isInstanceOf(t)||(t=new a.GVL(t)),this.gvl_=t,this.publisherRestrictions.gvl=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cmpId",{get:function(){return this.cmpId_},set:function(t){if(!(Number.isInteger(+t)&&t>1))throw new h.TCModelError("cmpId",t);this.cmpId_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cmpVersion",{get:function(){return this.cmpVersion_},set:function(t){if(!(Number.isInteger(+t)&&t>-1))throw new h.TCModelError("cmpVersion",t);this.cmpVersion_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consentScreen",{get:function(){return this.consentScreen_},set:function(t){if(!(Number.isInteger(+t)&&t>-1))throw new h.TCModelError("consentScreen",t);this.consentScreen_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consentLanguage",{get:function(){return this.consentLanguage_},set:function(t){this.consentLanguage_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"publisherCountryCode",{get:function(){return this.publisherCountryCode_},set:function(t){if(!/^([A-z]){2}$/.test(t))throw new h.TCModelError("publisherCountryCode",t);this.publisherCountryCode_=t.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vendorListVersion",{get:function(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_},set:function(t){if((t=+t>>0)<0)throw new h.TCModelError("vendorListVersion",t);this.vendorListVersion_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"policyVersion",{get:function(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_},set:function(t){if(this.policyVersion_=parseInt(t,10),this.policyVersion_<0)throw new h.TCModelError("policyVersion",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"version",{get:function(){return this.version_},set:function(t){this.version_=parseInt(t,10)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isServiceSpecific",{get:function(){return this.isServiceSpecific_},set:function(t){this.isServiceSpecific_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useNonStandardStacks",{get:function(){return this.useNonStandardStacks_},set:function(t){this.useNonStandardStacks_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"supportOOB",{get:function(){return this.supportOOB_},set:function(t){this.supportOOB_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"purposeOneTreatment",{get:function(){return this.purposeOneTreatment_},set:function(t){this.purposeOneTreatment_=t},enumerable:!0,configurable:!0}),i.prototype.setAllVendorConsents=function(){this.vendorConsents.set(this.gvl.vendors)},i.prototype.unsetAllVendorConsents=function(){this.vendorConsents.empty()},i.prototype.setAllVendorsDisclosed=function(){this.vendorsDisclosed.set(this.gvl.vendors)},i.prototype.unsetAllVendorsDisclosed=function(){this.vendorsDisclosed.empty()},i.prototype.setAllVendorsAllowed=function(){this.vendorsAllowed.set(this.gvl.vendors)},i.prototype.unsetAllVendorsAllowed=function(){this.vendorsAllowed.empty()},i.prototype.setAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.set(this.gvl.vendors)},i.prototype.unsetAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.empty()},i.prototype.setAllPurposeConsents=function(){this.purposeConsents.set(this.gvl.purposes)},i.prototype.unsetAllPurposeConsents=function(){this.purposeConsents.empty()},i.prototype.setAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.set(this.gvl.purposes)},i.prototype.unsetAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.empty()},i.prototype.setAllSpecialFeatureOptins=function(){this.specialFeatureOptins.set(this.gvl.specialFeatures)},i.prototype.unsetAllSpecialFeatureOptins=function(){this.specialFeatureOptins.empty()},i.prototype.setAll=function(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()},i.prototype.unsetAll=function(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()},Object.defineProperty(i.prototype,"numCustomPurposes",{get:function(){var t=this.numCustomPurposes_;if("object"==typeof this.customPurposes){var i=Object.keys(this.customPurposes).sort(function(t,i){return+t-+i});t=parseInt(i.pop(),10)}return t},set:function(t){if(this.numCustomPurposes_=parseInt(t,10),this.numCustomPurposes_<0)throw new h.TCModelError("numCustomPurposes",t)},enumerable:!0,configurable:!0}),i.prototype.updated=function(){this.lastUpdated=new Date},i.consentLanguages=a.GVL.consentLanguages,i}(r.Cloneable);i.TCModel=c},function(t,i,e){"use strict";var s,n=this&&this.vs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),r=this&&this.Sa||function(t,i,e,s){return new(e||(e=Promise))(function(n,r){function h(t){try{o(s.next(t))}catch(t){r(t)}}function a(t){try{o(s.throw(t))}catch(t){r(t)}}function o(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e(function(t){t(i)})).then(h,a)}o((s=s.apply(t,i||[])).next())})},h=this&&this.wa||function(t,i){var e,s,n,r,h={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;h;)try{if(e=1,s&&(n=2&r[0]?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return h.label++,{value:r[1],done:!1};case 5:h.label++,s=r[1],r=[0];continue;case 7:r=h.ops.pop(),h.trys.pop();continue;default:if(!(n=(n=h.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){h=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){h.label=r[1];break}if(6===r[0]&&h.label<n[1]){h.label=n[1],n=r;break}if(n&&h.label<n[2]){h.label=n[2],h.ops.push(r);break}n[2]&&h.ops.pop(),h.trys.pop();continue}r=i.call(t,h)}catch(t){r=[6,t],s=0}finally{e=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(i,"_",{value:!0});var a=e(36),o=e(31),c=e(153),l=e(32),u=function(t){function i(e){var s=t.call(this)||this;s.isReady_=!1,s.isLatest=!1;var n=i.baseUrl;if(s.lang_=i.DEFAULT_LANGUAGE,s.isVendorList(e))s.populate(e),s.readyPromise=Promise.resolve();else{if(!n)throw new o.GVLError("must specify GVL.baseUrl before loading GVL json");if(e>0){var r=e;i.CACHE.has(r)?(s.populate(i.CACHE.get(r)),s.readyPromise=Promise.resolve()):(n+=i.versionedFilename.replace("[VERSION]",r+""),s.readyPromise=s.fetchJson(n))}else i.CACHE.has(i.LATEST_CACHE_KEY)?(s.populate(i.CACHE.get(i.LATEST_CACHE_KEY)),s.readyPromise=Promise.resolve()):(s.isLatest=!0,s.readyPromise=s.fetchJson(n+i.latestFilename))}return s}return n(i,t),Object.defineProperty(i,"baseUrl",{get:function(){return this.baseUrl_},set:function(t){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(t))throw new o.GVLError("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");t.length>0&&"/"!==t[t.length-1]&&(t+="/"),this.baseUrl_=t},enumerable:!0,configurable:!0}),i.emptyLanguageCache=function(t){var e=!1;return void 0===t&&i.LANGUAGE_CACHE.size>0?(i.LANGUAGE_CACHE=new Map,e=!0):"string"==typeof t&&this.consentLanguages.has(t.toUpperCase())&&(i.LANGUAGE_CACHE.delete(t.toUpperCase()),e=!0),e},i.emptyCache=function(t){var e=!1;return Number.isInteger(t)&&t>=0?(i.CACHE.delete(t),e=!0):void 0===t&&(i.CACHE=new Map,e=!0),e},i.prototype.cacheLanguage=function(){i.LANGUAGE_CACHE.has(this.lang_)||i.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})},i.prototype.fetchJson=function(t){return r(this,void 0,void 0,function(){var i,e;return h(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),i=this.populate,[4,c.Json.fetch(t)];case 1:return i.apply(this,[s.sent()]),[3,3];case 2:throw e=s.sent(),new o.GVLError(e.message);case 3:return[2]}})})},i.prototype.getJson=function(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))},i.prototype.changeLanguage=function(t){return r(this,void 0,void 0,function(){var e,s,n,r,a;return h(this,function(h){switch(h.label){case 0:if(e=t.toUpperCase(),!i.consentLanguages.has(e))return[3,6];if(e===this.lang_)return[3,5];if(this.lang_=e,!i.LANGUAGE_CACHE.has(e))return[3,1];for(n in s=i.LANGUAGE_CACHE.get(e))s.hasOwnProperty(n)&&(this[n]=s[n]);return[3,5];case 1:r=i.baseUrl+i.languageFilename.replace("[LANG]",t),h.label=2;case 2:return h.trys.push([2,4,,5]),[4,this.fetchJson(r)];case 3:return h.sent(),this.cacheLanguage(),[3,5];case 4:throw a=h.sent(),new o.GVLError("unable to load language: "+a.message);case 5:return[3,7];case 6:throw new o.GVLError("unsupported language "+t);case 7:return[2]}})})},Object.defineProperty(i.prototype,"language",{get:function(){return this.lang_},enumerable:!0,configurable:!0}),i.prototype.isVendorList=function(t){return void 0!==t&&void 0!==t.vendors},i.prototype.populate=function(t){this.purposes=t.purposes,this.specialPurposes=t.specialPurposes,this.features=t.features,this.specialFeatures=t.specialFeatures,this.stacks=t.stacks,this.isVendorList(t)&&(this.gvlSpecificationVersion=t.gvlSpecificationVersion,this.tcfPolicyVersion=t.tcfPolicyVersion,this.vendorListVersion=t.vendorListVersion,this.lastUpdated=t.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=t.vendors,this.fullVendorList=t.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&i.CACHE.set(i.LATEST_CACHE_KEY,this.getJson()),i.CACHE.has(this.vendorListVersion)||i.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()},i.prototype.mapVendors=function(t){var i=this;this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(function(t){i.byPurposeVendorMap[t]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(function(t){i.bySpecialPurposeVendorMap[t]=new Set}),Object.keys(this.features).forEach(function(t){i.byFeatureVendorMap[t]=new Set}),Object.keys(this.specialFeatures).forEach(function(t){i.bySpecialFeatureVendorMap[t]=new Set}),Array.isArray(t)||(t=Object.keys(this.fullVendorList).map(function(t){return+t})),this.vendorIds=new Set(t),this.vendors_=t.reduce(function(t,e){var s=i.vendors_[""+e];return s&&void 0===s.deletedDate&&(s.purposes.forEach(function(t){i.byPurposeVendorMap[t+""].consent.add(e)}),s.specialPurposes.forEach(function(t){i.bySpecialPurposeVendorMap[t+""].add(e)}),s.legIntPurposes.forEach(function(t){i.byPurposeVendorMap[t+""].legInt.add(e)}),s.flexiblePurposes&&s.flexiblePurposes.forEach(function(t){i.byPurposeVendorMap[t+""].flexible.add(e)}),s.features.forEach(function(t){i.byFeatureVendorMap[t+""].add(e)}),s.specialFeatures.forEach(function(t){i.bySpecialFeatureVendorMap[t+""].add(e)}),t[e]=s),t},{})},i.prototype.getFilteredVendors=function(t,i,e,s){var n=this,r=t.charAt(0).toUpperCase()+t.slice(1),h={};return("purpose"===t&&e?this["by"+r+"VendorMap"][i+""][e]:this["by"+(s?"Special":"")+r+"VendorMap"][i+""]).forEach(function(t){h[t+""]=n.vendors[t+""]}),h},i.prototype.getVendorsWithConsentPurpose=function(t){return this.getFilteredVendors("purpose",t,"consent")},i.prototype.getVendorsWithLegIntPurpose=function(t){return this.getFilteredVendors("purpose",t,"legInt")},i.prototype.getVendorsWithFlexiblePurpose=function(t){return this.getFilteredVendors("purpose",t,"flexible")},i.prototype.getVendorsWithSpecialPurpose=function(t){return this.getFilteredVendors("purpose",t,void 0,!0)},i.prototype.getVendorsWithFeature=function(t){return this.getFilteredVendors("feature",t)},i.prototype.getVendorsWithSpecialFeature=function(t){return this.getFilteredVendors("feature",t,void 0,!0)},Object.defineProperty(i.prototype,"vendors",{get:function(){return this.vendors_},enumerable:!0,configurable:!0}),i.prototype.narrowVendorsTo=function(t){this.mapVendors(t)},Object.defineProperty(i.prototype,"isReady",{get:function(){return this.isReady_},enumerable:!0,configurable:!0}),i.prototype.clone=function(){return new i(this.getJson())},i.isInstanceOf=function(t){return"object"==typeof t&&"function"==typeof t.narrowVendorsTo},i.LANGUAGE_CACHE=new Map,i.CACHE=new Map,i.LATEST_CACHE_KEY=0,i.DEFAULT_LANGUAGE="EN",i.consentLanguages=new l.ConsentLanguages,i.latestFilename="vendor-list.json",i.versionedFilename="archives/vendor-list-v[VERSION].json",i.languageFilename="purposes-[LANG].json",i}(a.Cloneable);i.GVL=u},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=function(){function t(){}return t.absCall=function(t,i,e,s){return new Promise(function(n,r){var h=new XMLHttpRequest;h.withCredentials=e,h.addEventListener("load",function(){if(h.readyState==XMLHttpRequest.DONE)if(h.status>=200&&h.status<300){var t=h.response;if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}n(t)}else r(new Error("HTTP Status: "+h.status+" response type: "+h.responseType))}),h.addEventListener("error",function(){r(new Error("error"))}),h.addEventListener("abort",function(){r(new Error("aborted"))}),null===i?h.open("GET",t,!0):h.open("POST",t,!0),h.responseType="json",h.timeout=s,h.ontimeout=function(){r(new Error("Timeout "+s+"ms "+t))},h.send(i)})},t.post=function(t,i,e,s){return void 0===e&&(e=!1),void 0===s&&(s=0),this.absCall(t,JSON.stringify(i),e,s)},t.fetch=function(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=0),this.absCall(t,null,i,e)},t}();i.Json=s},function(t,i,e){"use strict";var s=e(155),n=s.decodeBitsToIds,r=s.decodeFromBase64;t.exports={decodeConsentString:function(t){var i=r(t),e=i.version,s=i.cmpId,h=i.vendorListVersion,a=i.purposeIdBitString,o=i.maxVendorId,c=i.created,l=i.lastUpdated,u=i.isRange,d=i.defaultConsent,f=i.vendorIdBitString,p=i.vendorRangeList,b=i.cmpVersion,v=i.consentScreen,g=i.consentLanguage,m={version:e,cmpId:s,vendorListVersion:h,allowedPurposeIds:n(a),maxVendorId:o,created:c,lastUpdated:l,cmpVersion:b,consentScreen:v,consentLanguage:g};if(u){var y=p.reduce(function(t,i){for(var e=i.isRange,s=i.startVendorId,n=i.endVendorId,r=e?n:s,h=s;h<=r;h+=1)t[h]=!0;return t},{});m.allowedVendorIds=[];for(var x=1;x<=o;x+=1)(d&&!y[x]||!d&&y[x])&&-1===m.allowedVendorIds.indexOf(x)&&m.allowedVendorIds.push(x)}else m.allowedVendorIds=n(f);return m}}},function(t,i,e){"use strict";var s=e(156),n=e(158),r=n.versionNumBits,h=n.vendorVersionMap;function a(t,i,e){return parseInt(t.substr(i,e),2)}function o(t,i,e){return new Date(100*a(t,i,e))}function c(t){var i=a(t);return String.fromCharCode(i+65).toLowerCase()}function l(t,i,e){var s=t.substr(i,e);return c(s.slice(0,e/2))+c(s.slice(e/2))}function u(t){var i=t.input,e=t.output,s=t.startPosition,n=t.field,r=n.type,h=n.numBits,c=n.decoder,u=n.validator,f=n.listCount;if("function"==typeof u&&!u(e))return{newPosition:s};if("function"==typeof c)return c(i,e,s);var p,b,v="function"==typeof h?h(e):h;switch(r){case"int":return{fieldValue:a(i,s,v)};case"bool":return{fieldValue:(p=i,b=s,1===parseInt(p.substr(b,1),2))};case"date":return{fieldValue:o(i,s,v)};case"bits":return{fieldValue:i.substr(s,v)};case"list":return function(t,i,e,s,n){var r=0;"function"==typeof n?r=n(i):"number"==typeof n&&(r=n);for(var h=e,a=[],o=0;o<r;o+=1){var c=d({input:t,fields:s.fields,startPosition:h});h=c.newPosition,a.push(c.decodedObject)}return{fieldValue:a,newPosition:h}}(i,e,s,n,f);case"language":return{fieldValue:l(i,s,v)};default:throw new Error("ConsentString - Unknown field type "+r+" for decoding")}}function d(t){var i=t.input,e=t.fields,s=t.startPosition,n=void 0===s?0:s;return{decodedObject:e.reduce(function(t,e){var s=e.name,r=e.numBits,h=u({input:i,output:t,startPosition:n,field:e}),a=h.fieldValue,o=h.newPosition;return void 0!==a&&(t[s]=a),void 0!==o?n=o:"number"==typeof r&&(n+=r),t},{}),newPosition:n}}t.exports={decodeBitsToIds:function(t){return t.split("").reduce(function(t,i,e){return"1"===i&&-1===t.indexOf(e+1)&&t.push(e+1),t},[])},decodeFromBase64:function(t,i){for(var e=t;e.length%4!=0;)e+="=";e=e.replace(/-/g,"+").replace(/_/g,"/");for(var n,o,c=s.decode(e),l="",u=0;u<c.length;u+=1){var f=c.charCodeAt(u).toString(2);l+=(n=f,o=8-f.length,function(t){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",e="",s=0;s<t;s+=1)e+=i;return e}(Math.max(0,o))+n)}return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,e=a(t,0,r);if("number"!=typeof e)throw new Error("ConsentString - Unknown version number in the string to decode");if(!h[e])throw new Error("ConsentString - Unsupported version "+e+" in the string to decode");return d({input:t,fields:i[e].fields}).decodedObject}(l,i)}}},function(t,i,e){(function(t,s){var n;/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */!function(r){var h=i,a=(t&&t.exports,"object"==typeof s&&s);a.global!==a&&a.window;var o=function(t){this.message=t};(o.prototype=new Error).name="InvalidCharacterError";var c=function(t){throw new o(t)},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=/[\t\n\f\r ]/g,d={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&c("The string to be encoded contains characters outside of the Latin1 range.");for(var i,e,s,n,r=t.length%3,h="",a=-1,o=t.length-r;++a<o;)i=t.charCodeAt(a)<<16,e=t.charCodeAt(++a)<<8,s=t.charCodeAt(++a),h+=l.charAt((n=i+e+s)>>18&63)+l.charAt(n>>12&63)+l.charAt(n>>6&63)+l.charAt(63&n);return 2==r?(i=t.charCodeAt(a)<<8,e=t.charCodeAt(++a),h+=l.charAt((n=i+e)>>10)+l.charAt(n>>4&63)+l.charAt(n<<2&63)+"="):1==r&&(n=t.charCodeAt(a),h+=l.charAt(n>>2)+l.charAt(n<<4&63)+"=="),h},decode:function(t){var i=(t=String(t).replace(u,"")).length;i%4==0&&(i=(t=t.replace(/==?$/,"")).length),(i%4==1||/[^+a-zA-Z0-9\/]/.test(t))&&c("Invalid character: the string to be decoded is not correctly encoded.");for(var e,s,n=0,r="",h=-1;++h<i;)s=l.indexOf(t.charAt(h)),e=n%4?64*e+s:s,n++%4&&(r+=String.fromCharCode(255&e>>(-2*n&6)));return r},version:"0.1.0"};void 0===(n=function(){return d}.call(i,e,i,t))||(t.exports=n)}()}).call(this,e(157)(t),e(58))},function(t,i){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,i,e){"use strict";t.exports={versionNumBits:6,vendorVersionMap:{1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(t){return t.maxVendorId},validator:function(t){return!t.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(t){return t.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(t){return t.isRange}},{name:"vendorRangeList",type:"list",listCount:function(t){return t.numEntries},validator:function(t){return t.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(t){return t.isRange}}]}]}}}},function(t,i){String.prototype.cnx_replaceAll=function(t,i){return this.split(t).join(i)}},function(t,i,e){},function(t,i,e){},function(t,i,e){"use strict";e.r(i);var s,n=e(5),r=e(40),h=(e(159),e(0)),a=e(75),o=e(12),c=e(18),l=e(23),u=e(7),d=e(3),f=e(13);!function(t){t.Deprecation="deprecation",t.Intervention="intervention",t.Crash="crash"}(s||(s={}));const p="HeavyAdIntervention";var b=e(2);class v{constructor(t,i,e){this.ae=t,this.Oa=i,this._a=e,this.ja=()=>{if(!this.Aa)return;const t=this.Aa.takeRecords();this.Ta(t)},this.Ta=t=>{const i=Object(b.h)(this.Oa)?`HeavyAds_${this.Oa}`:"HeavyAds";t.filter(({body:t})=>{var i;return(null===(i=t)||void 0===i?void 0:i.id)===p}).forEach(t=>{Object(n.a)({message:i,sendBeacon:!0,level:h.ProtoLoggingLevelEnum.FATAL,callStack:t.type,exception:JSON.stringify({report:t,advertiserLineItemId:this._a})})})},this.Ca()&&this.ls()}destroy(){this.ae.removeEventListener("unload",this.ja)}Ca(){return!(!this.ae.ReportingObserver||this.ae===this.ae.top)}ls(){this.Aa=new this.ae.ReportingObserver(t=>{this.Ta(t)},{buffered:!0,types:[s.Intervention]}),this.Aa.observe(),this.ae.addEventListener("unload",()=>this.ja)}}const g="Renderer";class m extends o.a{constructor(t,i,e,s,n,r){super(),this.mediator=t,this.playerModel=i,this.app=e,this.As=s,this.Ia=n,this._appSettings=r,this.macroElements={player:[]},this.Pa=!1,this.Ma={description:"{{description}}",title:"{{title}}",player:"{{player}}"},this.Ea=null,this.La=500,this.createExperience(i,r),this.Ra=new v(i.global,g)}subscribeToEvents(){this.subscribe(c.a.Destroy,this.experience,()=>{this.destroy()}),this.subscribe(c.a.CanStart,this.experience,()=>{this.experience.start()}),this.subscribe(c.b.SessionClick,this.experience,()=>{this.app.services.TrackingService.trackSessionClick()}),this.subscribe(c.b.SessionRendered,this.experience,()=>{this.Ia.wasPlayerReloaded||this.app.services.TrackingService.trackSessionRendered(this.As),this.mediator.publish(this,c.b.SessionRendered)}),this.subscribe(c.b.SessionView,this.experience,()=>{this.Ia.wasPlayerInView||(this.app.services.TrackingService.trackSessionViewability(),this.mediator.publish(this,c.b.SessionView))}),Object(l.a)(this.experience.events).forEach(t=>{this.subscribe(t,this.experience,i=>{this.experienceApi.trigger(t,i.payload)})})}updateMacroContent(t,i){t&&t.forEach(t=>{t.textContent=i})}bn(){this.playerModel.css&&this.app.services.GlobalDomUtilsService.addCssString(this.playerModel.css,`cnx-custom-css-${this.app.config.appId}`)}Da(t){return`<cnx>${t}</cnx>`.replace(/{\{([^}]+)}}/g,"<cnx-span>$&</cnx-span>")}Ba(){if(this.experienceContainer=this.$a(),this.playerModel.html){const t=this.app.services.GlobalDomUtilsService.createElementByString(this.Da(this.playerModel.html));this.Fa(t);const i=this.macroElements.player[0];if(!i)throw Error("player macro was not found");i.innerHTML="",i.parentNode.insertBefore(this.experienceContainer,i),i.parentNode.removeChild(i),Object(u.c)(t.children).forEach(t=>{this.playerModel.targetContainer.parentNode.insertBefore(t,this.playerModel.targetContainer)})}else this.playerModel.targetContainer.parentNode.insertBefore(this.experienceContainer,this.playerModel.targetContainer);this.playerModel.targetContainer.parentElement.removeChild(this.playerModel.targetContainer)}$a(){const t=this.app.config.isMobile?d.g.Mobile:d.g.Desktop;return this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${d.b.MainContainer} ${t} ${this.Va}"></cnx>`)}Fa(t){Object(u.c)(t.children).forEach(t=>{t.children.length>0&&this.Fa(t),Object.keys(this.Ma).forEach(i=>{const e=this.Ma[i];t.textContent.indexOf(e)>-1&&this.Ua(i,t)})})}Ua(t,i){this.macroElements[t]||(this.macroElements[t]=[]),this.macroElements[t].push(i),i.textContent=""}Na(){null!==this.Ea&&(clearInterval(this.Ea),this.Ea=null)}init(){this.bn(),this.Ba();const t=this.app.config.device;return this.isSupportedBreakpoint(t)?(this.subscribeToEvents(),this.experience.Ha(this.playerModel,this.app,this.experienceContainer),this.Ea=setInterval(()=>{this.Pa?this.Na():this.app.services.GlobalDomUtilsService.isDetachedFromDOM(this.experienceContainer)&&this.destroy()},this.La),!0):(this.destroy(),!1)}getApiMethods(){return this.experienceApi.getApiMethods()}destroy(){try{f.a.playerDestroyed(),this.Pa=!0,this.Na(),this.app.services.TrackingService.destroy(),this.app.services.ResizeObserver.destroy(),this.app.services.ViewabilityService.destroy(),this.experienceApi.setDestroyed(),this.unsubscribeAll(this.experience),this.experience&&(this.experience.destroy(),this.experience=null),this.experienceContainer.parentNode&&this.experienceContainer.parentNode.removeChild(this.experienceContainer),this.Ra.destroy()}catch(t){Object(n.a)({callStack:t.stack,level:h.ProtoLoggingLevelEnum.WARNING,message:"Renderer_destroy",exception:t.message})}}}var y,x,w=e(4);!function(t){t.EnterStart="enterStart",t.EnterStop="enterStop",t.ExitStart="exitStart",t.ExitStop="exitStop"}(y||(y={})),function(t){t[t.DirectionIn=0]="DirectionIn",t[t.DirectionOut=1]="DirectionOut",t[t.FadeIn=2]="FadeIn"}(x||(x={}));const k=400,S=1e3,O=20,_=.5;var j,A=e(1),T=e(19);class C{constructor(t,i,e,s,n,r=0){this.qa=t,this.Hn=i,this.za=e,this.Wa=s,this.tr=n,this.Ga=r,this.Qa=0,this.Ja=void 0,this.Xa=null,this.Ya=!1,this.Ka=500,this.Za=()=>{this.Ja&&this.to()},this.io=()=>{if(this.Hn.width=this.eo.clientWidth,this.so(),this.Ja){const t=!1;this.no(t)}},this.so=()=>{this.ro()?!this.ho||this.Ja||this.Ya?this.ao():this.oo():this.Ja&&this.co()},this.uo=t=>{if(this.do(t.propertyName))switch(this.transitionState){case x.DirectionIn:this.transitionState=void 0,this.fo();break;case x.DirectionOut:this.transitionState=void 0,this.po();break;case x.FadeIn:this.transitionState=void 0,this.bo()}},this.vo()}get transitionState(){return this.mo}set transitionState(t){this.mo===x.FadeIn&&this.yo(d.n.FadeInBase,d.n.FadeIn),this.mo=t}xo(...t){Object(A.a)(this.za,...t)}yo(...t){Object(A.I)(this.za,...t)}ao(){this.Wa!==h.ProtoDeviceType.Smartphone&&(this.za.style.width=`${this.Hn.width}px`);const t=this.za.getBoundingClientRect().width;this.za.style.height=this.Hn.getHeight(t)}wo(){return Object(u.g)(this.Wa,this.Hn.floatingDeviceMode)}ko(){this.tr.addEventListenerOnGlobal("scroll",this.Za)}to(){this.eo&&(this.So(),this.Oo<this.Hn.floatingGutterY?this._o(this.Hn.floatingGutterY):this._o(this.Oo))}jo(){this.eo=this.tr.querySelector(this.Hn.pageElement),this.eo&&(clearInterval(this.Xa),this.Hn.width=this.eo.clientWidth,this.so(),this.qa.on(this.eo,this.io),this.qa.on(this.tr.getGlobalClosestTop().topFrame.document.body,this.io))}So(){switch(this.Hn.appendLocation){case h.ProtoFloatingAppendLocationEnum.Above:this.Oo=this.eo.getBoundingClientRect().top-this.za.offsetHeight-this.Hn.floatingYAxisPadding;break;case h.ProtoFloatingAppendLocationEnum.Below:this.Oo=this.eo.getBoundingClientRect().top+this.eo.offsetHeight+this.Hn.floatingYAxisPadding;break;case h.ProtoFloatingAppendLocationEnum.Within:this.Oo=this.eo.getBoundingClientRect().top}}Ao(){this.Xa=setInterval(()=>{this.jo()},this.Ka),this.jo()}To(){return this.Hn.floatingPosition===h.ProtoFloatingFixedPositionMode.Element}do(t){switch(this.transitionState){case x.DirectionIn:case x.DirectionOut:if("right"===t||"left"===t)return!0;break;case x.FadeIn:if("opacity"===t)return!0}return!1}Co(){this.za.style.top="",this.za.style.bottom="",this.za.style.left="",this.za.style.right="",this.za.style.width="",this.za.style.height="",this.za.style.transform=""}po(){this.Ja=!1,this.yo(d.o.MainClass,d.o.TransitionClass,this.Hn.positionClass),this.Co(),this.Io()}Po(){this.Hn.isPositionedTop?(this.za.style.top=`${this.Hn.floatingGutterY}px`,this.za.style.bottom="auto"):this.Hn.isPositionedBottom&&(this.za.style.top="auto",this.za.style.bottom=`${this.Hn.floatingGutterY}px`)}_o(t){this.za.style.transform=`translateY(${t}px)`}Mo(t){t?this.xo(d.o.TransitionClass):this.yo(d.o.TransitionClass)}Eo(t,i=!1,e=!1){this.Mo(i),e||this.Hn.isPositionedLeft?(this.za.style.left=`${t}px`,this.za.style.right="auto"):(this.za.style.left="auto",this.za.style.right=`${t}px`)}ro(){return Object(A.t)(this.za).document.body.getBoundingClientRect().width>=this.Ga}oo(){if(this.ro()&&(!this.To()||this.eo&&(!this.eo||0!==this.eo.clientWidth)))if(this.Ja=!0,this.transitionState=x.DirectionIn,this.xo(d.o.MainClass,this.Hn.positionClass),this.so(),this.To()?(this.za.style.top="0px",this.Lo(),this.Eo(this.Qa,!1,!0),this.to()):(this.Po(),this.Eo(this.Qa)),this.Ro(),Object(A.j)(this.za),this.eo){const t=!0;this.no(t)}else this.Eo(this.Hn.floatingGutterX,!0)}Lo(){this.eo&&(this.tr.getElementCoordinates(this.eo).clientX<this.tr.getBodyDimensions().width/2?(this.Hn.isPositionedLeft=!0,this.Hn.isPositionedRight=!1):(this.Hn.isPositionedLeft=!1,this.Hn.isPositionedRight=!0),this.vo())}vo(){this.To()&&this.Hn.isPositionedRight?this.Qa=this.tr.getBodyDimensions().width+(this.Hn.floatingWidth||S)+O:this.Qa=-((this.Hn.floatingWidth||S)+O)}no(t){let i;this.Lo(),i=this.tr.getElementCoordinates(this.eo).clientX,this.Hn.isPositionedLeft?i+=this.Hn.floatingGutterX:i-=this.Hn.floatingGutterX,this.Eo(i,t,!0)}co(t=!0){let i;t&&(this.transitionState=x.DirectionOut),this.Do(),i=this.To(),this.Eo(this.Qa,t,i),t||this.po()}Bo(){this.za.addEventListener("transitionend",this.uo),this.qa.on(this.za,this.so),this.To()&&(this.Ao(),this.ko())}$o(){this.qa.off(this.za,this.so),this.za.removeEventListener("transitionend",this.uo),this.eo&&(this.qa.off(this.eo,this.io),this.qa.off(this.tr.getGlobalClosestTop().topFrame.document.body,this.io),this.tr.removeEventListenerOnGlobal("scroll",this.Za),clearInterval(this.Xa))}get isInFloating(){return this.Ja}}class I extends C{constructor(t,i,e,s,n,r,a,o,c=0){super(e,n,s,r,o,c),this.mediator=t,this.Fo=i,this.Qn=a,this.Vo=!0,this.Uo=!0,this.No=!1,this.ho=!1,this.Ho=t=>{const i=this.Fo.getIsTabInFocus();t&&this.isInFloating&&(this.ho=!1,this.co()),this.Vo&&this.Hn.floatingMode===h.ProtoPlayerFloatingMode.AfterInView&&t&&(this.Vo=!1),!t&&!this.Vo&&this.Uo&&i&&(this.ho=!0,super.oo())},this.ao=()=>{this.isInFloating&&super.ao()}}co(){const t=!this.No;super.co(t)}Do(){this.mediator.publish(this,y.ExitStart)}Io(){this.qo()}Ro(){this.mediator.publish(this,y.EnterStart)}qo(){this.transitionState=x.FadeIn,this.yo(d.n.FadeIn),this.xo(d.n.FadeInBase),Object(A.j)(this.za),this.xo(d.n.FadeIn)}fo(){this.mediator.publish(this,y.EnterStop)}bo(){this.yo(d.n.FadeInBase,d.n.FadeIn),this.mediator.publish(this,y.ExitStop),this.Ya&&super.$o(),this.Qn===T.a.Edge&&(Object(A.v)(this.za),Object(A.j)(this.za),Object(A.P)(this.za))}zo(){this.Fo.on(this.za.parentElement,this.Ho,{threshold:_})}Wo(){this.Fo.off(this.za.parentElement,this.Ho)}start(){this.wo()&&(super.Bo(),this.Hn.floatingMode===h.ProtoPlayerFloatingMode.OnPageLoad&&(this.Vo=!1),this.zo(),this.Ho(this.Fo.check({element:this.za.parentElement,threshold:_})))}canFloat(){return this.wo()&&this.Hn.floatingMode!==h.ProtoPlayerFloatingMode.Off}destroy(){this.isInFloating?(this.po(),this.Ya=!0):super.$o(),this.Wo()}get enabled(){return this.Uo}set enabled(t){this.Uo=t}fullscreenStateChange(t){this.No=t,t?this.Wo():this.zo(),this.Ho(t)}}!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Replay=2]="Replay",t[t.Volume=3]="Volume",t[t.Mute=4]="Mute",t[t.Unmute=5]="Unmute",t[t.Seek=6]="Seek",t[t.DraggingStart=7]="DraggingStart",t[t.DraggingStopped=8]="DraggingStopped",t[t.SeekingStart=9]="SeekingStart",t[t.SeekingStopped=10]="SeekingStopped",t[t.Expand=11]="Expand",t[t.Collapse=12]="Collapse",t[t.Quality=13]="Quality",t[t.Close=14]="Close",t[t.Next=15]="Next",t[t.Prev=16]="Prev",t[t.Settings=17]="Settings",t[t.CaptionOn=18]="CaptionOn",t[t.CaptionOff=19]="CaptionOff",t[t.CaptionUpdate=20]="CaptionUpdate",t[t.VolumeHoverStart=21]="VolumeHoverStart",t[t.VolumeHoverStopped=22]="VolumeHoverStopped",t[t.OverlayClick=23]="OverlayClick",t[t.UIHideStart=24]="UIHideStart",t[t.UIShowStart=25]="UIShowStart",t[t.UIEndShowHide=26]="UIEndShowHide",t[t.AboutClick=27]="AboutClick",t[t.ContextClick=28]="ContextClick",t[t.SettingsMenu=29]="SettingsMenu",t[t.HoverStart=30]="HoverStart",t[t.HoverEnd=31]="HoverEnd",t[t.StateChanged=32]="StateChanged",t[t.RebindComponent=33]="RebindComponent",t[t.SkipAd=34]="SkipAd",t[t.LogoClicked=35]="LogoClicked"}(j||(j={}));var P=e(20);class M extends C{constructor(t,i,e,s,n,r,h=0){super(i,s,e,n,r,h),this.mediator=t,this.ho=!0}Ro(){}fo(){this.mediator.publish(this,y.EnterStop)}Do(){}Io(){}bo(){}start(){this.wo()&&(super.Bo(),super.oo())}}const E={DetachedFromDom:"detachedFromDom",AdSlotResized:"adSlotResized"},L={DetachedFromDom:"detachedFromDom",AdsEnabled:"adsEnabled"};class R{constructor(t,i,e,s){this.za=t,this.Go=s,this.Qo=this.Jo(e,i)}Jo(t,i){return Object.assign({},t[i]||t[h.ProtoDeviceType.Smartphone])}updateWidth(t){const i=this.Xo(t);i!==this.currentBreakpointClass&&(Object(A.I)(this.za,this.currentBreakpointClass),Object(A.a)(this.za,i),this.currentBreakpointClass=i)}Xo(t){switch(!0){case t>=this.Qo.xxl:return this.Go.Xxl;case t>=this.Qo.xl:return this.Go.Xl;case t>=this.Qo.lg:return this.Go.Lg;case t>=this.Qo.md:return this.Go.Md;case t>=this.Qo.sm:return this.Go.Sm;case t>=this.Qo.xs:return this.Go.Xs;default:return this.Go.Xxs}}}const D={MidRollCapped:"midRollCapped",TotalAdBreakLengthExpired:"totalAdBreakLengthExpired",EnableAds:"enableAds",DisableAds:"disableAds",ForceStopAdSlot:"ForceStopAdSlot",ForceStopAdPod:"ForceStopAdPod",AdOpportunity:"adOpportunity",AdPodRemainingTime:"AdPodRemainingTime"};var B;!function(t){t[t.Portrait=0]="Portrait",t[t.Landscape=1]="Landscape"}(B||(B={}));var $=B;const F=1.3;class V{constructor(){this.Yo={},this.Ko=[]}getImage(t,i,e,s,n="",r=!1){return this.Zo=t,this.tc=Object(b.a)(i)?i:"",this.ic=e,this.ec=s,this.sc=n,this.nc=r,this.rc()}rc(){const t=this.hc();if(t)return t;const i=this.Zo+this.sc,e=new Image;return e.src=i,e.alt=this.tc,this.Yo[this.Zo]=this.Yo[this.Zo]||{},this.Yo[this.Zo][this.ic]=this.Yo[this.Zo][this.ic]||{},this.Yo[this.Zo][this.ic][this.ec]=this.Yo[this.Zo][this.ic][this.ec]||{},this.Yo[this.Zo][this.ic][this.ec][this.sc]=e,e}hc(){const t=this.ac();if(t)return t;if(!this.nc)return;this.oc();const i=this.lc();if(i)return i;const e=this.uc();return e||void 0}oc(){const t=[];if(!this.Yo[this.Zo])return void(this.Ko=[]);const i=this.Yo[this.Zo],e=this.ic>this.ec?$.Landscape:$.Portrait;Object.keys(i).forEach(s=>{const n=parseInt(s,10);Object.keys(i[s]).filter(t=>!!i[s][t]).forEach(i=>{const s=parseInt(i,10);if((n>s?$.Landscape:$.Portrait)!==e)return;const r={area:n*s,img:this.dc(this.Zo,n,s)};t.push(r)})}),this.Ko=[...t]}dc(t,i,e){if(this.Yo[t]&&this.Yo[t][i]&&this.Yo[t][i][e])return this.Yo[t][i][e][Object.keys(this.Yo[t][i][e])[0]]}ac(){return this.Yo[this.Zo]&&this.Yo[this.Zo][this.ic]&&this.Yo[this.Zo][this.ic][this.ec]&&this.Yo[this.Zo][this.ic][this.ec][this.sc]}lc(){if(0===this.Ko.length)return;const t=this.ic*this.ec,i=this.Ko.filter(({area:i})=>i>t).sort((t,i)=>t.area-i.area);return 0!==i.length?i[0].img:void 0}uc(){if(0===this.Ko.length)return;const t=this.ic*this.ec,i=this.Ko.filter(({area:i})=>i<t&&t/i<=F).sort((t,i)=>i.area-t.area);return 0!==i.length?i[0].img:void 0}}var U=e(41);const N={Play:"play",Pause:"pause",Mute:"mute",Unmute:"unmute",Canplay:"canplay",Ended:"ended",Timeupdate:"timeupdate",Seeking:"seeking",Seeked:"seeked",Volumechange:"volumechange",Durationchange:"durationchange",Fullscreen:"fullscreen",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Error:"error"};var H,q,z;!function(t){t[t.Auto=0]="Auto",t[t.Strict=1]="Strict"}(H||(H={})),function(t){t[t.PlayingState=0]="PlayingState",t[t.PausedState=1]="PausedState",t[t.PrerollState=2]="PrerollState",t[t.PostrollState=3]="PostrollState",t[t.StoppedState=4]="StoppedState",t[t.ReplayState=5]="ReplayState",t[t.HiddenState=6]="HiddenState",t[t.BufferingState=7]="BufferingState",t[t.LiveStreamStarting=8]="LiveStreamStarting",t[t.LiveStreamEnded=9]="LiveStreamEnded",t[t.LiveStreamStopped=10]="LiveStreamStopped",t[t.LiveStreamNotSupported=11]="LiveStreamNotSupported"}(q||(q={})),function(t){t.H264="h264",t.Hevc="hevc"}(z||(z={}));const W={PlayError:"playError",NewVideo:"newVideo",Buffering:"buffering",Buffered:"buffered",LevelSwitching:"levelSwitching",EndOfStream:"endOfStream",LiveStreamNotPlayable:"liveNotPlayable"},G={Change:"VideoQualityChanged",CurrentQuality:"CurrentQuality",Loaded:"QualityListLoaded"};var Q;!function(t){t[t.Low144p=144]="Low144p",t[t.Low240p=240]="Low240p",t[t.Medium360p=360]="Medium360p",t[t.Medium480p=480]="Medium480p",t[t.High720p=720]="High720p",t[t.High1080p=1080]="High1080p"}(Q||(Q={}));const J=720,X=5e3;function Y(t,i){const e=t.length-1;return{currentIndex:i,nextIndex:i===e?0:i+1,prevIndex:0===i?e:i-1,firstIndex:0,lastIndex:e}}function K(t,i){let e=!1;switch(t){case h.ProtoAdBreakTypeEnum.PreRoll:e=i===h.ProtoAdSlotsEnum.PreRoll;break;case h.ProtoAdBreakTypeEnum.MidRoll:e=i===h.ProtoAdSlotsEnum.MidRoll;break;case h.ProtoAdBreakTypeEnum.PostRoll:e=i===h.ProtoAdSlotsEnum.PostRoll}return e}class Z{constructor(t){this.fc=t,this.pc={breakType:h.ProtoAdBreakTypeEnum.None,currentPodNumber:0,maxAdSlotDuration:0,maxAdPodDuration:0,totalNumberOfAdSlots:0},this.bc=null}setNewBreak(t){this.fc.forEach(i=>{i.types.forEach(e=>{K(e,t)&&(this.pc.currentPodNumber=i.numberOfAdSlots,this.pc.maxAdSlotDuration=i.maxAdSlotDuration,this.pc.maxAdPodDuration=i.maxAdPodDuration,this.pc.totalNumberOfAdSlots=i.numberOfAdSlots)})})}adStarted(){this.vc(),0===this.pc.currentPodNumber&&(this.pc.currentPodNumber=this.pc.totalNumberOfAdSlots),this.pc.currentPodNumber--}endPod(){this.vc(),this.pc.currentPodNumber=0}enterPodTimeout(t){this.vc(),this.bc=setTimeout(()=>{this.vc(),t()},X)}isInAdPod(){return this.pc.currentPodNumber>0}isCurrentBreakInPod(){return this.pc.totalNumberOfAdSlots>1}getMaxAdSlotDuration(){return this.pc.maxAdSlotDuration}getMaxAdPodDuration(){return this.pc.maxAdPodDuration}getMaxAdSlotPossibleDuration(){let t=0;for(let i=0;i<this.fc.length;i++){if(0===this.fc[i].maxAdSlotDuration)return 0;t=Math.max(t,this.fc[i].maxAdSlotDuration)}return t}getCurrentSlotIndex(){return this.pc.totalNumberOfAdSlots-this.pc.currentPodNumber}getNextSlotIndex(){const t=this.getCurrentSlotIndex();return this.pc.totalNumberOfAdSlots>t?t+1:1}getTotalNumberOfSlots(){return this.pc.totalNumberOfAdSlots}isInPodTimeout(){return!!this.bc}vc(){clearTimeout(this.bc),this.bc=null}}function tt(t,i,e,s,n){return e+(s-e)*function(t,i,e){return(e-t)/(i-t)}(t,i,n)}function it(t,i){return i.reduce((i,e)=>Math.abs(e-t)<=Math.abs(i-t)?e:i)}function et(t,i){return i/100*t}function st(t,i){const e=Math.pow(10,i);return Math.round(t*e)/e}function nt(t){return!Object(b.e)(t.width)||!Object(b.e)(t.height)}function rt(t){const i=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"}],e=/\.0+$|(\.[0-9]*[1-9])0+$/;let s;for(s=i.length-1;s>0&&!(t>=i[s].value);s--);return t/i[s].value<i[s].value/10?(Math.floor(t/i[s].value*10)/10).toFixed(1).replace(e,"$1")+i[s].symbol:Math.floor(t/i[s].value).toFixed(0)+i[s].symbol}var ht=e(8);const at=["com.accuweather.android"];class ot extends o.a{constructor(t,i,e){super(),this.mediator=t,this.As=i,this._appSettings=e,this.gc=.01,this.mc=.5,this.yc=2e3,this.xc=0,this.wc=!1,this.kc=!1,this.Sc=!1,this.Oc=!1,this._c=!1,this.jc=!1,this.Ac=!1,this.yh=h.ProtoAdSlotsEnum.PreRoll,this.Tc=!1,this.Cc=!1,this.Ic={[w.b.AdImpression]:t=>{this.Pc.onAdImpression(t),this.Mc(),this.mediator.publish(this,P.b.AdImpression,t);const{adSourceData:i,customAdData:e}=t.payload;this.Ec(i,e)},[w.b.AdStopped]:t=>{this.mediator.publish(this,P.b.AdStopped,t),this.Lc(),this.Rc(),this.Ac&&this.Dc()},[w.b.AdError]:t=>{this.adHandler.inImpression&&this.Lc(),this.mediator.publish(this,P.b.AdError,t),this.app.services.EventsStorageService.emitAdError()},[w.b.AdSkipped]:t=>{this.mediator.publish(this,P.b.AdSkipped,t),this.app.services.EventsStorageService.emitAdSkipped();this.Lc(!0),this.Rc(),this.Ac&&this.Dc()},[w.b.AdPaused]:t=>{this.Pc.onAdPause(),this.app.services.TrackingService.setSessionPlayback(!1),this.mediator.publish(this,P.b.AdPause,t)},[w.b.AdPlaying]:t=>{this.Pc.onAdPlay(),this.app.services.TrackingService.setSessionPlayback(!0),this.mediator.publish(this,P.b.AdPlay,t)},[w.b.AdVideoFirstQuartile]:t=>{this.mediator.publish(this,P.b.AdCompleted25,t),this.app.services.EventsStorageService.emitAdVideoFirstQuartile()},[w.b.AdVideoMidpoint]:t=>{this.mediator.publish(this,P.b.AdCompleted50,t),this.app.services.EventsStorageService.emitAdVideoMidpoint()},[w.b.AdVideoThirdQuartile]:t=>{this.mediator.publish(this,P.b.AdCompleted75,t),this.app.services.EventsStorageService.emitAdVideoThirdQuartile()},[w.b.AdVideoComplete]:t=>{this.mediator.publish(this,P.b.AdCompleted100,t),this.app.services.EventsStorageService.emitAdVideoComplete()},[w.b.AdClickThru]:t=>{this.mediator.publish(this,P.b.AdClick,t),this.app.services.EventsStorageService.emitAdClickThru()},[w.b.AdInteraction]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[w.b.AdUserAcceptInvitation]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[w.b.AdUserClose]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[w.b.AdUserMinimize]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[w.b.AdVideoStart]:t=>{const{adSourceData:i}=t.payload,e={duration:i&&i.length,mediaPlayerVolume:this.getVolume()};this.app.services.EventsStorageService.emitAdVideoStart(e)},[w.b.AdLoaded]:t=>{var i;const{adLoadedData:e}=t.payload;(null===(i=e)||void 0===i?void 0:i.skipOffset)<0&&(e.skipOffset=void 0);const s=this.Bc(e);this.app.services.EventsStorageService.emitAdLoaded(s)}},this.$c=t=>i=>{const e=this.Ic[t];e&&e(i)},this.Fc=t=>{t&&(this.app.services.ViewabilityService.off(this.$playerContainer,this.Fc),this.mediator.publish(this,c.b.SessionView))},this.Vc=()=>{!this.kc&&this.Uc()&&(this.mediator.publish(this,c.a.CanStart),this.app.services.ResizeObserver.off(this.$experienceContainer,this.Vc))},this.Nc=({payload:{playback:t}})=>{this.floatingModule&&Object(b.a)(t)&&(this.floatingModule.enabled=t)},this.Hc=()=>{this.qc(1)},this.zc=()=>{this.qc(0)},this.Wc=t=>{this.Nc(t);const{playback:i}=t.payload;Object(b.a)(i)&&(i?this.app.services.EventsStorageService.emitAdPlay():this.app.services.EventsStorageService.emitAdPause())},this.Gc=new V}Qc(){}Ec(t,i){this.app.services.EventsStorageService.emitAdImpression(t,i)}Rc(){this.app.services.EventsStorageService.emitAdComplete()}Jc(){}Dc(){}Xc(){}Yc(){}Kc(){}Zc(){}tl(){}il(t){const i={state:t};this.app.services.EventsStorageService.emitAdStateChange(i)}el(){const{clientWidth:t,clientHeight:i}=this.$playerContainer,e={width:t,height:i};this.app.services.EventsStorageService.emitPlayerResized(e)}sl(){this.app.services.EventsStorageService.emitOnEnterFullscreen()}nl(){this.app.services.EventsStorageService.emitOnExitFullscreen()}rl(){this.app.services.EventsStorageService.emitOnPlayerCollapsed()}hl(){this.app.services.EventsStorageService.emitOnPlayerExpanded()}al(t){this.ol(t),this.cl(t),this.ll(t),this.yh=t,this.ul(t)}cl(t){this.adHandler&&this.adHandler.adStateChange(t,this.dl.getMaxAdSlotDuration())}ll(t){this.Pc.onAdStateChange(t,{maxAdPodDuration:this.dl.getMaxAdPodDuration(),maxAdSlotDuration:this.dl.getMaxAdSlotDuration()})}ol(t){this.dl.setNewBreak(t)}ul(t){this.il(U.b[t])}fl(){this.adHandler&&this.adHandler.contentChanged(),this.Pc.contentChanged()}pl(){this.adHandler=this.bl(),this.vl(),this.subscribe(c.a.UserInteraction,this.adHandler,this.Wc),this.subscribe(E.DetachedFromDom,this.adHandler,()=>{this.app.services.GlobalDomUtilsService.isDetachedFromDOM(this.$experienceContainer)?this.triggerDestroy():(this.unsubscribeAll(this.adHandler),this.adHandler.destroy(),this.adHandler=null,Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"only_adHandler_destroyed",sendMaxLog:!1,throttle:1}))});const t=()=>{this.app.services.TrackingService.setAdStart(),this.unsubscribe(L.AdsEnabled,this.adHandler,t)};this.subscribe(L.AdsEnabled,this.adHandler,t),this.subscribe(E.AdSlotResized,this.adHandler,({payload:{width:t,height:i}})=>{this.Pc.onResize(t,i)})}vl(){Object.keys(w.b).forEach(t=>{this.subscribe(w.b[t],this.adHandler,i=>{const e=w.b[t];this.$c(e)(i),this.mediator.publish(this,e,i)})})}Lc(t=!1){let i=this.dl.isInAdPod();t&&(i=!1,this.dl.endPod()),this.Pc.onAdFinished(this.adHandler.inImpression,i),this.gl(),this.ml.isCloseButton&&(this.floatingModule&&this.floatingModule.isInFloating?this.yl(this.ml.floatingCloseButtonMode):this.yl(this.ml.closeButtonMode))}Mc(){this.dl.adStarted(),this.adHandler.show()}gl(){this.adHandler.hide()}wl(t){this.adHandler.enterAdPodLoadingState(),this.dl.enterPodTimeout(()=>{this.dl.endPod(),t()})}kl(){Object(A.j)(this.$playerContainer),this.Pc=this.Sl(),this.subscribe(D.EnableAds,this.Pc,()=>{this.adHandler&&this.adHandler.enableAds()}),this.subscribe(D.DisableAds,this.Pc,()=>{this.adHandler&&this.adHandler.disableAds()}),this.subscribe(D.ForceStopAdSlot,this.Pc,()=>{this.adHandler&&this.adHandler.stopAd()}),this.subscribe(D.ForceStopAdPod,this.Pc,()=>{if(this.adHandler)if(this.adHandler.inImpression)this.dl.endPod(),this.adHandler.stopAd();else{const t=!0;this.Lc(t)}}),this.subscribe(D.AdPodRemainingTime,this.Pc,t=>{this.adHandler&&this.adHandler.updatePodRemainingTime(t.payload.remainingTime)}),this.subscribe(D.AdOpportunity,this.Pc,t=>{const i=t.payload;this.app.services.TrackingService.trackAdOpportunity(i),this.adHandler&&this.adHandler.newAdOpportunity()})}Ol(){this.app.services.ViewabilityService.on(this.$playerContainer,this.Fc,{threshold:this.mc,callbackDelay:this.yc}),this.app.services.ViewabilityService.on(this.$playerContainer,(t,i)=>this.Ho(t,i),{threshold:this.gc})}Ho(t,i=!1){this.Pc.setAppBackgrounded(i),this._l&&(i?this._l.stop():this.Cc&&this._l.resume()),this.Cc=i,this.Ac=t,this.mediator.publish(this,P.b.IsViewable,{payload:t}),this.Pc.viewabilityStateChanged(this.checkFloatingViewability(t),this.dl.isInAdPod(),this.dl.isInPodTimeout()),this.app.services.TrackingService.setSessionViewability(t)}checkFloatingViewability(t){const i=this.app.services.ViewabilityService.getIsTabInFocus();return!(t||!this.floatingModule||!this.floatingModule.isInFloating||!i)||t}ah(){const t=this.$playerContainer.clientWidth,i=this.$playerContainer.clientHeight;this.adHandler?this.resizeAdHandler():this.Pc.onResize(t,i),this.breakPointsHandler.updateWidth(t),setTimeout(()=>{this.mediator.publish(this,P.b.SizeChanged,{payload:{width:t,height:i}}),this.jl()})}jl(){this.Tc||this.el()}Al(){this.app.services.ResizeObserver.on(this.$playerContainer,()=>{this.ah()})}Tl(){this.Tc=!0,this.sl()}Cl(){this.Tc=!1,this.nl()}Il(){const t=`<cnx class='${d.c}'></cnx>`,i=this.app.services.GlobalDomUtilsService.createElementByString(t);return this.Pl(i),i}Pl(t){Object(A.O)(t,{"padding-bottom":`${this.Ml()}%`})}Ml(){return this.ml.playerSize.ratioHeight/this.ml.playerSize.ratioWidth*100}El(){this.subscribe(y.EnterStop,this.floatingModule,()=>{this.Ho(!0)})}Ll(){this.floatingModule=new I(this,this.app.services.ViewabilityService,this.app.services.ResizeObserver,this.$playerContainer,this.ml.floatingSettings,this.app.config.device,this.app.config.browser.browserType,this.app.services.GlobalDomUtilsService,this.Rl),this.El(),this.floatingModule.start()}Dl(){const t=new M(this,this.app.services.ResizeObserver,this.$experienceContainer,this.ml.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService);this.subscribe(y.EnterStop,t,()=>{this.app.services.ViewabilityService.triggerRecheck(this.$playerContainer)}),t.start()}setNewVolume(t){this.adHandler&&this.adHandler.setVolume(t)}Bl(){this.$l(),this.adHandler&&this.Fl(this.adHandler)}Fl(t){this.subscribe(c.a.UserInteraction,t,({payload:{volume:t}})=>{t&&this.Vl()})}Zr(t){this.mediator.publish(this,P.b.VolumeChanged,{payload:t}),this.app.services.EventsStorageService.emitVolumeChange(t)}qc(t){this.getVolume()!==t&&this.setNewVolume(t)}$l(){this.wc=!0,this.$playerContainer.addEventListener("mouseover",this.Hc),this.$playerContainer.addEventListener("mouseout",this.zc)}Vl(){this.wc&&(this.wc=!1,this.$playerContainer.removeEventListener("mouseover",this.Hc),this.$playerContainer.removeEventListener("mouseout",this.zc))}Ul(t){switch(t){case h.ProtoPlayerCloseButtonMode.OnHover:case h.ProtoPlayerCloseButtonMode.AlwaysOn:return!0;case h.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd:return!(!this.adHandler||!this.adHandler.firstAdShown);default:return!1}}yl(t){this.Ul(t)?(Object(A.a)(this.$playerContainer,d.g.CanClose),this.Nl(t)):Object(A.I)(this.$playerContainer,d.g.CanClose)}Hl(){this.breakPointsHandler=new R(this.$playerContainer,this.app.config.device,this.ql,this.zl),this.breakPointsHandler.updateWidth(this.$playerContainer.clientWidth)}Wl(){this.ml.isCloseButton&&(this.subscribe(j[j.Close],this.adHandler,()=>{this.handleClose()}),this.yl(this.ml.closeButtonMode),this.floatingModule&&this.floatingModule.canFloat()&&(this.subscribe(y.EnterStop,this.floatingModule,()=>{this.yl(this.ml.floatingCloseButtonMode)}),this.subscribe(y.ExitStop,this.floatingModule,()=>{this.yl(this.ml.closeButtonMode)})))}Bc(t){const{skipOffset:i}=t;return{isAutoPlay:this.ml.playbackMode===h.ProtoPlayerPlaybackModeEnum.Autoplay,skipOffset:i,isSkippable:Object(b.d)(i)}}Uc(){const{clientWidth:t,clientHeight:i}=this.$experienceContainer;return!nt({width:t,height:i})||this.Gl()}Gl(){return at.includes(this.app.config.bundleID)}Ql(t){try{const{display:i,width:e,height:s,flex:n,maxWidth:r,minWidth:h}=this.app.services.GlobalDomUtilsService.getComputedStyle(t),{width:a,height:o}=t.getBoundingClientRect(),c={display:i,compWidth:e,boundWidth:a,compHeight:s,boundHeight:o,flex:n,maxWidth:r,minWidth:h};return{type:t.nodeName,styles:JSON.stringify(c)}}catch(t){return{err:"BaseExperience_getElementInfo_error"}}}Jl(){if(!Object(ht.l)([95,5]))return;const t={parent:this.Ql(this.$experienceContainer.parentElement),main:this.Ql(this.$experienceContainer)};Object(n.a)({message:"BaseExperience_invalid_dimensions",level:h.ProtoLoggingLevelEnum.INFO,exception:JSON.stringify(t)})}Yl(){this.dl=new Z(this.ml.adBreaks)}Ha(t,i,e){this.ml=t,this.app=i,this.$experienceContainer=e,this.Qc(),this.app.services.ViewabilityService.setViewableThreshold(this.xc),this.generateHTML(),this.Yl(),this.app.services.ResizeObserver.on(this.$experienceContainer,this.Vc),this.Uc()?this.mediator.publish(this,c.a.CanStart):this.Jl()}start(){this.kc=!0,Object(A.a)(this.$experienceContainer,d.b.MainContainerFlex),this.mediator.publish(this,c.b.SessionRendered),this.$experienceContainer.addEventListener("click",()=>{this.mediator.publish(this,c.b.SessionClick)},!0),this.Hl(),this.Al(),this.ml.floatingSettings.floatingMode===h.ProtoPlayerFloatingMode.Always?this.Dl():(this.el(),this.Ll()),this.Ol(),this.ml.lineItemSettings.lineItems.length>0&&!this.ml.disableAdvertising&&!this.As&&this.pl(),this.app.config.isMobile||this.ml.soundMode!==h.ProtoPlayerSoundMode.Hover||this.Bl(),this.ml.isCloseButton&&this.Wl(),this.kl()}play(){this.adHandler&&this.adHandler.inImpression&&this.adHandler.play()}pause(){this.adHandler&&this.adHandler.inImpression&&this.adHandler.pause()}setVolume(t){this.setNewVolume(t),this.Vl()}getSize(){return{width:this.$experienceContainer.clientWidth,height:this.$experienceContainer.clientHeight}}setSize(t,i){nt({width:t,height:i})||Object(A.O)(this.$experienceContainer,{width:`${t}px`,height:`${i}px`})}setCustomMacros(t){this.app.services.MacrosService.addExtraMacros(t)}isViewable(){return this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.gc})}setViewableThreshold(t){this.app?this.app.services.ViewabilityService.setViewableThreshold(t):this.xc=t}setAmpUserConsent(t){this.app.services.UserManagerService.setAmpUserConsent(t)}triggerDestroy(){this.app.services.EventsStorageService.destroy(),this.mediator.publish(this,c.a.Destroy)}disableAdvertising(){this.Pc.disableAdvertising()}enableAdvertising(){this.Pc.enableAdvertising()}destroy(){this.adHandler&&this.adHandler.destroy(),this.Pc&&this.Pc.destroy(),this.floatingModule&&(this.floatingModule.destroy(),this.floatingModule=null)}}class ct{constructor(t){this.context=t}onClick(){}canTransitionToState(t){return!0}enterState(){this.initState(),this.context.currentState=this}}var lt,ut;!function(t){t[t.PlayButton=0]="PlayButton",t[t.BigPlayButton=1]="BigPlayButton",t[t.VolumeButton=2]="VolumeButton",t[t.VolumeProgress=3]="VolumeProgress",t[t.VolumeControls=4]="VolumeControls",t[t.ExpandButton=5]="ExpandButton",t[t.SettingsButton=6]="SettingsButton",t[t.CaptionButton=7]="CaptionButton",t[t.CaptionComponent=8]="CaptionComponent",t[t.CastButton=9]="CastButton",t[t.ShareButton=10]="ShareButton",t[t.UpNextButton=11]="UpNextButton",t[t.UpNextBox=12]="UpNextBox",t[t.PreviousButton=13]="PreviousButton",t[t.LogoComponent=14]="LogoComponent",t[t.LogoOutstream=15]="LogoOutstream",t[t.MoreButton=16]="MoreButton",t[t.ElapsedTimeLabel=17]="ElapsedTimeLabel",t[t.TotalDurationLabel=18]="TotalDurationLabel",t[t.ProgressBar=19]="ProgressBar",t[t.QualityMenu=20]="QualityMenu",t[t.QueStateOverlay=21]="QueStateOverlay",t[t.Loader=22]="Loader",t[t.ContextMenu=23]="ContextMenu",t[t.ElementsSettingsMenu=24]="ElementsSettingsMenu",t[t.CloseButton=25]="CloseButton",t[t.SkipAdButton=26]="SkipAdButton",t[t.AdLoadingScreen=27]="AdLoadingScreen",t[t.CtaButton=28]="CtaButton",t[t.PlayspaceProgressBar=29]="PlayspaceProgressBar",t[t.PlayspaceSettingsMenu=30]="PlayspaceSettingsMenu",t[t.ClickToPlayButton=31]="ClickToPlayButton",t[t.SlideTitle=32]="SlideTitle",t[t.SkipAd=33]="SkipAd",t[t.TopTitle=34]="TopTitle",t[t.TopLogo=35]="TopLogo",t[t.TopSlideTitle=36]="TopSlideTitle",t[t.TopStoryTitle=37]="TopStoryTitle",t[t.TextLabel=38]="TextLabel",t[t.LivePoster=39]="LivePoster",t[t.LiveIcon=40]="LiveIcon"}(lt||(lt={}));class dt extends o.a{constructor(t,i,e,s){super(),this.mediator=t,this.tr=i,this.Wn=s,this.Kl=i.createElementByString(e)}getContainer(){return this.Kl}getCoordinates(){const t=this.tr.getElementCoordinates(this.Kl);return t.clientX+=t.width/2,t}showComponent(t=!1){if(!this.Kl||!this.Kl.parentElement)return;const i=Object(A.u)(this.Kl.parentElement,"cnx-ui-btn")?this.Kl.parentElement:this.Kl;t&&Object(A.D)(i)?Object(A.h)(i):Object(A.P)(i)}hideComponent(t=!1){if(!this.Kl||!this.Kl.parentElement)return;const i=Object(A.u)(this.Kl.parentElement,"cnx-ui-btn")?this.Kl.parentElement:this.Kl;t&&!Object(A.D)(i)?Object(A.i)(i,()=>Object(A.v)(i)):Object(A.v)(i)}destroy(){this.Kl.innerHTML="",this.Kl.style.display="none"}}class ft extends dt{constructor(t,i,e,s){super(t,i,e,s),this.mediator=t,this.tr=i,this.Wn=s,this.onBeforeClick=t=>{t.stopPropagation()},this.onClick=t=>{t.stopPropagation(),this.onClickHandler(t)}}initComponent(){this.Kl.addEventListener(this.Wn?"touchstart":"mousedown",this.onBeforeClick),this.Kl.addEventListener(this.Wn?"touchend":"click",this.onClick)}destroy(){this.Kl.removeEventListener(this.Wn?"touchstart":"mousedown",this.onBeforeClick),this.Kl.removeEventListener(this.Wn?"touchend":"click",this.onClick),super.destroy()}}class pt extends ft{constructor(){super(...arguments),this.onClick=t=>{t.stopPropagation(),this.onClickHandler(t),this.addBoomEffect()}}addBoomEffect(){Object(A.a)(this.Kl,"cnx-boom"),this.Kl.getClientRects(),Object(A.a)(this.Kl,"cnx-boom-anim");const t=i=>{"transform"===i.propertyName&&(Object(A.I)(this.Kl,"cnx-boom"),Object(A.I)(this.Kl,"cnx-boom-anim"),this.Kl.removeEventListener("transitionend",t))};this.Kl.addEventListener("transitionend",t)}initComponent(){super.initComponent(),this.Kl.appendChild(this.tr.createElementByString('<cnx class="cnx-boom-elem"></cnx>'))}}class bt extends pt{constructor(){super(...arguments),this.eventList=[j[j.HoverStart],j[j.HoverEnd]],this.onStartHover=()=>{Object(A.a)(this.Kl,d.h.HoverStart),Object(A.a)(this.Kl,d.h.HoverEnd),this.mediator.publish(this,j[j.HoverStart])},this.onEndHover=()=>{Object(A.I)(this.Kl,d.h.HoverEnd),this.mediator.publish(this,j[j.HoverEnd])}}initComponent(){super.initComponent(),this.Wn?(this.Kl.addEventListener("touchstart",this.onStartHover),this.Kl.addEventListener("touchend",this.onEndHover),this.Kl.addEventListener("touchcancel",this.onEndHover)):(this.Kl.addEventListener("mouseenter",this.onStartHover),this.Kl.addEventListener("mouseleave",this.onEndHover))}destroy(){this.Wn?(this.Kl.removeEventListener("touchstart",this.onStartHover),this.Kl.removeEventListener("touchend",this.onEndHover),this.Kl.removeEventListener("touchcancel",this.onEndHover)):(this.Kl.removeEventListener("mouseenter",this.onStartHover),this.Kl.removeEventListener("mouseleave",this.onEndHover)),super.destroy()}onClickHandler(t){this.onEndHoverClick()}onEndHoverClick(){Object(A.I)(this.Kl,d.h.HoverEnd),Object(A.I)(this.Kl,d.h.HoverStart)}}!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(ut||(ut={}));class vt extends bt{constructor(t,i,e,s){super(t,i,e,s),this.Zl=!1,this.eventList=[j[j.Play],j[j.Pause],j[j.Replay],j[j.StateChanged],...this.eventList],this.tu="Play",this.iu="Pause",this.setState(ut.Pause)}onClickHandler(t){super.onClickHandler(t),this.ri===ut.Pause?this.mediator.publish(this,j[j.Pause]):this.Zl?this.mediator.publish(this,j[j.Replay]):this.mediator.publish(this,j[j.Play])}eu(){}toggleReplay(t){this.Zl=t}setState(t){this.ri!==t&&(this.ri=t,this.eu(),this.mediator.publish(this,j[j.StateChanged]))}get tooltip(){return this.ri===ut.Play?this.tu:this.iu}}class gt extends ct{initState(){this.context.$uiContainer.classList.add(d.j.Playing);const t=this.context.getComponent(lt.PlayButton);t&&t.setState(ut.Pause);const i=this.context.getComponent(lt.BigPlayButton);i&&i.setState(ut.Pause)}exitState(){this.context.$uiContainer.classList.remove(d.j.Playing)}}class mt extends gt{constructor(){super(...arguments),this.su=100}nu(){if(this.elapsedTimeoutId||!this.context.duration)return;const t=Date.now();this.elapsedTimeoutId=setTimeout(()=>{this.context.elapsedTime+=(Date.now()-t)/1e3;const i=this.context.getComponent(lt.ProgressBar);i&&i.setProgress(tt(0,this.context.duration,0,100,this.context.elapsedTime)),this.elapsedTimeoutId=null,this.nu()},this.su)}initState(){super.initState(),this.context.duration&&this.nu()}exitState(){super.exitState(),this.context.duration&&(clearTimeout(this.elapsedTimeoutId),this.elapsedTimeoutId=null)}}class yt extends ct{initState(){this.context.$uiContainer.classList.add(d.j.Paused);const t=this.context.getComponent(lt.PlayButton);t&&t.setState(ut.Play);const i=this.context.getComponent(lt.BigPlayButton);i&&i.setState(ut.Play)}exitState(){this.context.$uiContainer.classList.remove(d.j.Paused)}}class xt extends yt{initState(){super.initState()}exitState(){super.exitState()}}class wt{constructor(t,i){this.ru=t,this.tr=i,this.hu=/\[\[([0-9]+)]]/g,this.au=[],this.ou=[],this.cu=this.tr.createElementByString(this.lu(this.ru))}uu(t){return`<cnx class="pl_${t}"></cnx>`}lu(t){return t.replace(this.hu,(t,i)=>(this.au.push(parseInt(i,10)),this.uu(i)))}du(t,i){return this.ou.some(i=>i.slotName===t)?null:this.ou.some(t=>t.component===i)?null:this.cu.getElementsByClassName(`pl_${t}`)[0]}getComponentList(){return this.au}getRenderedDom(){return this.cu}registerSlot(t,i){const e=this.du(t,i);if(null!==e){const s=i.getContainer();return e.parentNode.replaceChild(s,e),this.ou.push({component:i,slotName:t}),!0}return!1}initComponents(){this.ou.forEach(t=>t.component.initComponent())}}class kt extends o.a{constructor(t,i,e){super(),this.globalDomUtilsService=t,this.templateString=i,this.componentFactory=e,this.fu={},this.pu=new wt(i,t),this.addComponents()}addComponents(){this.pu.getComponentList().forEach(t=>{const i=this.componentFactory.createComponent(t,this);this.registerComponent(t,i)})}registerComponent(t,i){this.pu.registerSlot(t,i),this.fu[t]=i,this.bu(i)}bu(t){t.eventList.forEach(i=>{this.subscribe(i,t,e=>{i===j[j.RebindComponent]&&this.rebindComponentEvents(t),this.handleComponentEvent(i,e,t)})})}rebindComponentEvents(t){t&&(this.unsubscribeAll(t),this.bu(t))}getComponent(t){return this.fu[t]}destroy(){Object.keys(this.fu).forEach(t=>{this.fu[t].destroy()})}}class St extends kt{constructor(t,i,e,s,n){super(e,s,n),this.mediator=t,this.$container=i,this.componentFactory=n,this.$uiContainer=this.pu.getRenderedDom(),i.appendChild(this.$uiContainer),this.pu.initComponents()}changeState(t){const i=this.vu[t];i!==this.currentState&&this.currentState.canTransitionToState(i)&&(this.currentState.exitState(i),i.enterState())}hide(){Object(A.a)(this.$uiContainer,d.h.DisplayNone)}show(){Object(A.I)(this.$uiContainer,d.h.DisplayNone)}destroy(){super.destroy(),this.$uiContainer.parentNode.removeChild(this.$uiContainer)}}var Ot,_t=e(83),jt=e.n(_t);function At(t,i,e,s){t.style.top=`${function(t,i,e,s,n){let r=i-s.clientY;const h=s.clientY+s.height-i;n.alignTop&&r>t.offsetHeight?r-=t.offsetHeight:!n.alignTop&&h<t.offsetHeight?r-=t.offsetHeight-h:(r+=e)+t.offsetHeight>s.height&&(r=s.height-t.offsetHeight);return r}(t,i.clientY,i.height,e,s)}px`,t.style.left=`${function(t,i,e,s){const n=s.distanceFromMargin?s.distanceFromMargin:0;let r=Math.ceil(i)-Math.ceil(e.clientX),h=i,a=h+t.offsetWidth;const o=e.clientX+e.width;if(s.alignMiddle){const i=t.offsetWidth/2;r-=Math.ceil(i),h-=i,a-=i}if(s.alignMiddle||s.forceRight)return e.clientX>h?r=0+n:o<a&&(r-=Math.ceil(a)-Math.ceil(o)+n),r;a>o&&(r-=t.offsetWidth);return r}(t,i.clientX,e,s)}px`}class Tt{constructor(t,i){this.gu=t,this.tr=i,this.mu=[],this.yu=12,this.xu=24,this.wu=4,this.ku=!1}Su(){this.Ou=this.tr.getElementCoordinates(this.gu.parentElement)}_u(t,i){t.getElementsByClassName("cnx-tooltip-text")[0].innerHTML=i}ju(t){if(!t||!t.tooltip||this.ku)return;if(this.mu.find(i=>i.component===t))return;const i=this.tr.createElementByString(jt.a);this._u(i,t.tooltip),this.Su();const e=t.getCoordinates();let s=!1;const{clientY:n,height:r}=e,{clientY:h,height:a}=this.tr.getElementCoordinates(this.gu);n<=h+a/2-r?e.clientY+=this.yu:(e.clientY-=this.xu,s=!0),this.gu.appendChild(i),At(i,e,this.Ou,{alignMiddle:!0,alignTop:s,forceRight:!0,distanceFromMargin:this.wu}),Object(A.j)(i),Object(A.a)(i,d.s.OpacityInTransition),this.mu.push({component:t,domElement:i})}Au(t){if(!t.tooltip)return;const i=this.mu.find(i=>i.component===t);if(!i)return;const e=i.domElement;this.gu.removeChild(e),this.mu=this.mu.filter(i=>i.component!==t)}Tu(t){if(!t.tooltip)return;const i=this.mu.find(t=>t.component===this.Cu);i&&this._u(i.domElement,t.tooltip)}Iu(){this.Cu=null,this.mu.forEach(t=>this.Au(t.component))}hoverStart(t){this.Cu=t,this.ju(t)}hoverEnd(t){this.Cu=null,this.Au(t)}stateChanged(t){this.Cu===t&&this.Tu(t)}disableTooltips(){this.ku=!0,this.Iu()}enableTooltips(){this.ku=!1,this.ju(this.Cu)}}!function(t){t[t.expand=0]="expand",t[t.collapse=1]="collapse"}(Ot||(Ot={}));class Ct extends bt{constructor(){super(...arguments),this.eventList=[j[j.Expand],j[j.Collapse],...this.eventList],this.Pu="Full Screen",this.Mu="Exit Full Screen"}onClickHandler(t){switch(super.onClickHandler(t),this.ri){case Ot.collapse:this.mediator.publish(this,j[j.Expand]);break;case Ot.expand:this.mediator.publish(this,j[j.Collapse]);break;default:this.mediator.publish(this,j[j.Expand])}}eu(){this.Kl&&(this.ri===Ot.expand?this.Kl.classList.add(d.h.Active):this.Kl.classList.remove(d.h.Active))}setState(t){this.ri!==t&&(this.ri=t,this.eu())}get tooltip(){return this.ri===Ot.expand?this.Mu:this.Pu}}class It extends St{constructor(t,i,e,s,n){super(t,i,e,s,n),this.Eu=new Tt(this.$uiContainer,e)}handleComponentEvent(t,i,e){let s=e;switch(i.payload&&i.payload.targetComponent&&(s=i.payload.targetComponent),t){case j[j.HoverStart]:this.Eu.hoverStart(s);break;case j[j.HoverEnd]:this.Eu.hoverEnd(s);break;case j[j.StateChanged]:this.Eu.stateChanged(s)}}updateDuration(t,i){if(!Object(A.u)(this.$uiContainer,d.g.ShowControls))return;const e=this.getComponent(lt.ElapsedTimeLabel),s=this.getComponent(lt.TotalDurationLabel),n=this.getComponent(lt.ProgressBar);if(e&&e.setTime(t),s&&s.setTime(i),n){const e=0,s=i,r=0,h=100;n.setProgress(tt(e,s,r,h,t))}}updateVolume(t){}expand(){this.getComponent(lt.ExpandButton).setState(Ot.expand)}collapse(){this.getComponent(lt.ExpandButton).setState(Ot.collapse)}}class Pt extends bt{constructor(){super(...arguments),this.eventList=[j[j.Settings],...this.eventList],this.Lu="Settings"}onClickHandler(t){super.onClickHandler(t),this.mediator.publish(this,j[j.Settings],{payload:t})}toggleHDFlag(t){t?Object(A.a)(this.Kl,d.h.Active):Object(A.I)(this.Kl,d.h.Active)}get tooltip(){return this.Lu}}var Mt=e(42),Et=e.n(Mt);class Lt extends bt{constructor(t,i,e,s,n=!1,r){super(t,i,e,r),this.Ru=s,this.isActive=n}onClickHandler(t){super.onClickHandler(t),this.isActive=!this.isActive,this.onStateChange()}get isActive(){return this.ri}set isActive(t){this.ri=t,this.ri?Object(A.a)(this.Kl,this.Ru):Object(A.I)(this.Kl,this.Ru)}}class Rt extends Lt{constructor(){super(...arguments),this.eventList=[j[j.CaptionOn],j[j.CaptionOff],j[j.StateChanged],...this.eventList],this.Du="Subtitles On",this.Bu="Subtitles Off"}onStateChange(){this.mediator.publish(this,this.isActive?j[j.CaptionOn]:j[j.CaptionOff]),this.mediator.publish(this,j[j.StateChanged])}get tooltip(){return this.isActive?this.Bu:this.Du}}var Dt=e(43),Bt=e.n(Dt),$t=e(84),Ft=e.n($t);class Vt extends ft{constructor(){super(...arguments),this.Ac=!1,this.eventList=[j[j.Next]]}onClickHandler(){this.mediator.publish(this,j[j.Next])}show(){this.Ac=!0,this.Kl.classList.add("cnx-fade-in-up-next")}hide(){this.Ac=!1,this.Kl.classList.remove("cnx-fade-in-up-next")}isInView(){return this.Ac}updateCard(t,i){const e=this.Kl.getElementsByTagName("img")[0];e.setAttribute("src",t),e.style.display="none",e.onload=()=>{e.style.display="block"},this.Kl.getElementsByClassName("cnx-up-next-box-text")[0].innerHTML=Object(b.h)(i)?i:""}}var Ut=e(21);class Nt extends dt{constructor(t,i,e,s){super(t,i,e),this.settings=s,this.eventList=[],this.$u=144,this.Fu=36}createLogo(){let t=this.tr.createElement("img");t.onload=()=>{t=this.resizeLogo(t),this.Kl.appendChild(t)},t.src=this.settings.logoUrl,t.alt=""}resizeLogo(t){const i=t.naturalWidth,e=t.naturalHeight;if(!i||!e)return t;if(this.settings.logoPosition===Ut.ProtoLogoPositionMode.ControlBar)t.style.setProperty("height",`${this.Fu}px`,"important"),t.style.setProperty("width",`${this.Fu}px`,"important");else{const s=i/e;this.Fu*s>this.$u?(t.style.setProperty("width",`${this.$u}px`,"important"),t.style.setProperty("height","auto","important")):(t.style.setProperty("width","auto","important"),t.style.setProperty("height",`${this.Fu}px`,"important"))}return t}initComponent(){try{this.createLogo()}catch(t){Object(n.a)({message:"LogoComponent_createLogo",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}}var Ht=e(25);class qt extends dt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.Vu=this.Kl.getElementsByTagName("cnx-span")[0]}setTime(t){isNaN(t)||"number"!=typeof t?Object(A.a)(this.Kl,d.h.Invisible):(this.Vu.innerHTML=Object(Ht.g)(t),Object(A.I)(this.Kl,d.h.Invisible))}}var zt=e(38),Wt=e.n(zt);class Gt extends dt{constructor(t,i,e,s=!1){super(t,i,e,s),this.Uu=0,this.Nu=null,this.Hu=0,this.qu=0,this.zu=100,this.cacheDomElements()}cacheDomElements(){this.Wu=this.Kl.getElementsByClassName("cnx-progress-fill")[0],this.Gu=this.Kl.getElementsByClassName("cnx-progress-rail")[0]}cacheWidths(){this.Uu=this.fixedRailWidth?this.fixedRailWidth:this.Gu.getBoundingClientRect().width,this.Nu=this.Gu.getBoundingClientRect().left}updateUi(t){const i=this.getComputedTranslation(t);this.Hu=i,this.Wu.style.transform=`translateX(${i}px)`}isValidTranslation(){return this.Hu>=0&&this.Hu<=this.Uu}getComputedTranslation(t){return t<0?0:t>this.Uu?this.Uu:t}setProgress(t){this.cacheWidths();const i=this.getComputedTranslation(tt(0,100,0,this.Uu,t));this.updateUi(i)}disableTransition(){Object(A.a)(this.Kl,d.h.NoTransition)}enableTransition(){Object(A.I)(this.Kl,d.h.NoTransition)}Qu(t){this.disableTransition(),this.setProgress(t),Object(A.j)(this.Wu),this.enableTransition()}forceStartState(){this.Qu(this.qu)}forceEndState(){this.Qu(this.zu)}initComponent(){this.cacheWidths(),this.Wn||this.Kl.addEventListener("click",t=>t.stopPropagation())}}class Qt extends Gt{constructor(t,i,e,s=!1){super(t,i,e,s),this.Ju=0,this.Xu=null,this.Yu=!1,this.eventList=[j[j.DraggingStart],j[j.DraggingStopped]],this.Ku=t=>{this.cacheWidths(),this.Zu(this.td(t)),this.Wn?(this.Kl.addEventListener(this.kt.move,this.ed),Object(A.c)(this.Kl,this.kt.stop,this.sd)):(this.tr.addEventListenerOnGlobal(this.kt.stop[0],this.sd),this.tr.addEventListenerOnGlobal(this.kt.move,this.ed)),this.onDragStart()},this.ed=t=>{null===this.Xu&&(this.Yu||(this.Yu=!0,this.disableTransition()),this.Xu=this.tr.requestAnimationFrameHelper(()=>{const i=this.nd+(this.td(t)-this.rd);this.isValidTranslation()&&this.hd(i),this.Xu=null}))},this.sd=t=>{t.stopPropagation(),this.Wn?(this.Kl.removeEventListener(this.kt.move,this.ed),Object(A.L)(this.Kl,this.kt.stop,this.sd)):(this.tr.removeEventListenerOnGlobal(this.kt.move,this.ed),this.tr.removeEventListenerOnGlobal(this.kt.stop[0],this.sd)),this.Yu=!1,this.enableTransition(),this.onDragEnd()},this.kt=s?{start:"touchstart",move:"touchmove",stop:["touchend","touchcancel"]}:{start:"mousedown",move:"mousemove",stop:["mouseup"]}}cacheDomElements(){super.cacheDomElements(),this.od=this.Kl.getElementsByClassName("cnx-progress-handle")[0]}cacheWidths(){super.cacheWidths(),this.Ju=this.od.getBoundingClientRect().width/2}updateUi(t){super.updateUi(t);const i=this.getComputedTranslation(t);this.od.style.transform=`translateX(${i-this.Ju}px)`}onDragEnd(){this.mediator.publish(this,j[j.DraggingStopped])}onDragStart(){this.mediator.publish(this,j[j.DraggingStart])}td(t){return this.Wn?t.touches.item(0).clientX:t.clientX}Zu(t){this.nd=t-this.Nu,this.rd=t,this.hd(this.nd)}hd(t){if(this.isValidTranslation()){const i=this.getComputedTranslation(t),e=0,s=this.Uu,n=0,r=100;this.updateUi(i),this.onProgressChange(tt(e,s,n,r,i))}}setProgress(t){super.setProgress(t)}initComponent(){super.initComponent(),this.Kl.addEventListener(this.kt.start,this.Ku)}destroy(){super.destroy(),this.Kl.removeEventListener(this.kt.start,this.Ku)}}class Jt extends Qt{constructor(t,i,e,s=!1){super(t,i,e,s),this.ld=!1,this.ud=t=>{Object(A.a)(this.Kl,d.h.HoverEnd),this.ld=!0},this.dd=t=>{const i=this.getComputedTranslation(t.clientX-this.Nu);this.fd.style.transform=`translateX(${i}px)`},this.pd=t=>{this.fd.style.transform="translateX(0)",this.ld=!1,this.bd()},this.eventList=this.eventList.concat([j[j.Seek],j[j.SeekingStart],j[j.SeekingStopped]])}onProgressChange(t){this.mediator.publish(this,j[j.Seek],{payload:t-.1})}onDragEnd(){super.onDragEnd(),this.mediator.publish(this,j[j.SeekingStopped]),this.bd()}onDragStart(){super.onDragStart(),this.mediator.publish(this,j[j.SeekingStart])}bd(){this.ld||this.Yu||Object(A.I)(this.Kl,d.h.HoverEnd)}initComponent(){super.initComponent(),this.Kl.addEventListener("mousemove",this.dd),this.Kl.addEventListener("mouseenter",this.ud),this.Kl.addEventListener("mouseleave",this.pd),this.fd=this.Kl.getElementsByClassName("cnx-progress-follow")[0]}hide(){Object(A.v)(this.Kl)}show(){Object(A.P)(this.Kl)}destroy(){super.destroy(),this.Kl.removeEventListener("mousemove",this.dd),this.Kl.removeEventListener("mouseenter",this.ud),this.Kl.removeEventListener("mouseleave",this.pd)}}var Xt=e(44),Yt=e.n(Xt);class Kt extends dt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){Object(A.P)(this.Kl)}hide(){Object(A.v)(this.Kl)}}var Zt,ti=e(85),ii=e.n(ti),ei=e(45),si=e.n(ei),ni=e(86),ri=e.n(ni);!function(t){t[t.SimpleMenuItem=0]="SimpleMenuItem",t[t.ToggleMenuItem=1]="ToggleMenuItem",t[t.SubmenuMenuItem=2]="SubmenuMenuItem"}(Zt||(Zt={}));var hi={HoldStart:"iHoldStart",HoldEnd:"iHoldEnd",TapLeft:"iTapLeft",TapRight:"iTapRight",SwipeEnd:"iSwipeEnd",SwipeMove:"iSwipeMove"};class ai extends dt{constructor(t,i,e,s,n,r,h){super(t,i,e,h),this.eventName=s,this.vd=n,this.gd=r,this.yd=[],this.eventList=[j[j.RebindComponent],hi.HoldStart,hi.HoldEnd],this.xd=!1,this.wd=10,this.kd=t=>{this.Sd.removeChild(t.target),this.Sd.style.width=`${this.Kl.clientWidth}px`},this.close=t=>{t&&Object(ht.h)(t.target,d.g.ContextController,this.wd)||!1!==this.isOpen&&(this.xd&&(this.mediator.publish(this,hi.HoldEnd),Object(A.I)(this.gd,d.h.OnHold),this.xd=!1),this.isOpen=!1,Object(A.a)(this.Kl,d.h.Invisible),this.removeDocClickCloseEvent(),this.closeAllSubmenuItems())},this.Od=this.Wn?"touchstart":"click",this.close(),this.cacheCoordinates(),this.eventList.push(this.eventName),this.Sd=this.Kl.getElementsByClassName(d.k.Container)[0],this._d=this.tr.createElementByString(`<cnx class="${d.k.Items}"></cnx>`),this.Sd.appendChild(this._d),Object(A.a)(this.Sd,d.g.ContextController)}addNewItemsEvent(t){const i=t.filter(t=>!Object(u.g)(t,this.eventList));i.length>0&&(this.eventList=[...this.eventList,...i],this.mediator.publish(this,j[j.RebindComponent],{payload:this.vd}))}cacheCoordinates(){this.Ou=this.tr.getElementCoordinates(this.gd)}positionContextMenu(t){this.cacheCoordinates(),At(this.Kl,t,this.Ou,{alignMiddle:this.alignMiddle,alignTop:this.alignTop,forceRight:this.forceRight})}jd(t){switch(t.type){case Zt.SimpleMenuItem:this.close();break;case Zt.SubmenuMenuItem:this.Td(t)}}sendEvent(t,i){this.mediator.publish(this,t,i)}Td(t){const i=this.Kl.clientWidth;t.isOpen?(t.$menuContainer.addEventListener("transitionend",this.kd),this._d.style.left="0px",t.$menuContainer.style.left="0px"):(t.$menuContainer.removeEventListener("transitionend",this.kd),this.Sd.style.width=`${2*i}px`,this.Sd.appendChild(t.$menuContainer),Object(A.j)(this.Sd),this._d.style.left=`${-i}px`,t.$menuContainer.style.left=`${-i}px`),t.isOpen=!t.isOpen}closeAllSubmenuItems(){this.yd.forEach(t=>{t.type===Zt.SubmenuMenuItem&&t.isOpen&&this.Td(t)})}buildContextMenu(t){let i=[];this._d.innerHTML="",this.Sd.style.width=`${this.Kl.clientWidth}px`,this.yd.forEach(t=>this.unsubscribeAll(t)),this.yd=t,this.yd.forEach(t=>{i=[...i,...t.eventList],t.eventList.forEach(i=>this.subscribe(i,t,e=>{this.jd(t),this.sendEvent(i,e)})),t.initComponent(),this._d.appendChild(t.getContainer())}),this.addNewItemsEvent(i)}addDocClickCloseEvent(){this.tr.addEventListenerOnGlobal(this.Od,this.close,!0,!0)}removeDocClickCloseEvent(){this.tr.removeEventListenerOnGlobal(this.Od,this.close,!0,!0)}open(t,i=!1){i&&(this.xd=i,this.mediator.publish(this,hi.HoldStart),Object(A.a)(this.gd,d.h.OnHold)),this.isOpen=!0,this.positionContextMenu(t),this.addDocClickCloseEvent(),Object(A.I)(this.Kl,d.h.Invisible)}}class oi extends ft{constructor(t,i,e,s){super(t,i,oi.getTemplate(s),e),this.mediator=t,this.Cd=!1,this.type=Zt.SimpleMenuItem,this.eventList=[],this.event=s.activeEvent,this.name=s.name,s.eventList?this.eventList=s.eventList:this.eventList.push(this.event),this.Id=this.Kl.getElementsByClassName(d.k.ItemTitle)[0],this.Pd=this.Kl.getElementsByClassName(d.k.ItemIcon)[0]}static getTemplate(t){const i=`<cnx class="${d.k.ItemIcon}">${t.icon}</cnx>`,e=`<cnx class="${d.k.ItemExtra}">${t.label}</cnx>`;return`<cnx class="${d.k.ClickOption}">\n                    ${t.icon?i:""}\n                    <cnx class="${d.k.ItemTitle}">${t.name}</cnx>\n                    ${t.label?e:""}\n                </cnx>`}onClickHandler(t){this.mediator.publish(this,this.event)}changeItemName(t){this.Id.innerHTML=t}changeItemIcon(t){this.Pd.innerHTML=t}get isActive(){return this.Cd}set isActive(t){this.Cd=t,this.Cd?Object(A.a)(this.Kl,d.h.Active,d.f.AccentColor):Object(A.I)(this.Kl,d.h.Active,d.f.AccentColor)}}var ci=e(37),li=e.n(ci),ui=e(17);class di extends ai{constructor(){super(...arguments),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!0}Ed(){const t=ui.a.version?`V${ui.a.version}`:void 0,i=[new oi(this,this.tr,this.Wn,{activeEvent:j[j.AboutClick],name:"About Connatix",icon:li.a,label:t})];this.buildContextMenu(i)}initComponent(){this.Ed()}onResize(){this.cacheCoordinates(),this.close()}}class fi extends Lt{constructor(t,i,e,s){super(t,i,fi.getTemplate(s),d.h.Active,s.defaultState,e),this.mediator=t,this.eventList=[],this.type=Zt.ToggleMenuItem,({eventOn:this.Ld,eventOff:this.Rd}=s),this.eventList.push(this.Ld,this.Rd)}static getTemplate(t){const i=`<cnx class="${d.k.ItemIcon}">${t.icon}</cnx>`;return`<cnx class="${d.k.ToggleOption} ${t.defaultState?d.h.Active:""}">\n                    ${t.icon?i:""}\n                    <cnx class="${d.k.ItemTitle}">${t.name}</cnx>\n                    <cnx class="${d.k.ItemExtra}">\n                        <cnx class="cnx-cm-toggle-switch">\n                            <cnx class="cnx-cm-slider ${d.f.AccentColor}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>`}onStateChange(){this.mediator.publish(this,this.isActive?this.Ld:this.Rd)}get tooltip(){return""}}var pi=e(87),bi=e.n(pi),vi=e(52),gi=e.n(vi);class mi extends ft{constructor(t,i,e,s){super(t,i,mi.getTemplate(s),e),this.mediator=t,this.yd=[],this.Cd=!1,this.type=Zt.SubmenuMenuItem,this.eventList=[],this.isOpen=!1,this.event=s.event,this.eventList.push(this.event),this.Dd=new oi(this,i,e,{activeEvent:s.event,name:s.name.toUpperCase(),icon:bi.a}),this.$menuContainer=this.tr.createElementByString(`<cnx class="${d.k.Items}"></cnx>`),this.Bd=this.Kl.getElementsByClassName(d.k.ItemExtra)[0]}static getTemplate(t){const i=`<cnx class="${d.k.ItemIcon}">${t.icon}</cnx>`;return`<cnx class="${d.k.SubmenuOption}">\n                    ${t.icon?i:""}\n                    <cnx class="${d.k.ItemTitle}">${t.name}</cnx>\n                    <cnx class="${d.k.ItemExtra} ${d.f.AccentColor}">${t.label?t.label:""}${gi.a}</cnx>\n                </cnx>`}onClickHandler(t){this.mediator.publish(this,this.event)}handleItemsEvents(t){this.mediator.publish(this,this.event,{payload:t===this.event?void 0:t})}buildContextMenu(t){this.$menuContainer.innerHTML="",this.yd.forEach(t=>this.unsubscribeAll(t)),this.yd=[this.Dd,...t],this.yd.forEach(t=>{t.eventList.forEach(i=>this.subscribe(i,t,()=>this.handleItemsEvents(i))),t.initComponent(),this.$menuContainer.appendChild(t.getContainer())})}changeLabel(t){this.Bd.innerHTML=`${t}${gi.a}`}get isActive(){return this.Cd}set isActive(t){this.Cd=t,this.Cd?Object(A.a)(this.Kl,d.h.Active):Object(A.I)(this.Kl,d.h.Active)}}function yi(t,i,e){const s=e?H[H.Auto]:i.height.toString();t.forEach(t=>t.name.indexOf(s)>-1?t.isActive=!0:t.isActive=!1);const n=t.find(t=>H[t.event]===H.Auto);if(e){const e=t.find(t=>t.event===i.height.toString());if(e){const t=`${n.name} (${e.name})`;n.changeItemName(t)}}else n.changeItemName(n.name)}class xi extends mi{constructor(t,i,e,s){super(t,i,e,{event:j[j.Quality],name:s,icon:Et.a,options:[]}),this.mediator=t,this.$d={height:360,quality:H.Auto},this.Fd=!0}handleItemsEvents(t){this.Fd=t===H[H.Auto];const i={height:this.Fd?this.$d.height:parseInt(t,10),quality:this.Fd?H.Auto:H.Strict};this.mediator.publish(this,this.event,{payload:i})}Vd(){let t=null;if(this.Fd)t=H[H.Auto];else{const i=this.Ud.find(t=>t.event===this.$d.height.toString());i&&(t=i.name)}t&&this.changeLabel(t)}updateQuality(t,i=!1){Object(u.h)(this.Nd)&&(this.Fd=t.quality===H.Auto,this.$d.quality=t.quality,this.$d.height=it(t.height,this.Nd.map(t=>t.videoHeight)),this.Vd(),yi(this.Ud,this.$d,this.Fd),this.isActive=i)}updateAvailableQualities(t){this.Ud=[],this.Nd=t,this.Ud=this.Nd.map(t=>new oi(this,this.tr,this.Wn,{name:`${t.videoHeight}p`,activeEvent:t.videoHeight.toString(),label:t.isHD?"HD":void 0})),this.Ud.push(new oi(this,this.tr,this.Wn,{name:H[H.Auto],activeEvent:H[H.Auto]})),this.Vd(),yi(this.Ud,this.$d,this.Fd),this.buildContextMenu(this.Ud)}}const wi={ContextAbout:"About Connatix",ContextQuality:"Video Settings",ContextCaption:"Closed Caption"};class ki extends ai{constructor(t,i,e,s,n,r,h,a=!0){super(t,i,e,s,n,r,h),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!1,this.Hd=new xi(this,this.tr,this.Wn,wi.ContextQuality),this.qd=[new oi(this,this.tr,this.Wn,{activeEvent:j[j.AboutClick],name:wi.ContextAbout,icon:li.a,label:ui.a.version?`V${ui.a.version}`:void 0})],this.zd=new fi(this,this.tr,this.Wn,{eventOff:j[j.CaptionOff],eventOn:j[j.CaptionOn],defaultState:a,name:wi.ContextCaption,icon:Bt.a}),this.Wd=[this.zd,this.Hd]}Gd(){let t=this.qd;this.Qd===d.t.Lg&&(t=[...this.Wd,...this.qd]),this.buildContextMenu(t)}createQualityMenu(t){this.Hd.updateAvailableQualities(t)}initComponent(){this.Gd()}onResize(t,i){this.isOpen&&this.positionContextMenu(t),this.Qd!==i?(this.Qd=i,this.closeAllSubmenuItems(),this.Gd()):this.Qd=i}updateQuality(t,i=!1){this.Hd.updateQuality(t,i)}toggleCaptionState(t){this.zd.isActive!==t&&(this.zd.isActive=t)}hideCaptionOption(){this.zd.hideComponent()}showCaptionOption(){this.zd.showComponent()}}function Si(t){return t.replace(/[-—]/g,"&#x2011;")}function Oi(t){try{return Object.keys(t).reduce((i,e)=>Object.assign(Object.assign({},i),{[e]:Object(b.h)(t[e])&&t[e].includes("%%")?void 0:t[e]}),{})}catch(i){return Object(n.a)({message:"sanitizeDfpMacros_error",exception:i.message,callStack:i.stack,level:h.ProtoLoggingLevelEnum.WARNING}),Object.keys(t).reduce((i,e)=>Object.assign(Object.assign({},i),{[e]:Object(b.h)(t[e])&&t[e].indexOf("%%")>-1?void 0:t[e]}),{})}}function _i(t){return/<[a-z\/][\s\S]*>/i.test(t)}class ji extends dt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.Jd=this.Kl.getElementsByClassName(d.e.CaptionContainer)[0]}updateCaptions(t){var i,e;this.Jd.innerHTML=t&&t.text?(i=t.text,e="<br>",i.replace(/(?:\r\n|\r|\n)/g,e)):""}}var Ai=e(88),Ti=e.n(Ai);class Ci extends Nt{constructor(){super(...arguments),this.Xd="cnx-logo-height",this.Yd="cnx-logo-width"}createLogo(){this.Kl.onload=()=>{this.Kl.style.visibility="visible",this.resizeLogo(this.Kl)},this.Kl.style.visibility="hidden",this.Kl.src=this.settings.logoUrl}resizeLogo(t){const i=t.naturalWidth,e=t.naturalHeight;return i&&e?(i>e?Object(A.a)(t,this.Yd):Object(A.a)(t,this.Xd),t):t}}var Ii=e(89),Pi=e.n(Ii),Mi=e(90),Ei=e.n(Mi);class Li extends Qt{constructor(t,i,e,s=!1){super(t,i,e,s),this.Kd=80,this.fixedRailWidth=this.Kd,this.eventList.push(j[j.Volume])}onProgressChange(t){this.mediator.publish(this,j[j.Volume],{payload:t})}}var Ri=e(91),Di=e.n(Ri),Bi=e(92),$i=e.n(Bi);class Fi extends ai{constructor(){super(...arguments),this.alignMiddle=!0,this.alignTop=!0,this.forceRight=!1,this.Zd=[],this.$d={height:360,quality:H.Auto},this.Fd=!0}sendEvent(t){this.Fd=H[t]===H.Auto,this.mediator.publish(this,this.eventName,{payload:{height:this.Fd?this.$d.height:parseInt(t,10),quality:this.Fd?H.Auto:H.Strict}})}initComponent(){}createQualityMenu(t){this.Zd=[],this.Nd=t,this.Nd.forEach(t=>{this.Zd.push(new oi(this,this.tr,this.Wn,{name:`${t.videoHeight}p`,activeEvent:t.videoHeight.toString(),label:t.isHD?"HD":void 0}))}),this.Zd.push(new oi(this,this.tr,this.Wn,{name:H[H.Auto],activeEvent:H[H.Auto]})),yi(this.Zd,this.$d,this.Fd),this.buildContextMenu(this.Zd)}onResize(t){this.cacheCoordinates(),this.isOpen&&this.positionContextMenu(t)}updateQuality(t){Object(u.h)(this.Nd)&&(this.Fd=t.quality===H.Auto,this.$d.quality=t.quality,this.$d.height=it(t.height,this.Nd.map(t=>t.videoHeight)),yi(this.Zd,this.$d,this.Fd))}}var Vi=e(93),Ui=e.n(Vi);class Ni extends dt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){Object(A.P)(this.Kl),Object(A.j)(this.Kl),Object(A.a)(this.Kl,d.h.Active)}hide(){Object(A.I)(this.Kl,d.h.Active),Object(A.v)(this.Kl)}}class Hi extends bt{constructor(t,i,e,s,n,r){super(t,i,e,s),this.tooltip=r,this.tf=lt[n],this.eventList.push(this.tf)}onClickHandler(t){super.onClickHandler(t),this.mediator.publish(this,this.tf)}}class qi extends ft{constructor(t,i,e,s,n,r){super(t,i,e,s),this.tooltip=r,this.eventList=[],this.tf=lt[n],this.eventList.push(this.tf)}onClickHandler(t){this.mediator.publish(this,this.tf)}}class zi{constructor(t,i,e){this.tr=t,this.Wn=i,this.if=new Map,Object.keys(e).forEach(t=>this.ef(lt[t],e[t]))}getButton(t,i){const{isHoverable:e,template:s,tooltip:n}=this.sf(t);return e?new Hi(i,this.tr,s,this.Wn,t,n):new qi(i,this.tr,s,this.Wn,t,n)}isGeneralComponent(t){return this.if.has(t)}sf(t){return this.if.get(t)}ef(t,i){this.if.set(t,i)}}var Wi=e(94),Gi=e.n(Wi);function Qi(t,i,e=!0){return e?`\n            <cnx class="cnx-icon-button cnx-button-${lt[t].toLowerCase()} cnx-ui-btn-hoverable">\n                <cnx class="cnx-btn-container">\n                    ${i}\n                </cnx>\n            </cnx>\n        `.trim():`<cnx class="cnx-button-${lt[t].toLowerCase()}">${i}</cnx>`}var Ji=e(53),Xi=e.n(Ji),Yi=e(95),Ki=e.n(Yi);var Zi={[lt[lt.MoreButton]]:{template:Qi(lt.MoreButton,Ki.a),tooltip:"More",isHoverable:!0},[lt[lt.CloseButton]]:{template:Qi(lt.CloseButton,Gi.a),tooltip:"Close",isHoverable:!0},[lt[lt.UpNextButton]]:{template:Qi(lt.UpNextButton,Xi.a),tooltip:"Next",isHoverable:!0},[lt[lt.PreviousButton]]:{template:Qi(lt.PreviousButton,Xi.a),tooltip:"Previous",isHoverable:!0}};class te extends bt{constructor(){super(...arguments),this.eventList=[j[j.SkipAd],...this.eventList],this.nf=-1,this.rf=-1}initComponent(){super.initComponent(),this.hideComponent(),this.hf=this.Kl.getElementsByTagName("cnx-span")[0],this.af=this.Kl.querySelectorAll(`.${d.q.Timer} svg`)[0]}setSecondsUntilSkip(t){this.nf=Math.ceil(t),this.rf=-1,Object(A.O)(this.af,{"animation-duration":this.nf+"s"})}tickDown(t){const i=this.nf-Math.floor(t);if(i<0||0===this.rf)return;const e=Object(A.u)(this.Kl,d.q.InTimer);this.rf=i,0===this.rf?(e&&Object(A.I)(this.Kl,d.q.InTimer),this.hf.innerHTML="Ad"):(e||Object(A.a)(this.Kl,d.q.InTimer),this.hf.innerHTML=`in ${this.rf}s`)}get tooltip(){}onClickHandler(t){super.onClickHandler(t),0===this.rf&&this.mediator.publish(this,j[j.SkipAd],{payload:t})}}var ie=e(96),ee=e.n(ie),se=e(97),ne=e.n(se);const re="Loading ad";class he extends dt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.cf=this.Kl.getElementsByClassName(d.a.BackgroundImg)[0],this.lf=this.Kl.getElementsByClassName(d.a.Icon)[0],this.lf.innerHTML=ne.a,this.uf=this.Kl.getElementsByClassName(d.a.ButtonContainer)[0];const t=this.Kl.getElementsByClassName(d.a.Button)[0];this.df=this.tr.createElementByString(`<a class="${d.a.Wrapper}" href="#">`),this.df.target=T.c.Blank,this.df.appendChild(t),this.uf.innerHTML="",this.uf.appendChild(this.df),this.ff=this.Kl.getElementsByClassName(d.a.InfoContainer)[0],this.pf=this.Kl.getElementsByClassName(d.a.FallbackContainer)[0],this.bf=this.Kl.getElementsByClassName(d.a.SlotCountText)[0]}setBackgroundImg(t){Object(b.h)(t)?(Object(A.I)(this.cf,d.h.DisplayNone),this.cf.src=t):Object(A.a)(this.cf,d.h.DisplayNone)}setClickUrl(t){if(!Object(b.h)(t))return Object(A.P)(this.pf),void Object(A.v)(this.ff);Object(A.P)(this.ff),Object(A.v)(this.pf),this.df.href=t}setFallbackText(t,i){const e=t||1,s=i||1;this.bf.innerHTML=`${re} ${e}/${s}`}}var ae,oe=e(98),ce=e.n(oe);class le{constructor(t,i,e={},s={}){this.tr=t,this.Kl=i,this.Hn=e,this.vf={[lt.PlayButton]:t=>this.gf(!1,t),[lt.BigPlayButton]:t=>this.gf(!0,t),[lt.VolumeProgress]:t=>new Li(t,this.tr,Di.a),[lt.ExpandButton]:t=>new Ct(t,this.tr,$i.a,this.Hn.isMobile),[lt.QualityMenu]:t=>new Fi(t,this.tr,Ui.a,j[j.Quality],lt.QualityMenu,this.Kl,this.Hn.isMobile),[lt.Loader]:t=>new Ni(t,this.tr,si.a),[lt.SkipAdButton]:t=>new te(t,this.tr,ee.a,this.Hn.isMobile),[lt.AdLoadingScreen]:t=>new he(t,this.tr,ce.a)},this.gf=(t,i)=>new vt(i,this.tr,function(t=!1){return`\n    <cnx class="cnx-icon-button cnx-ui-btn-hoverable ${t?"cnx-button-big-play":""}">\n        <cnx class="cnx-btn-container">\n            <cnx class="cnx-play-icon">${Pi.a}</cnx>\n            <cnx class="cnx-pause-icon">${Ei.a}</cnx>\n        </cnx>\n    </cnx>\n`.trim()}(t),this.Hn.isMobile),this.mf=t=>i=>{const e=this.vf[t];if(e)return e(i)},this.yf=new zi(this.tr,this.Hn.isMobile,Object.assign(Object.assign({},Zi),s))}createComponent(t,i){const e=this.mf(t)(i);return e||(this.yf.isGeneralComponent(t)?this.yf.getButton(t,i):void 0)}}!function(t){t[t.Mute=0]="Mute",t[t.Unmute=1]="Unmute"}(ae||(ae={}));class ue extends bt{constructor(t,i,e,s,n){super(t,i,e,n),this.eventList=[j[j.Mute],j[j.Unmute],j[j.StateChanged],...this.eventList],this.xf="Mute",this.wf="Unmute",this.ri=s}onClickHandler(t){super.onClickHandler(t),this.ri===ae.Mute?(this.mediator.publish(this,j[j.Unmute]),this.setState(ae.Unmute)):(this.mediator.publish(this,j[j.Mute]),this.setState(ae.Mute))}eu(){this.ri===ae.Mute?Object(A.M)(this.Kl,"cnx-sound-off","cnx-sound-on"):Object(A.M)(this.Kl,"cnx-sound-on","cnx-sound-off")}get tooltip(){return this.ri===ae.Mute?this.wf:this.xf}initComponent(){super.initComponent(),this.eu()}setState(t){this.ri!==t&&(this.ri=t,this.eu(),this.mediator.publish(this,j[j.StateChanged]))}}class de extends kt{constructor(t,i,e,s){super(i,e,s),this.mediator=t,this.Kl=this.pu.getRenderedDom()}getContainer(){return this.Kl}initComponent(){this.pu.initComponents()}showComponent(){Object(A.P)(this.Kl)}hideComponent(){Object(A.v)(this.Kl)}}class fe extends de{constructor(t,i,e,s){super(t,i,e,s),this.kf=null,this.eventList=[j[j.Volume],j[j.VolumeHoverStart],j[j.VolumeHoverStopped],j[j.DraggingStopped],j[j.DraggingStart],j[j.HoverStart],j[j.HoverEnd],j[j.StateChanged]],this.Sf=.2,this.Of=1e3,this._f=!1,this.jf=t=>{clearTimeout(this.kf),Object(A.a)(this.Kl,"cnx-mod-hover"),this.mediator.publish(this,j[j.VolumeHoverStart])},this.Af=()=>{this._f||(null!==this.kf&&clearTimeout(this.kf),this.kf=setTimeout(()=>{Object(A.I)(this.Kl,"cnx-mod-hover"),this.mediator.publish(this,j[j.VolumeHoverStopped])},this.Of))},this.Tf=this.Sf,this.Cf=this.getComponent(lt.VolumeButton),this.If=this.getComponent(lt.VolumeProgress)}handleComponentEvent(t,i,e){let s;switch(t){case j[j.Volume]:s=i.payload/100,this.Pf(s),this.Mf(i.payload);break;case j[j.Mute]:s=0,this.setVolumeProgress(0);break;case j[j.Unmute]:s=this.Tf,this.setVolumeProgress(100*this.Tf);break;case j[j.DraggingStopped]:this._f=!1,this.mediator.publish(this,j[j.DraggingStopped]),this.Af();break;case j[j.DraggingStart]:this._f=!0,this.mediator.publish(this,j[j.DraggingStart]);break;case j[j.HoverStart]:this.mediator.publish(this,j[j.HoverStart],{payload:{targetComponent:e}});break;case j[j.HoverEnd]:this.mediator.publish(this,j[j.HoverEnd],{payload:{targetComponent:e}});break;case j[j.StateChanged]:this.mediator.publish(this,j[j.StateChanged],{payload:{targetComponent:e}})}void 0!==s&&this.Ef(s)}Pf(t){t<this.Sf?this.Tf=this.Sf:this.Tf=t}Ef(t){this.mediator.publish(this,j[j.Volume],{payload:t})}Mf(t){0===t?this.Cf.setState(ae.Mute):this.Cf.setState(ae.Unmute)}setVolumeProgress(t){this.If.setProgress(t)}initComponent(){super.initComponent(),this.Kl.addEventListener("mouseenter",this.jf),this.Kl.addEventListener("mouseleave",this.Af)}setVolume(t){const i=100*t;this.Mf(i),this.setVolumeProgress(i)}destroy(){super.destroy(),this.Kl.removeEventListener("mouseenter",this.jf),this.Kl.removeEventListener("mouseleave",this.Af)}}var pe=`\n    <cnx class="cnx-volume-container">\n        <cnx class="cnx-ui-btn cnx-volume-btn">\n            [[${lt.VolumeButton}]]\n        </cnx>\n        <cnx class="cnx-volume-bar">\n            [[${lt.VolumeProgress}]]\n        </cnx>\n    </cnx>\n`.trim(),be=e(99),ve=e.n(be),ge=e(100),me=e.n(ge);var ye={[lt[lt.ShareButton]]:{template:Qi(lt.ShareButton,me.a),tooltip:"Share",isHoverable:!0},[lt[lt.CastButton]]:{template:Qi(lt.CastButton,ve.a),tooltip:"Cast",isHoverable:!0}},xe=e(101),we=e.n(xe),ke=e(102),Se=e.n(ke),Oe=e(103),_e=e.n(Oe),je=e(10);const Ae=90*je.g,Te="This live stream will start shortly",Ce="This live stream is not currently available. Please check again shortly",Ie="Live stream not supported by browser";class Pe extends dt{constructor(){super(...arguments),this.eventList=[],this.Lf=null}initComponent(){this.Rf=this.tr.createElementByString("<img/>"),this.Kl.appendChild(this.Rf),this.Df=this.Kl.getElementsByTagName("cnx-span")[0],this.Bf=this.Kl.getElementsByClassName("cnx-live-message")[0],this.$f=this.Kl.getElementsByClassName("cnx-live-icon")[0]}setPosterSrc(t){Object(b.h)(t)&&(this.Rf.src=t)}setPosterAltText(t){this.Rf.alt=t}setIconToStarting(){this.$f.innerHTML=`${Se.a}`}setIconToEnded(){this.$f.innerHTML=`${_e.a}`}setMessageToStarting(){this.Ff(Te)}setMessageToEnded(){this.Ff(Ce)}setMessageToNotSupported(){this.Ff(Ie)}handleDelayedStart(t){Object(b.e)(Date.parse(t))&&(this.Vf=new Date(t),this.Uf()>0&&(this.Nf(),clearInterval(this.Lf),this.Lf=setInterval(()=>{this.Nf()},je.f*je.g)))}showMessage(){Object(A.P)(this.$f),Object(A.P)(this.Bf)}hideMessage(){Object(A.v)(this.$f),Object(A.v)(this.Bf)}show(){Object(A.P)(this.Kl),Object(A.a)(this.Kl,d.h.Active)}hide(){Object(A.I)(this.Kl,d.h.Active),Object(A.v)(this.Kl)}destroy(){super.destroy(),clearInterval(this.Lf)}Nf(){const t=this.Uf();if(t>0){const i=this.Hf(t);this.Ff(`Live in ${i}`)}else this.Ff(Te),clearInterval(this.Lf),this.Lf=null}Uf(){return(Math.max(this.Vf.getTime(),Date.now())-Date.now())/je.f}Hf(t){const i=t>=Ae?Math.round(t/(je.g*je.c)):Math.ceil(t/je.g);return`${i} ${t>=Ae?"hours":`minute${1===i?"":"s"}`}`}Ff(t){this.Df.innerHTML=t}}var Me=e(104),Ee=e.n(Me);class Le extends dt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hideComponent()}}var Re,De=e(105),Be=e.n(De);class $e extends le{constructor(t,i,e){super(t,i,e,ye),this.tr=t,this.Kl=i,this.Hn=e,this.qf={[lt.VolumeControls]:t=>new fe(t,this.tr,pe,this),[lt.VolumeButton]:t=>new ue(t,this.tr,we.a,ae.Mute,this.Hn.isMobile),[lt.SettingsButton]:t=>new Pt(t,this.tr,Et.a,this.Hn.isMobile),[lt.CaptionButton]:t=>new Rt(t,this.tr,Bt.a,d.h.Active,this.Hn.closedCaptionDefault,this.Hn.isMobile),[lt.UpNextBox]:t=>new Vt(t,this.tr,Ft.a,this.Hn.isMobile),[lt.LogoComponent]:t=>{if(!Object(b.a)(this.Hn.logoUrl)&&!Object(b.a)(this.Hn.logoPosition))throw new Error("custom logo is undefined");return new Nt(t,this.tr,'<cnx class="cnx-logo"></cnx>',{logoUrl:this.Hn.logoUrl,logoPosition:this.Hn.logoPosition})},[lt.LogoOutstream]:t=>{if(!Object(b.a)(this.Hn.logoUrl)&&!Object(b.a)(this.Hn.logoPosition))throw new Error("outstream logo undefined");return new Ci(t,this.tr,'<img class="cnx-home-screen-logo" />',{logoUrl:this.Hn.logoUrl})},[lt.LivePoster]:t=>new Pe(t,this.tr,Ee.a),[lt.LiveIcon]:t=>new Le(t,this.tr,Be.a),[lt.ElapsedTimeLabel]:t=>new qt(t,this.tr,Wt.a),[lt.TotalDurationLabel]:t=>new qt(t,this.tr,Wt.a),[lt.ProgressBar]:t=>new Jt(t,this.tr,Yt.a,this.Hn.isMobile),[lt.QueStateOverlay]:t=>new Kt(t,this.tr,si.a),[lt.ContextMenu]:t=>new di(t,this.tr,ii.a,j[j.ContextClick],lt.ContextMenu,this.Kl,this.Hn.isMobile),[lt.ElementsSettingsMenu]:t=>new ki(t,this.tr,ri.a,j[j.SettingsMenu],lt.ElementsSettingsMenu,this.Kl,this.Hn.isMobile,this.Hn.closedCaptionDefault),[lt.CaptionComponent]:t=>new ji(t,this.tr,Ti.a)},this.zf=t=>i=>{const e=this.qf[t];if(e)return e(i)}}createComponent(t,i){return this.zf(t)(i)||super.createComponent(t,i)}}!function(t){t.InPod="cnx-ad-in-pod",t.AdMarkerInPodTextContainer="cnx-ad-marker-pod-right-side-text"}(Re||(Re={}));class Fe extends It{constructor(t,i,e,s,n={},r){super(t,e,i,s,r||new $e(i,e,n)),this.mediator=t,this.globalDomUtilsService=i,this.$container=e,this.settings=n,this.vu={[q.PlayingState]:new mt(this),[q.PausedState]:new xt(this)},this.Wf=0,this.vu[q.PausedState].enterState()}handleComponentEvent(t,i,e){switch(super.handleComponentEvent(t,i,e),t){case j[j.Volume]:this.mediator.publish(this,j[j.Volume],i);break;case j[j.Mute]:this.mediator.publish(this,j[j.Mute]);break;case j[j.Unmute]:this.mediator.publish(this,j[j.Unmute]);break;case lt[lt.CloseButton]:this.mediator.publish(this,j[j.Close]);break;default:this.mediator.publish(this,t,i)}}updateDuration(t){const i=this.getComponent(lt.ProgressBar),e=this.getComponent(lt.TotalDurationLabel);t||!i?(this.elapsedTime=0,this.duration=t,i&&i.setProgress(tt(0,t,0,100,0)),e&&e.setTime(t),this.Gf(this.Wf)):i.setProgress(100)}updateVolume(t){const i=this.getComponent(lt.VolumeControls);i&&i.setVolume(t)}get elapsedTime(){return this.Wf}set elapsedTime(t){this.Wf=t,this.Gf(this.Wf)}showSkipAdButton(t){const i=this.getComponent(lt.SkipAdButton);i&&(i.showComponent(),i.setSecondsUntilSkip(t))}hideSkipAdButton(){const t=this.getComponent(lt.SkipAdButton);t&&t.hideComponent()}addPodAdMarker(t,i){Object(A.a)(this.$uiContainer,Re.InPod),Object(u.c)(this.$uiContainer.getElementsByClassName(Re.AdMarkerInPodTextContainer)).forEach(e=>{e.innerHTML=`${t}/${i}`})}removeAddPodAdMarker(){Object(A.I)(this.$uiContainer,Re.InPod)}Gf(t){const i=this.getComponent(lt.ElapsedTimeLabel);i&&i.setTime(t);const e=this.getComponent(lt.SkipAdButton);e&&e.tickDown(t)}hideAdLoadingScreen(){const t=this.getComponent(lt.AdLoadingScreen);t&&t.hideComponent(),Object(A.I)(this.$container,d.g.PodLoadingScreen)}showAdLoadingScreen(t,i,e,s){const n=this.getComponent(lt.AdLoadingScreen);n&&(n.showComponent(),n.setBackgroundImg(t),n.setClickUrl(i),n.setFallbackText(e,s),Object(A.a)(this.$container,d.g.PodLoadingScreen))}}var Ve=e(46),Ue=e.n(Ve),Ne=e(47),He=e.n(Ne);class qe{get template(){return`\n        <cnx class="cnx-ui cnx-ui-ad-content">\n            [[${lt.AdLoadingScreen}]]\n            [[${lt.SkipAdButton}]]\n            <cnx class="cnx-ui-buttons cnx-ad-buttons">\n                <cnx class="cnx-ui-btn cnx-ad-play-button">[[${lt.PlayButton}]]</cnx>\n                <cnx class="cnx-ad-volume-controls">[[${lt.VolumeControls}]]</cnx>\n                <cnx class="cnx-ui-btn cnx-ad-volume-button">[[${lt.VolumeButton}]]</cnx>\n            </cnx>\n            <cnx class="cnx-ad-marker">${Ue.a}</cnx>\n            <cnx class="cnx-ad-marker-pod">\n                ${He.a}\n                <cnx class="cnx-ad-marker-pod-right-side">\n                    <cnx class="cnx-ad-marker-pod-right-side-text">1/1</cnx>\n                </cnx>\n            </cnx>\n            <cnx class="cnx-ui-progress cnx-ui-bar cnx-ad-progress-bar">\n                <cnx class="cnx-ui-progress-bar">[[${lt.ProgressBar}]]</cnx>\n            </cnx>\n        </cnx>\n        `.trim()}}var ze=e(28);class We extends o.a{constructor(t,i,e,s,n,r){super(),this.mediator=t,this.Qf=i,this.Jf=e,this.Xf=s,this.Yf=n,this.Kf=r,this.Zf=[],this.firstAdShown=!1,this.Ur=!1,this.tp=0,this.ep=!0,this.sp=!1,this.np=!1,this.rp=this.getNewAdManager(),this.subscribe(L.AdsEnabled,this.rp,()=>{this.mediator.publish(this,L.AdsEnabled)})}ap(t,i,e){this.rp.initAd(t,i,w.a.Normal,1,e,[{container:this.op,width:t,height:i,type:h.ProtoAdType.Video}])}cp(){this.lp.showSkipAdButton(this.Qf.skipAdAfter)}up(t){const i=this.rp.getCurrentAdClickTrackingProperties();i&&this.Kf.services.TrackingService.trackAdClick(Object.assign(Object.assign({},i),{type:t}))}dp(t){if(t.payload.adLoadedData.skipOffset&&t.payload.adLoadedData.skipOffset>=0)return!1;const i=this.rp.getAdDuration();switch(this.Qf.adSkippability){case h.ProtoPlayerAdSkippability.IfLongerThan31Sec:if((t.payload.adSkipMode===h.ProtoAdSkipMode.IfLongerThan31Sec||t.payload.adSkipMode===h.ProtoAdSkipMode.Never)&&(i<ze.d||!i))return!1;break;case h.ProtoPlayerAdSkippability.NoRestrictions:if(t.payload.adSkipMode===h.ProtoAdSkipMode.Never||t.payload.adSkipMode===h.ProtoAdSkipMode.IfLongerThan31Sec&&(i<ze.d||!i))return!1}return!0}fp(t){this.Zf.filter(i=>i!==t).forEach(t=>{Object(A.a)(t,d.h.Hide)})}pp(){this.Zf.forEach(t=>{Object(A.I)(t,d.h.Hide)})}updateFilterConfig(t){this.rp.updateFilterConfig(t)}bp(){this.np=!1,this.lp.hideAdLoadingScreen()}vp(){let t;Object.keys(w.b).forEach(i=>{this.subscribe(w.b[i],this.rp,e=>{switch(t=!1,w.b[i]){case w.b.AdLoaded:const s=e;this.sp=this.dp(e),this.sp&&(s.payload.adLoadedData.skipOffset=this.Qf.skipAdAfter);break;case w.b.AdPaused:this.up(h.ProtoAdClickTypeEnum.PauseClick),this.lp.changeState(q.PausedState);break;case w.b.AdPlaying:this.up(h.ProtoAdClickTypeEnum.PlayClick),this.lp.changeState(q.PlayingState);break;case w.b.AdImpression:const n=e;n.payload.adDuration=this.rp.getAdDuration(),this.firstAdShown=!0,this.Ur=!0,this.lp.updateDuration(n.payload.adDuration),this.lp.changeState(q.PlayingState),this.gp=n.payload.clickThroughUrl,this.sp&&this.cp(),this.fp(n.payload.selectedAdSlot);break;case w.b.AdSkipped:this.up(h.ProtoAdClickTypeEnum.AdSkipClick),this.pp(),t=!0;break;case w.b.AdStopped:case w.b.AdError:t=!0,this.pp();break;case w.b.AdClickThru:this.up(h.ProtoAdClickTypeEnum.AdClickThrough)}this.ep&&this.mediator.publish(this,w.b[i],e),this.ep=!0,t&&(this.Ur=!1),w.b[i]===w.b.AdImpression&&(this.Yf.getTotalNumberOfSlots()>1?this.lp.addPodAdMarker(this.Yf.getCurrentSlotIndex(),this.Yf.getTotalNumberOfSlots()):this.lp.removeAddPodAdMarker())})}),this.subscribe(j[j.Volume],this.lp,({payload:t})=>{this.setVolume(t),this.up(h.ProtoAdClickTypeEnum.VolumeClick)}),this.subscribe(j[j.Play],this.lp,()=>{this.play()}),this.subscribe(j[j.Pause],this.lp,()=>{this.pause()}),this.subscribe(j[j.Close],this.lp,()=>{this.mediator.publish(this,c.a.UserInteraction,{payload:{playback:!1}}),this.mediator.publish(this,j[j.Close])}),this.subscribe(j[j.Mute],this.lp,()=>{this.setVolume(0),this.up(h.ProtoAdClickTypeEnum.MuteClick)}),this.subscribe(j[j.Unmute],this.lp,()=>{this.setVolume(1),this.up(h.ProtoAdClickTypeEnum.UnmuteClick)}),this.subscribe(L.DetachedFromDom,this.rp,()=>{this.mediator.publish(this,E.DetachedFromDom)})}mp(t){this.Jf.appendChild(t)}yp(t=""){return this.Kf.services.GlobalDomUtilsService.createElementByString(`<div class= "cnx-ad-container cnx-full-height ${t}"></div>`)}xp(){this.op=this.yp(),this.mp(this.op),this.Zf.push(this.op)}wp(){this.lp=new Fe(this,this.Kf.services.GlobalDomUtilsService,this.Jf,(new qe).template),this.lp.hide()}start(t,i,e){try{this.wp(),this.xp(),this.ap(t,i,e),this.setVolume(e),this.vp()}catch(t){Object(n.a)({callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL,exception:t.message,message:"adhandler_start"})}}getVolume(){return this.tp}hide(){Object(A.I)(this.Jf,d.g.Ad,d.g.AdOverlayType),this.lp.hide()}show(){const t=[d.g.Ad];this.rp.getCurrentAdType()===h.ProtoAdType.Overlay&&t.push(d.g.AdOverlayType),Object(A.a)(this.Jf,...t),this.lp.show(),this.lp.updateVolume(this.tp),this.bp()}setVolume(t){this.tp=t,this.rp.setAdVolume(t),this.lp&&this.lp.updateVolume(t),this.mediator.publish(this,c.a.UserInteraction,{payload:{volume:!0}}),this.mediator.publish(this,j[j.Volume],{payload:{volume:t}})}resizeAd(t,i,e,s=[]){const n=s;n.push({container:this.op,width:t,height:i,type:h.ProtoAdType.Video}),this.rp.resizeAd(t,i,e,n),this.mediator.publish(this,E.AdSlotResized,{payload:{width:t,height:i}})}adStateChange(t,i){this.rp.onAdStateChange(t,i)}contentChanged(){this.rp.onContentChange()}get inImpression(){return this.Ur}get inAdPodLoadingState(){return this.np}play(){this.rp.resumeAd(),this.mediator.publish(this,c.a.UserInteraction,{payload:{playback:!0}})}pause(){this.rp.pauseAd(),this.mediator.publish(this,c.a.UserInteraction,{payload:{playback:!1}})}stopAd(){const t=()=>{this.mediator.publish(this,w.b.AdStopped),this.ep=!1};this.rp&&this.inImpression?(t(),this.rp.stopAd()):this.inAdPodLoadingState&&t()}skipAd(){this.rp&&this.inImpression?this.rp.skipAd():this.np&&(this.mediator.publish(this,w.b.AdSkipped),this.bp())}userInteraction(t){this.rp.userInteraction(t)}enableAds(){this.rp.enableAds()}enterAdPodLoadingState(){this.np=!0,this.lp.showAdLoadingScreen(this.kp,this.gp,this.Yf.getNextSlotIndex(),this.Yf.getTotalNumberOfSlots())}setAdLoadingBackgroundUrl(t){this.kp=t}updatePodRemainingTime(t){this.rp.updatePodRemainingTime(t)}newAdOpportunity(){this.rp.newAdOpportunity()}disableAds(){this.rp.disableAds()}destroy(){this.rp.disableAds(),this.lp.destroy(),this.rp.destroy()}}var Ge,Qe=e(6),Je=e(29);!function(t){t.Small="0",t.Medium="1",t.Large="2"}(Ge||(Ge={}));class Xe{constructor(t,i,e,s,n,r,h,a){this.mediator=t,this.Sp=i,this.Op=e,this.Wn=s,this.Yf=n,this._p=r,this.jp=h,this.Ap=a,this.Tp=[],this.Cp=[],this.Pp=!1,this.Mp=!0,this.Ep={small:76800,large:248832},this.Lp={small:4e4,large:76800},this.Rp={},this.Op.currentAdSlot=e.currentAdSlot,this.Dp(this.Op.currentAdSlot)&&this.Bp(),this.Rp.auctionPhase=!1,this.$p=n.getMaxAdSlotDuration(),this.Fp=n.getMaxAdSlotPossibleDuration(),this.Vp(),this.Up(this.Sp)}Np(t,i){const e=t*i;return this.Wn?this.Hp(e,this.Lp):this.Hp(e,this.Ep)}Hp(t,i){return t<i.small?Ge.Small:t<i.large?Ge.Medium:Ge.Large}Vp(){this.Sp.forEach(t=>{this.qp(t)})}qp(t){this.Cp.some(i=>Object(l.b)(i.restriction,t.restrictions))||this.Cp.push({restriction:t.restrictions,called:!1})}Up(t){this.Tp=t.filter(t=>{const{width:i,height:e}=this.jp.getSlotForAd(t.getAdType()),s=this.Np(i,e);return!t.getPlayerSize()||-1!==s.indexOf(t.getPlayerSize())})}zp(t){let i=0;this.Tp.filter(t=>t.status===Qe.b.Ready).forEach(e=>{Object(l.b)(e.restrictions,t.restrictions)&&i++}),0===i&&this.Cp.forEach(i=>{Object(l.b)(i.restriction,t.restrictions)&&(i.called=!1)})}Wp(t){this.Cp.forEach(i=>{Object(l.b)(i.restriction,t.restrictions)&&(i.called=!0)})}Gp(t){return this.jp.getSlotForAd(t.getAdType())}Qp(t){const i=t.getAdPodTargeting();if(!i)return!0;const e=this.Yf.getNextSlotIndex();let s=!0;switch(i.adSlotTargetingType){case h.ProtoLineItemAdSlotTargetingTypeEnum.Interval:(e<i.adSlotPositions[0]||e>i.adSlotPositions[1])&&(s=!1);break;case h.ProtoLineItemAdSlotTargetingTypeEnum.SpecificSlots:-1===t.getAdPodTargeting().adSlotPositions.indexOf(e)&&(s=!1)}return i.targetingType===h.ProtoLineItemTargetingTypeEnum.Except&&(s=!s),s}Jp(t){let i=!0;return this.Yf.isCurrentBreakInPod()&&(i=this.Qp(t)),this.Rp.auctionPhase&&(i=!1),i}Xp(t,i){if(Object(u.h)(i.items)&&Array.isArray(t)){const e=Object(u.b)(t,i.items).length;return i.choiceCriteria===h.ProtoChoiceCriteriaEnum.Only?e>0:0===e}const e=Object(u.g)(t,i.items);return i.choiceCriteria===h.ProtoChoiceCriteriaEnum.Only?e:!e}Yp(t){const i=this.Yf.isCurrentBreakInPod();switch(t.adBreakTypeEnum){case h.ProtoLineItemAdBreakTypeEnum.All:return!0;case h.ProtoLineItemAdBreakTypeEnum.AdPod:return i;case h.ProtoLineItemAdBreakTypeEnum.SingleAd:return!i}}Kp(t,i){let e=!0;return Object.keys(t).forEach(s=>{switch(void 0===this.Op.currentAdSlot&&(e=!1),s){case"allowedAdSlots":t.allowedAdSlots.some(t=>!!K(t.adRollType,this.Op.currentAdSlot)&&this.Yp(t))||(e=!1);break;case"minimumSizes":break;case"viewability":!i.viewability&&t.viewability&&(e=!1);break;case"mediaKeywords":this.Xp(this.Op.mediaKeywords,t.mediaKeywords)||(e=!1);break;case"mediaLanguage":this.Xp(this.Op.mediaLanguage,t.mediaLanguage)||(e=!1);break;case"mediaId":this.Xp(this.Op.mediaId,t.mediaId)||(e=!1);break;default:t[s]!==this.Op[s]&&(e=!1)}}),e}Zp(t){t.status=Qe.b.Error,t.setStatusCappedIfNeeded(),(t.isRtb||t.isHeaderBidder)&&(this.removeAdSource(t),this.mediator.publish(this,Qe.c[Qe.c.ExternalRtbError],{payload:t}))}tb(t){switch(this._p){case h.ProtoPlayerAdSkippability.IfLongerThan31Sec:if(t.getAdSkipMode()===h.ProtoAdSkipMode.Never&&t.duration>ze.d*je.f)return!1;break;case h.ProtoPlayerAdSkippability.Always:if(t.getAdSkipMode()===h.ProtoAdSkipMode.IfLongerThan31Sec&&t.duration&&t.duration<ze.d*je.f)return!1}return!0}ib(t){if(!this.Pp||!this.Mp){const i=this.eb(t);if(i){this.Pp=!0;const e=this.jp.getSlotForAd(i.getAdType());i.requestBid(e.width,e.height).then(()=>{try{this.Pp=!1;let t=!1;this.sb(i)||(t=!0,this.Zp(i)),t||(this.Vp(),this.Wp(i)),this.rb()}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"AdManager_Algo_callAdSources_onBid",exception:t.message,callStack:t.stack})}}).catch(e=>{this.Pp=!1,this.zp(i),this.ib(t)})}else try{this.hb(),!this.ab()&&this.ob()&&this.run()}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,exception:t.message,callStack:t.stack,message:"AdManager_Algo_callAdSources_onReset"})}}}eb(t){this.cb();const i=this.Cp.filter(t=>!t.called);try{const t=this.Sp.filter(t=>t.status===Qe.b.Ready);this.Sp.filter(t=>t.isRtb).filter(t=>t.status===Qe.b.Idle).forEach(i=>{t.forEach(t=>{Object(l.b)(i.restrictions,t.restrictions)&&i.yoScore>t.yoScore&&Object(n.a)({message:"AdManager_Algo_getAdSource_miss_rtb_call",exception:`id:${i.advertiserLineItemId}_allowed:${this.Kp(i.restrictions,this.Gp(i))}`,level:h.ProtoLoggingLevelEnum.WARNING})})})}catch(t){Object(n.a)({message:"AdManager_Algo_getAdSource_rtb_check",level:h.ProtoLoggingLevelEnum.WARNING})}return t.filter(t=>t.status===Qe.b.Idle).filter(t=>i.some(i=>Object(l.b)(i.restriction,t.restrictions))).filter(t=>t.canBeCalled()).find(t=>this.Kp(t.restrictions,this.Gp(t)))}sb(t){return this.lb(t)&&this.tb(t)}lb(t){return!t.duration||0===this.Fp||t.duration<=this.Fp}rb(){if(this.Mp)return;let t;if(this.Tp.some(t=>t.status===Qe.b.InImpression))return;this.Tp.forEach(t=>{this.sb(t)||t.status!==Qe.b.Ready||this.Zp(t)});const i=this.Tp.filter(t=>t.status===Qe.b.Ready).filter(t=>!t.duration||!this.$p||t.duration<=this.$p);let e=[...i];if(this.Dp(this.Op.currentAdSlot)&&(e=i.filter(t=>0!==t.winTime&&t.winTime<=this.ub),!Object(u.h)(e)&&Object(u.h)(i))){let t=[],s=[];i.forEach(i=>{0===i.winTime?t.push(i):s.push(i)}),t=t.sort((t,i)=>i.yoScore-t.yoScore),s=s.sort((t,i)=>t.winTime===i.winTime?i.yoScore-t.yoScore:t.winTime-i.winTime),e=[...s,...t]}t=e.filter(t=>this.Jp(t)).find(t=>this.Kp(t.restrictions,this.Gp(t)));const s=this.Sp.find(t=>t.status===Qe.b.InWin),n=this.Sp.find(t=>t.status===Qe.b.Loading);t?s?t.yoScore>s.yoScore&&(this.mediator.publish(this,Qe.c[Qe.c.AdSourceSelected],{payload:t}),f.a.addWorkList(this.Tp)):(this.mediator.publish(this,Qe.c[Qe.c.AdSourceSelected],{payload:t}),f.a.addWorkList(this.Tp)):s||n||t||this.ib(this.Tp)}Dp(t){return t===h.ProtoAdSlotsEnum.PreRoll&&0!==this.Ap&&1===Je.a.clientAb0}ob(){return this.Tp.filter(t=>t.status===Qe.b.Idle).some(t=>this.Kp(t.restrictions,this.Gp(t))&&t.canBeCalled())}ab(){return this.Tp.every(function(t){return t.status===Qe.b.Capped||t.status===Qe.b.Ready})}cb(){this.Cp.filter(t=>t.called).forEach(t=>{this.Sp.filter(i=>{Object(l.b)(i.restrictions,t.restriction)}).some(t=>t.status===Qe.b.Ready)||(t.called=!1)})}Bp(){this.fb=Date.now(),this.ub=this.Ap}run(){this.rb()}updateState(t){this.Dp(t.currentAdSlot)&&this.Bp();const i=Object.assign({},this.Op);this.Op=Object.assign(Object.assign({},this.Op),t),Object(l.b)(i,this.Op)||(this.rb(),f.a.addCustomHistoryLine("updateState",{currentRestriction:this.Op}))}startAuctionPhase(){this.Rp.auctionPhase=!0}endAuctionPhase(){this.Rp.auctionPhase=!1,this.run()}get inAuctionPhase(){return this.Rp.auctionPhase}reset(){this.hb(),this.run()}hb(){this.Tp.forEach(t=>{t.resetAdSourceStatus()&&this.zp(t)})}addAdSource(t){this.Sp.forEach(t=>{}),f.a.addAdSource(t);const i=this.Sp.length;let e=i;for(let s=0;s<i;s++)if(this.Sp[s].yoScore<=t.yoScore){e=s;break}t.isTam&&(this.Sp=this.Sp.filter(t=>!t.isTam)),this.Sp.splice(e,0,t),this.Vp(),this.Up(this.Sp),f.a.setAdListChange(this.Sp,t),this.rb()}removeAdSource(t){f.a.removeAdSource(t),this.Sp=this.Sp.filter(i=>t!==i),this.Up(this.Sp),f.a.setAdListChange(this.Sp,t)}changeDimensions(){this.Up(this.Sp),this.rb()}changeMaxAdSlotDuration(t){t!==this.$p&&(this.$p=t,this.rb())}updatePodRemainingTime(t){t<=0||t<this.$p&&(this.$p=t,this.rb())}onViewabilityChanged(){this.rb()}resetCallRestrictionForList(t){Object(u.h)(t)&&(t.forEach(t=>{this.zp(t)}),this.run())}onTickCallback(){if(this.Dp(this.Op.currentAdSlot)){const t=Date.now()-this.fb;this.ub=this.Ap-t}let t=!1;this.Tp.forEach(i=>{i.updateInTimeoutRestriction()&&(t=!0)}),t&&this.rb()}disableAds(t){this.Mp=t}onDestroyAd(t){this.zp(t)}}var Ye,Ke,Ze=e(22);!function(t){function i(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):isFinite(Date.parse(t))?new Date(t):"string"==typeof t?t.trim():t}t.JXONTree=function t(e){let s=0,n="";if(this.keyAttributes||(this.keyAttributes={}),e.hasChildNodes()){for(let i,s,r,h=0;h<e.childNodes.length;h++)((i=e.childNodes.item(h)).nodeType-1|1)===Node.TEXT_NODE?n+=i.nodeType===Node.TEXT_NODE?i.nodeValue.trim():i.nodeValue:1!==i.nodeType||i.prefix||(s=i.nodeName.toLowerCase(),r=new t(i),this.hasOwnProperty(s)?(this[s].constructor!==Array&&(this[s]=[this[s]]),this[s].push(r)):this[s]=r);this.keyValue=n?i(n):null}if(void 0===e.hasAttributes?e.attributes.length>0:e.hasAttributes()){let t;for(;s<e.attributes.length;s++)t=e.attributes.item(s),this.keyAttributes[t.name.toLowerCase()]=i(t.value.trim())}},t.getKeyValue=function(t){if(t&&t.keyValue)return t.keyValue},t.decodeXMLText=function(t){if("string"==typeof t)return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}}(Ye||(Ye={}));class ts{constructor(t){this.pb=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],this.bb="VPAID",this.delivery=void 0,this.type=void 0,this.width=void 0,this.height=void 0,this.codec=void 0,this.id=void 0,this.bitrate=void 0,this.minBitrate=void 0,this.maxBitrate=void 0,this.scalable=void 0,this.maintainAspectRatio=void 0,this.apiFramework=void 0,this.src=void 0,this.delivery=t.keyAttributes.delivery,this.type=t.keyAttributes.type,this.width=t.keyAttributes.width,this.height=t.keyAttributes.height,this.codec=t.keyAttributes.codec,this.id=t.keyAttributes.id,this.bitrate=t.keyAttributes.bitrate,this.minBitrate=t.keyAttributes.minbitrate,this.maxBitrate=t.keyAttributes.maxbitrate,this.scalable=t.keyAttributes.scalable,this.maintainAspectRatio=t.keyAttributes.maintainaspectratio,this.apiFramework=t.keyAttributes.apiframework,this.src=Ye.getKeyValue(t)}isSupported(){return!("application/x-shockwave-flash"===this.type||"video/x-flv"===this.type)}getMediaFileType(){return this.apiFramework===this.bb||Object(u.g)(this.type,this.pb)?Qe.j.Javascript:Qe.j.Video}}class is{constructor(t,i){this.name=t.keyAttributes.event,this.uri=Ye.getKeyValue(t),"progress"===this.name&&(this.offset=Object(Ht.e)(t.keyAttributes.offset,i))}}class es{constructor(t){this.clickThrough=void 0,this.clickTrackings=[],this.customClicks=[],this.clickThrough=Ye.getKeyValue(t.clickthrough),this.clickTrackings=this.vb(Object(u.l)(t.clicktracking)),this.customClicks=this.vb(Object(u.l)(t.customclick))}vb(t){const i=[];return void 0!==t[0]&&t.forEach(t=>{i.push(Ye.getKeyValue(t))}),i}}class ss{constructor(t){this.duration=void 0,this.mediaFiles=[],this.trackingEvents=[],this.skipoffset=void 0,this.videoClicks=void 0,this.duration=Object(Ht.a)(Ye.getKeyValue(t.duration)),this.skipoffset=Object(Ht.e)(t.keyAttributes.skipoffset,this.duration),t.mediafiles&&(this.mediaFiles=this.gb(Object(u.l)(t.mediafiles.mediafile))),t.trackingevents&&(this.trackingEvents=this.mb(Object(u.l)(t.trackingevents.tracking))),t.videoclicks&&(this.videoClicks=new es(t.videoclicks)),t.adparameters&&(this.adParameters=Ye.getKeyValue(t.adparameters),t.adparameters["@xmlEncoded"]&&(this.adParameters=Ye.decodeXMLText(this.adParameters)))}mb(t){const i=[];return void 0!==t[0]&&t.forEach(t=>{i.push(new is(t,this.duration))}),i}gb(t){const i=[];return void 0!==t[0]&&t.forEach(t=>{const e=new ts(t);e.isSupported()&&i.push(e)}),i}isSupported(){return!0}}class ns{constructor(t){this.id=void 0,this.sequence=void 0,this.adId=void 0,this.linear=void 0,this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,this.adId=t.keyAttributes.adid,t.linear&&(this.linear=new ss(t.linear))}isSupported(){return!0}}!function(t){function i(t){const i=[];return void 0!==t[0]&&t.forEach(t=>{i.push(Ye.getKeyValue(t))}),i}t.parseImpressions=function(t){return i(t)},t.parseCretives=function(t){const i=[];return t.forEach(t=>{i.push(new ns(t))}),i},t.parseErrors=function(t){return i(t)}}(Ke||(Ke={}));class rs{constructor(t){this.description=void 0,this.advertiser=void 0,this.surveys=void 0,this.errors=void 0,this.pricing=void 0,this.extensions=void 0,this.adTitle=Ye.getKeyValue(t.adtitle),this.adSystem=Ye.getKeyValue(t.adsystem),this.impressions=Ke.parseImpressions(Object(u.l)(t.impression)),this.creatives=Ke.parseCretives(Object(u.l)(t.creatives.creative)),this.description=Ye.getKeyValue(t.description),this.advertiser=Ye.getKeyValue(t.advertiser),this.surveys=Ye.getKeyValue(t.survey),this.errors=Ke.parseErrors(Object(u.l)(t.error)),this.pricing=Ye.getKeyValue(t.pricing),this.extensions=Ye.getKeyValue(t.extensions)}isSupported(){return!0}}class hs{constructor(t){this.adSystem=void 0,this.impressions=[],this.VASTAdTagURI=void 0,this.creatives=[],this.errors=void 0,this.extensions=void 0,this.fallowAdditionalWrappers=void 0,this.allowMultipleAds=void 0,this.fallbackOnNoAd=void 0,this.adSystem=Ye.getKeyValue(t.adSystem),this.impressions=Ke.parseImpressions(Object(u.l)(t.impression)),this.VASTAdTagURI=Ye.getKeyValue(t.vastadtaguri),this.creatives=t.creatives.creative?Ke.parseCretives(Object(u.l)(t.creatives.creative)):[],this.errors=Ke.parseErrors(Object(u.l)(t.error)),this.extensions=t.extensions,this.fallowAdditionalWrappers=!t.keyAttributes.followadditionalwrappers||t.keyAttributes.followadditionalwrappers,this.allowMultipleAds=t.keyAttributes.allowmultipleads,this.fallbackOnNoAd=t.keyAttributes.fallbackonnoad}}class as{constructor(t){this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,t.inline?this.inLine=new rs(t.inline):t.wrapper&&(this.wrapper=new hs(t.wrapper))}isSupported(){return!0}}class os{constructor(){this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.impression=[],this.complete=[],this.mute=[],this.unmute=[],this.pause=[],this.rewind=[],this.resume=[],this.fullscreen=[],this.exitFullscreen=[],this.expand=[],this.collapse=[],this.close=[],this.closeLinear=[],this.acceptInvitationLinear=[],this.acceptInvitation=[],this.skip=[],this.progress=[],this.playerExpand=[],this.playerCollapse=[],this.adExpand=[],this.adCollapse=[],this.fullScreen=[],this.canPlayThrough=[],this.stalled=[],this.waiting=[],this.otherAdInteraction=[]}}class cs{constructor(t,i){this.clickThrough=void 0,this.clickTrackings=[],this.customClicks=[],this.duration=void 0,this.errorUrls=[],this.impressions=[],this.mediaFiles=[],this.skipoffset=void 0,this.trackingEvents=new os,this.adTitle=void 0,this.adParameters=void 0,this.sdkUrl=i,t.forEach(t=>{t.inLine?this.yb(t.inLine):this.xb(t.wrapper)})}yb(t){this.adTitle=t.adTitle,this.wb(t.errors),this.kb(t.impressions),this.Sb(t.creatives)}xb(t){this.wb(t.errors),this.kb(t.impressions),this.Sb(t.creatives)}Ob(t){this.duration=t.duration,this._b(t.trackingEvents),this.jb(t.videoClicks),this.Ab(t.mediaFiles),this.Tb(t.skipoffset),this.Cb(t.adParameters)}Cb(t){this.adParameters=t}Tb(t){this.skipoffset=t}Ab(t){this.mediaFiles=[...this.mediaFiles,...t]}jb(t){t&&(this.Ib(t.clickThrough),this.Pb(t.clickTrackings),this.Mb(t.customClicks))}Pb(t){this.clickTrackings=[...this.clickTrackings,...t]}Mb(t){this.customClicks=[...this.customClicks,...t]}Ib(t){this.clickThrough=t}_b(t){t.forEach(t=>{try{this.trackingEvents[t.name].push(t.uri)}catch(i){Object(n.a)({message:"AdManager_VastResponse_tracker",exception:`${t.name}`,callStack:i.stack,level:h.ProtoLoggingLevelEnum.INFO})}})}Sb(t){t.forEach(t=>{t.linear&&this.Ob(t.linear)})}wb(t){this.errorUrls=[...this.errorUrls,...t]}kb(t){this.impressions=[...this.impressions,...t]}}function ls(t,i){const e=t.sort((t,i)=>t.width===i.width?t.bitrate-i.bitrate:t.width-i.width);for(let t=0;t<e.length;t++)if(e[t].width>=i)return e[t-1]||e[t];return e[e.length-1]}function us(t){let i=null;return Object.keys(Qe.f).forEach(e=>{-1!==t.indexOf(Qe.f[e])&&(i=Qe.f[e])}),i}class ds{constructor(t=!0){this.Eb=t,this.Lb=2,this.Rb=10}Db(t,i){return new Promise((e,s)=>{Ze.a.fetchXMLRequest(t,this.Eb).then(t=>{Promise.resolve(this.buildAd(t,i)).then(t=>{e(t)}).catch(()=>{s(h.ConnatixNoBidReasonEnum.CsInvalidResponse)})}).catch(()=>{s(h.ConnatixNoBidReasonEnum.CsRequestException)})})}Bb(t){try{return(new DOMParser).parseFromString(t,"application/xml")}catch(i){const e="AdManager_VastClient_DOMParser";throw Object(n.a)({message:e,exception:`${t}`,callStack:i.stack,level:h.ProtoLoggingLevelEnum.FATAL}),new Error(e)}}$b(t){const i=t.wrapper;if(!t.inLine&&!i)throw new Error("on VASTClient.validateAd, no wrapper nor inline elements found on the Ad");if(i&&!i.VASTAdTagURI)throw new Error("on VASTClient.validateAd, missing VASTAdTagURI in wrapper")}Fb(t,i){let e;try{return 0!==(e=new cs(t,i)).mediaFiles.length||e.sdkUrl?Promise.resolve(e):Promise.reject("The Vast response doesn't contain media files")}catch(t){return Promise.reject(t)}}Vb(t){const i=parseInt(t.keyAttributes.version,10);if(!t.ad)throw new Error("on VASTClient.getVASTAd.validateVASTTree, no Ad in VAST tree");if(i&&i<this.Lb)throw new Error("on VASTClient.getVASTAd.validateVASTTree, not supported VAST version")}getVastResponse(t){return this.Db(t,[])}buildAd(t,i=[]){if(!t||0===t.length)return Promise.reject(h.ConnatixNoBidReasonEnum.CsEmptyResponse);try{const e=this.Bb(t),s=new Ye.JXONTree(e.documentElement);this.Vb(s);const n=new as(s.ad);if(this.$b(n),i.push(n),i.length>=this.Rb)return Promise.reject("Wrapper limit reached...");if(n.wrapper){return us(n.wrapper.VASTAdTagURI)?this.Fb(i,n.wrapper.VASTAdTagURI):this.Db(n.wrapper.VASTAdTagURI,i)}return this.Fb(i)}catch(t){return Promise.reject(h.ConnatixNoBidReasonEnum.CsInvalidResponse)}}}const fs=500;class ps extends o.a{constructor(t,i,e,s){super(),this.mediator=t,this.adData=i,this.globalDomUtils=e,this.adResponse=s,this.Ub=Qe.h,this.impressionTimeoutId=null,this.Nb=null,this.Hb=null,this.Ur=!1,this.qb=(t,i)=>{if(this.zb(t))switch(t){case w.b.AdError:this.onVpaidAdError(i);break;case w.b.AdStopped:this.onVpaidAdStopped(i);break;case w.b.AdSkipped:this.Wb(i);break;case w.b.AdImpression:this.onVpaidAdImpression(i);break;case w.b.AdLoaded:this.onVpaidAdLoaded(i);break;default:this.onVpaidDefault(t,i)}else this.mediator.publish(this,w.b.AdError,{payload:Qe.e.InvalidVpaidEvent})}}get adIntegrator(){return this.Gb}set adIntegrator(t){this.Gb=t}vl(t){Object.keys(w.b).forEach(i=>{const e=w.b[i];this.subscribe(e,t,t=>{this.qb(e,t.payload)})})}onVpaidDefault(t,i){this.mediator.publish(this,t,{payload:i})}onVpaidAdError(t){this.Qb(),this.onVpaidDefault(w.b.AdError,t)}onVpaidAdLoaded(t){this.onVpaidDefault(w.b.AdLoaded,t)}onVpaidAdStopped(t){this.Qb(),this.onVpaidDefault(w.b.AdStopped,t)}Wb(t){this.Qb(),this.onVpaidDefault(w.b.AdSkipped,t)}onVpaidAdImpression(t){this.Ur=!0,this.clearImpressionTimeout(),this.onVpaidDefault(w.b.AdImpression,t)}impressionTimeoutHandler(){let t=`${Qe.e.Timeout}`;try{if(this.adIntegrator.type===h.ProtoAdsourceTypeEnum.VastMedia){const i=this.adIntegrator.getMediaFile(),e=this.adIntegrator.getTag();i.inDom=this.globalDomUtils.isDetachedFromDOM(e),t+=`_${JSON.stringify(i)}`}}catch(i){t+="_error_"+i.message}this.mediator.publish(this,w.b.AdError,{payload:t})}clearImpressionTimeout(){clearTimeout(this.impressionTimeoutId),this.impressionTimeoutId=null}Jb(){clearTimeout(this.Nb),this.Nb=null}Xb(){clearTimeout(this.Hb),this.Hb=null}Qb(){this.clearImpressionTimeout(),this.Jb(),this.Xb()}zb(t){return!(!this.Ur&&(t===w.b.AdStopped||t===w.b.AdSkipped))}initAd(t,i,e,s,r,a){try{this.adIntegrator=this.createIntegrator(),this.vl(this.adIntegrator),this.impressionTimeoutId=setTimeout(()=>{this.impressionTimeoutHandler()},this.Ub),this.adIntegrator.initAd(t,i,e,s,this.adResponse?this.adResponse.adParameters:{},a)}catch(t){let i="not_selected";this.adIntegrator&&(i=this.adIntegrator.getMediaFile()),Object(n.a)({message:"AdManager_AdSourceBase_init_ad",exception:`id:${this.adData.advertiserLineItemId}__mediaFile:${i}  ${t.message}`,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}handshakeVersion(t){return"2.0"}startAd(){try{this.adIntegrator.startAd()}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"AdManager_AdSourceBase_startAd_integrator",exception:t.message,callStack:t.stack})}}stopAd(){clearTimeout(this.Nb),this.Nb=setTimeout(()=>{this.onVpaidAdStopped()},fs),this.adIntegrator&&this.adIntegrator.isReady()&&this.adIntegrator.stopAd()}resizeAd(t,i,e){this.adIntegrator&&this.adIntegrator.isReady()&&this.adIntegrator.resizeAd(t,i,e)}pauseAd(){this.adIntegrator&&this.adIntegrator.isReady()&&this.adIntegrator.pauseAd()}resumeAd(){this.adIntegrator&&this.adIntegrator.isReady()&&this.adIntegrator.resumeAd()}expandAd(){this.adIntegrator&&this.adIntegrator.isReady()&&this.adIntegrator.expandAd()}collapseAd(){this.adIntegrator&&this.adIntegrator.isReady()&&this.adIntegrator.collapseAd()}skipAd(){clearTimeout(this.Hb),this.Hb=setTimeout(()=>{this.Wb()},fs),this.adIntegrator&&this.adIntegrator.isReady()&&this.adIntegrator.skipAd()}getAdRemainingTime(){if(this.adIntegrator&&this.adIntegrator.isReady())return this.adIntegrator.getAdRemainingTime()}getAdDuration(){if(this.adIntegrator&&this.adIntegrator.isReady())return this.adIntegrator.getAdDuration()}getAdVolume(){if(this.adIntegrator&&this.adIntegrator.isReady())return this.adIntegrator.getAdVolume()}setAdVolume(t){this.adIntegrator&&this.adIntegrator.isReady()&&this.adIntegrator.setAdVolume(t)}destroyAd(){this.Ur=!1,this.Qb(),this.unsubscribeAll(this.adIntegrator);try{this.adIntegrator.destroyAd()}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"AdManager_AdSourceBase_destroyAd_integrator",exception:t.message,callStack:t.stack,logJsonState:!0})}this.adIntegrator=null}getVastMediaType(){return this.adIntegrator?this.adIntegrator.getVastMediaType():""}getClickThroughUrl(){if(this.adIntegrator)return this.adIntegrator.getClickThroughUrl()}getIntegratorType(){return this.adIntegrator?this.adIntegrator.type:h.ProtoAdsourceTypeEnum.Unknown}}var bs,vs;!function(t){t.Timeout="timeout",t.VpaidError="vpaidError",t.ImaError="imaError",t.SpotxError="spotxError",t.ImaManagerInit="imaManagerInit",t.SpotXAdOSInit="spotxAdOSInit",t.SpotXLoadAd="spotxLoadAd",t.VastVideoTag="vastVideoTag",t.AdStopped="adStopped",t.MuteEnforce="muteEnforce",t.VpaidOnLoad="vpaidOnLoad",t.VpaidEnforcements="vpaidEnforcements",t.AolImpFunc="aolCustom"}(bs||(bs={})),function(t){t.errorIframe="Error creating iframe"}(vs||(vs={}));const gs="IframeLoader";class ms{constructor(t,i){this.tr=t,this.Yb=i}Kb(t,i,e){let s=!1;return n=>{if(n.contentWindow&&!s)return s=!0,this.Zb(n,this.tv(t,i),e)?void 0:(n&&n.parentNode&&n.parentNode.removeChild(n),null)}}ev(t,i,e,s,n){return this.sv(t,this.Kb(i,e,s),n)}sv(t,i,e){const s=this.tr.createElement("iframe",e);return s.allow="autoplay",s.src="javascript:false",s.srcdoc="",s.width="100%",s.height="100%",s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.margin="0px",s.style.padding="0px",s.style.border="0px",s.style.width="100%",s.style.height="100%",s.setAttribute("SCROLLING","NO"),s.onload=()=>{i(s)},t.appendChild(s),i(s),s}Zb(t,i,e){try{const s=t.contentWindow&&t.contentWindow.document;s.open(),s.write(i),e(t)}catch(i){return this.tr.isDetachedFromDOM(t)?Object(n.a)({message:"iframeLoader_(inDom_false)",exception:i.message,callStack:i.stack,level:h.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!1,throttle:1}):Object(n.a)({message:"iframeLoader_(inDom_true)",exception:i.message,level:h.ProtoLoggingLevelEnum.WARNING,logJsonState:!0,sendMaxLog:!1,throttle:1}),!1}return!0}tv(t,i){return Object.keys(i).forEach(function(e){let s;s="object"==typeof s?JSON.stringify(i[e]):i[e],t=t.replace(new RegExp(`{{${e}}}`,"g"),s)}),t}loadIframe(t){const i='<!DOCTYPE html><html lang="en"><head>'+(t.customHead?t.customHead:"")+'<meta charset="UTF-8"></head><body style="margin:0;padding:0">'+(t.customHtml?t.customHtml:"")+'<script type="text/javascript">window.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'*\');<\/script></body></html>',e="cnx-iframe_"+Object(ht.c)();return new Promise((s,n)=>{this.nv=this.ev(t.container,i,{iframeID:e},t=>{null===t&&n(vs.errorIframe);const i=r=>{let h;try{h=JSON.parse(r.data)}catch(t){return}h.id===e&&(t.contentWindow?(t.contentWindow.document.close(),t.contentWindow.removeEventListener("message",i),s({iframe:t})):n("The Iframe is no longer in the DOM"))};t.contentWindow.addEventListener("message",i)},this.Yb),this.Ra=new v(this.nv.contentWindow,`${gs}_${t.customReportingLog.name}`,t.customReportingLog.advertiserLineItemId)})}get iframe(){return this.nv}destroy(){this.Ra.destroy(),this.nv=null}}var ys;!function(t){t.ScriptFailure="ima_script_failure",t.ImaObjectNotFound="no_ima_object_on_window"}(ys||(ys={}));const xs=25;class ws{constructor(t,i,e){this.mediator=t,this.tr=i,this.Hn=e,this.type=h.ProtoAdsourceTypeEnum.Ima,this.rv="//imasdk.googleapis.com/js/sdkloader/ima3.js",this.hv="ima",this.av=null,this.ov=null,this.cv=t=>{this.av=t.getAdsManager(this.lv,{loadVideoTimeout:xs*je.f}),this.av.setVolume(0),this.uv()},this.dv=t=>{let i="";try{i=t.getError().getMessage()+"_"+t.getError().getErrorCode()+"_"+t.getError().getVastErrorCode()+"_"+this.Hn.adTag}catch(t){}this.mediator.publish(this,w.b.AdError,{payload:Qe.e.ImaError+"_"+i})},this.fv=t=>{const i=this.pv.AdEvent.Type;switch(t.type){case i.CLICK:this.mediator.publish(this,w.b.AdClickThru);break;case i.LOADED:this.ov=t.getAd();const e=this.ov?this.ov.getSkipTimeOffset():-1;this.mediator.publish(this,w.b.AdLoaded,{payload:{skipoffset:e}});break;case i.IMPRESSION:this.mediator.publish(this,w.b.AdImpression);break;case i.STARTED:this.mediator.publish(this,w.b.AdStarted),this.mediator.publish(this,w.b.AdVideoStart);break;case i.FIRST_QUARTILE:this.mediator.publish(this,w.b.AdVideoFirstQuartile);break;case i.MIDPOINT:this.mediator.publish(this,w.b.AdVideoMidpoint);break;case i.THIRD_QUARTILE:this.mediator.publish(this,w.b.AdVideoThirdQuartile);break;case i.COMPLETE:this.mediator.publish(this,w.b.AdVideoComplete),this.mediator.publish(this,w.b.AdStopped);break;case i.DURATION_CHANGE:this.mediator.publish(this,w.b.AdDurationChange);break;case i.PAUSED:this.mediator.publish(this,w.b.AdPaused);break;case i.RESUMED:this.mediator.publish(this,w.b.AdPlaying);break;case i.LINEAR_CHANGED:this.mediator.publish(this,w.b.AdLinearChange);break;case i.SKIPPABLE_STATE_CHANGED:this.mediator.publish(this,w.b.AdSkippableStateChange);break;case i.SKIPPED:this.mediator.publish(this,w.b.AdSkipped);break;case i.VOLUME_CHANGED:this.mediator.publish(this,w.b.AdVolumeChange);break;case i.USER_CLOSE:this.mediator.publish(this,w.b.AdUserClose);break;case i.LOG:this.mediator.publish(this,w.b.AdLog)}},e.useIframe?this.bv=new ms(this.tr):this.pv=this.vv(window)}vv(t){return t.google&&t.google.ima}gv(){return this.bv.loadIframe({container:this.mv,customHead:`<script src="${this.rv}"><\/script>`,customReportingLog:{name:"ImaIntegrator",advertiserLineItemId:this.Hn.advertiserLineItemId}}).then(t=>{if(this.yv=t.adContainer||t.iframe.contentWindow.document.body,this.xv=t.iframe,this.pv=this.vv(t.iframe.contentWindow),!this.pv)throw new Error("ima sdk failed loading")}).catch(t=>{throw new Error(`ima sdk load in iframe error ${t}`)})}wv(){return new Promise((t,i)=>{Object(A.A)({src:this.rv},window.document.head,window,()=>{if(this.pv=this.vv(window),this.pv)t();else{Object(ht.l)([95,5])&&Object(n.a)({message:"AdManager_ImaIntegrator_no_image_object_found_after_loading_script",level:h.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1}),i(ys.ImaObjectNotFound)}},()=>{i(ys.ScriptFailure)},1===Object(ht.l)([95,5]),"AdManager_ImaIntegrator_unable_to_insert_ima_sdk_script")})}kv(){this.Sv=new this.pv.AdDisplayContainer(this.yv,this.lv),this.pv.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.Sv.initialize(),this.Ov=new this.pv.AdsLoader(this.Sv),this.Ov.getSettings().setVpaidMode(this.pv.ImaSdkSettings.VpaidMode.INSECURE),this.Ov.addEventListener(this.pv.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.cv),this.Ov.addEventListener(this.pv.AdErrorEvent.Type.AD_ERROR,this.dv),this._v=new this.pv.AdsRequest,this._v.adTagUrl=this.Hn.adTag,this._v.linearAdSlotWidth=this._v.nonLinearAdSlotWidth=this.ic,this._v.linearAdSlotHeight=this._v.nonLinearAdSlotHeight=this.ec,this.Ov.requestAds(this._v)}uv(){this.av.addEventListener(this.pv.AdErrorEvent.Type.AD_ERROR,this.dv),Object.keys(this.pv.AdEvent.Type).forEach(t=>{this.av.addEventListener(this.pv.AdEvent.Type[t],this.fv,!1)});try{this.av.init(this.ic,this.ec,this.jv(this.Av))}catch(t){this.mediator.publish(this,w.b.AdError,{payload:Qe.e.ImaManagerInit})}}jv(t){return t===w.a.Fullscreen?this.pv.ViewMode.FULLSCREEN:this.pv.ViewMode.NORMAL}handshakeVersion(t){return""}initAd(t,i,e,s,n,r){if(this.mv=r.slot,this.lv=r.videoSlot,this.ic=t,this.ec=i,this.Av=e||w.a.Normal,!this.Hn.useIframe&&(this.yv=this.mv,this.pv)){try{this.kv()}catch(t){this.mediator.publish(this,w.b.AdError,{payload:Qe.e.ImaInitSdkError})}return}(this.Hn.useIframe?this.gv():this.wv()).then(()=>this.kv()).catch(t=>{this.mediator.publish(this,w.b.AdError,{payload:t})})}startAd(){this.av.start()}stopAd(){this.av.stop()}resizeAd(t,i,e){this.av.resize(t,i,this.jv(e))}pauseAd(){this.av.pause()}resumeAd(){this.av.resume()}expandAd(){this.av.expand()}collapseAd(){this.av.collapse()}skipAd(){this.av.skip()}getAdRemainingTime(){return this.av.getRemainingTime()}getAdVolume(){return this.av.getVolume()}getAdDuration(){return this.ov.getDuration()}setAdVolume(t){this.av.setVolume(t)}destroyAd(){try{this.Ov&&this.Ov.destroy(),this.av&&this.av.destroy(),this.Sv&&this.Sv.destroy(),this.xv&&(Object(A.a)(this.xv,d.h.DisplayNone),setTimeout(()=>{this.xv.parentNode.removeChild(this.xv)},Qe.g)),this.bv.destroy(),this.bv=null}catch(t){}}isReady(){return!(!this.av||!this.ov)}getMediaFile(){return this.hv}getVastMediaType(){return this.hv}getClickThroughUrl(){}}class ks extends ps{constructor(t,i,e,s){super(t,i,e),this.Tv=s||i.adTag}get adSourceType(){return Qe.a.Ima}onVpaidAdLoaded(t){super.onVpaidAdLoaded(t)}onVpaidAdError(t){super.onVpaidAdError(t)}createIntegrator(){const t={adTag:this.Tv,useIframe:!1,advertiserLineItemId:this.adData.advertiserLineItemId};return new ws(this,this.globalDomUtils,t)}}var Ss,Os,_s=e(27);class js{constructor(t,i,e){this.mediator=t,this.tr=i,this.settings=e,this.type=h.ProtoAdsourceTypeEnum.VastMedia,this.Cv=!1,this.Iv=[{event:w.b.AdVideoStart,position:0},{event:w.b.AdVideoFirstQuartile,position:25},{event:w.b.AdVideoMidpoint,position:50},{event:w.b.AdVideoThirdQuartile,position:75},{event:w.b.AdVideoComplete,position:100}],this.Pv=this.Iv[0],this.Mv=t=>{var i;try{switch(t.type){case N.Canplay:case N.Durationchange:this.Cv||(this.Cv=!0,this.mediator.publish(this,w.b.AdLoaded,{payload:{skipoffset:-1}}));break;case N.Timeupdate:this.mediator.publish(this,w.b.AdRemainingTimeChange,{payload:this.videoSlot.currentTime});const e=tt(0,this.videoSlot.duration,0,100,this.videoSlot.currentTime);if(this.Pv&&e>=this.Pv.position){this.mediator.publish(this,this.Pv.event);const t=this.Pv;this.Pv=this.Iv[this.Iv.indexOf(this.Pv)+1],t.event===w.b.AdVideoComplete&&this.stopAd()}break;case N.Error:this.mediator.publish(this,w.b.AdError,{payload:Qe.e.VastVideoTagEventError.toString()+"_"+(null===(i=this.videoSlot.error)||void 0===i?void 0:i.message)});break;case"click":this.mediator.publish(this,w.b.AdClickThru)}}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,callStack:t.stack,message:"AdManager_VastIntegrator_onVideoEvent",exception:t.message,throttle:10,sendMaxLog:!1})}},this.Ev=Object(l.a)(N)}addClickThrough(t,i){t&&(this.Lv=this.tr.createElementByString(`<a href="${t}" target='_blank' class="cnx-ad-slot">`),i.appendChild(this.Lv))}Rv(t){this.Lv&&t.removeChild(this.Lv)}addVideoEvents(t){this.Ev.forEach(i=>{t.addEventListener(i,this.Mv)}),this.Lv&&this.Lv.addEventListener("click",this.Mv)}Dv(t){this.Ev.forEach(i=>{t.removeEventListener(i,this.Mv)}),this.Lv&&this.Lv.removeEventListener("click",this.Mv)}destroyAd(){try{this.Rv(this.videoSlot.parentElement),Object(A.I)(this.videoSlot,"cnx-ad-video-slot"),this.Dv(this.videoSlot),this.videoSlot.removeAttribute("src"),this.Bv(this.videoSlot)}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"AdManager_VastIntegrator_destroyAd",exception:t.message,callStack:t.stack})}}Bv(t){Object(A.O)(t,{width:"100%",height:"100%"})}$v(t){return this.Fv=ls(t.filter(t=>this.videoSlot.canPlayType(t.type)),this.width),this.Fv?this.Fv.src:null}handshakeVersion(t){return"2.0"}initAd(t,i,e,s,r,a){try{if(this.width=t,this.height=i,this.videoSlot=a.videoSlot,this.src=this.$v(this.settings.mediaFiles),!this.src)return void this.mediator.publish(this,w.b.AdError,{payload:Qe.e.VastUnsupportedMedia});this.addClickThrough(this.settings.clickThrough,this.videoSlot.parentElement),this.resizeAd(this.width,this.height),this.addVideoEvents(this.videoSlot),this.videoSlot.setAttribute("src",this.src),this.videoSlot.setAttribute("preload","metadata"),this.videoSlot.load()}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,callStack:t.stack,message:"AdManager_VastIntegrator",exception:t.message})}}startAd(){Object(A.a)(this.videoSlot,"cnx-ad-video-slot"),this.videoSlot.play().then(()=>{this.mediator.publish(this,w.b.AdStarted),this.mediator.publish(this,w.b.AdImpression)}).catch(t=>{const i=`${Qe.e.VastPlayPromiseReject} - Focus: ${_s.a.pageFocus} - E: ${t}`;this.mediator.publish(this,w.b.AdError,{payload:i}),Object(n.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"AdManager_VastIntegrator_AdPlayPromiseError",exception:this.src,callStack:`Focus: ${_s.a.pageFocus} E: ${t}`,throttle:2,sendMaxLog:!1})})}stopAd(){this.mediator.publish(this,w.b.AdStopped)}resizeAd(t,i,e=w.a.Normal){Object(A.O)(this.videoSlot,{width:`${t}px`,height:`${i}px`}),this.mediator.publish(this,w.b.AdSizeChange)}pauseAd(){this.videoSlot.pause(),this.mediator.publish(this,w.b.AdPaused)}resumeAd(){this.videoSlot.play(),this.mediator.publish(this,w.b.AdPlaying)}expandAd(){}collapseAd(){}skipAd(){this.mediator.publish(this,w.b.AdSkipped)}getAdRemainingTime(){return this.videoSlot.duration-this.videoSlot.currentTime}getAdDuration(){return this.videoSlot.duration}getAdVolume(){return this.videoSlot.volume}setAdVolume(t){this.videoSlot.volume=t}isReady(){return!0}getMediaFile(){return{clientWidh:this.videoSlot.clientWidth,clientHeight:this.videoSlot.clientHeight,readyState:this.videoSlot.readyState,networkState:this.videoSlot.networkState,currentTime:this.videoSlot.currentTime,videoWidth:this.videoSlot.videoWidth,videoHeight:this.videoSlot.videoHeight,autoplay:this.videoSlot.autoplay,muted:this.videoSlot.muted,error:this.videoSlot.error,duration:this.videoSlot.duration,currentSrc:this.videoSlot.currentSrc,crossOrigin:this.videoSlot.crossOrigin,preload:this.videoSlot.preload,src:this.videoSlot.src}}getVastMediaType(){return this.Fv.type}getClickThroughUrl(){return this.settings.clickThrough}getTag(){return this.videoSlot}}!function(t){t[t.handshakeVersion=0]="handshakeVersion",t[t.initAd=1]="initAd",t[t.startAd=2]="startAd",t[t.stopAd=3]="stopAd",t[t.skipAd=4]="skipAd",t[t.resizeAd=5]="resizeAd",t[t.pauseAd=6]="pauseAd",t[t.resumeAd=7]="resumeAd",t[t.expandAd=8]="expandAd",t[t.collapseAd=9]="collapseAd",t[t.subscribe=10]="subscribe",t[t.unsubscribe=11]="unsubscribe"}(Ss||(Ss={}));class As{constructor(t,i){this.mediator=t,this.Vv=i,this.Uv=[],this.vl()}vl(){Object.keys(w.b).forEach(t=>{this.Nv(i=>{this.mediator.publish(this,w.b[t],{payload:i})},w.b[t])})}Hv(t){return Object.keys(Object(u.f)(Ss)).every(i=>Object(b.b)(t[Ss[i]]))}Nv(t,i){this.Uv.push({handler:t,event:i}),this.Vv.subscribe(t,i)}qv(){this.Uv.forEach(t=>{this.Vv.unsubscribe(t.handler,t.event)})}destroyAd(){this.qv(),this.Vv=null}initAd(t,i,e,s,n,r){this.Hv(this.Vv)?this.Vv.initAd(t,i,e,s,n,r):this.mediator.publish(this,w.b.AdError,{payload:Qe.e.VpaidInvalid})}handshakeVersion(t){return this.Vv.handshakeVersion(t)}startAd(){this.Vv.startAd()}stopAd(){this.Vv.stopAd()}resizeAd(t,i,e){this.Vv.resizeAd(t,i,e)}pauseAd(){this.Vv.pauseAd()}resumeAd(){this.Vv.resumeAd()}expandAd(){this.Vv.expandAd()}collapseAd(){this.Vv.collapseAd()}skipAd(){this.Vv.skipAd()}getAdRemainingTime(){return this.Vv.getAdRemainingTime()}getAdDuration(){return this.Vv.getAdDuration()}getAdVolume(){return this.Vv.getAdVolume()}setAdVolume(t){this.Vv.setAdVolume(t)}}class Ts{constructor(t,i,e,s){this.zv=t,this.tr=i,this.Gn=e,this._a=s,this.Wv={bodyTamplate:`<div class="ad-element" id="cnx-ad-element"></div><script type="text/javascript" src="${this.zv}"><\/script>'\n        <script type="text/javascript">\n            window.Object.defineProperty(Object.prototype, 'cnxInnerTag', { enumerable: !1, writable: !0, value: '${this.Gn}' });\n            window.Object.defineProperty(Function.prototype, 'cnxInnerTag',\n            { enumerable: !1, writable: !0, value: '${this.Gn}' });\n            cnxtimeouts = [];\n            cnxintervals = [];\n            oldSetTimeout = setTimeout;\n            setTimeout = function (e, t) { var n = oldSetTimeout.apply(null, arguments); return cnxtimeouts.push(n), n };\n            oldSetInterval = setInterval;\n            setInterval = function (e, t) { var n = oldSetInterval.apply(null, arguments); return cnxintervals.push(n), n };\n            clearAll = function () {\n                setTimeout = function () { };\n                setInterval = function () { };\n                for (var e = 0; e < cnxtimeouts.length; e++) {\n                    clearTimeout(cnxtimeouts[e]);\n                }\n                for (e = 0; e < cnxintervals.length; e++) {\n                    clearInterval(cnxintervals[e]);\n                }\n            };\n        <\/script>`,headTamplate:" <style>\n            html,\n            body,\n            .ad-element {\n                width: 100%;\n                height: 100%;\n            }\n            </style>"},this.bv=new ms(this.tr)}Gv(t){return this.bv.loadIframe({customHead:this.Wv.headTamplate,customHtml:this.Wv.bodyTamplate,container:t,customReportingLog:{name:"VPAIDClient",advertiserLineItemId:this._a}})}loadAdUnitIframe(t){return this.op=t,new Promise((i,e)=>{this.Gv(t).then(t=>{this.Qv=t.iframe,t.adContainer=t.iframe.contentWindow.document.querySelector(".ad-element"),i(t)}).catch(t=>{e(t)})})}destroyAdUnit(){try{this.bv.iframe.contentWindow.clearAll()}catch(t){}setTimeout(()=>{this.Qv&&(Object(A.a)(this.Qv,d.h.DisplayNone),this.op.removeChild(this.Qv))},Qe.g),this.bv.destroy(),this.bv=null}}class Cs extends o.a{constructor(t,i,e,s){super(),this.mediator=t,this.tr=i,this.Hn=e,this.Gn=s,this.type=h.ProtoAdsourceTypeEnum.Vpaid}vl(){Object.keys(w.b).forEach(t=>{this.subscribe(w.b[t],this.Jv,i=>{this.handleVpaidEvent(w.b[t],i)})})}Xv(t){const i=t.iframe.contentWindow.getVPAIDAd;"function"==typeof i?(this.Jv=new As(this,i()),this.vl(),this.Jv.initAd(this.ic,this.ec,this.Av,this.Yv,this.Kv,{slot:t.adContainer,videoSlot:this.Zv.videoSlot})):this.mediator.publish(this,w.b.AdError,{payload:Qe.e.VpaidGetVpaidAdError})}handleVpaidEvent(t,i){this.mediator.publish(this,t,i)}destroyAd(){try{this.Jv&&this.Jv.destroyAd(),this.tg&&this.tg.destroyAdUnit(),this.Jv=null,this.tg=null}catch(t){}}handshakeVersion(t){return"2.0"}initAd(t,i,e,s,n,r){this.ic=t,this.ec=i,this.Av=e,this.Yv=s,this.Kv={adParameters:n,AdParameters:n},this.Zv=r,this.Fv=ls(this.Hn.mediaFiles,this.ic),this.tg=new Ts(this.Fv.src,this.tr,this.Gn,this.Hn.advertiserLineItemId),this.tg.loadAdUnitIframe(r.slot).then(t=>{this.Xv(t)}).catch(t=>{this.mediator.publish(this,w.b.AdError,{payload:t})})}startAd(){this.Jv.startAd()}stopAd(){this.Jv.stopAd()}resizeAd(t,i,e){this.Jv.resizeAd(t,i,e)}pauseAd(){this.Jv.pauseAd()}resumeAd(){this.Jv.resumeAd()}expandAd(){this.Jv.expandAd()}collapseAd(){this.Jv.collapseAd()}skipAd(){this.Jv.skipAd()}getAdRemainingTime(){return this.Jv.getAdRemainingTime()}getAdDuration(){return this.Jv.getAdDuration()}getAdVolume(){return this.Jv.getAdVolume()}setAdVolume(t){this.Jv.setAdVolume(t)}isReady(){return!!this.Jv}getMediaFile(){if(this.Fv)return this.Fv.src}getVastMediaType(){if(this.Fv)return this.Fv.type}getClickThroughUrl(){}}!function(t){t[t.Vast=0]="Vast",t[t.Vpaid=1]="Vpaid"}(Os||(Os={}));class Is extends ps{constructor(t,i,e,s,n){super(t,i,e,n),this.Gn=s,this.ig="video/mp4";const r=this.adResponse.mediaFiles.filter(t=>t.getMediaFileType()===Qe.j.Video),h=r.filter(t=>t.type===this.ig),a=this.adResponse.mediaFiles.filter(t=>t.getMediaFileType()===Qe.j.Javascript);!h.length&&a.length?(this.eg=Os.Vpaid,this.sg=a):(this.eg=Os.Vast,this.sg=h.length?h:r)}createIntegrator(){if(this.eg===Os.Vast){this.Ub=Qe.i;const t={clickThrough:this.adResponse.clickThrough,mediaFiles:this.sg};return new js(this,this.globalDomUtils,t)}const t={mediaFiles:this.sg,advertiserLineItemId:this.adData.advertiserLineItemId};return new Cs(this,this.globalDomUtils,t,this.Gn)}get adSourceType(){return Qe.a.Vast}}const Ps=Object.assign(Object.assign({},w.b),{ContentImpression:"ContentImpression"});class Ms extends Cs{constructor(t,i,e,s){super(t,i,e,s),this.hv="aol",this.type=h.ProtoAdsourceTypeEnum.AOL}handleVpaidEvent(t,i){const e=i||{};switch(t){case w.b.AdPlaying:void 0===e.adId&&"Preroll"!==e.type&&!0!==e.isAd?this.mediator.publish(this,Ps.ContentImpression):this.mediator.publish(this,w.b.AdImpression);break;case w.b.AdStopped:!1===e.isAd&&this.mediator.publish(this,w.b.AdStopped);break;case w.b.AdImpression:break;default:this.mediator.publish(this,t,{payload:i})}}getVastMediaType(){return this.hv}getClickThroughUrl(){}}var Es,Ls=e(14);!function(t){t.ContentDelay="cd",t.ContentQuality="cq",t.Log="log",t.AllowOnlyContent="aoc",t.ContentInView="civ",t.ImpressionForContent="ci"}(Es||(Es={}));class Rs extends ps{constructor(t,i,e,s,n){super(t,i,e,n),this.Gn=s,this.contentDelay=null,this.contentQuality=null,this.log=!1,this.allowOnlyContent=!1,this.contentInView=!1,this.impressionForContent=!1,this.ng=!1,this.rg=!1,this.hg=500,this.ag(),this.contentDelay=parseInt(Object(Ls.b)(Es.ContentDelay,i.adTag),10)||this.hg,this.contentQuality=Object(Ls.b)(Es.ContentQuality,i.adTag),this.log="1"===Object(Ls.b)(Es.Log,i.adTag),this.allowOnlyContent="true"===Object(Ls.b)(Es.AllowOnlyContent,i.adTag),this.contentInView="true"===Object(Ls.b)(Es.ContentInView,i.adTag),this.impressionForContent="true"===Object(Ls.b)(Es.ImpressionForContent,i.adTag),Object.keys(Es).forEach(t=>{i.adTag=Object(Ls.d)(Es[t],i.adTag)}),i.adTag+="&m.vls.rays="+(this.contentQuality||"abcdefgh")}get adSourceType(){return Qe.a.WithContent}og(){clearTimeout(this.cg),clearTimeout(this.ug),this.clearImpressionTimeout(),this.cg=this.ug=null}dg(){this.cg=setTimeout(()=>{this.ng?this.fg({reason:Qe.e.AolImpresssionFunction}):this.pg({reason:Qe.e.AolImpresssionFunction})},this.contentDelay)}pg(t){this.og(),this.mediator.publish(this,Ps.AdError,{payload:t})}fg(t){this.og(),this.mediator.publish(this,Ps.AdStopped,{payload:t})}bg(){this.ng||(this.ng=!0,this.mediator.publish(this,Ps.AdImpression))}vg(){this.allowOnlyContent&&!this.ng?(this.impressionForContent?this.bg():this.contentInView&&this.bg(),this.contentDelay&&this.dg()):this.dg()}ag(){this.subscribe(Ps.ContentImpression,this.gg,()=>{this.vg()})}onVpaidAdImpression(t){this.og(),this.bg()}onVpaidAdError(t){this.pg(t)}onVpaidAdStopped(t){this.rg||!this.ng||this.cg||(this.rg=!0,this.contentDelay?(this.contentInView||this.mediator.publish(this,Ps.AdStopped,{payload:t}),this.ug=setTimeout(()=>{this.fg(t)},this.contentDelay)):this.fg(t))}createIntegrator(){return this.gg=new Ms(this,this.globalDomUtils,{mediaFiles:this.adResponse.mediaFiles,advertiserLineItemId:this.adData.advertiserLineItemId},this.Gn),this.gg}}var Ds=e(15);class Bs extends js{constructor(t,i,e,s,n){super(t,i,e),this.mg=s,this.yg=n,this.type=h.ProtoAdsourceTypeEnum.CnxMedia,this.hv="cnxMedia"}initAd(t,i,e,s,r,a){try{if(this.width=t,this.height=i,this.videoSlot=a.videoSlot,0===this.mg.length)return void this.mediator.publish(this,w.b.AdError,{payload:Qe.e.CnxMediaNoRenditions});if(this.src=this.xg(this.mg),!this.src)return void this.mediator.publish(this,w.b.AdError,{payload:Qe.e.CnxMediaSrcNotSupported});this.addClickThrough(this.settings.clickThrough,this.videoSlot.parentElement),this.resizeAd(this.width,this.height),this.addVideoEvents(this.videoSlot),this.videoSlot.setAttribute("src",this.src)}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,callStack:t.stack,exception:t.message,message:"AdManager_MediaVastIntegrator_initAd"})}}xg(t){let i,e;return e=t.filter(t=>t.codec===z.H264),i=it(this.height,e.map(t=>t.height)),(e=e.filter(t=>t.height===i)).length>0?`${Ds.a.endPoints.base.video}${this.yg}/${e[0].file}`:null}getMediaFile(){return this.src}getVastMediaType(){return this.hv}getClickThroughUrl(){return this.settings.clickThrough}}class $s extends ps{constructor(t,i,e,s){super(t,i,e),this.mg=s}createIntegrator(){this.Ub=Qe.i;const t={clickThrough:this.adData.mediaCreativeClickUrl,mediaFiles:[]};return new Bs(this,this.globalDomUtils,t,this.mg,this.adData.mediaCreativeId)}get adSourceType(){return Qe.a.Media}}const Fs={TimeElapsed:"timeElapsed",TimeUpdate:"timeUpdate"};class Vs{constructor(t,i=0,e=1e3){this.mediator=t,this.wg=i,this.kg=e,this.Sg=0,this.Og=null,this._g=!1,this.jg=()=>{this.Ag(),this.mediator.publish(this,Fs.TimeUpdate),this.Tg(),this.Cg=(new Date).getTime()},i||this.disable()}Ag(){this.Sg+=(new Date).getTime()-this.Cg}Ig(){this._g||(this.Tg(),this.Cg=(new Date).getTime(),this.Og=setInterval(this.jg,this.kg))}Pg(){clearInterval(this.Og),this.Og=null}Mg(){this.disable(),this.mediator.publish(this,Fs.TimeElapsed),this.Sg=0}Tg(){this.Sg/je.f>=this.wg/je.f&&this.Mg()}start(){this.Eg=!0,null===this.Og&&this.Ig()}stop(){this.Eg=!1,null!==this.Og&&(this.Ag(),this.Pg())}reset(t){t&&(this.wg=t),this.Sg=0,this._g=!1,(null!==this.Og||this.Eg)&&(this.Pg(),this.Ig())}get timeElapsed(){return this.Sg}get timeRemaining(){return this.wg-this.Sg}disable(){this._g=!0,this.Pg()}}const Us="//securepubads.g.doubleclick.net/tag/js/gpt.js",Ns="https://adx.connatix.com",Hs="googletag";class qs extends o.a{constructor(t,i,e){super(),this.mediator=t,this.Hn=e,this.type=h.ProtoAdsourceTypeEnum.Unknown,this.Rg=`div-gpt-ad-1589549806211-${Object(ht.c)()}`,this.kg=500,this.Dg=1,this.Bg="adx",this.$g="displayAdx",this.Fg="domains",this.Iv=[{event:w.b.AdVideoFirstQuartile,quartile:1},{event:w.b.AdVideoMidpoint,quartile:2},{event:w.b.AdVideoThirdQuartile,quartile:3},{event:w.b.AdVideoComplete,quartile:4}],this.Vg=[[88,31],[120,20],[120,30],[120,60],[120,90],[125,125],[168,28],[168,42],[180,150],[200,200],[200,446],[216,36],[216,54],[220,90],[234,60],[240,133],[250,250],[250,360],[292,30],[300,31],[300,50],[300,75],[300,100],[300,250],[320,50],[320,100],[320,240],[336,280],[400,350],[468,60],[480,320]],this.Ug=null,this.Mg=()=>{const t=st(this.Ng.timeElapsed/je.f,this.Dg);this.mediator.publish(this,w.b.AdRemainingTimeChange,{payload:t}),this.Hg(t,this.Hn.duration)},this.qg=this.zg(this.Hn.adTagUrl);const s=this.Hn.duration*je.f;this.Ng=new Vs(this,s,this.kg),this.subscribe(Fs.TimeUpdate,this.Ng,this.Mg),this.subscribe(Fs.TimeElapsed,this.Ng,()=>{this.stopAd()})}destroyAd(){this.Wg&&Object(A.P)(this.Wg),this.Gg&&this.Gg.destroySlots&&this.Qg&&this.Gg.destroySlots([this.Qg]),this.Ng.stop()}isReady(){return!0}getMediaFile(){return this.Bg}getVastMediaType(){return this.$g}getClickThroughUrl(){}handshakeVersion(t){return"2.0"}initAd(t,i,e,s,n,r){this.Jg=t,this.Xg=i,this.Wg=r.videoSlot,r.slot.id=this.Rg,Object(A.v)(this.Wg),this.Yg()}startAd(){this.Gg.cmd.push(()=>{try{const t=this.Kg(this.Jg,this.Xg);Object(ht.l)([95,5])&&Object(n.a)({level:h.ProtoLoggingLevelEnum.INFO,message:"axd_"+this.Jg+":"+this.Xg,callStack:JSON.stringify(t),sendMaxLog:!1,throttle:1}),this.Qg=this.Gg.defineSlot(this.qg,t,this.Rg).addService(this.Gg.pubads()).setTargeting(this.Fg,this.Hn.pageDomain),this.Gg.enableServices(),this.Gg.pubads().addEventListener("slotOnload",t=>{t.slot===this.Qg&&(this.mediator.publish(this,w.b.AdStarted),this.mediator.publish(this,w.b.AdVideoStart),this.mediator.publish(this,w.b.AdImpression),this.Ng.start())}),this.Gg.pubads().addEventListener("slotRenderEnded",t=>{if(t.slot===this.Qg)if(t.isEmpty)this.mediator.publish(this,w.b.AdError,{payload:Qe.e.AdxOverlayNoFill});else try{Object(ht.l)([95,5])&&Object(n.a)({message:"AdManager_adx_size",exception:JSON.stringify(t.size),callStack:"_",level:h.ProtoLoggingLevelEnum.INFO})}catch(t){}}),this.Gg.pubads().isInitialLoadDisabled()&&this.Gg.pubads().refresh([this.Qg]),this.Gg.display(this.Rg)}catch(t){this.mediator.publish(this,w.b.AdError,{payload:Qe.e.AdxOverlayStartAd})}})}stopAd(){this.Ng.stop(),this.mediator.publish(this,w.b.AdStopped)}resizeAd(t,i,e){this.Jg=t,this.Xg=i}pauseAd(){this.Ng.stop(),this.mediator.publish(this,w.b.AdPaused)}resumeAd(){this.Ng.start(),this.mediator.publish(this,w.b.AdPlaying)}expandAd(){}collapseAd(){}skipAd(){this.mediator.publish(this,w.b.AdSkipped)}getAdRemainingTime(){return st(this.Ng.timeRemaining,this.Dg)}getAdDuration(){return this.Hn.duration}getAdVolume(){return 0}setAdVolume(t){}Hg(t,i){const e=Math.floor(tt(0,i,0,4,t));this.Ug<=e&&(this.Iv.forEach(({event:t,quartile:i})=>{i===e&&this.mediator.publish(this,t)}),this.Ug++)}zg(t){return t.substr(Ns.length)}Kg(t,i){return this.Vg.filter(e=>!Array.isArray(e)||!Object(u.i)(e)||Object(u.h)(e)&&e[0]<=t&&e[1]<=i)}Yg(){const t=Object(ht.f)(window).topFrame;t[Hs]?(this.Gg=t[Hs],this.mediator.publish(this,w.b.AdLoaded)):(t[Hs]=window[Hs]||{cmd:[]},Object(A.A)({src:Us},t.document.head,t,()=>{this.mediator.publish(this,w.b.AdLoaded)},()=>{this.mediator.publish(this,w.b.AdError,{payload:Qe.e.AdxOverlayGptScriptLoad})}),this.Gg=t[Hs])}}class zs extends o.a{constructor(t,i,e){super(),this.mediator=t,this.tr=i,this.Hn=e,this.type=h.ProtoAdsourceTypeEnum.Unknown,this.Rg="div-cnx-display",this.kg=500,this.Dg=1,this.Bg="html",this.$g="displayHtml",this.Iv=[{event:w.b.AdVideoFirstQuartile,quartile:1},{event:w.b.AdVideoMidpoint,quartile:2},{event:w.b.AdVideoThirdQuartile,quartile:3},{event:w.b.AdVideoComplete,quartile:4}],this.Ug=null,this.Mg=()=>{const t=st(this.Ng.timeElapsed/je.f,this.Dg);this.mediator.publish(this,w.b.AdRemainingTimeChange,{payload:t}),this.Hg(t,this.Hn.duration)};const s=this.Hn.duration*je.f;this.Ng=new Vs(this,s,this.kg),this.subscribe(Fs.TimeUpdate,this.Ng,this.Mg),this.subscribe(Fs.TimeElapsed,this.Ng,()=>{this.stopAd()})}destroyAd(){this.Wg&&Object(A.P)(this.Wg),this.Zg&&this.tm&&Object(A.J)(this.Zg),this.Ng.stop(),this.bv&&(this.bv.destroy(),this.bv=null)}isReady(){return!0}getMediaFile(){return this.Bg}getVastMediaType(){return this.$g}getClickThroughUrl(){}handshakeVersion(t){return"2.0"}initAd(t,i,e,s,n,r){if(!this.im())return void setTimeout(()=>{this.mediator.publish(this,w.b.AdError,{payload:Qe.e.DisplayIntegratorNoHtml})},0);this.Wg=r.videoSlot,this.tm=r.slot,Object(A.v)(this.Wg),this.bv=new ms(this.tr);let h="";this.Hn.creativeMime===Qe.d.Html&&(h=this.Hn.creativeHtml);const a=this.em(this.tm,this.Hn.dimensions);this.bv.loadIframe({customHead:"<style>html, body {position:relative;width:100%;height:100%}#"+this.Rg+"{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}#"+this.Rg+"{border:3px solid white}#"+this.Rg+" iframe{display:block}</style>",customHtml:'<div id="'+this.Rg+'">'+h+"</div>",container:a,customReportingLog:{name:"DisplayIntegrator",advertiserLineItemId:this.Hn.advertiserLineItemId}}).then(t=>{if(this.Zg=t.iframe,this.Hn.creativeMime===Qe.d.Javascript){const i=t.iframe.contentWindow,e=i.document.getElementById(this.Rg);Object(A.z)(e,i,this.Hn.creativeHtml)}if(""===this.Zg.contentWindow.document.head.innerHTML){const t="html, body {position:relative;width:100%;height:100%;margin:0;border:0}";this.nm(t)}this.mediator.publish(this,w.b.AdLoaded)}).catch(t=>{this.mediator.publish(this,w.b.AdError,{payload:t})})}startAd(){setTimeout(()=>{this.mediator.publish(this,w.b.AdStarted),this.mediator.publish(this,w.b.AdVideoStart),this.mediator.publish(this,w.b.AdImpression),this.Ng.start()},0)}stopAd(){this.Ng.stop(),this.mediator.publish(this,w.b.AdStopped)}resizeAd(t,i,e){}pauseAd(){this.Ng.stop(),this.mediator.publish(this,w.b.AdPaused)}resumeAd(){this.Ng.start(),this.mediator.publish(this,w.b.AdPlaying)}expandAd(){}collapseAd(){}skipAd(){this.mediator.publish(this,w.b.AdSkipped)}getAdRemainingTime(){return st(this.Ng.timeRemaining,this.Dg)}getAdDuration(){return this.Hn.duration}getAdVolume(){return 0}setAdVolume(t){}em(t,i){if(!i.width||!i.height)return t;const e=this.tr.createElementByString(`<div class="cnx-iframe-container" style="width: ${i.width}px; height: ${i.height}px"></div>`);return this.tm.appendChild(e),e}nm(t){const i=this.Zg.contentWindow.document.createElement("style"),e=this.Zg.contentWindow.document.createTextNode(t);i.appendChild(e),this.Zg.contentWindow.document.head.appendChild(i)}Hg(t,i){const e=Math.floor(tt(0,i,0,4,t));this.Ug<=e&&(this.Iv.forEach(({event:t,quartile:i})=>{i===e&&this.mediator.publish(this,t)}),this.Ug++)}im(){switch(this.Hn.creativeMime){case Qe.d.Javascript:case Qe.d.Html:return!0;default:return Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"AdManager_DisplayIntegrator_mime",exception:`${this.Hn.creativeMime}`}),!1}}}class Ws extends ps{constructor(t,i,e,s,n,r,h){super(t,i,e),this.mediator=t,this.adData=i,this.globalDomUtils=e,this.Zn=s,this.rm=n,this.hm=r,this.am=h}createIntegrator(){if(this.rm){const t={duration:this.adData.overlayTime,creativeHtml:this.rm,creativeMime:this.hm,dimensions:this.am,advertiserLineItemId:this.adData.advertiserLineItemId};return new zs(this,this.globalDomUtils,t)}return new qs(this,this.globalDomUtils,{duration:this.adData.overlayTime,adTagUrl:this.adData.adTag,pageDomain:this.Zn})}get adSourceType(){return Qe.a.Overlay}}const Gs="Connatix Ad";class Qs extends o.a{constructor(t,i,e,s,n,r,a,o){super(),this.mediator=t,this.om=i,this.cm=e,this.dl=s,this.Gn=n,this.Zn=r,this.lm=a,this.um=o,this.Ya=!1,this.dm=0,this.fm=0,this.pm={},this.bm={width:0,height:0},this.vm={inTimeout:!1},this.gm=null,this.mm=null,this.ym=!1,this.xm=0,this.wm=0,this.km={[w.b.AdImpression]:()=>{this.Om.resizeAd(this._m,this.jm,this.Am),this.Om.setAdVolume(this.Tm),this.mm=Object(ht.c)(),this.om.ignoreFilledRequests&&this.dm--,this.status=Qe.b.InImpression,this.fm++,this.Wr()},[w.b.AdSkipped]:()=>{this.Cm()},[w.b.AdStopped]:()=>{this.Cm()},[w.b.AdError]:t=>{let i="";t&&t.payload&&(i=t.payload),this.Im(i),this.mm=null,this.status=Qe.b.Error,this.setStatusCappedIfNeeded()},[w.b.AdLoaded]:()=>{this.ym=!0,this.Om.setAdVolume(this.Tm),this.Om.startAd()},[w.b.AdVideoFirstQuartile]:()=>{this.Pm(h.ProtoQuartilesEnum.First)},[w.b.AdVideoMidpoint]:()=>{this.Pm(h.ProtoQuartilesEnum.Second)},[w.b.AdVideoThirdQuartile]:()=>{this.Pm(h.ProtoQuartilesEnum.Third)},[w.b.AdVideoComplete]:()=>{this.Pm(h.ProtoQuartilesEnum.Fourth)},[w.b.AdVideoStart]:()=>{this.Qr()},[w.b.AdPaused]:()=>{this.th()},[w.b.AdPlaying]:()=>{this.Mm()},[w.b.AdClickThru]:()=>{this.sh()}},this.Em={},this.Lm=t=>{this.Em={[w.b.AdImpression]:t.impressions,[w.b.AdClickThru]:t.clickTrackings,[w.b.AdStarted]:t.trackingEvents.creativeView,[w.b.AdVideoStart]:t.trackingEvents.start,[w.b.AdVideoFirstQuartile]:t.trackingEvents.firstQuartile,[w.b.AdVideoMidpoint]:t.trackingEvents.midpoint,[w.b.AdVideoThirdQuartile]:t.trackingEvents.thirdQuartile,[w.b.AdVideoComplete]:t.trackingEvents.complete,[w.b.AdPaused]:t.trackingEvents.pause,[w.b.AdPlaying]:t.trackingEvents.resume,[w.b.AdSkipped]:t.trackingEvents.skip,[w.b.AdUserClose]:t.trackingEvents.close,[w.b.AdUserAcceptInvitation]:[...t.trackingEvents.acceptInvitation,...t.trackingEvents.acceptInvitationLinear],[w.b.AdUserMinimize]:[...t.trackingEvents.collapse,...t.trackingEvents.playerCollapse,...t.trackingEvents.adCollapse],[w.b.AdError]:t.errorUrls}},this.Cm=()=>{this.mm=null,this.status=Qe.b.Consumed,this.setStatusCappedIfNeeded()},this.$c=t=>i=>{const e=this.km[t];e&&e(i)},this.om.advertiserLineItemId&&0===this.om.advertiserLineItemId.length&&(this.om.advertiserLineItemId=void 0),this.status=Qe.b.Idle,this.Rm=i.yoScore,this.Dm(),this.Tm=0}Dm(){this.om.viewability&&(this.pm.viewability=!0),this.om.sound&&(this.pm.sound=!0),this.om.adBreakSettings&&(this.pm.allowedAdSlots=this.om.adBreakSettings.adBreakTargeting),this.om.mediaIdTargeting&&(this.pm.mediaId=this.om.mediaIdTargeting),this.om.mediaKeywordsTargeting&&(this.pm.mediaKeywords=this.om.mediaKeywordsTargeting),this.om.mediaLanguageTargeting&&(this.pm.mediaLanguage=this.om.mediaLanguageTargeting),this.pm.minimumSizes=this.bm}Bm(){return 0!==this.om.requestCap&&this.om.requestCap<=this.dm||0!==this.om.impressionCap&&this.om.impressionCap<=this.fm}setStatusCappedIfNeeded(){this.Bm()&&(this.status=Qe.b.Capped)}$m(){this.getAdType()===h.ProtoAdType.Overlay?this.cm.TrackingService.setAdViewabilityDelay(ze.a):this.cm.TrackingService.setAdViewabilityDelay(ze.b)}Fm(t){return t===h.ProtoTrackerType.Image}Vm(t){return t===h.ProtoTrackerType.Javascript}Um(t){Ze.a.trackPixel(t)}Nm(t){const i={src:t},e=window.document.head;Object(A.A)(i,e,window)}Hm(t){const i=this.qm(t);this.zm(i)}qm(t){switch(t){case h.ProtoQuartilesEnum.First:return h.ProtoTrackerTriggerType.Complete25Pc;case h.ProtoQuartilesEnum.Second:return h.ProtoTrackerTriggerType.Complete50Pc;case h.ProtoQuartilesEnum.Third:return h.ProtoTrackerTriggerType.Complete75Pc;case h.ProtoQuartilesEnum.Fourth:return h.ProtoTrackerTriggerType.ViewCompletion}}zm(t){const i=this.om.trackers.filter(i=>i.Trigger===t);try{i.forEach(({Type:t,url:i})=>{const e=Object(ht.e)(i);switch(!0){case this.Fm(t):this.Um(e);break;case this.Vm(t):this.Nm(e)}})}catch(t){Object(n.a)({throttle:10,sendMaxLog:!0,level:h.ProtoLoggingLevelEnum.FATAL,message:"AdManager_AdSourceWrapper_creative_tracking",exception:t.message,callStack:t.stack})}}Wm(){return{advertiserLineItemId:this.om.advertiserLineItemId,publisherLineItemId:this.om.publisherLineItemId,timeSpent:Date.now()-this.Gm,customClientPrice:this.om.customCpm,adsourceType:this.Om.getIntegratorType(),vastMediaType:this.Om.getVastMediaType(),adPodSlotPosition:this.dl.isCurrentBreakInPod()?this.dl.getNextSlotIndex():0}}Wr(t=!1){this.$m();try{const i=this.Wm();this.cm.TrackingService.trackVideoAdImpression(i,t),f.a.logImpression(this)}catch(t){Object(n.a)({throttle:10,sendMaxLog:!0,level:h.ProtoLoggingLevelEnum.FATAL,message:"AdManager_AdSourceWrapper_impression_tracking",callStack:t.stack})}this.zm(h.ProtoTrackerTriggerType.Impression)}Qm(t){return{advertiserLineItemId:this.om.advertiserLineItemId,publisherLineItemId:this.om.publisherLineItemId,loaded:this.ym,timeSpent:Date.now()-this.Gm,error:t,adsourceType:this.Om.getIntegratorType(),vastMediaType:this.Om.getVastMediaType(),adPodSlotPosition:this.dl.isCurrentBreakInPod()?this.dl.getNextSlotIndex():0}}Im(t,i=!1){try{const e=this.Qm(t);this.cm.TrackingService.addPostBid(e,i),f.a.logPostBid(this)}catch(t){Object(n.a)({throttle:10,sendMaxLog:!0,level:h.ProtoLoggingLevelEnum.FATAL,message:"AdManager_AdSourceWrapper_postbid_tracking",callStack:t.stack})}}Pm(t){this.cm.TrackingService.trackVideoAdQuartile({advertiserLineItemId:this.om.advertiserLineItemId,publisherLineItemId:this.om.publisherLineItemId,quartile:t}),this.Hm(t)}Qr(){this.zm(h.ProtoTrackerTriggerType.Resume)}th(){this.zm(h.ProtoTrackerTriggerType.Pause)}Mm(){this.zm(h.ProtoTrackerTriggerType.Resume)}sh(){this.zm(h.ProtoTrackerTriggerType.VideoClick)}Jm(t,i){switch(i||(i=this.om.adTag),i=this.Xm(i,this._m,this.jm),t){case Qe.f.Ima:return new ks(this,this.om,this.cm.GlobalDomUtilsService,i);case Qe.f.Jw:return new Rs(this,this.om,this.cm.GlobalDomUtilsService,this.Gn);default:const e="AdManager_AdSourceWrapper_sdk_not_found";throw Object(n.a)({message:e,level:h.ProtoLoggingLevelEnum.FATAL}),new Error(e)}}Ym(t,i){return{advertiserLineItemId:this.om.advertiserLineItemId,publisherLineItemId:this.om.publisherLineItemId,reason:t,timeSpent:i}}onPreBid(t,i,e=!1){this.wm++;const s=this.Ym(t,i);this.cm.TrackingService.addPrebid(s,e),this.status=Qe.b.Error,this.setStatusCappedIfNeeded(),f.a.logPreBid(this)}Km(t){return{advertiserLineItemId:this.om.advertiserLineItemId,publisherLineItemId:this.om.publisherLineItemId,timeSpent:t}}Zm(t,i=!1){this.xm++;const e=this.Km(t);this.cm.TrackingService.addBid(e,i),f.a.logBid(this)}ty(t,i,e){this.It=this.om.overlayTime,this.Om=new Ws(this,this.om,this.cm.GlobalDomUtilsService,this.Zn,t,i,e)}iy(t){return new Promise((i,e)=>{this.status=Qe.b.Loading,t.then(t=>{this.It=t.duration,this.gm=t,this.Lm(t),t.sdkUrl?this.Om=this.Jm(us(t.sdkUrl),t.sdkUrl):!function(t){return!!t&&t.indexOf("delivery.vidible.tv/placement/vast")>-1}(this.om.adTag)?this.Om=new Is(this,this.om,this.cm.GlobalDomUtilsService,this.Gn,t):this.Om=new Rs(this,this.om,this.cm.GlobalDomUtilsService,this.Gn,t),i()}).catch(t=>{e(t)})})}ey(t){return new Promise((i,e)=>{try{this.status=Qe.b.Ready,this.Om=this.Jm(t),i()}catch(t){e()}})}Xm(t,i,e){const s=this.cm.UserManagerService.isConsentRequired(),n=this.cm.UserManagerService.isConsent(this.om.vendorId);this.cm.MacrosService.setAdPosition(),this.cm.MacrosService.setAdWidth(i),this.cm.MacrosService.setAdHeight(e),this.cm.MacrosService.setGDPR(s?1:0),this.cm.MacrosService.setConsent(n?1:0),this.cm.MacrosService.setGDPRConsent(this.cm.UserManagerService.getConsentPayload());const r=this.cm.UserManagerService.isConsentConnatix()&&n?this.lm:void 0;return this.cm.MacrosService.setUUID(r),this.cm.MacrosService.setupMacros(t)}sy(t){return this.gm&&this.Em[t]||[]}ny(t){this.cm.GlobalDomUtilsService.trackWithImages(this.sy(t))}vl(t){Object.keys(w.b).forEach(i=>{this.subscribe(w.b[i],t,t=>{var e;const s=w.b[i];switch(this.$c(s)(t),this.ny(w.b[i]),f.a.setVpaidEvent(this.advertiserLineItemId,w.b[i]),i){case w.b.AdImpression:case w.b.AdVideoStart:t=this.hy();break;case w.b.AdLoaded:t=this.ay(null===(e=t.payload)||void 0===e?void 0:e.skipoffset)}this.mediator.publish(this,w.b[i],t)})})}hy(){return{payload:{adSourceData:{name:this.oy(),adId:this.om.advertiserLineItemId,length:this.getAdDuration()},adSkipMode:this.getAdSkipMode(),clickThroughUrl:this.ly()}}}ly(){var t;const i=this.Om.getClickThroughUrl();return i||(null===(t=this.gm)||void 0===t?void 0:t.clickThrough)}ay(t){let i=this.gm&&this.gm.skipoffset;return Object(b.d)(t)&&(i=t),{payload:{adLoadedData:{skipOffset:i},adSkipMode:this.getAdSkipMode()}}}oy(){return this.gm&&this.gm.adTitle?this.gm.adTitle:Gs}uy(){this.status!==Qe.b.Capped||this.Bm()||(this.status=Qe.b.Idle)}py(){this.om.timeBetweenRequests&&(this.vm.inTimeout=!0,this.by=Date.now())}vy(){const t=new Date(2020,9,16,12,0,0).getTime(),i=new Date(2020,9,17,12,0,0).getTime(),e=Date.now();if(e<t||e>i)return;const s=Date.now()-this.Gm,{advertiserLineItemId:r,impressionTimeout:a}=this.om;Object(n.a)({message:"adbreak_destroy",level:h.ProtoLoggingLevelEnum.INFO,exception:`${this.um},${r},${a},${s}`})}getTrackingProperties(){return{advertiserLineItemId:this.om.advertiserLineItemId,publisherLineItemId:this.om.publisherLineItemId}}requestBid(t,i){const e=Date.now();let s,n;return this.dm++,this.py(),this.Ya=!1,this.om.adTag&&(s=this.Xm(this.om.adTag,t,i),n=us(s)),new Promise((t,i)=>{if(n)return this.ey(n).then(()=>{this.Zm(Date.now()-e),t()});if(this.om.creativeType===h.ProtoCreativeTypeEnum.MediaFile)this.status=Qe.b.Ready,this.It=this.om.duration,this.Om=new $s(this,this.om,this.cm.GlobalDomUtilsService,this.om.renditions),this.Zm(Date.now()-e),t();else{if(this.om.adType!==h.ProtoAdType.Overlay){const n=new ds;return this.iy(n.getVastResponse(s)).then(()=>{this.status=Qe.b.Ready,this.Zm(Date.now()-e),t()}).catch(t=>{this.onPreBid(t,Date.now()-e),i()})}this.status=Qe.b.Ready,this.ty(),this.Zm(Date.now()-e),t()}})}get advertiserLineItemId(){return this.om.advertiserLineItemId}get winTime(){return this.om.impressionTimeout}resetAdSourceStatus(){return(this.status===Qe.b.Error||this.status===Qe.b.Consumed)&&(this.status=Qe.b.Idle,!0)}get status(){return this.gy}set status(t){this.gy=t,f.a.setLineItemStatus(this.advertiserLineItemId,t)}get restrictions(){return this.pm}get yoScore(){return this.Rm}isCapped(){return this.gy===Qe.b.Capped}isIdle(){return this.gy===Qe.b.Idle}resetRequestCap(){this.dm=0,this.uy()}resetImpressionCap(){this.fm=0,this.uy()}isWrapper(){return!0}resetBidsAndPrebidsCount(){this.wm=0,this.xm=0}get hasResetCappingOnTime(){return this.om.resetCapType===h.ProtoResetCapTypeEnum.TimeCapping}get hasResetCappingOnContent(){return this.om.resetCapType===h.ProtoResetCapTypeEnum.ContentCapping}get hasResetCappingOnAdOpportunity(){return this.om.resetCapType===h.ProtoResetCapTypeEnum.OpportunityCapping}get resetRequestCapSec(){return this.om.resetRequestsCapTime}get resetImpressionCapSec(){return this.om.resetImpressionsCapTime}initAd(t,i,e,s,r,a){if(this.Ya)return Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"AdManager_AdSourceWrapper_destroyed_initAd",callStack:"_"}),void this.mediator.publish(this,w.b.AdError,{payload:Qe.e.CreateSameAd});this._m=t,this.jm=i,this.Am=e,this.ym=!1,this.Gm=Date.now(),this.mm=null,this.status=Qe.b.InWin,this.vl(this.Om);try{this.Om.initAd(t,i,e,s,r,a)}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"AdManager_AdSourceWrapper_adsource_initAd",exception:t.message,callStack:t.stack}),this.mediator.publish(this,w.b.AdError,t.message)}}handshakeVersion(t){return"2.0"}startAd(){this.Om.startAd()}stopAd(){this.Om.stopAd()}resizeAd(t,i,e){this._m=t,this.jm=i,this.Am=e,this.Om.resizeAd(t,i,e)}pauseAd(){this.Om.pauseAd()}resumeAd(){this.Om.resumeAd()}expandAd(){this.Om.expandAd()}collapseAd(){this.Om.collapseAd()}skipAd(){this.Om.skipAd()}getAdRemainingTime(){return this.Om.getAdRemainingTime()}getAdDuration(){return this.Om.getAdDuration()}getAdVolume(){return this.Om.getAdVolume()}setAdVolume(t){this.Om.setAdVolume(t),0===this.Tm&&t>0?(this.gm&&this.cm.GlobalDomUtilsService.trackWithImages(this.gm.trackingEvents.unmute),this.zm(h.ProtoTrackerTriggerType.Unmute)):this.Tm>0&&0===t&&(this.gm&&this.cm.GlobalDomUtilsService.trackWithImages(this.gm.trackingEvents.mute),this.zm(h.ProtoTrackerTriggerType.Mute)),this.Tm=t}getPlayerSize(){return this.om.playerSize}destroyAd(t,i){try{i&&this.Gm&&this.vy(),t&&(this.status=Qe.b.Error),this.unsubscribeAll(this.Om),this.Om.destroyAd(),this.Ya=!0}catch(t){Object(n.a)({message:"AdManager_AdSourceWrapper_destroy_adSource",exception:t.message,level:h.ProtoLoggingLevelEnum.FATAL,callStack:t.stack})}}get isRtb(){return this.om.creativeType===h.ProtoCreativeTypeEnum.Rtb}get isHeaderBidder(){return this.om.creativeType===h.ProtoCreativeTypeEnum.HeaderBidder}get isTam(){return this.om.creativeType===h.ProtoCreativeTypeEnum.Tam}get duration(){return this.It<je.f?this.It*je.f:this.It}get vendorId(){return this.om.vendorId}get adSourceType(){if(this.Om)return this.Om.adSourceType}updateInTimeoutRestriction(){if(!this.by)return!1;return Date.now()-this.by>this.om.timeBetweenRequests*je.f&&(this.vm.inTimeout=!1,!0)}canBeCalled(){return Object.keys(this.vm).every(t=>!1===this.vm[t])}getAdPodTargeting(){var t;return null===(t=this.om.adBreakSettings)||void 0===t?void 0:t.adPodTargeting}getAdBreakSettings(){return this.om.adBreakSettings}getAdSkipMode(){return this.om.skipMode}getAdType(){return this.om.adType}getBidsCount(){return this.xm}getPrebidsCount(){return this.wm}}class Js{constructor(t){this.mediator=t,this.my=!0,this.yy=t=>{if(this.my)return;const i=t.target;i.volume>0&&(i.volume=0,i.paused||this.mediator.publish(this,Zs.VOLUME_DETECTED)),t.preventDefault?t.preventDefault():t.returnValue=!1}}xy(t){t&&!t.getAttribute("cnxpl-vl")&&(t.volume=0,t.setAttribute("cnxpl-vl","true"),t.addEventListener("volumechange",this.yy))}enforce(t,i){this.xy(i);let e=t;Object(b.c)(t)&&(e=t.contentDocument||t.contentWindow.document),this.my=!1,this.xy(i),Object(u.c)(e.getElementsByTagName("video")).forEach(t=>{this.xy(t)})}stopEnforce(){this.my=!0}}class Xs{constructor(t){this.mediator=t}wy(t){const i=function(){};t.Element.prototype.scrollIntoView=i,t.Element.prototype.scrollIntoViewIfNeeded=i,t.scroll=i,t.scrollTo=i,t.scrollBy=i}enforce(t){Object(b.c)(t)&&this.wy(t.contentWindow)}stopEnforce(){}}class Ys{constructor(t,i,e){this.mediator=t,this.Gn=i,this.ky=t=>t.cnxEnfStorage?t.cnxEnfStorage:null,this.ae=e;try{this.ky(this.ae)||this.Sy(this.ae)}catch(t){Object(n.a)({message:"AdManager_EnforcerMemory_bind_enforcement",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}Sy(t){Object(A.z)(t.document.head,t,'!function(){function n(n){window["cnx"+n]||(window["cnx"+n]=window[n],window[n]=function(e){var t="";try{e&&(t=function n(e,t){try{if(!e)return"";if(e.cnxInnerTag)return e.cnxInnerTag;if(t<2){var r=t+1;return n(e.caller,r)}}catch(n){return""}return""}(e))}catch(n){}var r=window["cnx"+n].apply(null,arguments);if(t){var i=window.cnxEnfStorage;i[n][t]=i[n][t]||[],i[n][t].push(r)}return r})}window.cnxEnfStorage={setTimeout:{},setInterval:{},eventListeners:{},errors:[]};var e=window.location.hostname.split("."),t=window.btoa(e[e.length-2]+"."+e[e.length-1]);-1===["dG16LmNvbQ==","YmlsbGJvYXJkLmNvbQ==","aG9sbHl3b29kcmVwb3J0ZXIuY29t","dmliZS5jb20=","aG9yb3Njb3BlLmNvbQ==","YXN0cm9sb2d5LmNvbQ==","YWhvcmFtaXNtby5jb20="].indexOf(t)&&(!function(){const n=window.EventTarget?window.EventTarget.prototype:window.document;n.cnxAddEventListener||(n.cnxAddEventListener=n.addEventListener,n.addEventListener=function(n,e,t){var r=this||window;if(e&&e.cnxInnerTag){var i=window.cnxEnfStorage;i.eventListeners[e.cnxInnerTag]=i.eventListeners[e.cnxInnerTag]||[],i.eventListeners[e.cnxInnerTag].push({element:r,type:n,handler:e,options:t})}try{r.cnxAddEventListener(n,e,t)}catch(n){n.message="adlstn_"+n.message,i.errors.push(n)}})}(),n("setTimeout"),n("setInterval"))}();')}enforce(t){try{t.contentWindow.self===top||t.contentWindow.Function.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Function.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:this.Gn}),t.contentWindow.self===top||t.contentWindow.Object.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Object.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:this.Gn})}catch(t){}}stopEnforce(){}clearMemoryLeaks(){try{const t=this.ky(this.ae);t.eventListeners[this.Gn]&&(t.eventListeners[this.Gn].forEach(t=>{t.element.removeEventListener(t.type,t.handler,t.options)}),t.eventListeners[this.Gn]=[]),t.setInterval[this.Gn]&&(t.setInterval[this.Gn].forEach(t=>this.ae.clearInterval(t)),t.setInterval[this.Gn]=[]),t.setTimeout[this.Gn]&&(t.setTimeout[this.Gn].forEach(t=>this.ae.clearTimeout(t)),t.setTimeout[this.Gn]=[])}catch(t){}}}class Ks{constructor(t){this.mediator=t,this.Oy=["viralgains","serving-sys.com","commercialadsdistributor"],this._y=["beachfrontmedia","commercialadsdistributor"],this.jy=["commercialadsdistributor"],this.Ay=["pixel.clearstream.tv","pixel.clrstm.com"]}Ty(t,i,e,s){t.every(t=>-1===e.indexOf(t))&&!i.getAttribute("cnx")&&(i.setAttribute("cnx","true"),this.mediator.publish(this,Zs.BADURI_DETECTED,{payload:`${s}-${i}`}))}Cy(t){const i=t.getAttribute("src");this.Oy.forEach(t=>{i.indexOf(t)>-1&&this.mediator.publish(this,Zs.MALWARE_DETECTED,{payload:`malware-${t}`})}),this.Ty(["//","about:blank","about:self","javascript:"],t,i,"iframe")}Iy(t){Object(u.c)(t.contentDocument.getElementsByTagName("script")).forEach(t=>{const i=t.getAttribute("src");this._y.forEach(t=>{i.indexOf(t)>-1&&this.mediator.publish(this,Zs.MALWARE_DETECTED,{payload:`malware-${t}`})}),this.Ty(["//"],t,i,"script")})}Py(t){Object(u.c)(t.contentDocument.getElementsByTagName("a")).forEach(t=>{const i=t.getAttribute("href");this.jy.forEach(t=>{i.indexOf(t)>-1&&this.mediator.publish(this,Zs.MALWARE_DETECTED,{payload:`malware-${t}`})})})}My(t){Object(u.c)(t.contentDocument.getElementsByTagName("img")).forEach(t=>{const i=t.getAttribute("src");this.Ay.forEach(t=>{i.indexOf(t)>-1&&this.mediator.publish(this,Zs.MALWARE_DETECTED,{payload:`malware-${t}`})})})}enforce(t){if(Object(b.c)(t))try{this.Cy(t),this.Iy(t),this.Py(t),this.My(t)}catch(t){}}stopEnforce(){}}var Zs,tn;!function(t){t.VOLUME_DETECTED="volume_detected",t.MALWARE_DETECTED="malware_detected",t.BADURI_DETECTED="baduri_detected"}(Zs||(Zs={})),function(t){t[t.None=0]="None",t[t.Mute=1]="Mute",t[t.ScrollHijack=2]="ScrollHijack",t[t.MemoryLeak=4]="MemoryLeak",t[t.Malware=8]="Malware",t[t.All=15]="All"}(tn||(tn={}));class en extends o.a{constructor(t,i,e){super(),this.mediator=t,this.Kf=i,this.Ey=null,this.Ly=new Map,this.Ry=tn.None,this.Dy=300,this.Kf.config.isMobile||this.Ly.set(tn.Mute,new Js(this)),this.Ly.set(tn.ScrollHijack,new Xs(this)),this.Ly.set(tn.MemoryLeak,new Ys(this,this.Kf.config.appId,e)),this.Ly.set(tn.Malware,new Ks(this)),this.vp()}By(t){Object(u.c)(t.getElementsByTagName("iframe")).forEach(t=>{try{this.By(t)}catch(t){}}),this.Ly.forEach((i,e)=>{this.Ry&e&&i.enforce(t,this.$y)})}vp(){this.subscribe(Zs.VOLUME_DETECTED,this.Ly.get(tn.Mute),()=>this.Fy(Zs.VOLUME_DETECTED)),this.subscribe(Zs.MALWARE_DETECTED,this.Ly.get(tn.Malware),t=>this.Fy(Zs.MALWARE_DETECTED,t)),this.subscribe(Zs.BADURI_DETECTED,this.Ly.get(tn.Malware),t=>this.Fy(Zs.BADURI_DETECTED,t))}Fy(t,i){this.mediator.publish(this,t,i)}start(t){this.Ry|=t,null===this.Ey&&(this.Ey=setInterval(()=>{try{this.By(this.Kl)}catch(t){}},this.Dy))}stop(t){this.Ry&=~t,this.Ry===tn.None&&(clearInterval(this.Ey),this.Ey=null),this.Ly.forEach((i,e)=>{t&e&&i.stopEnforce()})}clearMemoryLeaks(){const t=this.Ly.get(tn.MemoryLeak);t&&t.clearMemoryLeaks()}setContainers(t,i){this.Kl=t,this.$y=i}}class sn extends Qs{constructor(t,i,e,s,n,r){super(t,i,r.services,n,r.config.appId,r.config.pageDomain,r.config.deviceId,r.config.playerId),this.mediator=t,this.om=i,this.Vy=e,this.Uy=s,this.Ny=!0,this.Hy=0,this.Rm=this.Vy.yoScore}hy(){const t=super.hy();return t.payload.gtkpbp=this.Vy.gtkpbp,t.payload.customAdData={ADVERTISER:this.Vy.adomain,CREATIVE_ID:this.Vy.creativeId,CAMPAIGN_ID:this.Vy.campaignId},t}Wm(){return Object.assign(Object.assign({},super.Wm()),{encryptedPrice:this.Vy.encryptedPrice,rtbAdomain:this.Vy.adomain,rtbCreativeId:this.Vy.creativeId,rtbSeatId:this.Vy.seatId,syncedUser:this.Vy.syncedUser})}Wr(){super.Wr(this.Uy),this.cm.GlobalDomUtilsService.trackWithImages([...this.Vy.billingNoticeUrlList,this.Vy.adQualityCheckUrl])}Qm(t){return Object.assign(Object.assign({},super.Qm(t)),{rtbAdomain:this.Vy.adomain,rtbCreativeId:this.Vy.creativeId,rtbSeatId:this.Vy.seatId,syncedUser:this.Vy.syncedUser})}Im(t){super.Im(t,this.Uy)}Pm(t){this.cm.TrackingService.trackVideoAdQuartile({advertiserLineItemId:this.om.advertiserLineItemId,publisherLineItemId:this.om.publisherLineItemId,quartile:t})}requestBid(){return this.Ya=!1,this.status=Qe.b.Ready,Promise.resolve()}updateData(t,i=!0){return this.Ny=i,this.Hy=t,this.om.adType===Ut.ProtoAdType.Overlay?this.qy():this.zy()}qy(){return new Promise((t,i)=>{if(!this.Vy.vastTag)return void i({reason:h.ConnatixNoBidReasonEnum.CsEmptyResponse,numberOfRequests:this.Hy});this.Vy.height&&this.Vy.width||Object(n.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"AdManager_AdSourceWrapperRTB_display_sizes",exception:`width:${this.Vy.width}_height:${this.Vy.height}`}),this.restrictions.minimumSizes={height:this.Vy.height,width:this.Vy.width};const e={width:this.Vy.width,height:this.Vy.height};this.ty(this.Vy.vastTag,this.Vy.mime,e),this.status=Qe.b.Ready;this.Zm(0),t()})}zy(){return new Promise((t,i)=>{const e=new ds;this.iy(e.buildAd(this.Vy.vastTag)).then(()=>{try{this.status=Qe.b.Ready;const i=0;this.Zm(i),t()}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"AdManager_AdSourceWrapperRTB_updateData",callStack:t.stack})}}).catch(t=>{i({reason:t,numberOfRequests:this.Hy})})})}initAd(t,i,e,s,r,a){super.initAd(t,i,e,s,r,a);try{this.cm.GlobalDomUtilsService.trackWithImages([this.Vy.winNoticeUrl])}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"AdManager_AdSourceWrapperRTB_no_adSourceData",logJsonState:!0,sendMaxLog:!1,throttle:1})}}get gtkpbp(){return this.Vy.gtkpbp}getFloorPrice(){return this.Vy.requestedFloorPrice}isUserSynced(){return this.Vy.syncedUser}getFloorPriceFactorIndex(){return this.Vy.floorPriceFactorIndex}destroyAd(t){super.destroyAd(t)}Km(t){return Object.assign(Object.assign({},super.Km(t)),{rtbCreativeId:this.Vy.creativeId,syncedUser:this.Vy.syncedUser,rtbAdomain:this.Vy.adomain,rtbSeatId:this.Vy.seatId,rtbRequestNumber:this.Hy,requestedFloorPrice:this.Vy.requestedFloorPrice,encryptedPrice:this.Vy.encryptedPrice})}Zm(t,i=this.Uy){this.Ny?super.Zm(t,i):f.a.logBid(this)}onPreBid(t,i,e=!1){}}var nn=e(30);const rn=[0,10,25,45,70,105,145];class hn{constructor(t,i,e,s,n){this.mediator=t,this.Kf=i,this.Wy=e,this.Gy=s,this.Qy=[],this.Jy=0,this.Ac=!1,this.Xy=!0,this.Yy=null,this.Ky=!1,this.Zy=0,this.tx=0,this.ex=n,this.sx()}nx(t,i){this.Yy=setTimeout(()=>{this.hx(i)},t*je.f)}ax(){clearTimeout(this.Yy);const t=this.Qy[this.Jy];this.nx(t)}ox(){this.Jy++,this.ax()}lx(){this.mediator.publish(this,Qe.c[Qe.c.AuctionCallReady],{payload:this})}ux(t,i,e){return!this.Ky&&(!!Object(u.h)(t)&&(0!==i&&0!==e||(Object(n.a)({message:"AdManager_BidderCaller_dimensions",exception:`width:${i}_height:${e}_destroyed:${f.a.isPlayerDestroyed()}`,throttle:5,level:h.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),!1)))}enableCalls(){this.Xy=!1,this.ax()}disableCalls(){this.Xy=!0,clearTimeout(this.Yy)}resetCalls(){this.Jy=0,clearTimeout(this.Yy),this.Yy=null,this.Xy||this.enableCalls()}updateViewability(t){this.Ac=t}userInteraction(t){t&&this.disableCalls()}updateSound(t){this.Wy=t}destroy(){this.disableCalls()}onTickCallback(){const t=Object(Ht.c)();Object(Ht.d)(t,this.ex)>=this.Gy.rtbRequestResetTime&&(this.resetCalls(),this.ex=t)}sx(){Object(u.h)(this.Gy.rtbAuctionPattern)||(this.Gy.rtbAuctionPattern=rn);const t=this.Gy.rtbAuctionPattern;for(let i=0;i<t.length;i++)0===i?this.Qy.push(t[i]):this.Qy.push(t[i]-t[i-1])}}class an{constructor(){this.px=Date.now(),this.bx={advertiser:{}}}addPrebid(t){Object(b.a)(this.bx.advertiser[t])||this.vx(t),this.bx.advertiser[t].prebidData.push({timestamp:Date.now()})}addBid(t,i){Object(b.a)(this.bx.advertiser[t])||this.vx(t),this.bx.advertiser[t].bidsFloorPriceList.push({timestamp:Date.now(),floorPrice:i})}addImpression(t,i){Object(b.a)(this.bx.advertiser[t])||this.vx(t),this.bx.advertiser[t].impressionRevenueList.push({timestamp:Date.now(),gtkpbp:i})}shouldRequestLineItem(t){const i=Date.now();return!(this.gx(i,3)&&this.mx(t,i,5)<-.5&&this.yx(t,i,3)>=11.5&&this.xx(t,i,10,.1)<.35)}gx(t,i){return t-this.px>=i*je.e}mx(t,i,e){const s=this.bx.advertiser[t];if(!Object(b.a)(s))return-1;const n=this.wx(s.impressionRevenueList,i,e).map(t=>t.gtkpbp);let r=0;return Object(u.h)(n)&&(r=n.reduce((t,i)=>t+this.kx(i))),this.Sx(r)}yx(t,i,e){const s=this.bx.advertiser[t];if(!Object(b.a)(s))return-1;const n=this.wx(s.prebidData,i,e).length;return this.Sx(n)}xx(t,i,e,s){const n=this.bx.advertiser[t];if(!Object(b.a)(n))return-1;const r=this.wx(n.impressionRevenueList,i,e).map(t=>t.floorPrice),h=this.Ox(r,s);return this.Sx(h)}wx(t,i,e){const s=i-je.f,n=i-e*je.e,r=[];for(let i=t.length-1;i>=0&&t[i].timestamp>=n;i--)t[i].timestamp<=s&&r.push(t[i]);return r}Sx(t){return 0===t?-1:t}vx(t){this.bx.advertiser[t]={prebidData:[],bidsFloorPriceList:[],impressionRevenueList:[]}}kx(t){return 2*(t+41)}Ox(t,i){if(0===t.length)return 0;if(i<=0)return t[0];if(i>=1)return t[t.length-1];const e=((t=t.sort()).length-1)*i,s=Math.floor(e),n=s+1,r=e%1;return n>=t.length?t[s]:t[s]*(1-r)+t[n]*r}}class on extends hn{constructor(t,i,e=[],s,r,a,o,c,l,d,f){super(t,s,r,o,d),this._x=i,this.jx=e,this.Ax=a,this.Tx=c,this.jp=l,this.dl=f,this.Hy=0,this.Cx="cnxRtbTest",this.Ix="cnxOverrideLineitems",this.isRtbCaller=!0,this.Px=t=>{const i=this.Mx(t.advertiserLineItemId);let e=t.requestCap-i.requestCount;e<0&&(Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"AdManager_RtbCaller_negative_available_requests"}),e=0);let s={availableRequests:e,gdprConsent:this.Kf.services.UserManagerService.isConsent(t.vendorId),publisherLineItemId:t.publisherLineItemId};const r=i.cachedFloorPrice;Object(b.d)(r)&&(s=Object.assign(Object.assign({},s),{cachedFloorPrice:r}));const a=i.adSourceWrapperList.map(t=>t.getFloorPriceFactorIndex());if(Object(u.h)(a)&&(s=Object.assign(Object.assign({},s),{ignoredFloorPriceFactorIndexes:a})),t.adType===h.ProtoAdType.Overlay){const i=this.jp.getSlotForAd(h.ProtoAdType.Video),e=this.jp.getSlotForAd(t.adType);i.height===e.height&&i.width===e.width||(s.slotWidth=e.width,s.slotHeight=e.height)}return s},this.Ex=new an}Mx(t){return this.jx.find(i=>i.lineItem.advertiserLineItemId===t)}Lx(t,i=!1){this.ox();const{width:e,height:s}=this.jp.getSlotForAd(h.ProtoAdType.Video);if(!this.ux(t,e,s))return;this.Ky=!0,f.a.addCustomHistoryLine("callRtb",{view:this.Ac}),this.Hy++;const n={metadata:this.Kf.services.TrackingService.getMetadataModel(),pageUrl:this.Kf.config.pageUrl,gdprCompliant:this.Kf.services.UserManagerService.isGDPR(),gdprConsentData:this.Kf.services.UserManagerService.getConsentPayload(),soundOn:this.Wy,videoHeight:s,videoWidth:e,testMode:"true"===Object(Ls.b)(this.Cx,this.Kf.config.pageUrl),explorationMode:this.Kf.config.explorationMode,viewability:this.Ac,outstream:this.Ax,domainURL:this.Kf.config.domainURL,isClickToPlay:i,appVersion:this.Kf.config.appVersion,deviceID:this.Kf.services.UserManagerService.getDeviceId(),lineItems:this.Rx(t),isCcpaBlockingUserInfo:!this.Kf.services.UserManagerService.isSellUserAllowed(),usPrivacyString:this.Kf.services.UserManagerService.getUsPrivacyString(),generationId:this.Gy.generationId,individualId:this.Gy.individualId,adSkippability:this.Tx.adSkippability,skipAdAfter:this.Tx.skipAdAfter,gdprConsentMode:this.Kf.services.UserManagerService.gdprConsentMode,customMacros:this.Kf.services.MacrosService.getExtraMacros(),maxAdDuration:this.dl.getMaxAdSlotDuration()/je.f};Ze.a.sendProtoRequest({endpoint:Ds.a.endPoints.api.rtb,ProtoRequest:h.ProtoRtbRequest,ProtoResponse:h.ProtoRtbResponse,requestData:n,queryParams:{[nn.b]:ui.a.version}}).then(t=>{this.Ky=!1,this.Dx(t)}).catch(t=>{this.Ky=!1,this.lx()})}Dx(t){const i=[],e=t.usedDefaultGeneticParams;t.lineItemResponses.forEach(s=>{const n=s.id,r=this.Mx(n);r.cachedFloorPrice=s.cachedFloorPrice;const h=s.bids;s.noBids.forEach(i=>{const s=this.Bx(r.lineItem.advertiserLineItemId,r.lineItem.publisherLineItemId,i.requestedFloorPrice,i.syncedUser,i.connatixReason,this.Hy,i.partnerReason,i.partnerCustomHeaders);r.onPreBid(s,e,!0,!t.loggingHandledByServer),this.Ex.addPrebid(r.lineItem.advertiserLineItemId)}),h.forEach(t=>{i.push({adSourceWrapperRtbCollection:r,bid:t})})});const s=i.sort((t,i)=>i.bid.yoScore-t.bid.yoScore);this.Zy=s.length,this.tx=0,s.forEach(i=>{const s=i.adSourceWrapperRtbCollection,n=this.$x(i.adSourceWrapperRtbCollection.lineItem.advertiserLineItemId),r=n||i.bid,h=new sn(this._x,s.lineItem,r,e,this.dl,this.Kf);s.addAdSourceWrapper(h),h.updateData(this.Hy,!t.loggingHandledByServer).then(()=>{this.Ex.addBid(h.advertiserLineItemId,r.requestedFloorPrice),this.mediator.publish(this,Qe.c[Qe.c.ExternalAdSelected],{payload:h}),this.Fx()}).catch(i=>{this.Ex.addPrebid(s.lineItem.advertiserLineItemId);const n=this.Bx(s.lineItem.advertiserLineItemId,s.lineItem.publisherLineItemId,h.getFloorPrice(),h.isUserSynced(),i.reason,i.numberOfRequests);s.onBidToPrebid(h,n,e,!t.loggingHandledByServer),this.Fx()})}),0===this.Zy&&this.lx()}Fx(){this.tx++,this.tx===this.Zy&&this.lx()}Vx(t,i){const e={};return t.forEach(t=>{const s=t.lineItem;e[s.advertiserLineItemId]=i(s)}),e}Bx(t,i,e,s,n,r,h,a){const o={advertiserLineItemId:t,publisherLineItemId:i,requestedFloorPrice:e,syncedUser:s,reason:n,rtbRequestNumber:r};return h&&(o.partnerReason=h),a&&(o.partnerCustomHeaders=a),o}Rx(t){return this.Vx(t,this.Px)}hx(t){const i=this.jx.filter(t=>t.status!==Qe.b.Capped&&this.Ex.shouldRequestLineItem(t.lineItem.advertiserLineItemId));this.Lx(i,t)}$x(t){const i=this.Kf.config.topWindow[this.Ix];if(!Object(Ls.b)(this.Ix,this.Kf.config.pageUrl)||!Object(u.h)(i))return;const e=i.find(({advertiserLineItemId:i})=>i===t);return e?e.mockBid:void 0}getAdSourceRtbCollectionList(){return this.jx}adFinished(t,i){this.jx.forEach(e=>{e.removeAdSourceWrapper(t,i)})}storeImpressionMetrics(t){this.Ex.addImpression(t.payload.adSourceData.adId,t.payload.gtkpbp)}userInteraction(t){if(super.userInteraction(t),!t)return;this.hx(!0)}}class cn extends on{constructor(){super(...arguments),this.Ux=!1,this.Nx=[]}Lx(t,i=!1){this.Ac?(this.Nx=[],this.Ux=!1,super.Lx(t,i)):(this.lx(),this.Ux=!0,this.Nx=t)}updateViewability(t){super.updateViewability(t),this.Ux&&this.Lx(this.Nx)}disableCalls(){super.disableCalls(),this.Nx=[],this.Ux=!1}}var ln;!function(t){t.Telaria="telaria",t.OneVideo="oneVideo",t.IndexExchange="ix",t.Rubicon="rubicon",t.RhythmOne="rhythmone",t.Pubmatic="pubmatic",t.SpotX="spotx"}(ln||(ln={}));const un="https://prebid.adnxs.com/pbc/v1/cache",dn="//cds.connatix.com/p/plugins/prebid3.25.0-1.js",fn=["video/mp4","video/webm","application/javascript","video/ogg","video/mpeg"],pn={VAST_1:1,VAST_2:2,VAST_3:3,VAST_1_WRAPPER:4,VAST_2_WRAPPER:5,VAST_3_WRAPPER:6},bn=1,vn=1,gn=2,mn=t=>{const i=(()=>({usePrebidCache:!0,cache:{url:un},userSync:{iframeEnabled:!0,filterSettings:{iframe:{bidders:"*",filter:"include"}}},ix:{timeout:900}}))();return t&&(i.schain=(t=>({validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:t.businessDomain,hp:1,sid:t.supplyChainId?t.supplyChainId:null}]}}))(t)),i},yn=[...fn],xn=[pn.VAST_2_WRAPPER,pn.VAST_2,pn.VAST_3,pn.VAST_3_WRAPPER],wn=[vn,gn],kn=(t,i,e,s,n)=>{const r={code:Object(ht.c)(),mediaTypes:{video:{playerSize:[Math.floor(t),Math.floor(i)],context:e?"outstream":"instream",mimes:yn,protocols:xn,linearity:bn,api:wn,frameworks:[vn,gn],maxduration:s/je.f||180,minDuration:0}},bids:[]};return Object(b.e)(n)&&(r.floors=(t=>({currency:"USD",schema:{fields:["mediaType"]},values:{video:t}}))(n)),r},Sn={[ln.Telaria]:(t,i)=>{const e=Object.assign({},t);return t.srcPageUrl||(e.srcPageUrl=i.pageUrl),e},[ln.OneVideo]:(t,i)=>{Object(b.h)(t.pubId)||Object(n.a)({message:"AdManager_HeaderBidder_OneVideo_pubId_missing",level:h.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1});const e=Object.assign(Object.assign({},t),{pubId:t.pubId,video:{playerWidth:Math.floor(i.playerWidth),playerHeight:Math.floor(i.playerHeight),mimes:yn,protocols:xn,api:wn},site:{page:i.pageUrl}}),s=i.floorPrice;return Object(b.e)(s)&&(e.bidfloor=s),e},[ln.IndexExchange]:(t,i)=>{const e=t.siteId;if(!Object(b.h)(e))return void Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_IX_adapter_missing_siteId",callStack:i.lineItemId});const s=Object.keys(pn).map(t=>pn[t]),r={siteId:e,size:[Math.floor(i.playerWidth),Math.floor(i.playerHeight)],video:{mimes:fn,minduration:0,maxduration:i.maxDuration,protocols:s}};Object(b.d)(t.minduration)&&(r.video.minduration=t.minduration),Object(b.d)(t.maxduration)&&t.maxduration<=i.maxDuration&&(r.video.maxduration=t.maxduration),Object(b.h)(t.id)&&(r.id=t.id);const a=i.floorPrice;return Object(b.e)(a)&&(r.bidFloor=a,r.bidFloorCur="USD"),r},[ln.Rubicon]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(b.e)(s)&&(e.floor=s),e},[ln.RhythmOne]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(b.e)(s)&&(e.floor=s),e},[ln.Pubmatic]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(b.e)(s)&&(e.kadfloor=String(s)),e},[ln.SpotX]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(b.e)(s)&&(e.price_floor=s),e}},On=(t,i)=>{try{const e=JSON.parse(t);return e.length>1&&Object(n.a)({message:"AdManager_AdSourceWrappe_multiple_bidders",level:h.ProtoLoggingLevelEnum.WARNING,callStack:i,exception:t,throttle:1,sendMaxLog:!1}),e[0].bidder}catch(e){Object(n.a)({message:"AdManager_AdSourceWrapper_cannot_get_bidder",level:h.ProtoLoggingLevelEnum.WARNING,callStack:i,exception:t,throttle:2,sendMaxLog:!1})}};class _n{constructor(t,i,e,s){this.Hx=t,this.qx=i,this._r=e,this.zx=s}requestHeaderBidder(t,i,e){return new Promise((s,n)=>{this.Wx().then(()=>{const n=t.map(t=>this.Gx(t,i,e).then(t=>t));Promise.all(n).then(t=>{s(t)})}).catch(t=>{n(h.ConnatixNoBidReasonEnum.NoBid)})})}Gx(t,i,e){return new Promise(s=>{let n=[];const r=t.lineItem.floorPrices;if(Object(u.h)(r)){n=this.Qx(r,t.ignoredFloorPriceIndexes,t.availableRequests).map(s=>this.Jx(t.lineItem,s.floorPrice,s.floorPriceIndex,i,e,r))}else if(!Object(u.h)(t.ignoredFloorPriceIndexes)&&t.availableRequests>0){const s=0,h=this.Jx(t.lineItem,t.lineItem.floorPrice,s,i,e,r);n.push(h)}Promise.all(n).then(i=>{const e=[],n=[],r=t.lineItem.advertiserLineItemId;i.forEach(t=>{t.reason?n.push(t):e.push(t)}),s({bids:e,noBids:n,lineItemId:r})})})}Jx(t,i,e,s,n,r){return new Promise(h=>{this.Xx(t,i,e,s,n,r).then(t=>{h(t)}).catch(t=>{h(t)})})}Wx(){return new Promise((t,i)=>{window.pbjs?(this.Yx=window.pbjs,t()):Object(A.A)({src:dn},window.document.head,window,()=>{this.Yx=window.pbjs,this.Kx(),t()},()=>{i(h.ConnatixNoBidReasonEnum.NoBid)},!0,"AdManager_HeaderBidder_unable_to_insert_prebidJs_script")})}Kx(){const t=mn(this.Hx);window.pbjs.setConfig(t)}Xx(t,i,e,s,r,a){return new Promise((o,c)=>{const l=kn(s,r,this.zx,this.qx.getMaxAdSlotDuration(),i);try{const s=t.headerBidderBids;l.bids=JSON.parse(s)}catch(t){return Object(n.a)({message:"AdManager_HeaderBidder_unable_to_parse_header_bidder",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.WARNING}),void c({reason:h.ConnatixNoBidReasonEnum.NoBid,floorPrice:i,floorPriceIndex:e})}l.bids.forEach(e=>this.Zx(e,s,r,i,t.advertiserLineItemId)),this.Yx.que.push(()=>{this.Yx.addAdUnits(l);const s={timeout:t.headerBidderTimeout,adUnits:[l],bidsBackHandler:()=>{try{let s;if(!(s=this.Yx.getHighestCpmBids(l.code)[0]))return void c({reason:h.ConnatixNoBidReasonEnum.CsEmptyResponse,floorPrice:i,floorPriceIndex:e});if(!this.tw(s))return Object(n.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"AdManager_HeaderBidder_no_content",exception:JSON.stringify(s)}),void c({reason:h.ConnatixNoBidReasonEnum.CsInvalidResponse,floorPrice:i,floorPriceIndex:e});const r=this.iw(s),u=s.cpm||s.adResponse.ad.cpm,d={vastTag:r,lineItemId:t.advertiserLineItemId,floorPrice:i,floorPriceIndex:e,cpm:u};Object(b.e)(i)&&u<i&&Object(n.a)({message:"AdManager_HeaderBidderRequester_cpm_lower_than_floorprice",level:h.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!1,throttle:5,exception:`floorPrices_${a}_index_${e}_cpm_${u}_li_${t.advertiserLineItemId}`,callStack:On(t.headerBidderBids,t.advertiserLineItemId)}),o(d)}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"AdManager_HeaderBidder_Prebidjs_error",exception:t.message,callStack:t.stack}),c({reason:h.ConnatixNoBidReasonEnum.NoBid,floorPrice:i,floorPriceIndex:e})}}};this.Yx.requestBids(s)})})}Zx(t,i,e,s,n){const r=Sn[t.bidder];r&&(t.params=r(t.params,{playerWidth:i,playerHeight:e,maxDuration:this.qx.getMaxAdSlotDuration(),pageUrl:this._r,floorPrice:s,lineItemId:n}))}tw(t){return t.adserverTargeting&&Object(b.h)(t.adserverTargeting.hb_cache_id)}iw(t){return`${un}?uuid=${t.adserverTargeting.hb_cache_id}`}Qx(t,i,e){const s=[];let n=0;for(let r=0;r<t.length;r++)-1===i.indexOf(r)&&n<e&&(s.push({floorPrice:t[r],floorPriceIndex:r}),n++);return s}}function jn(t,i,e){return t*i+ze.e*e}class An extends Qs{constructor(t,i,e,s,n,r,h){super(t,i,e.services,r,e.config.appId,e.config.pageDomain,e.config.deviceId,e.config.playerId),this.mediator=t,this.om=i,this.Kf=e,this.ew=s,this.sw=n,this.nw=h}requestBid(){return this.Ya=!1,this.status=Qe.b.Ready,Promise.resolve()}requestVastTag(t){return this.dm++,new Promise((i,e)=>{const s=new ds;return this.iy(s.getVastResponse(this.om.adTag)).then(()=>{this.Ya=!1,this.status=Qe.b.Ready,this.Zm(Date.now()-t),i()}).catch(t=>{e(t)})})}getFloorPrice(){return this.ew}getFloorPriceIndex(){return this.sw}Km(t){return Object.assign(Object.assign({},super.Km(t)),{prebidJsBidderName:this.nw,customClientPrice:this.om.customCpm})}Wm(){return Object.assign(Object.assign({},super.Wm()),{prebidjsBidderName:this.nw})}Qm(t){return Object.assign(Object.assign({},super.Qm(t)),{prebidJsBidderName:this.nw})}setAdTag(t){this.om.adTag=t}setCustomCpm(t){this.om.customCpm=t,this.rw(t)}rw(t){this.Kf.config.explorationMode||(this.Rm=jn(this.om.successRate,t,this.om.lineItemPriority))}onPreBid(t,i,e=!1){}}class Tn extends hn{constructor(t,i,e=[],s,n){super(t,n.app,n.hasSound,n.geneticAlgoInformation,n.startTickTimestamp),this._x=i,this.hw=e,this.jp=s,this.aw=n,this.isHeaderBidderCaller=!0,this.ow=new _n(this.aw.pbjsSchainSettings,this.aw.adBreakFacade,this.aw.app.config.pageUrl,n.outstream)}cw(t){return this.hw.find(i=>i.lineItem.advertiserLineItemId===t)}lw(t){this.ox();const{width:i,height:e}=this.jp.getSlotForAd(h.ProtoAdType.Video);if(!this.ux(t,i,e))return;this.Ky=!0,f.a.addCustomHistoryLine("callHeaderBidder",{view:this.Ac});const s=Date.now(),n=t.map(t=>{const i=t.lineItem;return{lineItem:i,ignoredFloorPriceIndexes:t.adSourceWrapperList.map(t=>t.getFloorPriceIndex()),availableRequests:i.requestCap-t.requestCount}});this.ow.requestHeaderBidder(n,i,e).then(t=>{this.Ky=!1,this.uw(t,s)}).catch(()=>{this.Ky=!1,this.lx()})}uw(t,i){const e=Date.now()-i,s=[];t.forEach(t=>{const i=t.lineItemId,n=this.cw(i),{bids:r,noBids:h}=t;h.forEach(t=>{const i=this.Bx(n.lineItem.advertiserLineItemId,n.lineItem.publisherLineItemId,n.getPrebidJsBidder(),t.floorPrice,t.reason,e);n.onPreBid(i,!1,!0)}),s.push(...r)});const n=s.sort((t,i)=>i.cpm-t.cpm);this.Zy=n.length,this.tx=0,n.forEach(t=>{const s=this.cw(t.lineItemId),n=s.getPrebidJsBidder(),r=this.dw(s.lineItem,this.aw,t.floorPrice,t.floorPriceIndex,n);r.setAdTag(t.vastTag),r.setCustomCpm(t.cpm),s.addAdSourceWrapper(r),r.requestVastTag(i).then(()=>{this.mediator.publish(this,Qe.c[Qe.c.ExternalAdSelected],{payload:r}),this.Fx()}).catch(i=>{const n=Date.now()-e,h=this.Bx(s.lineItem.advertiserLineItemId,s.lineItem.publisherLineItemId,s.getPrebidJsBidder(),t.floorPrice,i,n);s.onBidToPrebid(r,h,!1),this.Fx()})}),0===this.Zy&&this.lx()}Bx(t,i,e,s,n,r){return{advertiserLineItemId:t,publisherLineItemId:i,prebidJsBidderName:e,requestedFloorPrice:s,reason:n,timeSpent:r}}dw(t,i,e,s,n){return new An(this._x,t,i.app,e,s,this.aw.adBreakFacade,n)}Fx(){this.tx++,this.tx===this.Zy&&this.lx()}fw(t){return!0}pw(t){return t!==Qe.b.Capped}vw(){return this.hw.filter(t=>{const i=t.getPrebidJsBidder();return this.pw(t.status)&&this.fw(i)})}hx(t){const i=this.vw();this.lw(i)}getAdSourceHeaderBidderCollectionList(){return this.hw}adFinished(t,i){this.hw.forEach(e=>{e.removeAdSourceWrapper(t,i)})}userInteraction(t){if(super.userInteraction(t),!t)return;this.hx(!0)}}class Cn extends o.a{constructor(t,i,e){super(),this.mediator=t,this.gw=i,this.cm=e,this.mw=[],this.wm=0,this.xm=0,this.dm=0,this.fm=0,Object(b.h)(this.gw.headerBidderBids)&&this.gw.creativeType===h.ProtoCreativeTypeEnum.HeaderBidder&&(this.yw=On(this.gw.headerBidderBids,this.gw.advertiserLineItemId))}get adSourceWrapperList(){return this.mw}get lineItem(){return this.gw}get status(){return this.gy}get requestCount(){return this.dm}get cachedFloorPrice(){return this.xw}set cachedFloorPrice(t){Object(b.d)(t)&&t>=0?this.xw=t:Object(n.a)({message:"AdManager_RtbCollection_negative_cached_floor_price",level:h.ProtoLoggingLevelEnum.FATAL})}addAdSourceWrapper(t){this.ww(),this.xm++,this.mw.push(t)}removeAdSourceWrapper(t,i){const e=this.mw.indexOf(i);-1!==e&&(this.mw.splice(e,1),t&&(this.kw(),this.gw.ignoreFilledRequests&&this.Sw()),f.a.addCustomHistoryLine("removeAdSourceWrapperFromCol",{index:e}))}onBidToPrebid(t,i,e,s=!0){this.onPreBid(i,e,!1,s),f.a.logPreBid(t);this.removeAdSourceWrapper(!1,t)}onPreBid(t,i,e,s=!0){s&&this.cm.TrackingService.addPrebid(t,i),e&&(this.wm++,this.ww())}isWrapper(){return!1}isCapped(){return this.gy===Qe.b.Capped}resetBidsAndPrebidsCount(){this.wm=0,this.xm=0}get hasResetCappingOnTime(){return this.gw.resetCapType===h.ProtoResetCapTypeEnum.TimeCapping}get hasResetCappingOnContent(){return this.gw.resetCapType===h.ProtoResetCapTypeEnum.ContentCapping}get hasResetCappingOnAdOpportunity(){return this.gw.resetCapType===h.ProtoResetCapTypeEnum.OpportunityCapping}get resetRequestCapSec(){return this.gw.resetRequestsCapTime}get resetImpressionCapSec(){return this.gw.resetImpressionsCapTime}resetRequestCap(){this.dm=0,this.uy()}resetImpressionCap(){this.fm=0,this.uy()}getBidsCount(){return this.xm}getPrebidsCount(){return this.wm}getPrebidJsBidder(){return this.yw}uy(){this.gy!==Qe.b.Capped||this.Bm()||(this.gy=Qe.b.Idle)}Bm(){return 0!==this.gw.requestCap&&this.gw.requestCap<=this.dm||0!==this.gw.impressionCap&&this.gw.impressionCap<=this.fm}Ow(){this.Bm()&&(this.gy=Qe.b.Capped,0!==this.lineItem.impressionCap&&this.fm>=this.lineItem.impressionCap&&this.mediator.publish(this,Qe.c[Qe.c.AdSourceWrapperCollectionCappedByImpression],{payload:this.mw}))}ww(){this.dm++,this.Ow()}Sw(){this.dm--,this.uy()}kw(){this.fm++,this.Ow()}}class In extends Tn{constructor(){super(...arguments),this.Ux=!1,this._w=[]}lw(t){this.Ac?(this._w=[],this.Ux=!1,super.lw(t)):(this.lx(),this.Ux=!0,this._w=t)}updateViewability(t){super.updateViewability(t),this.Ux&&this.lw(this._w)}disableCalls(){super.disableCalls(),this._w=[],this.Ux=!1}}class Pn extends Qs{constructor(t,i,e,s){super(t,i,s.services,e,s.config.appId,s.config.pageDomain,s.config.deviceId,s.config.playerId),this.mediator=t,this.om=i,this.jw=!1}Wm(){return Object.assign(Object.assign({},super.Wm()),{encryptedPrice:this.Aw})}Km(t){return Object.assign(Object.assign({},super.Km(t)),{encryptedPrice:this.Aw})}requestBid(){return this.Ya=!1,this.status=Qe.b.Ready,Promise.resolve()}bidConsumed(){this.setStatusCappedIfNeeded(),this.gy!==Qe.b.Capped&&(this.gy=Qe.b.Idle)}requestVastTag(t){return this.dm++,new Promise((i,e)=>{const s=new ds(!1);return this.iy(s.getVastResponse(this.om.adTag)).then(()=>{this.Ya=!1,this.status=Qe.b.Ready,this.Zm(Date.now()-t),i()}).catch(t=>{e(t)})})}setYoScore(t){this.Rm=t,this.jw=!0}setEncryptedPrice(t){this.Aw=t}getEncryptedPrice(){return this.Aw}onPreBid(t,i){this.dm++,super.onPreBid(t,i)}setAdTag(t){this.om.adTag=t}betterYoScoreOpportunity(t){return!this.jw||this.gy!==Qe.b.InImpression&&this.gy!==Qe.b.InWin&&(this.jw&&this.Rm<t)}}const Mn="apstag",En="video";class Ln{constructor(t,i,e,s){this.Tw=t,this.Kf=i,this.Cw=s,this.Iw(e)}Iw(t){const i=Object(A.s)(t,Mn),e=Object(A.r)(t,Mn);i?this.Pw=i[Mn]:e?this.Pw=e[Mn]:Object(n.a)({message:"TamRequester_TAM_lib_not_found_in_page",level:h.ProtoLoggingLevelEnum.WARNING})}requestTam(t){return new Promise((i,e)=>{this.Pw||e(h.ConnatixNoBidReasonEnum.NoBid);const s=t.map(t=>this.Mw(t).then(()=>({adSource:t,reason:null})).catch(i=>({adSource:t,reason:i})));Promise.all(s).then(t=>{const e=[],s=[];t.forEach(t=>{null!==t.reason?s.push({reason:t.reason,adSource:t.adSource}):e.push(t.adSource)}),i({bids:e,noBids:s})})})}Mw(t){return new Promise((i,e)=>{this.Pw.fetchBids({slots:[{slotID:this.Cw,mediaType:En}]},s=>{if(!Object(u.h)(s))return void e(h.ConnatixNoBidReasonEnum.EmptyResponse);const n=s[0];this.Ew(t,n).then(()=>{i()}).catch(t=>{e(t)})})})}Ew(t,i){const e={lineItemId:t.advertiserLineItemId,code:i.amznbid,metadata:this.Kf.services.TrackingService.getMetadataModel(),exploration:this.Tw};return new Promise((s,n)=>{Ze.a.sendProtoRequest({endpoint:Ds.a.endPoints.api.tam,ProtoRequest:h.ProtoTamRequest,ProtoResponse:h.ProtoTamResponse,requestData:e,queryParams:{[nn.b]:ui.a.version}}).then(e=>{if(Object(b.h)(e.errorMessage))return void n(e.errorMessage);if(!e.encriptedBidPrice)return void n(h.ConnatixNoBidReasonEnum.InvalidResponse);const r=e.score;if(Object(b.e)(r)&&t.betterYoScoreOpportunity(r)){t.setYoScore(r);const n=`https://aax.amazon-adsystem.com/e/dtb/vast?b=${i.amzniid}&rnd=${Object(ht.c)()}&pp=${i.amznbid}`;t.setAdTag(n),t.setEncryptedPrice(e.encriptedBidPrice),s()}else n(h.ConnatixNoBidReasonEnum.BidBelowFloor)}).catch(t=>{n(h.ConnatixNoBidReasonEnum.RequestException)})})}}class Rn extends hn{constructor(t,i=[],e,s){super(t,s.app,s.hasSound,s.geneticAlgoInformation,s.startTickTimestamp),this.Lw=i,this.jp=e,this.isTamBidderCaller=!0,this.Rw=new Ln(s.app.config.explorationMode,s.app,s.global,s.amazonTamSlotId)}getAdSourceTamList(){return this.Lw}adFinished(t,i){const e=this.Lw.find(t=>i===t);e&&(e.setYoScore(0),e.bidConsumed())}userInteraction(t){if(super.userInteraction(t),!t)return;this.hx(!0)}hx(t){let i;i=this.Lw.filter(t=>t.status!==Qe.b.Capped),this.Dw(i)}Dw(t){this.ox();const{width:i,height:e}=this.jp.getSlotForAd(h.ProtoAdType.Video);if(!this.ux(t,i,e))return;this.Ky=!0,f.a.addCustomHistoryLine("callTamBidder",{view:this.Ac});const s=Date.now();this.Rw.requestTam(t).then(t=>{this.Ky=!1,this.Bw(t,s)}).catch(()=>{this.Ky=!1,this.lx()})}Bw(t,i){const e=Date.now()-i;t.noBids.forEach(t=>{t.adSource.onPreBid(t.reason,e)});const s=t.bids.sort((t,i)=>i.yoScore-t.yoScore);this.Zy=s.length,this.tx=0,s.forEach(t=>{t.requestVastTag(i).then(()=>{this.mediator.publish(this,Qe.c[Qe.c.ExternalAdSelected],{payload:t}),this.Fx()}).catch(i=>{const s=Date.now()-e;t.onPreBid(i,s),this.Fx()})}),0===this.Zy&&this.lx()}Fx(){this.tx++,this.tx===this.Zy&&this.lx()}}class Dn{constructor(t,i,e,s,n,r){this.mediator=t,this.adManagerMediator=i,this.jp=s,this.dl=r,this.$w=[],this.Fw(e,n)}getCallers(){return this.$w}Fw(t,i){this.Vw(t,i),this.Uw(t,i),this.Nw(t,i)}Vw(t,i){const e=this.Hw(t,Ut.ProtoCreativeTypeEnum.Rtb);f.a.setRtbAdList(e);const s=this.qw(e,!0),n=this.qw(e,!1);Object(u.h)(s)&&this.zw(s,i),Object(u.h)(n)&&this.Ww(n,i)}Uw(t,i){const e=this.Hw(t,Ut.ProtoCreativeTypeEnum.HeaderBidder);f.a.setHeaderBidderAdList(e);const s=this.qw(e,!0),n=this.qw(e,!1);Object(u.h)(s)&&this.Gw(s,i),Object(u.h)(n)&&this.Qw(n,i)}Nw(t,i){const e=this.Hw(t,Ut.ProtoCreativeTypeEnum.Tam);if(f.a.setHeaderBidderAdList(e),Object(u.h)(e)){const t=this.Xw(e,i.app),s=new Rn(this.mediator,t,this.jp,i);this.$w.push(s)}}Hw(t,i){return t.filter(({creativeType:t})=>t===i)}qw(t,i){return t.filter(({viewability:t})=>t===i)}zw(t,i){const e=this.Yw(t,i.app.services),s=new cn(this.mediator,this.adManagerMediator,e,i.app,i.hasSound,i.outstream,i.geneticAlgoInformation,i.skipAdsSettings,this.jp,i.startTickTimestamp,this.dl);this.$w.push(s)}Ww(t,i){const e=this.Yw(t,i.app.services),s=new on(this.mediator,this.adManagerMediator,e,i.app,i.hasSound,i.outstream,i.geneticAlgoInformation,i.skipAdsSettings,this.jp,i.startTickTimestamp,this.dl);this.$w.push(s)}Gw(t,i){const e=this.Kw(t,i.app.services),s=new In(this.mediator,this.adManagerMediator,e,this.jp,i);this.$w.push(s)}Qw(t,i){const e=this.Kw(t,i.app.services),s=new Tn(this.mediator,this.adManagerMediator,e,this.jp,i);this.$w.push(s)}Yw(t,i){return t.map(t=>new Cn(this.adManagerMediator,t,i))}Kw(t,i){return t.map(t=>new Cn(this.adManagerMediator,t,i))}Xw(t,i){return t.map(t=>new Pn(this.adManagerMediator,t,this.dl,i))}}class Bn extends o.a{constructor(t,i,e,s,n){super(),this.mediator=t,this.Zw=[],this.tk=t=>{this.mediator.publish(this,Qe.c[Qe.c.ExternalAdSelected],t)},this.ik=t=>{const i=t.payload;this.ek(i),this.unsubscribe(Qe.c[Qe.c.AuctionCallReady],i,this.ik),this.sk()};const r=new Dn(this,this.mediator,i,e,s,n);this.$w=r.getCallers(),this.$w.forEach(t=>this.nk(t)),this.rk()}rk(){this.$w.forEach(t=>{this.subscribe(Qe.c[Qe.c.ExternalAdSelected],t,this.tk),this.subscribe(Qe.c[Qe.c.AuctionCallReady],t,this.ik)})}hk(t){return!t.enabled||t.ready}sk(){this.Zw.every(t=>this.hk(t))&&this.mediator.publish(this,Qe.c[Qe.c.AuctionCompleted])}ak(t){return!0===t.isRtbCaller}ck(t){return!0===t.isHeaderBidderCaller}lk(t){return!0===t.isTamBidderCaller}ek(t){this.uk(t).ready=!0}uk(t){for(let i=0;i<this.Zw.length;i++)if(this.Zw[i].caller===t)return this.Zw[i]}nk(t){this.Zw.push({caller:t,enabled:!0,ready:!1})}storeImpressionMetrics(t){this.$w.forEach(i=>{this.ak(i)&&i.storeImpressionMetrics(t)})}getAdSourceRtbCollectionList(){const t=[];return this.$w.forEach(i=>{if(this.ak(i)){const e=i.getAdSourceRtbCollectionList();t.push(...e)}}),t}getAdSourceHeaderBidderCollectionList(){const t=[];return this.$w.forEach(i=>{if(this.ck(i)){const e=i.getAdSourceHeaderBidderCollectionList();t.push(...e)}}),t}getAdSourceTamList(){const t=[];return this.$w.forEach(i=>{if(this.lk(i)){const e=i.getAdSourceTamList();t.push(...e)}}),t}adFinished(t,i){this.$w.forEach(e=>{i.isRtb&&this.ak(e)&&e.adFinished(t,i),i.isHeaderBidder&&this.ck(e)&&e.adFinished(t,i),i.isTam&&this.lk(e)&&e.adFinished(t,i)})}onTickCallback(){this.$w.forEach(t=>t.onTickCallback())}enableCalls(){this.$w.forEach(t=>t.enableCalls())}disableCalls(){this.$w.forEach(t=>t.disableCalls())}resetCalls(){this.$w.forEach(t=>t.resetCalls())}updateViewability(t){this.$w.forEach(i=>i.updateViewability(t))}updateSound(t){this.$w.forEach(i=>i.updateSound(t))}userInteraction(t){this.$w.forEach(i=>i.userInteraction(t))}destroy(){this.$w.forEach(t=>{this.unsubscribe(Qe.c[Qe.c.AuctionCallReady],t,this.ik),this.unsubscribe(Qe.c[Qe.c.ExternalAdSelected],t,this.tk),t.destroy()})}}const $n={ratio:1,range:[0,1.001]},Fn=4,Vn=20,Un=5;class Nn{constructor(t){this.dk=t,this.fk=new Map,Object(u.h)(this.dk)||(this.dk=[$n]),this.dk=this.dk.map(t=>{return{ratio:this.pk(t.ratio),range:[this.pk(t.range[0]),this.pk(t.range[1])]}})}addAdSourceList(t){t.forEach(t=>{const i=this.bk(t);this.fk.set(t,i)})}getCurrentResetRequestCapTimeSec(t){const i=this.vk(t);return i?i.currentResetRequestCapTimeSec:(Object(n.a)({message:"AdManager_currentInternalAdsource_not_found",level:h.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!1,throttle:2}),t.resetRequestCapSec)}adSourceReset(t){const i=this.vk(t);i.resetCount++,i.resetCount%Un==0&&i.adSource.resetBidsAndPrebidsCount();this.gk(i,!0)}recalculateResetRequestCapTime(){this.fk.forEach(t=>{this.gk(t,!1)})}bk(t){return{adSource:t,currentResetRequestCapTimeSec:t.resetRequestCapSec,currentIteration:0,resetCount:0}}pk(t){return parseFloat(t.toPrecision(Fn))}vk(t){return this.fk.get(t)}gk(t,i){const e=t.adSource.resetRequestCapSec,s=this.mk(t,i),n=t.currentIteration,r=e*Math.pow(s,n),h=Math.max(r,Vn);t.currentResetRequestCapTimeSec=0===e?0:h}mk(t,i){const e=this.yk(t),s=e+this.xk(t);if(0===s)return $n.ratio;const r=e/s;if(r<0||r>1)return Object(n.a)({message:"AdManager_bidrate_out_of_range",level:h.ProtoLoggingLevelEnum.INFO,throttle:2,sendMaxLog:!1,callStack:`${r}`}),$n.ratio;const a=this.wk(t,r,i);return a?a.ratio:(Object(n.a)({message:"AdManager_select_ratio_no_bucket",level:h.ProtoLoggingLevelEnum.WARNING,throttle:2,sendMaxLog:!1,callStack:`${a}`}),$n.ratio)}wk(t,i,e){let s;return this.dk.forEach(n=>{const r=n.range[0],h=n.range[1];i>=r&&i<h&&(s=n,t.currentBucket!==s?(t.currentIteration=0,t.currentBucket=s):e&&t.currentIteration++)}),s||(Object(n.a)({message:"AdManager_select_bucket_not_found",throttle:2,sendMaxLog:!1,level:h.ProtoLoggingLevelEnum.INFO,callStack:`bidrate_${i}`}),s=$n),s}yk(t){return t.adSource.getBidsCount()}xk(t){return t.adSource.getPrebidsCount()}}class Hn extends o.a{constructor(t,i,e){super(),this.mediator=t,this.startTickTimestamp=i,this.kk=[],this.Sk=[],this.Ok=[],this._k=new Nn(e)}addAdSourceList(t){const i=[];t.forEach(t=>{t.hasResetCappingOnContent?this.jk(t):t.hasResetCappingOnTime&&(this.Ak(t),i.push(t)),t.hasResetCappingOnAdOpportunity&&this.Tk(t),this._k.addAdSourceList(i)})}Tk(t){this.Ok.push({adSource:t})}jk(t){this.Sk.push({adSource:t})}Ak(t){const i=this.startTickTimestamp;this.kk.push({lastRequestCapResetTimestamp:i,lastImpressionCapResetTimestamp:i,adSource:t})}onContentChange(){const t=[];this.Sk.forEach(i=>{const e=this.Ck(i.adSource);t.push(e)}),Object(u.h)(t)&&this.mediator.publish(this,Qe.c[Qe.c.AdSourceCapResetList],{payload:t})}newAdOpportunity(){const t=[];this.Ok.forEach(i=>{const e=this.Ck(i.adSource);t.push(e)}),Object(u.h)(t)&&this.mediator.publish(this,Qe.c[Qe.c.AdSourceCapResetList],{payload:t})}onTickCallback(){const t=Object(Ht.c)();this._k.recalculateResetRequestCapTime();const i=[];this.kk.forEach(e=>{const s=this.Ik(e.adSource);this.Pk(e,t)&&i.push(s)}),Object(u.h)(i)&&this.mediator.publish(this,Qe.c[Qe.c.AdSourceCapResetList],{payload:i})}Pk(t,i){let e=!1;return this.Mk(t,i)&&(this.Ek(t,i),e=!0),this.Lk(t,i)&&(this.Rk(t,i),e=!0),e}Ck(t){const i=this.Ik(t);return t.resetImpressionCap(),t.resetRequestCap(),i}Mk(t,i){const e=Object(Ht.d)(i,t.lastRequestCapResetTimestamp),s=this._k.getCurrentResetRequestCapTimeSec(t.adSource);return 0!==s&&e>=s}Lk(t,i){const e=Object(Ht.d)(i,t.lastImpressionCapResetTimestamp),s=t.adSource.resetImpressionCapSec;return 0!==s&&e>=s}Ek(t,i){t.adSource.resetRequestCap(),t.lastRequestCapResetTimestamp=i,this._k.adSourceReset(t.adSource)}Rk(t,i){t.adSource.resetImpressionCap(),t.lastImpressionCapResetTimestamp=i}Ik(t){return{wasCapped:t.isCapped(),adSource:t}}}var qn=e(26);const zn={Viewability:"viewability"},Wn=16/9,Gn=500;class Qn{constructor(t,i,e){this.mediator=t,this.Kf=i,this.Dk=e,this.Bk=`cnx-ad-slot-${Object(ht.c)()}`,this.$k=[],this.Fk={},this.Vk=[]}initAdSlots(t){this.$k=t.map(t=>{const i=this.Uk(t.container,t.type);this.Nk(i,t.width,t.height);const e=t=>{this.Hk(t,i)};return this.Kf.services.ViewabilityService.on(i.$mainContainer,e,{threshold:this.Dk}),this.Vk.push({container:i.$mainContainer,callback:e}),i})}createAdSlots(t){this.$k.forEach(i=>{this.qk(i,t)})}refreshAdSlots(t){this.$k.forEach(i=>{if(i.$adSlotParent){const t=i.$adSlotParent;setTimeout(()=>{Object(A.J)(t)},Gn)}this.qk(i,t)})}getSlotForAd(t){return this.zk(t)}setSlotVolume(t){this.$k.forEach(({$videoSlot:i})=>{i&&this.Wk(i,t)})}getAdSlotsGlobalContext(){return Object(A.t)(this.$k[0].$mainContainer)}onResize(t){this.$k.forEach(i=>{t.forEach(t=>{i.$mainContainer===t.container&&this.Nk(i,t.width,t.height)})})}checkViewability(){this.$k.forEach(t=>{const i=this.Kf.services.ViewabilityService.check({element:t.$mainContainer,threshold:this.Dk});this.Hk(i,t)})}destroy(){this.Vk.forEach(t=>{this.Kf.services.ViewabilityService.off(t.container,t.callback)}),this.Vk=[]}Wk(t,i){t.volume=i,Object(A.R)(t,i)}Hk(t,i){i.viewability=t,this.mediator.publish(this,zn.Viewability,{payload:i})}zk(t){if(this.Fk[t])return this.Fk[t];let i;switch(t){case h.ProtoAdType.Video:i=this.Gk(Wn);break;case h.ProtoAdType.Overlay:default:i=this.Qk()}return this.Fk[t]=i,i}Gk(t){let i;return this.$k.forEach(t=>{t.type===h.ProtoAdType.Video&&(i=t)}),i}Qk(){let t=null;return this.$k.forEach(i=>{i.type===h.ProtoAdType.Overlay&&(t=i)}),t||this.$k[0]}Uk(t,i){return{$mainContainer:t,viewability:this.Kf.services.ViewabilityService.check({element:t,threshold:this.Dk}),height:0,width:0,type:i}}qk(t,i){let e,s,n;s=this.Kf.services.GlobalDomUtilsService.createElementByString('<div class= "cnx-full-height"></div>'),e=this.Kf.services.GlobalDomUtilsService.createElementByString(`<div class="cnx-ad-slot" id="${this.Bk}"></div>`),n=this.Kf.services.GlobalDomUtilsService.createElementByString('<video class="cnx-ad-slot cnx-ad-video-slot"></video>'),this.Kf.config.os.os===qn.b.Ios&&(n.setAttribute("playsinline",""),n.setAttribute("webkit-playsinline","")),n.volume=i,Object(A.R)(n,i),s.appendChild(n),s.appendChild(e),t.$mainContainer.appendChild(s),t.$adSlotParent=s,t.$adSlot=e,t.$videoSlot=n}Nk(t,i,e){t.width=i,t.height=e}}class Jn extends o.a{constructor(t,i,e,s,n,r,a=!1,o,c,l,u,d){super(),this.mediator=t,this.Jk=i,this.Xk=e,this.Gy=s,this.Tx=n,this.Kf=r,this.Ax=a,this._p=o,this.Yf=c,this.Cw=l,this.ae=u,this.Yk=d,this.tp=0,this.Kk=void 0,this.Zk=!1,this.tS=.5,this.iS=[],this.eS="cnxRtbDelayWin",this.sS=!1,this.nS=[h.ProtoAdSlotsEnum.PreRoll,h.ProtoAdSlotsEnum.PostRoll],this.rS=t=>{this.hS(t.payload)},this._p===h.ProtoPlayerAdSkippability.Always&&(this.Jk.lineItems=this.Jk.lineItems.filter(t=>t.skipMode!==h.ProtoAdSkipMode.Never)),this.jp=new Qn(this,this.Kf,this.tS)}aS(t){if(f.a.logWin(t),t.isRtb&&(this.iS.forEach(i=>{i===t&&Object(n.a)({message:"AdManager_createAd_win_same_bid_rtb",level:h.ProtoLoggingLevelEnum.FATAL,throttle:1})}),this.iS.push(t)),t===this.oS&&Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"AdManager_createAd_ad_is_currentAd",logJsonState:!0,sendMaxLog:!1,throttle:1}),this.oS){const t=!0,i=!1;this.cS(i,t)}this.oS=t,this.vl(t);const i=this.jp.getSlotForAd(t.getAdType()),e={slot:i.$adSlot,videoSlot:i.$videoSlot};if(t.getAdType()!==h.ProtoAdType.Overlay||t.isRtb||this.Kf.config.device!==h.ProtoDeviceType.Desktop)t.initAd(i.width,i.height,this.Av,this.Yv,"",e);else{const i=this.jp.getSlotForAd(h.ProtoAdType.Video);t.initAd(i.width,i.height,this.Av,this.Yv,"",e)}t.setAdVolume(this.tp),this.Kf.services.TrackingService.setAdViewability(i.viewability);try{this.lS.setContainers(i.$adSlot,i.$videoSlot),this.uS()}catch(t){Object(n.a)({message:"AdManager_createAd_start_enforcer",callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}uS(){let t=tn.All;this.tp&&(t^=tn.Mute),this.Jk.disableScrollHijackEnforcement||(t^=tn.ScrollHijack),this.lS.start(t)}cS(t,i,e){if(this.oS){this.Kf.services.TrackingService.adFinished(),(this.oS.isRtb||this.oS.isHeaderBidder||this.oS.isTam)&&(this.dS.adFinished(t,this.oS),this.fS.removeAdSource(this.oS));try{this.oS.destroyAd(i,e)}catch(t){throw f.a.addCustomHistoryLine("destroy_error",{message:t.message}),t}this.unsubscribeAll(this.oS),this.fS.onDestroyAd(this.oS),this.pS(),f.a.adDestroyed(this.oS)}this.oS=null,this.lS.clearMemoryLeaks(),this.lS.stop(tn.All)}vl(t){Object.keys(w.b).forEach(i=>{this.subscribe(w.b[i],t,t=>{switch(w.b[i]){case w.b.AdImpression:this.dS&&(this.dS.disableCalls(),this.dS.storeImpressionMetrics(t));const e=this.jp.getSlotForAd(this.oS.getAdType());t.payload.selectedAdSlot=e.$mainContainer;break;case w.b.AdError:this.bS();break;case w.b.AdSkipped:t.payload={trackingProperties:this.getCurrentAdClickTrackingProperties()},this.bS(!0);break;case w.b.AdStopped:this.bS(!0)}this.mediator.publish(this,w.b[i],t)})})}bS(t){f.a.adFinished(this.oS),this.cS(t),this.vS(t),this.dS&&this.gS(t)}gS(t){t&&this.dS.resetCalls()}vS(t){t?(f.a.addCustomHistoryLine("reset_ad_finish",{}),this.fS.reset()):this.fS.run()}hS(t){if(this.dS&&t===this.jp.getSlotForAd(h.ProtoAdType.Video)&&this.dS.updateViewability(t.viewability),this.fS&&this.fS.onViewabilityChanged(),this.oS){const{viewability:t}=this.jp.getSlotForAd(this.oS.getAdType());this.Kf.services.TrackingService.setAdViewability(t)}}mS(){this.yS(),this.subscribe(zn.Viewability,this.jp,this.rS)}yS(){this.jp.checkViewability()}xS(){this.lS=new en(this,this.Kf,this.jp.getAdSlotsGlobalContext()),this.wS()}wS(){this.subscribe(Zs.VOLUME_DETECTED,this.lS,()=>{f.a.enforcerAction("soundBlock"),this.stopAd(),Object(n.a)({message:"AdManager_enforcer_soundBlock",level:h.ProtoLoggingLevelEnum.WARNING})}),this.subscribe(Zs.MALWARE_DETECTED,this.lS,t=>{f.a.enforcerAction("AdSourceBlocked"),this.stopAd(),Object(n.a)({message:"AdManager_enforcer_malware",exception:t.payload,level:h.ProtoLoggingLevelEnum.WARNING})}),this.subscribe(Zs.BADURI_DETECTED,this.lS,t=>{f.a.enforcerAction("BadUri"),Object(n.a)({message:"AdManager_enforcer_BadUri",exception:t.payload,level:h.ProtoLoggingLevelEnum.WARNING})})}kS(t){return t.sort((t,i)=>i.yoScore-t.yoScore)}SS(){this.jp.createAdSlots(this.tp)}pS(){this.jp.refreshAdSlots(this.tp)}OS(){this._S=setInterval(()=>{this.jS()},je.f)}jS(){this.AS.onTickCallback(),this.dS&&this.dS.onTickCallback(),this.fS.onTickCallback()}TS(){this.AS=new Hn(this,this.CS,this.Gy.resetRequestCapByTimeRatios),this.subscribe(Qe.c[Qe.c.AdSourceCapResetList],this.AS,({payload:t})=>{const i=[];t.forEach(t=>{if(t.wasCapped)if(t.adSource.isWrapper()){const e=t.adSource;e.isIdle()&&i.push(e)}else{const i=t.adSource;if(!i.isCapped()){i.adSourceWrapperList.forEach(t=>{t.status===Qe.b.Ready&&this.fS.addAdSource(t)})}}}),this.fS.resetCallRestrictionForList(i)})}IS(t,i){this.fS=new Xe(this,t,{sound:!!i,currentAdSlot:this.Kk},this.Kf.config.isMobile,this.Yf,this._p,this.jp,this.Yk),this.subscribe(Qe.c[Qe.c.AdSourceSelected],this.fS,({payload:t})=>{this.aS(t)}),this.subscribe(Qe.c[Qe.c.ExternalRtbError],this.fS,({payload:t})=>{this.dS.adFinished(!1,t)})}PS(t){this.TS();const i=this.Jk.lineItems.filter(t=>t.creativeType!==h.ProtoCreativeTypeEnum.Rtb&&t.creativeType!==h.ProtoCreativeTypeEnum.HeaderBidder&&t.creativeType!==h.ProtoCreativeTypeEnum.Tam);f.a.setClientSideAdList(i);const e=this.MS(i);this.AS.addAdSourceList(e),this.IS(e,t);const s=function(t){return t.filter(t=>t.creativeType===h.ProtoCreativeTypeEnum.Rtb||t.creativeType===h.ProtoCreativeTypeEnum.HeaderBidder||t.creativeType===h.ProtoCreativeTypeEnum.Tam)}(this.Jk.lineItems);Object(u.h)(s)&&(this.ES(),this.LS(s))}MS(t){return t.map(t=>new Qs(this,t,this.Kf.services,this.Yf,this.Kf.config.appId,this.Kf.config.pageDomain,this.Kf.config.deviceId,this.Kf.config.playerId))}LS(t){const i={app:this.Kf,hasSound:!!this.tp,outstream:this.Ax,geneticAlgoInformation:this.Gy,skipAdsSettings:this.Tx,startTickTimestamp:this.CS,pbjsSchainSettings:this.Xk,adBreakFacade:this.Yf,global:this.ae,amazonTamSlotId:this.Cw};this.dS=new Bn(this,t,this.jp,i,this.Yf);const e=this.dS.getAdSourceRtbCollectionList(),s=this.dS.getAdSourceHeaderBidderCollectionList(),n=this.dS.getAdSourceTamList();this.AS.addAdSourceList([...e,...s,...n]);const r=[...e,...s];this.RS(r),this.subscribe(Qe.c[Qe.c.ExternalAdSelected],this.dS,t=>{this.fS.addAdSource(t.payload)}),this.subscribe(Qe.c[Qe.c.AuctionCompleted],this.dS,()=>{this.DS()}),this.Zk&&this.dS.enableCalls()}RS(t){t.forEach(t=>{this.subscribe(Qe.c[Qe.c.AdSourceWrapperCollectionCappedByImpression],t,({payload:t})=>{t.forEach(t=>{this.fS.removeAdSource(t)})})})}ES(){this.fS.startAuctionPhase()}DS(){if(!this.fS.inAuctionPhase)return;const t=parseInt(Object(Ls.b)(this.eS,this.Kf.config.pageUrl),10);if(!Number.isNaN(t))return console.log(`rtb win delayed for ${t} ms`),void setTimeout(()=>{this.fS.endAuctionPhase()},t);this.fS.endAuctionPhase()}getCurrentAdClickTrackingProperties(){if(this.oS)return this.oS.getTrackingProperties()}handshakeVersion(t){return"2.0"}initAd(t,i,e,s,n,r){this.Av=e,this.Yv=s,this.tp=n,this.jp.initAdSlots(r),this.SS(),this.CS=Object(Ht.c)(),this.Kf.services.TrackingService.startBidRequests(),this.Jk.lineItems=this.kS(this.Jk.lineItems),this.PS(n),this.mS(),this.xS(),this.fS.disableAds(!this.Zk),this.fS.run(),this.OS()}startAd(){this.oS&&this.oS.startAd()}stopAd(){this.oS&&this.oS.stopAd()}resizeAd(t,i,e,s){if(this.jp.onResize(s),this.oS){const t=this.jp.getSlotForAd(this.oS.getAdType());this.oS.resizeAd(t.width,t.height,e)}this.fS&&this.fS.changeDimensions()}pauseAd(){this.oS&&this.oS.pauseAd()}resumeAd(){this.oS&&this.oS.resumeAd()}expandAd(){this.oS&&this.oS.expandAd()}collapseAd(){this.oS&&this.oS.collapseAd()}skipAd(){this.oS&&this.oS.skipAd()}getAdLinear(){return!0}getAdWidth(){if(this.oS)return this.jp.getSlotForAd(this.oS.getAdType()).width}getAdHeight(){if(this.oS)return this.jp.getSlotForAd(this.oS.getAdType()).height}getAdExpanded(){return!1}getAdSkippableState(){return!1}getAdRemainingTime(){if(this.oS)return this.oS.getAdRemainingTime()}getAdDuration(){if(!this.oS)return;const t=this.oS.getAdDuration();return t>je.f?t/je.f:t}getAdVolume(){return this.oS?this.oS.getAdVolume():this.tp}getAdCompanions(){return""}getAdIcons(){return!1}setAdVolume(t){this.jp.setSlotVolume(t),this.oS&&(this.oS.setAdVolume(t),t?this.lS.stop(tn.Mute):this.lS.start(tn.Mute)),this.dS&&this.dS.updateSound(!!t),this.tp=t,this.fS&&(f.a.addCustomHistoryLine("updateVolume",{volume:t}),this.fS.updateState({sound:!!t}))}enableAds(){this.Zk||(this.yS(),this.mediator.publish(this,L.AdsEnabled),this.Zk=!0,this.dS&&this.dS.enableCalls(),this.fS&&(this.fS.disableAds(!1),this.fS.run()))}disableAds(){if(this.Zk){if(this.Zk=!1,this.oS&&this.oS.status===Qe.b.InWin){const t=!0,i=!1;this.cS(i,t,this.sS)}this.dS&&this.dS.disableCalls(),this.fS&&this.fS.disableAds(!0)}}onAdStateChange(t,i){const e=this.Kk;this.Kk=t,this.sS=this.Kk===h.ProtoAdSlotsEnum.MidRoll&&this.nS.includes(e),this.fS&&(f.a.setAdState(t),this.fS.changeMaxAdSlotDuration(i),this.fS.updateState({currentAdSlot:t}),Object(b.a)(this.BS)&&Object.keys(this.BS).forEach(t=>{this.fS.updateState({[t]:this.BS[t]})}))}updatePodRemainingTime(t){this.fS.updatePodRemainingTime(t)}userInteraction(t){this.dS&&this.dS.userInteraction(t)}newAdOpportunity(){this.AS&&this.AS.newAdOpportunity()}onContentChange(){this.AS.onContentChange()}getCurrentAdType(){if(this.oS)return this.oS.getAdType()}destroy(){f.a.monetizationDestroyed(),clearInterval(this._S),this.disableAds();this.cS(!1,!0,this.sS),this.dS&&this.dS.destroy(),this.jp.destroy()}updateFilterConfig(t){this.BS=t}}const Xn={OrientationPortrait:"cnx-in-ps-portrait",OrientationLandscape:"cnx-in-ps-landscape"},Yn={Container:"cnx-playspace-container",Content:"cnx-playspace-content",Footer:"cnx-playspace-footer",Slider:"cnx-playspace-slider",Slide:"cnx-playspace-slide-container",Overlay:"cnx-ui-click-to-play-overlay",ImageWrapper:"cnx-ui-ps-image-wrapper",ImageBackground:"cnx-ui-ps-image-background",MediaLogo:"cnx-is-media-logo"},Kn={FullSizeSlot:"cnx-ad-full-size-slot",NextSlideBackground:"cnx-ad-next-slide-bg",NextSlideTitle:"cnx-ad-next-slide-title",DurationContainer:"cnx-ui-progress-label-container"},Zn={Main:"cnx-top-title",LogoContainer:"cnx-top-title-logo-container",Logo:"cnx-top-title-logo",LogoPortrait:"cnx-top-title-logo-portrait",LogoLandscape:"cnx-top-title-logo-landscape",LogoAnimation:"cnx-top-title-logo-animation",TitlesContainer:"cnx-top-title-text-container",TopStoryTitle:"cnx-top-title-story-text",TopSlideTitle:"cnx-top-title-slide-text",TextPlaceholder:"cnx-top-title-highlight-text-placeholder",Text:"cnx-top-title-highlight-text",TextOuterContainer:"cnx-top-title-highlight-text-outer-container",TextInnerContainer:"cnx-top-title-highlight-text-inner-container",SlideIn:"cnx-top-title-slide-in",SlideOut:"cnx-top-title-slide-out",SlideDown:"cnx-top-title-slide-down",SlideInitial:"cnx-top-title-slide-initial"},tr={ProgressBarItemClicked:"progressBarItemClicked",CallToAction:"callToAction",CloseButtonClicked:"closeButtonClicked",GeneralClickInteraction:"generalClickInteraction"},ir={ChangeSlide:"changeSlide",ContentStart:"contentStart",ContentComplete:"contentComplete",LayoutChanged:"layoutChanged"},er={ContentHandlerReady:"contentHandlerReady",NewStory:"newStory",StateChanged:"ExperienceStateChanged",ContentStart:"ContentStart",ContentEnd:"ContentEnd"},sr={SlideTransitionStart:"slideTransitionStart",SlideChanged:"slideChanged",SlideTransitionEnd:"slideTransitionEnd",SlideTimeUpdate:"slideTimeUpdate",SlideCycleEnd:"slideCycleEnd"},nr=Object.assign(Object.assign({},ir),tr),rr=0,hr=2,ar=100,or=92,cr=61,lr=72;class ur{get template(){return`\n        <cnx class="cnx-ui cnx-ui-ad">\n            [[${lt.SkipAdButton}]]\n            <cnx class="cnx-ad-marker">${Ue.a}</cnx>\n            <cnx class="cnx-ad-marker-pod">\n                ${He.a}\n                <cnx class="cnx-ad-marker-pod-right-side">\n                    <cnx class="cnx-ad-marker-pod-right-side-text">1/1</cnx>\n                </cnx>\n            </cnx>\n            <cnx class="cnx-ui-progress cnx-ui-bar cnx-ad-progress-bar">\n                <cnx class="cnx-ui-progress-bar">[[${lt.ProgressBar}]]</cnx>\n            </cnx>\n            <cnx class="${Yn.Content}">\n                <cnx class="cnx-ui-ratio-container">\n                    <cnx class="cnx-ui-ad-header">\n                        <cnx-span>SPONSORED</cnx-span>\n                    </cnx>\n                    <cnx class="cnx-ui-ad-body">\n                        <cnx class="cnx-ui-ad-slot-container">\n                            <cnx class="cnx-ui-ad-slot"></cnx>\n                            <cnx class="cnx-ui cnx-ui-ad-content">\n                                [[${lt.AdLoadingScreen}]]\n                                <cnx class="cnx-ui-buttons cnx-ad-buttons">\n                                    <cnx class="cnx-ui-btn cnx-ad-play-button">[[${lt.PlayButton}]]</cnx>\n                                    <cnx class="cnx-ad-volume-controls">[[${lt.VolumeControls}]]</cnx>\n                                    <cnx class="cnx-ui-btn cnx-ad-volume-button">[[${lt.VolumeButton}]]</cnx>\n                                    <cnx class="${Kn.DurationContainer} ${d.h.HideOnAdOverlay} ${d.h.HideOnPodLoadingScreen}">\n                                            [[${lt.ElapsedTimeLabel}]]/[[${lt.TotalDurationLabel}]]\n                                    </cnx>\n                                </cnx>\n                            </cnx>\n                        </cnx>\n                        <cnx class="cnx-ui-ad-next-slide-container">\n                            <cnx class="cnx-ui-ad-next-slide">\n                                <cnx class="${Kn.NextSlideBackground}">\n                                    <svg width="${or}" height="${cr}"></svg>\n                                </cnx>\n                                <cnx class="cnx-ad-next-slide-text-container">\n                                    <cnx-span class="cnx-ad-next-slide-label">\n                                        Coming Next\n                                    </cnx-span>\n                                    <cnx class="${Kn.NextSlideTitle}">\n                                    </cnx>\n                                </cnx>\n                            </cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n            <cnx class="${Yn.Footer} cnx-ui-ad-slide-footer">\n                <cnx class="cnx-ui-spacer"></cnx>\n                <cnx class="cnx-skip-ad-container ${d.h.HideOnAdOverlay}">[[${lt.SkipAd}]]</cnx>\n            </cnx>\n        </cnx>\n        `.trim()}}class dr{constructor(t,i,e={}){this.$S=t,this.tr=i,this.FS=1.2,this.VS=16,this.US="normal",this.NS={lines:0,useNativeClamping:!0},this.HS=!1,this.NS=Object.assign(Object.assign({},this.NS),e),this.HS=this.qS()}setLines(t){this.NS.lines=t}getClampedText(t){this.zS=t.trim(),this.WS=this.tr.createElementByString(`<cnx-span style="display:inline-block;width:100%;line-height:inherit;font-family:inherit;font-size:inherit;">${this.zS}</cnx-span>`),this.$S.appendChild(this.WS);let i=0;try{i=this.GS()}catch(t){Object(n.a)({message:"LineClamp_getMaxLines",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}const e=this.QS(this.NS.lines,i),s=this.JS(e);return Math.ceil(this.WS.getBoundingClientRect().height)-1<=s?(this.XS(),this.zS):this.HS?void Object(A.O)(this.$S,{overflow:"hidden",textOverflow:"ellipsis",webkitBoxOrient:"vertical",display:"-webkit-box",webkitLineClamp:e}):this.YS(this.WS.firstChild,s)}qS(){return!!this.NS.useNativeClamping&&void 0!==this.$S.style.webkitLineClamp}JS(t){return this.KS(this.$S)*t+(this.ZS(this.WS)+this.ZS(this.$S))+(this.tO(this.WS)+this.tO(this.$S))}iO(t){if(t.getBoundingClientRect){const{height:i}=t.getBoundingClientRect();if(i>0)return Math.ceil(i)}const i=t.clientHeight;return i&&i>0?Math.ceil(i):t.parentNode?this.iO(t.parentNode):0}GS(){const t=this.iO(this.$S),i=this.KS(this.$S),e=this.ZS(this.WS)+this.ZS(this.$S),s=this.tO(this.WS)+this.tO(this.$S),n=Math.floor((t-e-s)/i+.05);return Math.max(n,0)}eO(t){const i=this.tr.getFontSizePropertyValue(t);return i?parseInt(i,10):this.VS}KS(t){let i=this.tr.getLineHeightPropertyValue(t);return i&&i!==this.US||(i=`${this.FS*this.eO(t)}`),parseInt(i,10)}ZS(t){if(!t)return 0;const i=this.tr.getPaddingTopPropertyValue(t);return parseInt(i,10)||0}tO(t){if(!t)return 0;const i=this.tr.getPaddingBottomPropertyValue(t);return parseInt(i,10)||0}QS(t,i){return t>0?0===i?t:Math.min(this.NS.lines,i):i}YS(t,i,e){if(!i)return;void 0===e&&(e=t.nodeValue.split(" "));const s=[...e];if(s.length>1){return s.pop(),this.sO(t,`${s.join(" ")}...`),t.parentNode.offsetHeight>i?this.YS(t,i,s):(this.XS(),`${s.join(" ")}...`)}}sO(t,i){t.nodeValue=i}XS(){this.$S.innerHTML="",this.WS=null}}class fr extends Fe{constructor(t,i,e,s,n,r={},h){super(t,i,s,n,r,h),this.mediator=t,this.nO=i,this.qa=e,this.$container=s,this.Hn=r,this.rO=3,this.hO=this.$uiContainer.getElementsByClassName("cnx-ui-ad-header")[0],this.aO=this.$uiContainer.getElementsByClassName("cnx-ui-ad-body")[0],this.tm=this.$uiContainer.getElementsByClassName("cnx-ui-ad-slot")[0],this.oO=this.$uiContainer.querySelector(`.${Kn.NextSlideTitle}`),this.cO=this.$uiContainer.querySelector(`.${Kn.NextSlideBackground}`),this.lO=this.$uiContainer.querySelector(`.${Kn.DurationContainer}`),this.uO=this.$uiContainer.querySelector(`.${Yn.Content}`),this.dO=new dr(this.oO,this.nO,{useNativeClamping:!1,lines:this.rO}),this.qa.on(this.aO,()=>{this.fO()})}fO(){if(!this.$nextSlide)return;let t;this.oO.innerHTML="";const i=this.$nextSlide.metadata.title,e=this.$nextSlide.metadata.storyTitle;t=Object(b.h)(e)?this.dO.getClampedText(`${e}: ${i}`):this.dO.getClampedText(i),this.oO.innerHTML+=`<cnx-span>${t}</cnx-span>`}pO(){this.$nextSlide&&(this.cO.style.backgroundImage=`url("${this.$nextSlide.metadata.imageUrl}")`)}bO(){this.fO(),this.pO()}addAdSlot(t){this.tm.appendChild(t)}addSecondaryAdSlot(t){this.$uiContainer.appendChild(t)}hide(){Object(A.I)(this.hO,d.h.Show),Object(A.I)(this.aO,d.h.Show),Object(A.j)(this.aO),Object(A.I)(this.aO,d.h.Hide)}show(){Object(A.a)(this.hO,d.h.Show),Object(A.a)(this.aO,d.h.Hide),Object(A.j)(this.aO),Object(A.a)(this.aO,d.h.Show),this.bO()}get adHeaderHeight(){return this.hO.clientHeight}updateVolume(t){const i=this.getComponent(lt.VolumeControls),e=this.getComponent(lt.VolumeButton);i&&i.setVolume(t),e&&e.setState(t>0?ae.Unmute:ae.Mute)}updateDuration(t){super.updateDuration(t),t?Object(A.P)(this.lO):Object(A.v)(this.lO)}setMediaContainerRatio(t){Object(A.G)(this.uO,t)}}class pr extends Gt{constructor(){super(...arguments),this.vO=100,this.eventList=[],this.isEndState=!1,this.gO=t=>{t.stopPropagation(),this.mediator.publish(this,tr.ProgressBarItemClicked,{payload:this.Kl})},this.mO=t=>{t.stopPropagation()}}yO(){const t=this.tr.getComputedTranslateX(this.Wu);return tt(0,this.Uu,0,100,t)}xO(t){Object(A.O)(this.Wu,{transition:`transform ${t}ms linear`})}wO(){Object(A.O)(this.Wu,{transition:"none"})}startProgress(t){this.xO(t),this.setProgress(this.vO)}pauseProgress(){this.setProgress(this.yO()),this.wO()}forceEndState(){this.wO(),super.forceEndState(),this.isEndState=!0}forceStartState(){this.wO(),super.forceStartState(),this.isEndState=!1}initComponent(){super.initComponent(),this.Kl.addEventListener(this.Wn?"touchstart":"mousedown",this.mO),this.Kl.addEventListener(this.Wn?"touchend":"click",this.gO)}destroy(){this.Kl.removeEventListener(this.Wn?"touchstart":"mousedown",this.mO),this.Kl.removeEventListener(this.Wn?"touchend":"click",this.gO),super.destroy()}onResize(t,i){this.setProgress(this.yO()),this.wO(),i&&(this.setProgress(this.vO),this.xO(t))}}var br=e(106),vr=e.n(br);class gr extends dt{constructor(){super(...arguments),this.eventList=[tr.ProgressBarItemClicked],this.kO=[],this.SO=({payload:t})=>{const i=Object(A.l)(t,this.Kl);this.mediator.publish(this,tr.ProgressBarItemClicked,{payload:i})}}OO(t){const i=this.kO[t];i.forceStartState(),i.startProgress(this.It)}startProgress(){if(Object(b.a)(this._O)){for(let t=0;t<this.kO.length;t++)t<this._O?this.kO[t].forceEndState():(t!==this._O||this.kO[t].isEndState)&&this.kO[t].forceStartState();this.kO[this._O].startProgress(this.It)}}pauseProgress(){this.kO[this._O]&&this.kO[this._O].pauseProgress()}resetProgress(){Object(b.a)(this._O)&&this.kO.forEach(t=>t.forceStartState())}setSlides(t){if(!t)throw new Error("PlayspaceProgressBar: no slides provided");for(let i=0;i<t;i++){const t=new pr(this,this.tr,vr.a,this.Wn);this.subscribe(tr.ProgressBarItemClicked,t,this.SO),this.kO.push(t),t.initComponent(),this.Kl.appendChild(t.getContainer())}}setDuration(t){this.It=t}setCurrentIndex(t){t===this._O&&this.OO(t),this._O=t}initComponent(){}destroy(){super.destroy(),this.kO.forEach(t=>t.destroy())}resizeProgressBar(t,i){this.kO.forEach((e,s)=>{s<this._O&&e.forceEndState(),s===this._O&&e.onResize(t,i)})}}var mr=e(107),yr=e.n(mr),xr=e(54),wr=e.n(xr),kr=e(108),Sr=e.n(kr);const Or={ContextAbout:"About Connatix",ContextQuality:"Video Settings",ContextExpand:"Full Screen"};class _r extends ai{constructor(t,i,e,s,n,r,h){super(t,i,e,s,n,r,h),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!1}initComponent(){this.jO=new oi(this,this.tr,this.Wn,{activeEvent:j[j.Expand],eventList:[j[j.Expand],j[j.Collapse]],icon:wr.a,name:Or.ContextExpand}),this.AO=new xi(this,this.tr,this.Wn,Or.ContextQuality),this.buildContextMenu([this.AO,this.jO,new oi(this,this.tr,this.Wn,{activeEvent:j[j.AboutClick],name:Or.ContextAbout,icon:li.a,label:ui.a.version?`V${ui.a.version}`:void 0})])}setExpand(){this.jO.event=j[j.Collapse],this.jO.changeItemIcon(Sr.a)}setCollapse(){this.jO.event=j[j.Expand],this.jO.changeItemIcon(wr.a)}showExpandButton(){this.jO.showComponent()}hideExpandButton(){this.jO.hideComponent()}updateQualityMenu(t){Object(u.h)(t)?(this.AO.updateAvailableQualities(t),this.AO.showComponent()):this.AO.hideComponent()}updateQuality(t,i=!1){this.AO.updateQuality(t,i)}}var jr,Ar,Tr=e(109),Cr=e.n(Tr),Ir=e(110),Pr=e.n(Ir);!function(t){t[t.VolumeControls=0]="VolumeControls",t[t.PlaybackControls=1]="PlaybackControls",t[t.PlaylistControls=2]="PlaylistControls",t[t.CtaButton=3]="CtaButton",t[t.SlideTitle=4]="SlideTitle",t[t.TopLogo=5]="TopLogo",t[t.TopStoryTitle=6]="TopStoryTitle",t[t.TopSlideTitle=7]="TopSlideTitle",t[t.TextLabel=8]="TextLabel"}(jr||(jr={})),function(t){t[t.Default=0]="Default",t[t.Description=1]="Description",t[t.Quote=2]="Quote",t[t.Bullet=3]="Bullet",t[t.Cover=4]="Cover",t[t.Instagram=5]="Instagram"}(Ar||(Ar={}));const Mr={TimerLabel:"cnx-cta-btn-timer-label",TimerLoader:"cnx-svg-circle-stroke",TextLabel:"cnx-cta-btn-text",TextContainer:"cnx-cta-btn-content",AlignWithContent:"cnx-cta-align-with-content"},Er=16;class Lr extends ft{constructor(t,i,e,s,n,r){super(t,i,s.template,n),this.TO=e,this.CO=s,this.IO=r,this.eventList=[tr.CallToAction],this.PO=!1,this.MO=!1,this.EO=!1,this.LO=()=>{this.RO()},this.DO=()=>{const t=Math.round(this.BO.timeRemaining/je.f);this.$O(t.toString())},this.FO=this.Kl.querySelector(".cnx-ui-ps-cta")}startProgress(){this.PO=!0,this.BO&&this.BO.start()}pauseProgress(){this.PO=!1,this.BO&&this.BO.stop()}changeLabel(t){Object(b.h)(t)&&(this.Vu.innerHTML=t.substring(0,Er))}initComponent(){super.initComponent(),this.Vu=this.Kl.querySelector(`.${Mr.TextLabel}`),this.Bd=this.Kl.querySelector(`.${Mr.TextContainer}`)}onSlideTimeUpdate(){}onSlideTransitionEnd(){}onSlideTransitionStart(t){if(!Object(u.h)(t))return;const i=t.find(({type:t})=>t===jr.CtaButton);if(!i||!i.metadata)return;const{url:e,label:s,duration:n,ctaAlignToContent:r,ctaAlignToFooter:h,title:a}=i.metadata;this.MO=h,this.VO(e,a),this.changeLabel(s);const o=Object(b.e)(n);this.UO(o),this.NO(o,n),this.HO(r),this.qO()}setFooterElement(t){this.zO=t,this.qO()}handleCapabilities(t){this.onSlideTransitionStart(t)}hideComponent(){super.hideComponent(),this.WO()}HO(t){t?Object(A.a)(this.FO,Mr.AlignWithContent):Object(A.I)(this.FO,Mr.AlignWithContent)}onClickHandler(){const t={payload:null};Object(b.h)(this.zt)&&(t.payload=this.zt),this.mediator.publish(this,tr.CallToAction,t)}qO(){this.EO||this.zO&&this.MO&&(this.TO.on(this.zO,this.LO),this.EO=!0)}RO(){if(!this.zO)return void Object(A.K)(this.Kl,"bottom");const t=(this.zO.clientHeight-this.Kl.clientHeight)/2*-1;Object(A.O)(this.Kl,{bottom:`${t}px`})}UO(t){t?this.GO||this.QO():this.JO()}QO(){this.GO=this.tr.createElementByString(this.CO.getTimerTemplate()),Object(A.x)(this.Bd,this.GO),this.XO(this.GO)}XO(t){this.YO=t.querySelector(`.${Mr.TimerLabel}`),this.KO=t.querySelector(`.${Mr.TimerLoader}`)}JO(){Object(A.J)(this.GO),this.GO=null,this.YO=null,this.KO=null}NO(t,i){t?(this.ZO(),this.BO.reset(i*je.f),this.$O(i.toString()),this.PO&&this.BO.start(),this.t_(),Object(A.O)(this.KO,{"animation-duration":`${i}s`})):this.WO()}ZO(){this.BO||(this.BO=new Vs(this),this.subscribe(Fs.TimeUpdate,this.BO,this.DO))}WO(){this.BO&&(this.unsubscribe(Fs.TimeUpdate,this.BO,this.DO),this.BO.disable(),this.BO=null)}t_(){Object(A.M)(this.KO,Mr.TimerLoader,Mr.TimerLoader,!0)}$O(t){this.YO&&Object(b.h)(t)&&(this.YO.innerText=t)}VO(t,i){if(this.zt=t,t&&(this.FO.title=i,!this.IO)){this.FO.href=t;const i=this.tr.isURLSameDomainToTop(t);this.FO.target=i?T.c.Top:T.c.Blank}}}var Rr=e(55),Dr=e.n(Rr),Br=e(111),$r=e.n(Br),Fr=e(112),Vr=e.n(Fr);class Ur{get template(){return`\n        <cnx class="cnx-ui-ps-cta-placeholder">\n            <a class="cnx-ui-ps-cta">\n                <cnx class="cnx-cta-btn cnx-color-accent">\n                    <cnx class="cnx-cta-btn-container">\n                        <cnx class="cnx-cta-btn-content">\n                            <cnx-span class="cnx-cta-btn-instagram">\n                                ${$r.a}\n                            </cnx-span>\n                            <cnx-span class="cnx-cta-btn-text">\n                                READ MORE\n                            </cnx-span>\n                            <cnx-span class="cnx-cta-btn-arrow">\n                                ${Vr.a}\n                            </cnx-span>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </a>\n        </cnx>\n        `.trim()}getTimerTemplate(){return`\n            <cnx class="cnx-cta-btn-timer-container">\n                <cnx class="cnx-cta-btn-timer-loader-wrapper">\n                    ${Dr.a}\n                    ${Dr.a}\n                </cnx>\n                <cnx class="cnx-cta-btn-timer-label-wrapper">\n                    <cnx class="${Mr.TimerLabel}">\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class Nr extends ft{constructor(){super(...arguments),this.eventList=[j[j.Play]]}onClickHandler(){this.mediator.publish(this,j[j.Play])}}var Hr,qr=e(113),zr=e.n(qr);!function(t){t[t.TopLogo=0]="TopLogo",t[t.TopSlideTitle=1]="TopSlideTitle",t[t.TopStoryTitle=2]="TopStoryTitle"}(Hr||(Hr={}));const Wr={[jr.TopLogo]:Hr.TopLogo,[jr.TopSlideTitle]:Hr.TopSlideTitle,[jr.TopStoryTitle]:Hr.TopStoryTitle},Gr={[Hr.TopLogo]:jr.TopLogo,[Hr.TopSlideTitle]:jr.TopSlideTitle,[Hr.TopStoryTitle]:jr.TopStoryTitle},Qr=36,Jr="Top Articles",Xr=[Hr.TopLogo,Hr.TopStoryTitle,Hr.TopSlideTitle];class Yr extends de{constructor(t,i,e,s){super(t,i,e,s),this.eventList=[j[j.LogoClicked]],this.i_=[],this.e_={},this.s_=this.Kl.querySelector(`.${Zn.TitlesContainer}`)}triggerLogoAnimation(){const t=this.getComponent(lt.TopLogo);t&&t.triggerLogoAnimation()}onSlideTransitionStart(t){const i=this.n_(t);this.e_=Object.assign({},i),this.r_(t)}onSlideTransitionEnd(){}onSlideTimeUpdate(t,i){}handleComponentEvent(t,i,e){this.mediator.publish(this,t,i)}h_(t){return t.map(({type:t})=>Wr[t]).filter(t=>Object(b.a)(t))}n_(t){return t.reduce((t,{type:i,metadata:e})=>{switch(i){case Gr[Hr.TopStoryTitle]:if(!e.label&&!e.useFallbackLabel)return t;const s=e.label||Jr;return Object.assign(Object.assign({},t),{[Hr[Hr.TopStoryTitle]]:this.a_(s,e.useTransition)});case Gr[Hr.TopSlideTitle]:return Object.assign(Object.assign({},t),{[Hr[Hr.TopSlideTitle]]:this.a_(e.label,e.useTransition)});case Gr[Hr.TopLogo]:return Object.assign(Object.assign({},t),{[Hr[Hr.TopLogo]]:Object.assign({},e)});default:return t}},{})}a_(t,i=!1){return{useTransition:i,label:this.o_(t)}}o_(t){if(t)return t.length>Qr?`${t.substring(0,Qr)}...`:t}r_(t,i=!1){const e=this.h_(t),s=Object(u.a)(Xr,e),n=Object(u.a)(e,this.i_),r=Object(u.b)(e,this.i_);this.i_=e,this.c_(e),Object(A.j)(this.s_),s.forEach(t=>this.l_(t,i)),n.forEach(t=>this.u_(t,i)),r.forEach(t=>this.d_(t,i))}c_(t){switch(!0){case this.f_(t):this.p_();break;case this.b_(t):this.v_();break;default:this.g_()}}f_(t){return t.includes(Hr.TopSlideTitle)&&t.includes(Hr.TopStoryTitle)}b_(t){const i=t.includes(Hr.TopSlideTitle)&&!t.includes(Hr.TopStoryTitle),e=!t.includes(Hr.TopSlideTitle)&&t.includes(Hr.TopStoryTitle);return i||e}p_(){Object(A.I)(this.s_,Zn.SlideDown),Object(A.a)(this.s_,Zn.SlideInitial)}v_(){Object(A.I)(this.s_,Zn.SlideInitial),Object(A.a)(this.s_,Zn.SlideDown)}g_(){Object(A.I)(this.s_,Zn.SlideInitial,Zn.SlideDown)}l_(t,i=!1){const e=this.m_(t);if(!e)return;const s=this.y_(t);i&&(s.useTransition=!1),e.hide(s)}u_(t,i=!1){const e=this.m_(t);if(!e)return;const s=this.y_(t);i&&(s.useTransition=!1),e.show(s)}d_(t,i=!1){const e=this.m_(t);if(!e)return;const s=this.y_(t);i&&(s.useTransition=!1),e.update(s)}m_(t){return this.getComponent(lt[Hr[t]])}y_(t){return this.e_[Hr[t]]||{}}}const Kr=2,Zr={AuxContainer:"cnx-aux"};class th{constructor(t,i){this.Kl=t,this.tr=i}getLines(t){const i=this.x_();Object(A.e)(i,this.Kl.parentElement),i.innerHTML=t;const e=this.w_(i),s=this.k_(i,t,e);return Object(A.J)(i),s.filter(t=>t.length>0).map(t=>this.S_(t))}x_(){const t=this.tr.createElementByString("<cnx><cnx>");return Object(u.c)(this.Kl.classList).forEach(i=>{Object(A.a)(t,i)}),Object(A.a)(t,Zr.AuxContainer),t}w_(t=this.Kl){const i=this.tr.createElementByString("<cnx-span></cnx-span>");return t.appendChild(i),{paddingTop:this.ZS(t)+this.ZS(i),paddingBottom:this.tO(t)+this.tO(i),lineHeight:this.KS(t)}}KS(t){const i=this.tr.getLineHeightPropertyValue(t);return i&&parseInt(i,10)||0}ZS(t){if(!t)return 0;const i=this.tr.getPaddingTopPropertyValue(t);return parseInt(i,10)||0}tO(t){if(!t)return 0;const i=this.tr.getPaddingBottomPropertyValue(t);return parseInt(i,10)||0}O_(t,i){const e=(Math.ceil(t.getBoundingClientRect().height)||t.clientHeight)-(i.paddingTop+i.paddingBottom);return Math.round(e/i.lineHeight)}__(t){const i=[];for(let e=0;e<t;e++)i.push([]);return i}k_(t,i,e,s,r){const a=this.O_(t,e);if(!Object(b.a)(s))if(_i(i))try{s=function(t){const i=document.createElement("cnx");i.innerHTML=t;const e=[];return Object(u.c)(i.childNodes).forEach(t=>{t.outerHTML?e.push(t.outerHTML):t.nodeValue.split(" ").forEach(t=>e.push(t))}),e}(i.trim())}catch(t){Object(n.a)({message:"MultilinePadded_getRows_html_split",exception:t.message,level:h.ProtoLoggingLevelEnum.FATAL,callStack:t.stack,throttle:1,sendMaxLog:!1})}else s=i.trim().split(" ");if(Object(b.a)(r)||(r=this.__(a)),!r.length)return[];if(0===s.length)return r;const o=s.pop();try{r[a-1].unshift(o)}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"MultilinePadded_getRows_bad_styles",exception:t.message,callStack:t.stack,throttle:1,sendMaxLog:!1})}return t.innerHTML=this.S_(s),this.k_(t,i,e,s,r)}S_(t){return t.reduce((t,i,e)=>Object(u.g)("<",i)&&_i(i)?(" "===t[t.length-1]&&(t=t.slice(0,-1)),t+i):t+`${i} `,"")}}var ih,eh,sh;!function(t){t.Container="cnx-ui-ps-highlight-container",t.Wrapper="cnx-ui-ps-highlight-wrapper",t.VerticalLine="cnx-ui-ps-highlight-vertical-line",t.Placeholder="cnx-ui-ps-highlight-placeholder",t.QuoteSourcePlaceholder="cnx-quote-source-placeholder",t.TextPlaceholder="cnx-ui-ps-highlight-text-placeholder",t.TextBulletPlaceholder="cnx-ui-ps-bullet-text-placeholder",t.Text="cnx-ui-ps-highlight-text",t.QuoteText="cnx-ui-ps-highlight-quote-text",t.QuoteTextFirstLine="cnx-ui-ps-highlight-quote-first-line",t.QuoteTextLastLine="cnx-ui-ps-highlight-quote-last-line",t.QuoteSource="cnx-ui-ps-highlight-quote-source",t.TextOuterContainer="cnx-ui-ps-highlight-text-outer-container",t.TextInnerContainer="cnx-ui-ps-highlight-text-inner-container",t.Transition="cnx-title-transition",t.SlideIn="cnx-title-slide-in",t.SlideOut="cnx-title-slide-out",t.AuxClamping="aux-clamping",t.BulletDescriptionPlaceholder="cnx-ui-ps-bullet-description-container",t.DescriptionTitle="cnx-ui-ps-description-title",t.BulletTitle="cnx-ui-ps-bullet-title",t.BulletLabel="cnx-ui-ps-bullet-label-container",t.BulletTitleText="cnx-ui-ps-bullet-title-text",t.BulletPlaceholder="cnx-ui-ps-bullet-placeholder",t.Cover="cnx-ui-ps-cover",t.CoverTitle="cnx-ui-ps-cover-title",t.CoverSlideIn="cnx-ui-ps-cover-slide-in",t.CoverTitlePlaceholder="cnx-ui-ps-cover-title-placeholder",t.CoverDescriptionPlaceholder="cnx-ui-ps-cover-description-placeholder",t.Instagram="cnx-ui-ps-instagram",t.InstagramTitle="cnx-ui-ps-instagram-title",t.InstagramPlaceholder="cnx-ui-ps-instagram-title-placeholder"}(ih||(ih={})),function(t){t.Default="cnx-ui-ps-highlight-sliding-default",t.Basic="cnx-ui-ps-highlight-sliding-basic",t.Cover="cnx-ui-ps-highlight-sliding-cover"}(eh||(eh={})),function(t){t.QuoteTitle="cnx-ui-ps-highlight-quote",t.BulletTitle="cnx-ui-ps-highlight-bullet",t.DefaultTitle="cnx-ui-ps-highlight-default",t.DescriptionTitle="cnx-ui-ps-highlight-description",t.InstagramTitle="cnx-ui-ps-highlight-instagram"}(sh||(sh={}));const nh="em";function rh(t,i){return function(t,i){const e=i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),s=new RegExp(`<${e}>(.*?)</${e}>`,"g");return t.replace(s,(t,e)=>e.split(" ").map(t=>`<${i}>${t}</${i}>`).join(" "))}(Si(t),i)}const hh=1200,ah=2;class oh extends ft{constructor(t,i,e,s,n){super(t,i,n.template,s),this.mediator=t,this.tr=i,this.TO=e,this.Wn=s,this.j_=n,this.A_=!0,this.T_=!1,this.className=sh.DefaultTitle,this.eventList=[tr.CallToAction],this.LO=()=>{const t=this.Kl.offsetWidth;this.C_===t&&this.I_===this.P_||this.M_&&(this.I_=this.P_,this.dO.setLines(this.P_),Object(A.j)(this.Kl),Object(A.j)(this.E_),this.L_())},this.E_=this.Kl.querySelector(`.${ih.Placeholder}`),this.I_=this.P_,this.dO=new dr(this.E_,this.tr,{lines:this.P_,useNativeClamping:!1}),this.R_=new th(this.E_,this.tr),this.TO.on(this.Kl,this.LO)}setFooterElement(){}resetAnimation(){const t=[ih.Transition,ih.SlideIn,ih.SlideOut];Object(A.I)(this.Kl,...t),Object(A.j)(this.Kl)}onClickHandler(){this.mediator.publish(this,tr.CallToAction)}destroy(){this.TO.off(this.Kl,this.LO),this.D_()}onSlideTransitionStart(t){const i=t.find(({type:t,metadata:i})=>t===jr.SlideTitle&&Object(b.f)(i)&&i.titleType===Ar.Default);Object(b.f)(i)&&(this.TO.off(this.Kl,this.LO),this.B_(i.metadata),this.F_(),this.TO.on(this.Kl,this.LO))}onSlideTransitionEnd(){this.A_=!0}onSlideTimeUpdate(t,i){this.A_&&i-t<hh&&(this.V_(),this.A_=!1)}get P_(){return parseInt(this.tr.getComputedStyle(this.Kl).getPropertyValue("--max-title-lines"),10)||Kr}B_(t){const{label:i,url:e}=t;this.M_=rh(i,nh),e?(this.Kl.setAttribute("title",e),Object(A.a)(this.Kl,d.f.TitleLink)):(this.Kl.removeAttribute("title"),Object(A.I)(this.Kl,d.f.TitleLink)),this.L_()}L_(){this.U_(),this.N_();const t=this.dO.getClampedText(this.M_);this.H_();const i=this.R_.getLines(t).map(t=>this.q_(t));if(i.length<ah&&!this.T_)return this.z_(),void this.L_();Object(u.h)(i)&&Object(A.e)(i,this.E_),this.C_=this.Kl.offsetWidth,setTimeout(()=>{this.W_()},0)}z_(){this.T_=!0,Object(A.a)(this.Kl,d.h.ForceLineBreak)}D_(){this.T_=!1,Object(A.I)(this.Kl,d.h.ForceLineBreak)}U_(){this.E_.innerHTML="",Object(A.a)(this.E_,ih.AuxClamping)}N_(){Object(A.K)(this.Kl,"height","bottom")}H_(){Object(A.I)(this.E_,ih.AuxClamping)}q_(t){const i=this.j_.textPlaceholderTemplate(t);return this.tr.createElementByString(i)}W_(){const t=this.Kl.getBoundingClientRect().height;Object(A.O)(this.Kl,{height:`${t}px`})}F_(){this.resetAnimation(),Object(A.a)(this.Kl,ih.Transition),Object(A.M)(this.Kl,ih.SlideOut,ih.SlideIn)}V_(){Object(A.a)(this.Kl,ih.Transition),Object(A.M)(this.Kl,ih.SlideIn,ih.SlideOut)}}var ch=e(9);const lh=0,uh=!0;class dh{constructor(t,i=lh,e=uh){if(this.G_=t,this.Q_=e,!Object(u.h)(this.G_))throw new Error("PlaylistManager: list was not supplied");this.setCurrentItem(i)}setCurrentItem(t){this.J_=this.G_[t]}get currentItem(){return this.J_}goToNextItem(){this.X_().nextIndex===this.X_().firstIndex&&this.Q_?this.setCurrentItem(this.X_().firstIndex):this.setCurrentItem(this.X_().nextIndex)}get listLength(){return this.G_.length}get previousItem(){return this.G_[this.X_().prevIndex]}get currentItemIndex(){return this.X_().currentIndex}X_(t=this.G_.indexOf(this.J_)){return Y(this.G_,t)}}const fh=18,ph={[ch.ProtoPlayspaceColorSchemeEnum.Accent]:d.f.AccentColor,[ch.ProtoPlayspaceColorSchemeEnum.Primary]:d.f.PrimaryColor,[ch.ProtoPlayspaceColorSchemeEnum.Secondary]:d.f.SecondaryColor};var bh;!function(t){t[t.Label=0]="Label",t[t.Chunk=1]="Chunk"}(bh||(bh={}));class vh extends dt{constructor(t,i,e,s,n){super(t,i,n.template,s),this.mediator=t,this.tr=i,this.TO=e,this.Wn=s,this.j_=n,this.eventList=[],this.className=sh.DescriptionTitle,this.Y_={},this.LO=()=>{const t=this.Kl.clientWidth;this.C_!==t&&(this.C_=t,this.M_&&(Object(A.j)(this.Kl),Object(A.j)(this.E_),setTimeout(()=>{this.Y_[bh.Chunk]=null,this.L_()},0),this.RO()))},this.E_=this.Kl.querySelector(`.${ih.Placeholder}`),this.R_=new th(this.E_,this.tr),this.TO.on(this.Kl,this.LO)}setFooterElement(t){this.zO=t}initComponent(){}resetAnimation(){const t=[ih.Transition,ih.SlideIn,ih.SlideOut];Object(A.I)(this.Kl,...t),Object(A.j)(this.Kl)}destroy(){this.TO.off(this.E_,this.LO)}onSlideTransitionStart(t){Object.keys(this.Y_).forEach(t=>this.Y_[t]=null);const i=this.K_(t);Object(b.f)(i)&&Object(b.f)(i.metadata)&&(this.Z_(i.metadata.descriptionChunkList),this.tj(i.metadata.label,i.metadata.labelColorScheme),this.ij())}onSlideTransitionEnd(){}onSlideTimeUpdate(t,i){t>=i||t>=this.ej(i)&&!this.sj.currentItem.shown&&(this.sj.currentItem.shown=!0,this.sj.goToNextItem(),this.Y_[bh.Chunk]=null,this.ij())}nj(t,i,e){if(Object(b.a)(this.Y_[i])&&t===this.Y_[i])return;const s=ph[t],n=ph[this.Y_[i]];Array.isArray(e)?e.forEach(t=>{Object(A.M)(t,n,s)}):Object(A.M)(e,n,s),this.Y_[i]=t}ij(){this.B_(this.sj.currentItem),this.F_()}Z_(t){const i=t.map(t=>Object.assign(Object.assign({},t),{shown:!1}));this.sj=new dh(i)}K_(t){return t.find(({type:t,metadata:i})=>t===jr.SlideTitle&&Object(b.f)(i)&&i.titleType===Ar.Description)}B_(t){Object(b.h)(t.text)&&(this.M_=rh(t.text,nh),this.L_())}ej(t){return t/this.sj.listLength*(this.sj.currentItemIndex+1)}L_(){this.E_.innerHTML="";const t=this.R_.getLines(this.M_).map(t=>this.q_(t));if(Object(u.h)(t)){if(this.sj&&this.sj.currentItem){const i=this.sj.currentItem.colorScheme;Object(b.a)(i)&&this.nj(i,bh.Chunk,t)}Object(A.e)(t,this.E_),this.RO()}}q_(t){const i=this.j_.textPlaceholderTemplate(t);return this.tr.createElementByString(i)}F_(){this.resetAnimation(),Object(A.a)(this.Kl,ih.Transition),Object(A.M)(this.Kl,ih.SlideOut,ih.SlideIn)}RO(){if(!this.zO)return void Object(A.K)(this.Kl,"bottom");const t=-1*(this.zO.clientHeight-fh);t<0&&Object(A.O)(this.Kl,{bottom:`${t}px`})}tj(t,i){if(!Object(b.h)(t))return Object(A.J)(this.rj),void(this.rj=null);this.rj?this.hj.innerHTML=t:(this.rj=this.tr.createElementByString(this.j_.textPlaceholderTemplate(t)),this.hj=this.rj.querySelector(`.${ih.TextInnerContainer}`),Object(A.x)(this.E_,this.rj)),this.nj(i,bh.Label,this.rj)}}class gh{get template(){return`\n            <cnx class="${eh.Default} ${ih.Wrapper} ${d.f.TitleComponent}">\n                <cnx class="${ih.VerticalLine} ${d.f.AccentColor}"></cnx>\n                <cnx class="${ih.Placeholder} ${d.m.InheritTitleFontFamily}">\n                </cnx>\n            </cnx>\n        `.trim()}textPlaceholderTemplate(t){return`\n            <cnx class="${ih.TextPlaceholder}">\n                <cnx class="${ih.Text} ${d.f.PrimaryColor}">\n                    <cnx class="${ih.TextOuterContainer}">\n                        <cnx class="${ih.TextInnerContainer}">${t}</cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class mh{get template(){return`\n            <cnx class="${ih.DescriptionTitle} ${eh.Basic} ${ih.Wrapper} ${d.f.TitleComponent}">\n                <cnx class="${ih.Placeholder}">\n                </cnx>\n            </cnx>\n        `.trim()}textPlaceholderTemplate(t){return`\n            <cnx class="${ih.TextPlaceholder}">\n                <cnx class="${ih.Text}">\n                    <cnx class="${ih.TextOuterContainer}">\n                        <cnx class="${ih.TextInnerContainer}">${t}</cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}const yh=18;var xh;!function(t){t[t.Description=0]="Description",t[t.Title=1]="Title",t[t.Label=2]="Label"}(xh||(xh={}));class wh extends dt{constructor(t,i,e,s,n){super(t,i,n.template,s),this.mediator=t,this.tr=i,this.TO=e,this.Wn=s,this.j_=n,this.eventList=[],this.className=sh.BulletTitle,this.aj=[],this.LO=()=>{const t=this.Kl.clientWidth;this.C_!==t&&(this.C_=t,setTimeout(()=>{this.aj&&this.oj()},0),this.RO())}}initComponent(){this.TO.on(this.Kl.parentElement,this.LO)}setFooterElement(t){this.zO=t}destroy(){this.TO.off(this.Kl.parentElement,this.LO),this.Kl.innerHTML="",this.aj=null,this.cj=null}onSlideTransitionStart(t){this.aj=[];const i=t.find(({type:t,metadata:i})=>t===jr.SlideTitle&&Object(b.f)(i)&&i.titleType===Ar.Bullet);Object(b.f)(i)&&(i.metadata.label&&this.lj(i.metadata.label),this.B_(i.metadata.bulletChunkList),this.RO())}RO(){if(!this.zO)return void Object(A.K)(this.Kl,"bottom");const t=-1*(this.zO.clientHeight-yh);t<0&&Object(A.O)(this.Kl,{bottom:`${t}px`})}onSlideTransitionEnd(){}onSlideTimeUpdate(t,i){this.cj&&!this.cj.currentItem.activated&&(0===this.cj.currentItemIndex?t>=1e3&&(this.uj(this.cj.currentItem),this.cj.goToNextItem()):(i-1e3)/this.cj.listLength*this.cj.currentItemIndex+1e3<t&&(this.dj(this.cj.previousItem),this.uj(this.cj.currentItem),this.cj.goToNextItem()))}uj(t){t.activated=!0,t.opened=!0,this.fj(t),this.pj(t.title)}dj(t){t.opened=!1,this.bj(t),this.pj(t.title)}oj(){this.vj();const t=this.aj.find(t=>!0===t.opened);t&&(Object(A.a)(t.description,d.h.NoTransition),this.fj(t))}fj(t){Object(A.O)(t.description,{opacity:1}),this.gj(t)}gj(t){const i=t.title.getBoundingClientRect().height*t.lines;Object(A.O)(t.description,{height:`${i}px`})}bj(t){Object(A.O)(t.description,{opacity:0,height:"0px"})}pj(t){Object(A.u)(t,d.f.PrimaryColor)?Object(A.M)(t,d.f.PrimaryColor,d.f.SecondaryColor):Object(A.M)(t,d.f.SecondaryColor,d.f.PrimaryColor)}B_(t){const i=[];t.forEach(t=>{const e=this.mj(t.title),s=this.yj(t.description,e);i.push(e),this.aj.push({title:e,description:s.html,descriptionText:t.description,lines:s.lines,activated:!1,opened:!1})}),this.aj.length>0&&(this.cj=new dh(this.aj,0,!1)),this.xj(i)}vj(){this.aj.forEach(t=>{Object(A.J)(t.description);const{html:i,lines:e}=this.yj(t.descriptionText,t.title);t.description=i,t.lines=e})}xj(t){t.forEach((t,i)=>{Object(A.O)(t,{transition:`opacity 0.25s ease-in ${.125*i}s`,opacity:1})})}mj(t){const i=this.wj(t,xh.Title);return Object(A.e)(i,this.Kl),i}wj(t,i){let e;switch(i){case xh.Description:e=this.j_.descriptionTextPlaceholderTemplate(t);break;case xh.Title:e=this.j_.titleTextPlaceholderTemplate(t);break;case xh.Label:e=this.j_.labelTextPlaceholderTemplate(t)}return this.tr.createElementByString(e)}yj(t,i){if(!Object(b.h)(t))return{html:this.tr.createElementByString("<cnx></cnx>"),lines:1};const e=rh(t,nh),s=this.tr.createElementByString(`<cnx class=${ih.Placeholder}></cnx>`),n=this.kj(e,s,i),r=this.Sj(s);return Object(A.e)(n,r),{html:r,lines:n.length}}lj(t){Object(A.e)(this.wj(t,xh.Label),this.Kl)}Sj(t){const i=this.tr.createElementByString(`<cnx class="${ih.BulletDescriptionPlaceholder}"></cnx>`);return Object(A.e)(i,t),i}kj(t,i,e){const s=new th(i,this.tr);return Object(A.w)(e,i),s.getLines(t).map(t=>this.wj(t,xh.Description))}}class kh{get template(){return`\n            <cnx class="${ih.BulletTitle}">\n            </cnx>\n        `.trim()}descriptionTextPlaceholderTemplate(t){return`\n            <cnx class="${ih.TextBulletPlaceholder}">\n                <cnx class="${ih.Text} ${d.f.SecondaryColor}">\n                        <cnx class="${ih.TextInnerContainer}">${t}</cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}titleTextPlaceholderTemplate(t){return`\n            <cnx class="${ih.TextBulletPlaceholder} ${d.f.PrimaryColor} ${ih.BulletTitleText}">\n                <cnx class="${ih.VerticalLine} ${d.f.AccentColor}"></cnx>\n                <cnx class="${ih.Text}">\n                        <cnx class="${ih.TextInnerContainer}">${t}</cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}labelTextPlaceholderTemplate(t){return`\n            <cnx class="${ih.TextBulletPlaceholder} ${ih.BulletLabel}">\n                <cnx class="${ih.Text} ${d.f.AccentColor}">\n                        <cnx class="${ih.TextInnerContainer}">${t}</cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}var Sh=e(56),Oh=e.n(Sh);const _h=4;class jh extends dt{constructor(t,i,e,s,n){super(t,i,n.template,s),this.mediator=t,this.tr=i,this.TO=e,this.Wn=s,this.j_=n,this.eventList=[],this.className=sh.QuoteTitle,this.LO=()=>{const t=this.E_.clientWidth;this.C_!==t&&(this.C_=t,this.M_&&(Object(A.j)(this.E_),Object(A.j)(this.rj),this.L_(),this.RO()))},this.E_=this.Kl.querySelector(`.${ih.Placeholder}`),this.R_=new th(this.E_,this.tr)}initComponent(){this.TO.on(this.Kl,this.LO),this.LO()}destroy(){this.TO.off(this.Kl,this.LO)}setFooterElement(t){this.zO=t}onSlideTransitionStart(t){const i=this.K_(t);Object(b.f)(i)&&Object(b.f)(i.metadata)&&(this.Oj(i.metadata.source),this._j(i.metadata),this.F_())}onSlideTransitionEnd(){}onSlideTimeUpdate(t,i){}Oj(t){if(!Object(b.h)(t))return Object(A.J)(this.rj),void(this.rj=null);this.rj&&Object(A.J)(this.rj);const i=this.j_.textPlaceholderSourceTemplate(t);this.rj=this.tr.createElementByString(i),this.E_.parentElement.appendChild(this.rj)}_j(t){const{quote:i}=t;Object(b.h)(i)&&(this.M_=Si(i),this.L_())}jj(t){return`${Oh.a}${t}${Oh.a}`}L_(){this.E_.innerHTML="";const t=this.jj(this.M_),i=this.R_.getLines(t).map(t=>this.q_(t));if(!Object(u.h)(i))return;const e=i[0],s=i[i.length-1],n=e.querySelector(`.${ih.TextInnerContainer}`),r=s.querySelector(`.${ih.TextInnerContainer}`);Object(A.a)(n,ih.QuoteTextFirstLine),Object(A.a)(r,ih.QuoteTextLastLine),Object(A.e)(i,this.E_),this.RO()}K_(t){return t.find(({type:t,metadata:i})=>t===jr.SlideTitle&&Object(b.f)(i)&&i.titleType===Ar.Quote)}RO(){if(!this.zO)return void Object(A.K)(this.Kl,"bottom");const t=-1*(this.zO.clientHeight-_h);t<0&&Object(A.O)(this.Kl,{bottom:`${t}px`})}q_(t){const i=this.j_.textPlaceholderTemplate(t);return this.tr.createElementByString(i)}F_(){this.resetAnimation(),Object(A.a)(this.Kl,ih.Transition),Object(A.M)(this.Kl,ih.SlideOut,ih.SlideIn)}resetAnimation(){const t=[ih.Transition,ih.SlideIn,ih.SlideOut];Object(A.I)(this.Kl,...t),Object(A.j)(this.Kl)}}class Ah{get template(){return`\n            <cnx class="${eh.Basic} ${ih.Wrapper} ${d.f.TitleComponent}">\n                <cnx class="${ih.Placeholder}">\n                </cnx>\n            </cnx>\n        `.trim()}textPlaceholderTemplate(t){return`\n            <cnx class="${ih.TextPlaceholder}">\n                <cnx class="${ih.QuoteText} ${d.f.PrimaryColor}">\n                    <cnx class="${ih.TextOuterContainer}">\n                        <cnx class="${ih.TextInnerContainer}">${t}</cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}textPlaceholderSourceTemplate(t){return`\n            <cnx class="${ih.TextPlaceholder}">\n                <cnx class="${ih.QuoteSource}">\n                    <cnx class="${ih.TextOuterContainer}">\n                        <cnx class="${ih.TextInnerContainer}">${t}</cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class Th{get template(){return`\n            <cnx class="${eh.Cover} ${ih.CoverTitle}">\n                <cnx class="${ih.CoverTitlePlaceholder}"></cnx>\n                <cnx class="${ih.CoverDescriptionPlaceholder}"></cnx>\n            </cnx>\n        `.trim()}titlePlaceholderTemplate(t){return`\n            <cnx class="${ih.TextPlaceholder}">\n                <cnx class="${ih.Text} ${d.f.PrimaryColor}">\n                    <cnx class="${ih.TextInnerContainer}">${t}</cnx>\n                </cnx>\n            </cnx>\n        `.trim()}descriptionPlaceholderTemplate(t){return`\n            <cnx class="${ih.TextPlaceholder}">\n                <cnx class="${ih.Text} ${d.f.SecondaryColor}">\n                    <cnx class="${ih.TextInnerContainer}">${t}</cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class Ch extends dt{constructor(t,i,e,s,n){super(t,i,n.template,s),this.mediator=t,this.tr=i,this.TO=e,this.Wn=s,this.Aj=n,this.eventList=[],this.LO=()=>{const t=this.Kl.clientWidth;this.C_!==t&&(this.C_=t,this.M_&&(Object(A.j)(this.Kl),Object(A.j)(this.Tj),Object(A.j)(this.Cj),this.L_(),this.Ij()))},this.Tj=this.Kl.querySelector(`.${ih.CoverTitlePlaceholder}`),this.Cj=this.Kl.querySelector(`.${ih.CoverDescriptionPlaceholder}`),this.Pj=new th(this.Tj,this.tr),this.Mj=new th(this.Cj,this.tr),this.TO.on(this.Kl,this.LO)}setFooterElement(t){this.zO=t}initComponent(){this.TO.on(this.Kl,this.LO)}destroy(){Object(A.I)(this.Kl.parentElement,ih.Cover),this.TO.off(this.Kl,this.LO),Object(A.I)(this.Kl,ih.CoverSlideIn),Object(A.I)(this.zO,ih.CoverSlideIn,ih.Cover)}onSlideTransitionStart(t){const i=this.K_(t);Object(b.f)(i)&&Object(b.f)(i.metadata)&&(Object(A.a)(this.Kl.parentElement,ih.Cover),this.Ej(i.metadata),this.C_=this.Kl.clientWidth,this.F_())}onSlideTransitionEnd(){}onSlideTimeUpdate(t,i){}RO(){this.zO&&Object(A.a)(this.zO,ih.Cover)}K_(t){return t.find(({type:t,metadata:i})=>t===jr.SlideTitle&&Object(b.f)(i)&&i.titleType===Ar.Cover)}Ej(t){const{coverChunk:{title:i,subtitle:e}}=t;this.M_=rh(i,nh),this.Lj=rh(e,nh),this.L_(),this.Ij(),this.RO()}L_(){this.Tj.innerHTML="";const t=this.Pj.getLines(this.M_).map(t=>this.Rj(t));Object(u.h)(t)&&Object(A.e)(t,this.Tj)}Ij(){this.Cj.innerHTML="";const t=this.Mj.getLines(this.Lj).map(t=>this.Dj(t));Object(u.h)(t)&&Object(A.e)(t,this.Cj)}Rj(t){const i=this.Aj.titlePlaceholderTemplate(t);return this.tr.createElementByString(i)}Dj(t){const i=this.Aj.descriptionPlaceholderTemplate(t);return this.tr.createElementByString(i)}F_(){Object(A.a)(this.Kl,ih.CoverSlideIn),Object(A.a)(this.zO,ih.CoverSlideIn)}}class Ih extends dt{constructor(t,i,e,s,n){super(t,i,n.template,s),this.mediator=t,this.tr=i,this.TO=e,this.Wn=s,this.j_=n,this.eventList=[],this.className=sh.InstagramTitle,this.LO=()=>{this.RO()}}setFooterElement(t){this.zO=t}destroy(){this.TO.off(this.zO,this.LO),Object(A.I)(this.Kl.parentElement,sh.InstagramTitle),Object(A.I)(this.zO,ih.Instagram)}initComponent(){this.TO.on(this.zO,this.LO)}onSlideTransitionStart(t){const i=this.Bj(t);Object(b.f)(i)&&Object(b.f)(i.metadata)&&(this.Kl.innerHTML="",this.$j(i.metadata.instagramMetadata),this.Fj(i.metadata),Object(A.a)(this.zO,ih.Instagram),this.RO())}onSlideTransitionEnd(){}onSlideTimeUpdate(){}$j(t){const{createdDate:i,comments:e,likes:s}=t;this.Vj={createdDate:i,comments:e,likes:s},this.Uj()}Fj(t){const{label:i}=t;i.length&&(this.M_=i,this.Nj())}Uj(){const{createdDate:t,comments:i,likes:e}=this.Vj,s=this.tr.createElementByString(this.j_.instagramMetaComponent(t,e,i));if(this.Hj(i)&&this.Hj(e)){const t=s.querySelector(`.${ih.InstagramTitle}-date cnx-span`);Object(A.a)(t,d.h.Show)}Object(A.e)(s,this.Kl)}Hj(t){return!Object(b.h)(t)||"0"===t}Nj(){const t=this.tr.createElementByString(this.j_.instagramTitleComponent(this.M_));Object(A.e)(t,this.Kl)}Bj(t){return t.find(({type:t,metadata:i})=>t===jr.SlideTitle&&Object(b.f)(i)&&i.titleType===Ar.Instagram)}RO(){if(!this.zO)return void Object(A.K)(this.Kl,"bottom");const t=(this.zO.clientHeight-this.Kl.clientHeight)/2*-1;Object(A.O)(this.Kl,{bottom:`${t}px`})}}var Ph=e(114),Mh=e.n(Ph),Eh=e(115),Lh=e.n(Eh),Rh=e(116),Dh=e.n(Rh);class Bh{get template(){return`<cnx class="${ih.InstagramPlaceholder}"></cnx>`.trim()}instagramMetaComponent(t,i,e){const s=Object(b.h)(t)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-date ${d.m.InheritBodyFontFamily}">\n                ${Dh.a}\n                <cnx-span class="cnx-date-label ${d.m.InheritBodyFontFamily}">Posted </cnx-span>${Object(Ht.f)(t)}\n            </cnx-span>`.trim():"",n=Object(b.h)(i)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-likes ${d.m.InheritBodyFontFamily}">\n                ${Mh.a} ${rt(parseInt(i,10))}\n            </cnx-span>`.trim():"",r=Object(b.h)(e)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-comments ${d.m.InheritBodyFontFamily}">\n                ${Lh.a} ${rt(parseInt(e,10))}\n            </cnx-span>`.trim():"";return`\n            <cnx class="cnx-ui-ps-instagram-title-row ${d.m.InheritBodyFontFamily}">\n                ${s}\n                ${n}\n                ${r}\n            </cnx>\n        `.trim()}instagramTitleComponent(t){return`\n            <cnx class="cnx-ui-ps-instagram-title-row ${ih.InstagramTitle} ${d.m.InheritBodyFontFamily}">\n                ${t}\n            </cnx>\n        `.trim()}}class $h extends dt{constructor(t,i,e,s,n,r){super(t,i,e,n),this.mediator=t,this.tr=i,this.TO=s,this.Wn=n,this.IO=r,this.eventList=[tr.CallToAction],this.qj=new Map,this.zj()}setFooterElement(t){this.qj.forEach(i=>{i.setFooterElement(t)})}onSlideTransitionStart(t){this.Kl.removeAttribute("href");const i=t.find(({type:t})=>t===jr.SlideTitle),e=t.find(({type:t})=>t===jr.CtaButton);if(e&&e.metadata&&e.metadata.url){this.Wj=e.metadata.url,this.IO||(this.Kl.href=this.Wj);const t=this.tr.isURLSameDomainToTop(this.Wj);this.Kl.target=t?T.c.Top:T.c.Blank,this.Kl.title=i.metadata.label,e.metadata.title=i.metadata.label}if(!Object(b.f)(i)||!Object(b.f)(i.metadata))return;const s=this.qj.get(i.metadata.titleType);s&&(this.Gj(s),this.Qj.onSlideTransitionStart(t))}onSlideTransitionEnd(){this.Qj&&this.Qj.onSlideTransitionEnd()}onSlideTimeUpdate(t,i){this.Qj&&this.Qj.onSlideTimeUpdate(t,i)}initComponent(){}Gj(t){this.Qj?(this.Qj.destroy(),Object(A.M)(this.Kl,this.Jj,t.className),this.Jj=t.className):Object(A.a)(this.Kl,t.className),this.Kl.innerHTML="",this.Kl.appendChild(t.getContainer()),this.Qj=t,this.Qj.initComponent()}zj(){this.qj.set(Ar.Default,new oh(this,this.tr,this.TO,this.Wn,new gh)),this.qj.set(Ar.Description,new vh(this,this.tr,this.TO,this.Wn,new mh)),this.qj.set(Ar.Quote,new jh(this,this.tr,this.TO,this.Wn,new Ah)),this.qj.set(Ar.Bullet,new wh(this,this.tr,this.TO,this.Wn,new kh)),this.qj.set(Ar.Cover,new Ch(this,this.tr,this.TO,this.Wn,new Th)),this.qj.set(Ar.Instagram,new Ih(this,this.tr,this.TO,this.Wn,new Bh)),this.qj.forEach(t=>{t.eventList.forEach(i=>{this.subscribe(i,t,()=>{const t={payload:null};i===tr.CallToAction&&(t.payload=this.Wj),this.mediator.publish(this,i,t)})})})}destroy(){super.destroy(),this.Qj&&this.Qj.destroy()}}var Fh={[lt[lt.SkipAd]]:{template:Qi(lt.SkipAd,"Skip Ad",!1),tooltip:"Skip Ad",isHoverable:!1}};class Vh{constructor(t){this.Xj=t}get template(){return`\n            <cnx class="${Zn.Main}">\n                ${this.Yj()}\n                <cnx class="${Zn.TitlesContainer}">\n                    [[${lt.TopStoryTitle}]]\n                    [[${lt.TopSlideTitle}]]\n                </cnx>\n            </cnx>\n        `.trim()}Yj(){return this.Xj?`[[${lt.TopLogo}]]`:""}}class Uh{get template(){return`\n            <a class="${ih.Container} cnx-ui-ps-side-mg" target="_blank"></a>\n        `.trim()}}const Nh=.8,Hh=.8;class qh extends ft{constructor(t,i,e,s,n){super(t,i,e,s),this.mediator=t,this.Wn=s,this.eventList=[j[j.LogoClicked]],this.hideComponent(!1),this.Kj=this.Kl.querySelector(`.${Zn.Logo}`),this.Kj.src=`${n}`,this.Kj.alt="",this.Kj.onload=()=>{this.Zj()}}show(t){this.showComponent(t.useTransition)}hide(t){this.hideComponent(t.useTransition)}update(t){this.showComponent(t.useTransition)}triggerLogoAnimation(){Object(A.a)(this.Kl,Zn.LogoAnimation)}onClickHandler(t){this.mediator.publish(this,j[j.LogoClicked])}Zj(){this.Kj.naturalHeight>this.Kj.naturalWidth?this.Kj.naturalWidth>this.Kj.parentElement.clientWidth&&this.Kj.naturalWidth/this.Kj.naturalHeight>=Nh?Object(A.a)(this.Kj,Zn.LogoLandscape):Object(A.a)(this.Kj,Zn.LogoPortrait):this.Kj.naturalHeight>this.Kj.parentElement.clientHeight&&this.Kj.naturalHeight/this.Kj.naturalWidth>=Hh?Object(A.a)(this.Kj,Zn.LogoPortrait):Object(A.a)(this.Kj,Zn.LogoLandscape)}}class zh{get template(){return`\n            <cnx class="${Zn.LogoContainer}">\n                <img class="${Zn.Logo}" />\n            </cnx>\n        `.trim()}}class Wh{get template(){return`\n            <cnx class="${Zn.TopSlideTitle} ${d.m.InheritBodyFontFamily}">\n                <cnx class="${Zn.TextPlaceholder}">\n                    <cnx class="${Zn.Text} ${d.f.SecondaryColor}">\n                        <cnx class="${Zn.TextOuterContainer}">\n                            <cnx class="${Zn.TextInnerContainer}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class Gh{get template(){return`\n            <cnx class="${Zn.TopStoryTitle} ${d.m.InheritTitleFontFamily}">\n                <cnx class="${Zn.TextPlaceholder}">\n                    <cnx class="${Zn.Text} ${d.f.SecondaryColor}">\n                        <cnx class="${Zn.TextOuterContainer}">\n                            <cnx class="${Zn.TextInnerContainer}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}const Qh=600;class Jh extends dt{constructor(t,i,e,s){super(t,i,e,s),this.mediator=t,this.eventList=[],this.tA=this.Kl.querySelector(`.${Zn.TextInnerContainer}`)}show(t){if(!this.tA)return;const{label:i,useTransition:e}=t;Object(b.h)(i)&&i!==this.iA&&(clearTimeout(this.eA),this.iA=i,this.sA(i),this.F_(e))}initComponent(){}hide(t){const{useTransition:i}=t;clearTimeout(this.eA),this.V_(i),this.iA=null}update(t){if(!this.tA)return;const{label:i,useTransition:e}=t;Object(b.h)(i)&&i!==this.iA&&(clearTimeout(this.eA),this.V_(e),this.iA=i,this.eA=setTimeout(()=>{this.sA(i),this.F_(e)},Qh))}sA(t){this.tA.innerHTML=t}F_(t=!1){if(t){if(Object(A.u)(this.Kl,Zn.SlideIn))return;this.nA(),Object(A.I)(this.Kl,d.h.Hide,d.h.Active),Object(A.j)(this.Kl),Object(A.M)(this.Kl,Zn.SlideOut,Zn.SlideIn)}else Object(A.M)(this.Kl,d.h.Hide,d.h.Active),Object(A.I)(this.Kl,Zn.SlideIn,Zn.SlideOut)}V_(t=!1){t?(Object(A.I)(this.Kl,d.h.Hide,d.h.Active),Object(A.M)(this.Kl,Zn.SlideIn,Zn.SlideOut)):(Object(A.M)(this.Kl,d.h.Active,d.h.Hide),Object(A.I)(this.Kl,Zn.SlideIn,Zn.SlideOut))}nA(){const t=[Zn.SlideIn,Zn.SlideOut];Object(A.I)(this.tA,...t),Object(A.j)(this.tA)}}class Xh extends dt{constructor(){super(...arguments),this.eventList=[]}initComponent(){}onSlideTimeUpdate(){}onSlideTransitionEnd(){}onSlideTransitionStart(t){const i=this.rA(t);i&&this.hA(i.metadata.label)}rA(t){return t.find(({type:t,metadata:i})=>t===jr.TextLabel&&Object(b.f)(i))}hA(t){Object(b.h)(t)&&(this.Kl.innerText=t)}}var Yh,Kh=e(117),Zh=e.n(Kh);class ta extends le{constructor(t,i,e,s){super(t,e,s,Fh),this.tr=t,this.qa=i,this.Kl=e,this.Hn=s,this.qf={[lt.VolumeButton]:t=>new ue(t,this.tr,Pr.a,ae.Mute,this.Hn.isMobile),[lt.PlayspaceProgressBar]:t=>new gr(t,this.tr,yr.a,this.Hn.isMobile),[lt.PlayspaceSettingsMenu]:t=>new _r(t,this.tr,Cr.a,j[j.SettingsMenu],lt.PlayspaceSettingsMenu,this.Kl,this.Hn.isMobile),[lt.CtaButton]:t=>new Lr(t,this.tr,this.qa,new Ur,this.Hn.isMobile,this.Hn.disableClickUrl),[lt.ClickToPlayButton]:t=>new Nr(t,this.tr,zr.a,this.Hn.isMobile),[lt.TopTitle]:t=>new Yr(t,this.tr,new Vh(this.Hn.logoUrl).template,this),[lt.TopLogo]:t=>new qh(t,this.tr,(new zh).template,this.Hn.isMobile,this.Hn.logoUrl),[lt.TopSlideTitle]:t=>new Jh(t,this.tr,(new Wh).template,this.Hn.isMobile),[lt.TopStoryTitle]:t=>new Jh(t,this.tr,(new Gh).template,this.Hn.isMobile),[lt.SlideTitle]:t=>new $h(t,this.tr,(new Uh).template,this.qa,this.Hn.isMobile,this.Hn.disableClickUrl),[lt.ElapsedTimeLabel]:t=>new qt(t,this.tr,Wt.a),[lt.TotalDurationLabel]:t=>new qt(t,this.tr,Wt.a),[lt.VolumeControls]:t=>new fe(t,this.tr,pe,this),[lt.ProgressBar]:t=>new Jt(t,this.tr,Yt.a,this.Hn.isMobile),[lt.TextLabel]:t=>new Xh(t,this.tr,Zh.a)},this.zf=t=>i=>{const e=this.qf[t];if(e)return e(i)}}createComponent(t,i){return this.zf(t)(i)||super.createComponent(t,i)}}class ia extends We{constructor(t,i,e,s,n,r,h){super(t,i,e,s,n,r),this.aA=h}getNewAdManager(){const t={adSkippability:this.Qf.adSkippability,skipAdAfter:this.Qf.skipAdAfter};return this.rp=new Jn(this,this.Qf.lineItemSettings,this.Qf.supplyChainSettings,this.Qf.geneticAlgoInformation,t,this.Kf,!1,this.Qf.adSkippability,this.Yf,this.Qf.amazonTamSlotId,this.Qf.global,this.Qf.preRollBreak)}mp(t){this.lp.addAdSlot(t),this.Kf.services.ResizeObserver.on(t,()=>{this.resizeAd(t.offsetWidth,t.offsetHeight,this.oA)})}ap(t,i,e){this.rp.initAd(t,i,w.a.Normal,1,e,[{container:this.op,width:t,height:i,type:h.ProtoAdType.Video},{container:this.cA,width:this.Jf.offsetWidth,height:this.Jf.offsetHeight,type:h.ProtoAdType.Overlay}])}lA(){this.cA=this.yp(Kn.FullSizeSlot),this.lp.addSecondaryAdSlot(this.cA),this.Zf.push(this.cA)}xp(){super.xp(),this.lA()}fp(t){super.fp(t),t===this.cA&&Object(A.a)(this.Jf,d.g.AdFullSize)}wp(){const t=new ta(this.Kf.services.GlobalDomUtilsService,this.Kf.services.ResizeObserver,this.Jf,{isMobile:this.Kf.config.isMobile});this.lp=new fr(this,this.Kf.services.GlobalDomUtilsService,this.Kf.services.ResizeObserver,this.Jf,(new ur).template,{isMobile:this.Kf.config.isMobile},t),this.lp.hide(),this.lp.setMediaContainerRatio(this.aA.getContentRatioContainer())}setVastViewMode(t){this.oA=t}setNextSlide(t){this.lp.$nextSlide=t}resizeAd(t,i,e){const s=[{container:this.cA,height:this.Jf.offsetHeight,width:this.Jf.offsetWidth,type:h.ProtoAdType.Overlay}];super.resizeAd(t,i,e,s)}start(t,i,e){super.start(t,i,e)}hide(){Object(A.I)(this.cA,d.g.AdFullSize),this.lp.hideSkipAdButton(),super.hide()}show(){super.show(),this.rp.getCurrentAdType()===h.ProtoAdType.Overlay?this.lp.showSkipAdButton(this.Qf.skipAdAfter):this.lp.hideSkipAdButton()}vp(){super.vp(),this.subscribe(j[j.SkipAd],this.lp,()=>this.uA())}uA(){this.skipAd(),this.userInteraction(!0)}}class ea{constructor(t,i=rr){this.kO=t,this.setCurrentSlide(i)}X_(t=this.kO.indexOf(this.dA)){return Y(this.kO,t)}get currentSlide(){return this.dA}getCurrentThumbnailUrlParams(t,i){return this.dA.media.getThumbnailUrlParams(t,i)}getCurrentMetadata(){return this.dA.metadata}setCurrentSlide(t){this.dA=this.kO[t]}get currentSlideIndex(){return this.X_().currentIndex}get nextSlideIndex(){return this.X_().nextIndex}get prevSlideIndex(){return this.X_().prevIndex}get firstSlideIndex(){return this.X_().firstIndex}get lastSlideIndex(){return this.X_().lastIndex}get slides(){return this.kO}get nextSlide(){return this.slides[this.nextSlideIndex]}get prevSlide(){return this.slides[this.prevSlideIndex]}getAdjacentSlides(t=this.X_().currentIndex){const i=[];for(let e=0,s=t,n=t;e<hr;e++)s=this.X_(s).nextIndex,n=this.X_(n).prevIndex,i.push(this.kO[n],this.kO[s]);return Object(u.m)(i)}}!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Yh||(Yh={}));class sa extends o.a{constructor(t,i){super(),this.mediator=t,this.fA=i,this.inTransition=!1,this._O=0,this.pA=null,this.bA=!1,this.vA=400,this.gA=!0,this.mA=()=>{clearTimeout(this.pA),this.pA=null,this.bA=!1,this.yA(),this._O=this.xA(this.wA),this.mediator.publish(this,sr.SlideTransitionEnd),this.kA()},this.SA=t=>{t.stopPropagation(),t.target.parentElement===this.fA&&this.OA()&&(this.pA=setTimeout(()=>{this.bA&&this._A()},this.vA))},this.jA=t=>{t.stopPropagation(),t.target.parentElement===this.fA&&this.inTransition&&this.bA&&this.OA()&&this._A()},this.AA=Object(u.c)(this.fA.childNodes),this.fA.addEventListener("transitionstart",this.SA),this.fA.addEventListener("transitionend",this.jA)}destroy(){clearTimeout(this.pA),this.pA=null,this.fA.removeEventListener("transitionend",this.jA),this.fA.removeEventListener("transitionstart",this.SA)}setCurrentSlide(t,i,e=!0){this.wA=t,this.gA||(e=!1),e&&!this.TA(this.wA)&&this.CA()&&this.gA?this.inTransition||(this._O<this.xA(this.wA)?this.IA(i):this.IA(Yh.Left)):this.PA()}offsetSlides(t,i){this.inTransition||(Object(A.a)(i,d.r.NextSlide),this.yA(),this.MA(t))}removeNextClass(t){t.forEach(t=>{Object(A.I)(t,d.r.NextSlide)})}cleanLastSlide(t,i){Object(A.K)(t,"transform"),Object(A.I)(i,d.r.NextSlide)}setAnimationAllowed(t){this.gA=t}MA(t){Object(A.O)(this.EA(),{transform:`translate(${t}px)`})}PA(){Object(A.I)(this.EA(),d.r.CurrentSlide,d.r.SlideLeft,d.r.SlideRight),this.LA(this.xA(this.wA)),Object(A.a)(this.wA,d.r.CurrentSlide),this.mA()}IA(t){this.LA(this.xA(this.wA)),this.RA(),Object(A.a)(this.wA,d.r.NextSlide),t===Yh.Right?(Object(A.a)(this.wA,d.r.CurrentSlide),Object(A.a)(this.EA(),d.r.SlideLeft)):t===Yh.Left&&(Object(A.a)(this.wA,d.r.CurrentSlide),Object(A.a)(this.EA(),d.r.SlideRight)),Object(A.K)(this.EA(),"transform")}TA(t){return t===this.EA()}kA(){this.mediator.publish(this,sr.SlideChanged)}LA(t){this.bA=!0,this.mediator.publish(this,sr.SlideTransitionStart,{payload:{nextIndex:t}})}CA(){return Object(b.a)(this.EA())}xA(t){return Object(A.l)(t,this.fA)}EA(){return this.AA[this._O]}RA(){this.DA(),this.BA()}yA(){this.$A(),this.FA()}FA(){Object(A.a)(this.fA,d.h.NoTransition)}DA(){Object(A.I)(this.fA,d.h.NoTransition)}$A(){this.inTransition=!1}BA(){this.inTransition=!0}VA(){Object(A.I)(this.EA(),d.r.CurrentSlide,d.r.SlideLeft,d.r.SlideRight),Object(A.M)(this.wA,d.r.NextSlide,d.r.CurrentSlide)}_A(){this.VA(),this.mA()}OA(){return Object(A.u)(this.EA(),d.r.SlideLeft)||Object(A.u)(this.EA(),d.r.SlideRight)}}const na=1;class ra extends o.a{constructor(t,i,e,s,n,r){super(),this.mediator=t,this.nO=i,this.UA=e,this.NA=s,this.HA=n,this.qA=r,this.zA=!1,this.WA=[],this.GA=!1,this.QA=()=>{this.goToNextSlide()},this.JA=()=>{this.mediator.publish(this,sr.SlideTimeUpdate,{payload:{elapsedTime:this.Ng.timeElapsed,duration:this.XA.currentSlide.media.duration}})},this.YA=this.nO.createElementByString(`<cnx class="${Yn.Slider}"></cnx>`),this.NA.appendChild(this.YA),this.KA()}ZA(){this.UA.on(t=>{this.GA=t,this.tT.setAnimationAllowed(t)})}iT(t=Yh.Right){this.tT.setCurrentSlide(this.XA.currentSlide.$container,t)}eT(){let t;this.XA.currentSlide.load(),(t=this.qA?[...this.XA.slides]:[...this.XA.getAdjacentSlides()]).forEach(t=>t.load())}sT(){this.tT=new sa(this,this.YA),this.subscribe(sr.SlideTransitionStart,this.tT,({payload:{nextIndex:t}})=>{this.GA&&this.Ng.disable(),this.mediator.publish(this,sr.SlideTransitionStart,{payload:{nextSlide:this.XA.slides[t]}})}),this.subscribe(sr.SlideChanged,this.tT,()=>{this.Ng.reset(this.XA.currentSlide.media.duration),this.XA.slides.forEach(t=>t.media.reset());const t={payload:{index:this.XA.currentSlideIndex}};this.mediator.publish(this,sr.SlideChanged,t),this.zA?this.XA.currentSlide.media.play():this.pause()}),this.subscribe(sr.SlideTransitionEnd,this.tT,()=>{this.mediator.publish(this,sr.SlideTransitionEnd)})}KA(){this.Ng=new Vs(this,0,ar),this.subscribe(Fs.TimeElapsed,this.Ng,this.QA),this.subscribe(Fs.TimeUpdate,this.Ng,this.JA)}nT(t){this.WA=t;const i=this.rT(t),e=t.map(t=>{const e=this.HA.getSlide(t,this,i);return this.subscribe(tr.CallToAction,e,()=>{this.mediator.publish(this,tr.CallToAction)}),this.subscribe(j[j.Next],e,()=>{this.mediator.publish(this,j[j.Next])}),e});this.XA=new ea(e),this.Ng.reset(this.XA.currentSlide.media.duration),this.YA.innerHTML="",this.XA.slides.forEach(t=>{Object(A.e)(t.$container,this.YA),this.relay(G.Change,t.media,this,this.mediator)})}rT(t){const i=t.map(t=>t.slideDuration).reduce((t,i)=>t+i,0);return Object(b.e)(i)?Math.ceil(i/je.g):na}hT(){const t=this.XA.getAdjacentSlides().map(t=>t.$container);this.tT.removeNextClass(t)}aT(t){return(t>0?this.XA.prevSlide:this.XA.nextSlide).$container}getNextSlide(){return this.XA.nextSlide}setCurrentSlide(t,i){this.tT.inTransition||(this.XA.currentSlide&&this.XA.currentSlide.media.pause(),this.XA.setCurrentSlide(t),this.eT(),this.iT(i))}getCurrentSlide(){if(this.XA)return this.XA.currentSlide}getCurrentThumbnailUrlParams(t,i){if(this.XA)return this.XA.getCurrentThumbnailUrlParams(t,i)}getCurrentMetadata(){if(this.XA)return this.XA.getCurrentMetadata()}goToNextSlide(){if(this.XA.currentSlideIndex===this.XA.lastSlideIndex)return this.tT.cleanLastSlide(this.getCurrentSlide().$container,this.getNextSlide().$container),void this.mediator.publish(this,sr.SlideCycleEnd);this.setCurrentSlide(this.XA.nextSlideIndex,Yh.Right)}goToPrevSlide(){this.setCurrentSlide(this.XA.prevSlideIndex,Yh.Left)}resetSlider(){this.setCurrentSlide(this.XA.firstSlideIndex)}setVolume(t){this.XA&&this.XA.slides.forEach(i=>{i.media.type===h.ProtoMediaTypeEnum.Video&&(i.media.volume=t)})}play(){this.zA=!0,this.Ng.start(),this.XA.currentSlide.media.play()}pause(){this.zA=!1,this.Ng.stop(),this.XA.currentSlide.media.pause()}stop(){this.XA.setCurrentSlide(this.XA.firstSlideIndex),this.eT(),this.tT.setCurrentSlide(this.XA.currentSlide.$container,null,!1),this.pause()}get remainingTime(){return this.Ng.timeRemaining}setQuality(t){this.XA.slides.forEach(i=>{if(i.media.type===h.ProtoMediaTypeEnum.Video){const e={height:i.media.getClosestSourceQuality(t.height).videoHeight,quality:t.quality};i.media.setQuality(e)}})}getQuality(){const{currentSlide:t}=this.XA;if(t.media.type===h.ProtoMediaTypeEnum.Image)return;const{getClosestSourceQuality:i,currentQuality:e}=t.media;return i(e.height).videoHeight}start(t){try{this.nT(t),this.sT(),this.ZA()}catch(t){Object(n.a)({message:"SlidesManager_start",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}offsetSlides(t){if(this.hT(),0===t)return;const i=this.aT(t);this.tT.offsetSlides(t,i)}destroy(){this.Ng.disable(),this.tT&&this.tT.destroy()}get isPlaying(){return this.zA}onPlayerContainerResize(){Object(b.a)(this.XA)&&Object(u.h)(this.XA.slides)&&this.XA.slides.forEach(t=>t.media.onSlideResizeCallback())}get slides(){return Object(b.a)(this.XA)&&Object(u.h)(this.XA.slides)?this.XA.slides:[]}get currentSlideIndex(){return Object(b.a)(this.XA)?this.XA.currentSlideIndex:0}updateCapabilityMetadata(t,i){if(!Object(b.a)(this.XA)||!Object(u.h)(this.XA.slides))return;const e=this.XA.slides[t];e&&e.updateCapabilityMetadata(i)}get slidesMetadata(){return this.WA}}class ha{constructor(t){this.oT=t}get template(){return`\n        <cnx class="cnx-ui cnx-ui-ps">\n            <cnx class="cnx-ui-click-to-play-overlay"></cnx>\n            <cnx class="${Yn.Content}">\n                [[${lt.ClickToPlayButton}]]\n                <cnx class="cnx-ui-ratio-container">\n                    <cnx class="cnx-ui-ps-head">\n                    <cnx class="cnx-ui-ps-nav">\n                        ${this.cT()}\n                    </cnx>\n                    <cnx class="cnx-ui-ps-subhead cnx-ui-ps-side-mg">\n                        <cnx class="cnx-ui-ps-branding">\n                            [[${lt.TopTitle}]]\n                        </cnx>\n                        <cnx class="cnx-ui-ps-btns">\n                            <cnx class="cnx-ui-btn ${d.g.ContextController}">[[${lt.MoreButton}]]</cnx>\n                            <cnx class="cnx-ui-btn cnx-close-button">[[${lt.CloseButton}]]</cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n                <cnx class="cnx-ui-ps-content">\n                    ${this.lT()}\n                </cnx>\n                <cnx class="cnx-ui-ps-footer cnx-ui-ps-side-mg">\n                    <cnx class="cnx-ui-ps-controls">\n                        <cnx class="cnx-ui-btn cnx-ui-ps-nav-btn">[[${lt.PreviousButton}]]</cnx>\n                        <cnx class="cnx-ui-btn">[[${lt.PlayButton}]]</cnx>\n                        <cnx class="cnx-ui-btn cnx-ui-ps-nav-btn">[[${lt.UpNextButton}]]</cnx>\n                        <cnx class="cnx-ui-btn">[[${lt.VolumeButton}]]</cnx>\n                    </cnx>\n                </cnx>\n                [[${lt.PlayspaceSettingsMenu}]]\n                </cnx>\n            </cnx>\n            <cnx class="${Yn.Footer} cnx-ui-ps-side-mg">\n                <cnx class="cnx-ui-ps-footer-wrapper">\n                    <cnx class="cnx-ui-ps-text-label-container">[[${lt.TextLabel}]]</cnx>\n                    <cnx class="cnx-ui-spacer"></cnx>\n                </cnx>\n            </cnx>\n            [[${lt.Loader}]]\n        </cnx>\n        `.trim()}cT(){return this.oT.disableStoryProgressBarRendering?"":`[[${lt.PlayspaceProgressBar}]]`}lT(){return this.oT.disableTitleRendering?"":`[[${lt.SlideTitle}]]`}}class aa{constructor(t){this.uT=t}dT(t){return this.uT.filter(i=>t.instance!==i.instance)}fT(t){return this.uT.find(({name:i})=>t===i)}pT(t){t.forEach(({instance:t})=>{t.isOpen&&t.close()})}toggleContextMenu(t,i={}){const e=this.fT(t);if(e.instance.isOpen)return e.instance.close(),!1;{const{targetCoordinates:t,holdPause:s}=i,n=t||e.linkedComponent.getCoordinates();return e.instance.open(n,s),this.pT(this.dT(e)),!0}}isAnyContextMenuOpen(){return!!this.uT.find(({instance:t})=>t.isOpen)}closeContextMenu(t){const i=this.fT(t).instance;i.isOpen&&i.close()}closeAllContextMenus(){this.pT(this.uT)}}class oa extends gt{enterState(){super.enterState();const t=this.context.getComponent(lt.PlayspaceProgressBar);t&&t.startProgress();const i=this.context.getComponent(lt.CtaButton);i&&i.startProgress(),this.context.interactionHandler.enable(),this.context.autoHideHandler&&this.context.autoHideHandler.startAutoHide()}exitState(){super.exitState(),this.context.autoHideHandler&&this.context.autoHideHandler.showUi()}updateDuration(){const t=this.context.getComponent(lt.PlayspaceProgressBar);t&&t.startProgress()}}class ca extends yt{enterState(){super.enterState();const t=this.context.getComponent(lt.PlayspaceProgressBar);t&&t.pauseProgress();const i=this.context.getComponent(lt.CtaButton);i&&i.pauseProgress(),this.context.interactionHandler.disable()}exitState(){super.exitState()}updateDuration(){}}class la extends ca{enterState(){super.enterState(),this.context.interactionHandler.disable()}exitState(){super.exitState()}}var ua=class{constructor(t,i,e,s){this.mediator=t,this.Kl=i,this.bT=s,this.vT=null,this.gT=!1,this.Pa=!1,this.it=!1,this.Yb=Object(A.t)(i),this.mT=e}yT(t,i){i<t?this.mediator.publish(this,hi.TapLeft):this.mediator.publish(this,hi.TapRight)}xT(t){const i=this.Kl.getBoundingClientRect(),e=this.wT(t),s=tt(0,i.width,0,100,e);this.yT(this.mT,s)}kT(){clearTimeout(this.vT),this.gT||(this.vT=setTimeout(()=>{this.gT=!0,this.mediator.publish(this,hi.HoldStart)},this.bT))}ST(t){clearTimeout(this.vT),this.gT?(this.gT=!1,this.mediator.publish(this,hi.HoldEnd)):this.xT(t)}disable(){clearTimeout(this.vT),this.it=!1,this.OT()}enable(){this.Pa||this.it||(this.it=!0,this.vp())}destroy(){this.Pa=!0,clearTimeout(this.vT),this.OT()}};const da={MAIN:0,AUXILIARY:1,SECONDARY:2,FOURTH:3,FIFTH:4};function fa(t){return t.button===da.MAIN}class pa extends ua{constructor(){super(...arguments),this._T=!1,this.jT=t=>{fa(t)&&(this._T=!0,Object(A.a)(this.Kl,d.h.OnHold),t.stopPropagation(),this.Yb.addEventListener("mouseup",this.AT),this.kT())},this.AT=t=>{fa(t)&&(this._T=!1,Object(A.I)(this.Kl,d.h.OnHold),t.stopPropagation(),this.Yb.removeEventListener("mouseup",this.AT),this.ST(t))}}wT(t){return t.offsetX}vp(){this.Kl.addEventListener("mousedown",this.jT)}OT(){this.Kl.removeEventListener("mousedown",this.jT),this._T||this.Yb.removeEventListener("mouseup",this.AT)}}class ba extends ca{enterState(){super.enterState(),Object(A.a)(this.context.$uiContainer,d.j.Preroll);const t=this.context.getComponent(lt.Loader);t&&t.show(),this.context.interactionHandler.disable()}exitState(){super.exitState(),Object(A.I)(this.context.$uiContainer,d.j.Preroll);const t=this.context.getComponent(lt.Loader);t&&t.hide()}}class va extends ca{enterState(){super.enterState(),this.context.interactionHandler.disable()}exitState(){super.exitState()}updateDuration(){const t=this.context.getComponent(lt.PlayspaceProgressBar);t&&t.resetProgress()}}var ga,ma;!function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(ga||(ga={})),function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(ma||(ma={}));class ya extends ua{constructor(){super(...arguments),this.TT=!1,this.CT=null,this.IT=null,this.PT=150,this.MT=0,this.ET=0,this.LT=null,this.Xu=null,this.RT=!1,this.DT=t=>{this.RT=!0,Object(A.a)(this.Kl,d.h.OnHold),this.Kl.addEventListener("touchend",this.BT),this.Kl.addEventListener("touchcancel",this.BT),this.kT();const i=this.$T(t);this.CT=i.screenX,this.IT=i.screenY},this.BT=t=>{this.RT=!1;const i=this.$T(t);0===i.deltaStartX&&t.preventDefault(),Object(A.I)(this.Kl,d.h.OnHold),this.Kl.removeEventListener("touchend",this.BT),this.Kl.removeEventListener("touchcancel",this.BT),this.Kl.removeEventListener("touchmove",this.FT),this.ST(t),this.VT(i)},this.FT=t=>{if(null===this.CT)return;const i=this.$T(t);null===this.LT&&this.UT(i),this.LT!==ma.Y&&(t.preventDefault(),null===this.Xu&&(this.Xu=Object(A.N)(this.Yb,()=>{this.Xu=null,this.NT(i.deltaStartX),this.mediator.publish(this,hi.SwipeMove,{payload:i.deltaStartX})})))}}UT(t){this.LT=this.HT(t),this.LT===ma.X&&(this.TT=!0,this.gT||(clearTimeout(this.vT),this.vT=null,this.gT=!0,this.mediator.publish(this,hi.HoldStart)))}VT(t){if(this.TT){const i=this.qT(t);this.mediator.publish(this,hi.SwipeEnd,{payload:i})}Object(A.f)(this.Yb,this.Xu),this.Xu=null,this.TT=!1,this.CT=null,this.IT=null,this.LT=null,this.MT=0,this.ET=0}NT(t){this.ET<this.PT?this.ET++:(this.MT=t,this.ET=0)}HT(t){return Math.abs(t.deltaStartX)>=Math.abs(t.deltaStartY)?ma.X:ma.Y}qT(t){return t.deltaStartX-this.MT<0?ga.Left:ga.Right}$T(t){const i=t.changedTouches[0];return{deltaStartX:i.screenX-this.CT,deltaStartY:i.screenY-this.IT,screenX:i.screenX,screenY:i.screenY}}wT(t){return t.changedTouches[0].clientX-this.Kl.getBoundingClientRect().left}vp(){this.Kl.addEventListener("touchstart",this.DT),this.Kl.addEventListener("touchmove",this.FT)}OT(){this.Kl.removeEventListener("touchstart",this.DT),this.RT||this.Kl.removeEventListener("touchmove",this.FT)}}var xa={[jr.PlaybackControls]:[lt.PlayButton],[jr.VolumeControls]:[lt.VolumeButton],[jr.CtaButton]:[lt.CtaButton],[jr.PlaylistControls]:[lt.UpNextButton,lt.PreviousButton],[jr.SlideTitle]:[lt.SlideTitle],[jr.TextLabel]:[lt.TextLabel]};class wa{constructor(){this.zT=Object.keys(xa).reduce((t,i)=>[...t,...xa[i]],[])}setCapabilityList(t){this.WT=t.map(t=>xa[t.type]).filter(t=>Array.isArray(t)).reduce((t,i)=>[...t,...i],[])}getComponentList(){return{excludedComponents:Object(u.a)(this.zT,this.WT),includedComponents:Object(u.b)(this.zT,this.WT)}}}const ka=2e3;class Sa{constructor(t){this.Kl=t,this.GT=!1}isUIHidden(){return this.GT}startAutoHide(){this.QT=setTimeout(()=>{this.JT()},ka)}showUi(){clearTimeout(this.QT),this.XT()}resetAutoHideTimer(){clearTimeout(this.QT),this.XT(),this.startAutoHide()}JT(){Object(A.a)(this.Kl,d.g.HideUI),this.GT=!0}XT(){Object(A.I)(this.Kl,d.g.HideUI),this.GT=!1}}class Oa extends St{constructor(t,i,e,s,n,r,h,a){super(t,i,e,n,new ta(e,s,i,r)),this.mediator=t,this.$container=i,this.globalDomUtilsService=e,this.settings=r,this.Gn=h,this.YT=80,this.KT=[lt.SlideTitle,lt.CtaButton,lt.TopTitle,lt.TextLabel],this.ZT=250,this.tC=30,this.vu={[q.PlayingState]:new oa(this),[q.PausedState]:new ca(this),[q.StoppedState]:new la(this),[q.HiddenState]:new va(this),[q.PrerollState]:new ba(this),[q.PostrollState]:new ba(this)},this.iC=new wa,this.eC=()=>{this.mediator.publish(this,j[j.Play]),this.sC(j[j.Play])},this.zO=this.$container.querySelector(`.${Yn.Footer}`),this.nC(),this.rC(),this.hC(),this.aC(),this.vu[a].enterState(),this.oC(),this.cC(!1),this.lC(),this.uO=this.$uiContainer.querySelector(`.${Yn.Content}`),this.uC=this.$uiContainer.querySelector(`.${Yn.Overlay}`),this.uC.addEventListener(r.isMobile?"touchend":"click",this.eC)}nC(){const t=this.getComponent(lt.SlideTitle);t&&t.setFooterElement(this.footer)}dC(t,i){const e=this.getComponent(lt.PlayspaceProgressBar);e&&e.resizeProgressBar(t,i)}handleComponentEvent(t,i,e){switch(this.sC(t),t){case j[j.Mute]:this.mediator.publish(this,j[j.Volume],{payload:0});break;case j[j.Unmute]:this.mediator.publish(this,j[j.Volume],{payload:1});break;case lt[lt.CloseButton]:this.mediator.publish(this,j[j.Close]);break;case lt[lt.MoreButton]:const e={holdPause:!0};this.fC.toggleContextMenu(lt.PlayspaceSettingsMenu,e);break;case j[j.AboutClick]:this.globalDomUtilsService.open(nn.a,T.c.Blank);break;case j[j.Quality]:i.payload&&this.mediator.publish(this,j[j.Quality],{payload:i.payload});break;case lt[lt.UpNextButton]:this.mediator.publish(this,j[j.Next]);break;case lt[lt.PreviousButton]:this.mediator.publish(this,j[j.Prev]);break;case tr.CallToAction:Object(b.h)(i.payload)?this.mediator.publish(this,tr.CallToAction,i):this.mediator.publish(this,j[j.Next]);break;default:this.mediator.publish(this,t,i)}}sC(t){switch(t){case tr.CallToAction:this.mediator.publish(this,tr.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.UrlClick});break;case lt[lt.VolumeButton]:case lt[lt.VolumeProgress]:case lt[lt.VolumeControls]:this.mediator.publish(this,tr.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.VolumeClick});break;case lt[lt.PlayButton]:case lt[lt.BigPlayButton]:case lt[lt.ClickToPlayButton]:case j[j.Play]:this.mediator.publish(this,tr.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.PlayClick});break;case j[j.Pause]:this.mediator.publish(this,tr.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.PauseClick});break;case j[j.Next]:case lt[lt.UpNextButton]:case lt[lt.UpNextBox]:case hi.TapRight:this.mediator.publish(this,tr.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.NextClick});break;case j[j.Prev]:case lt[lt.PreviousButton]:case hi.TapLeft:this.mediator.publish(this,tr.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.PreviousClick});break;case j[j.Mute]:this.mediator.publish(this,tr.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.MuteClick});break;case j[j.Unmute]:this.mediator.publish(this,tr.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.UnmuteClick});break;case j[j.Close]:case lt[lt.CloseButton]:this.mediator.publish(this,tr.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.CloseClick})}}hC(){const t=[],i=this.pC();i&&t.push({instance:i,linkedComponent:this.getComponent(lt.MoreButton),name:lt.PlayspaceSettingsMenu}),this.fC=new aa(t)}aC(){this.settings.isMobile?(this.bC(),this.interactionHandler=new ya(this,this.$container,this.tC,this.ZT)):this.interactionHandler=new pa(this,this.$container,this.tC,this.ZT),Object.keys(hi).forEach(t=>{this.subscribe(hi[t],this.interactionHandler,i=>{if(this.autoHideHandler){if(this.autoHideHandler.isUIHidden())return void this.autoHideHandler.resetAutoHideTimer();this.autoHideHandler.resetAutoHideTimer()}this.sC(hi[t]),this.mediator.publish(this,hi[t],i)})})}bC(){this.autoHideHandler=new Sa(this.$container)}rC(){const t=`id_${this.Gn}`;this.$container.id=t;const{bodyFontFamily:i,titleFontFamily:e}=this.vC(),s=`\n            #${t} .${d.f.AccentColor} {\n                fill: ${this.settings.accentColorList.background};\n                background-color: ${this.settings.accentColorList.background};\n                color: ${this.settings.accentColorList.foreground};\n                stroke: ${this.settings.accentColorList.background};\n            }\n            #${t} .${d.f.AccentColor} .cnx-cta-btn-arrow svg{\n                fill: ${this.settings.accentColorList.foreground};\n            }\n            @keyframes ${t}-bar {\n                1% {\n                  fill: transparent; transform: scaleY(1)\n                }\n                30% {fill: ${this.settings.accentColorList.background}; transform: scaleY(1.1)}\n                60% {fill: transparent; transform: scaleY(1)}\n                100% {fill: transparent; transform: scaleY(1)}\n            }\n            #${t} .cnx-ui-loader polygon {\n                animation-name: ${t}-bar;\n            }\n            #${t} .${d.f.PrimaryColor} {\n                background: ${this.settings.primaryColorList.background};\n                color: ${this.settings.primaryColorList.foreground};\n            }\n            #${t} .${d.f.SecondaryColor} {\n                background: ${this.settings.secondaryColorList.background};\n                color: ${this.settings.secondaryColorList.foreground};\n            }\n            #${t} .${d.f.TitleComponent}.${d.f.TitleLink}:${this.settings.isMobile?"active":"hover"} .${ih.Text} {\n                background-color: ${Object(ht.j)(this.settings.accentColorList.background,this.YT)}\n            }\n            #${t} .${d.f.SlideProgressBar} .${d.f.ProgressFill}.${d.f.AccentColor} {\n                background-color: ${this.settings.useAccentColorForProgressBar?this.settings.accentColorList.background:d.l.Icons}\n            }\n            #${t} em {\n                color: ${this.settings.accentColorList.background};\n            }\n            #${t} .${d.m.InheritTitleFontFamily} {\n                font-family: ${e} !important;\n            }\n            #${t} .${d.m.InheritBodyFontFamily} {\n                font-family: ${i} !important;\n            }\n        `.trim();this.globalDomUtilsService.addCssString(s)}vC(){const{bodyFontFamily:t,titleFontFamily:i}=this.settings.fontFamilySettings;return Object(b.h)(t)&&Object(b.h)(i)?this.settings.fontFamilySettings:{titleFontFamily:Object(A.q)(this.$container),bodyFontFamily:Object(A.k)(this.$container)}}lC(){this.gC()&&this.hideExpandButton()}gC(){return this.mC()||!this.yC()}mC(){return this.settings.os===qn.b.Ios}yC(){return!0===this.settings.expandButtonEnabled}xC(t={}){const i=this.getComponent(lt.CtaButton);i&&Object(b.h)(t.label)&&i.changeLabel(t.label)}hideExpandButton(){this.pC().hideExpandButton()}showExpandButton(){this.pC().showExpandButton()}pC(){return this.getComponent(lt.PlayspaceSettingsMenu)}oC(t=[]){this.iC.setCapabilityList(t)}cC(t=!0){const{excludedComponents:i,includedComponents:e}=this.iC.getComponentList();i.map(t=>this.getComponent(t)).forEach(i=>i&&i.hideComponent(t)),e.map(t=>this.getComponent(t)).forEach(i=>i&&i.showComponent(t))}updateQualityMenu(t){const i=this.getComponent(lt.PlayspaceSettingsMenu);i&&i.updateQualityMenu(t)}updateQuality(t){const i=this.getComponent(lt.PlayspaceSettingsMenu);i&&i.updateQuality(t)}setTotalSlides(t){const i=this.getComponent(lt.PlayspaceProgressBar);i&&i.setSlides(t)}setDuration(t){const i=this.getComponent(lt.PlayspaceProgressBar);i&&(i.setDuration(t),this.currentState.updateDuration())}setCurrentIndex(t){const i=this.getComponent(lt.PlayspaceProgressBar);i&&i.setCurrentIndex(t)}updateVolume(t){const i=this.getComponent(lt.VolumeButton);i&&i.setState(t>0?ae.Unmute:ae.Mute)}expand(){this.pC().setExpand()}collapse(){this.pC().setCollapse()}onResizeUi(t,i){this.fC.closeAllContextMenus(),this.dC(t,i)}onFirstTimeInView(){const t=this.getComponent(lt.TopTitle);t&&t.triggerLogoAnimation()}hide(){super.hide()}setMediaContainerRatio(t){Object(A.G)(this.uO,t)}get $mediaContainer(){return this.uO}onSlideTransitionStart(t){const i=this.getComponent(lt.PlayspaceProgressBar);i&&i.pauseProgress(),this.oC(t),this.cC(),this.KT.forEach(i=>{const e=this.getComponent(i);e&&e.onSlideTransitionStart&&e.onSlideTransitionStart(t)})}onSlideTransitionEnd(){this.KT.forEach(t=>{const i=this.getComponent(t);i&&i.onSlideTransitionEnd&&i.onSlideTransitionEnd()})}onSlideTimeUpdate(t,i){this.KT.forEach(e=>{const s=this.getComponent(e);s&&s.onSlideTimeUpdate&&s.onSlideTimeUpdate(t,i)})}updateCapabilityMetadata(t){switch(t.type){case jr.CtaButton:this.xC(t.metadata)}}get footer(){return this.zO}destroy(){this.interactionHandler.destroy(),this.uC.removeEventListener("click",this.eC),super.destroy()}}const _a={StateChanged:"stateChanged",ContentReset:"contentReset",ContentStart:"contentStart",ContentEnd:"contentEnd"};class ja{constructor(t,i,e,s,n,r,h){this.mediator=t,this.wC=i,this.kC=e,this.SC=s,this.OC=n,this._C=r,this.jC=h,this.AC=null,this.TC=!1,this.CC=!1,this.IC=!1,this.Ac=!1,this.PC=!1,this.MC=!0,this.EC=()=>{this.AC=null,this.TC=!0,this.LC=null,this.RC===q.PlayingState?this.play(!1):this.pause(!1)},this.DC=()=>{switch(this.CC=!0,this.AC=null,this.LC=null,this._C){case ch.ProtoEndOfSlideCycleMode.Loop:this.reset();break;case ch.ProtoEndOfSlideCycleMode.Stop:this.stop()}},this.LC=null,this.BC=null,this.jC&&(this.TC=!0)}$C(t){this.LC!==t&&(this.BC=this.LC,this.LC=t,this.mediator.publish(this,_a.StateChanged,{payload:this.LC}))}FC(t){return this.LC===t}resume(){this.BC&&this.$C(this.BC)}stop(){this.wC.stop(),this.$C(q.StoppedState)}handleSlidesEnd(){this.VC()}UC(){this.AC=setTimeout(this.EC,this.SC),this.$C(q.PrerollState)}VC(){this.mediator.publish(this,er.ContentEnd),this.OC?(this.$C(q.PostrollState),this.AC=setTimeout(this.DC,this.OC)):this.DC()}NC(t){return t===q.PrerollState||t===q.PostrollState}HC(t){return t===q.PrerollState&&this.TC||t===q.PostrollState&&this.CC}setViewabilityState(t){this.Ac=t}play(t){if(this.RC=q.PlayingState,!(this.FC(q.PlayingState)||this.FC(q.HiddenState)&&this.IC||this.NC(this.LC)&&!this.HC(this.LC)||this.FC(q.StoppedState)&&!t))if(!this.SC||this.TC){if(this.FC(q.StoppedState))return this.TC=!1,void this.reset();this.kC.setDuration(this.wC.remainingTime),this.wC.play(),this.$C(q.PlayingState),this.MC&&(this.MC=!1,this.mediator.publish(this,er.ContentStart))}else this.UC()}reset(){this.mediator.publish(this,_a.ContentReset),this.LC=null,this.CC=!1,this.MC=!0,this.wC.resetSlider(),this.play(!1)}pause(t){this.RC=q.PausedState,this.FC(q.PausedState)||this.FC(q.HiddenState)||this.NC(this.LC)&&!this.HC(this.LC)||this.FC(q.StoppedState)&&!t||(this.wC.pause(),this.$C(q.PausedState))}pauseToggle(){if(this.FC(q.PausedState)||this.FC(q.PlayingState))return this.FC(q.PausedState)&&this.PC?(this.PC=!1,void this.play(!1)):this.FC(q.PlayingState)?(this.PC=!0,void this.pause(!1)):void 0}hide(){this.wC.pause(),clearTimeout(this.AC),this.IC=!0,this.$C(q.HiddenState)}show(){this.FC(q.HiddenState)&&(this.IC=!1,this.BC!==q.PostrollState?this.BC!==q.PrerollState?this.Ac?this.goToNextSlide():this.RC===q.PlayingState?this.play(!1):this.pause(!1):this.EC():this.DC())}setCurrentSlide(t){this.NC(this.LC)&&!this.HC(this.LC)||this.wC.setCurrentSlide(t)}goToNextSlide(){this.NC(this.LC)&&!this.HC(this.LC)||(this.wC.goToNextSlide(),this.FC(q.StoppedState)||this.play(!1))}goToPrevSlide(){this.NC(this.LC)||(this.play(!1),this.wC.goToPrevSlide())}destroy(){clearTimeout(this.AC)}}class Aa{static getScaledImageUrl(t,i,e,s){if(t){if(!nt({width:i,height:e}))return Object(b.e)(s)&&(i=et(i,s),e=et(e,s)),`${t}${Aa.getScaledImageQueryParams(i,e)}`.trim();this.qC("ImageUrlBuilder_getScaledImageUrl",i,e)}}static getScaledImageQueryParams(t,i){return nt({width:t,height:i})?(this.qC("ImageUrlBuilder_getScaledImageQueryParams",t,i),""):`?width=${t}&height=${i}&fit=bounds`}static getSmartCroppedImageUrl(t,i,e){if(!nt({width:i,height:e}))return`${t}${Aa.getSmartCroppedImageQueryParams(i,e)}`;this.qC("ImageUrlBuilder_getSmartCroppedImageUrl",i,e)}static getSmartCroppedImageQueryParams(t,i){return nt({width:t,height:i})?(this.qC("ImageUrlBuilder_getSmartCroppedImageQueryParams",t,i),""):`?crop=${t}:${i},smart&width=${t}&height=${i}&format=jpeg&quality=60&fit=crop`}static qC(t,i,e){Object(n.a)({message:t,exception:`width:${i}_height:${e}`,level:h.ProtoLoggingLevelEnum.FATAL,throttle:1,sendMaxLog:!1})}}class Ta extends o.a{constructor(t,i,e,s){super(),this.mediator=t,this.zC=i,this.nO=e,this.qa=s,this.Cd=!1,this.WC=!1,this.Gc=new V,this.uO=this.nO.createElementByString(this.GC()),this.QC()}set isLoaded(t){this.WC=t}get isLoaded(){return this.WC}JC(t,i){const e=t>i?$.Landscape:$.Portrait;return{imageUrl:this.XC[e],altText:Object(b.a)(this.zC.altText)?this.zC.altText:"",queryParams:this.zC.mediaContext===ch.ProtoMediaContextEnum.Logo?Aa.getScaledImageQueryParams(t,i):Aa.getSmartCroppedImageQueryParams(t,i),width:t,height:i}}QC(){const{imageUrl:t,portraitImageUrl:i}=this.zC;this.XC={[$.Landscape]:t,[$.Portrait]:Object(b.h)(i)?i:t}}get duration(){return this.zC.slideDuration*je.f}getThumbnailUrlParams(t,i){return this.JC(t,i)}destroy(){}}var Ca=e(118),Ia=e.n(Ca);class Pa extends Ta{constructor(t,i,e,s){super(t,i,e,s),this.type=h.ProtoMediaTypeEnum.Image,this.YC=t=>{t.preventDefault()},this.KC()}KC(){this.zC.mediaContext===ch.ProtoMediaContextEnum.Logo&&Object(A.a)(this.uO,Yn.MediaLogo)}ZC(){this.tI=this.uO.clientWidth,this.iI=this.uO.clientHeight}eI(){this.sI=setTimeout(()=>{const{clientWidth:t,clientHeight:i}=this.uO.parentElement,{imageUrl:e,altText:s,width:n,height:r,queryParams:h}=this.JC(t,i),a=this.Gc.getImage(e,s,n,r,h,!0);this.Rf&&this.uO.removeChild(this.Rf),this.uO.appendChild(a),this.Rf=a,this.nI(this.Rf)},0)}rI(){this.Rf&&Object(b.h)(this.zC.imageUrl)&&this.eI()}hI(){return Object(b.a)(this.uO)&&Object(b.a)(this.tI)&&Object(b.a)(this.iI)}aI(t){return!!this.hI()&&Math.abs(this.tI-this.uO.clientWidth)>=this.tI/t}oI(t){return!!this.hI()&&Math.abs(this.iI-this.uO.clientHeight)>=this.iI/t}nI(t){t.addEventListener("mousedown",this.YC)}cI(t){t.removeEventListener("mousedown",this.YC)}GC(){return Ia.a}reset(){this.isLoaded&&(this.uO.style.transitionDuration="",this.uO.style.transform="matrix(1.1, 0, 0, 1.1, 0, 0)")}onSlideResizeCallback(){(this.aI(10)||this.oI(10))&&(this.rI(),this.ZC())}play(){this.isLoaded&&(this.uO.style.transform="",this.uO.style.transitionDuration=`${this.zC.slideDuration}s`,Object(A.M)(this.uO,d.j.Paused,d.j.Playing))}pause(){this.isLoaded&&(this.uO.style.transitionDuration="",this.uO.style.transform=this.nO.getTransformPropertyValue(this.uO),Object(A.M)(this.uO,d.j.Playing,d.j.Paused))}load(t){this.isLoaded||(this.isLoaded=!0,t.appendChild(this.uO),this.ZC(),this.pause(),this.eI())}destroy(){this.Rf&&this.cI(this.Rf),clearTimeout(this.sI),super.destroy()}}var Ma=e(119),Ea=e.n(Ma);class La{constructor(t){this.lI=[{id:z.H264,extension:"mp4",type:"video/mp4"},{id:z.Hevc,extension:"mp4",type:"video/mp4",codecs:"hevc"}],this.NS=this.lI.find(i=>i.id===t)}get type(){const t=this.NS.codecs?`codecs="${this.NS.codecs}"`:"";return`${this.NS.type}; ${t}`}get id(){return this.NS.id}}class Ra{constructor(t,i,e){this.mediator=t,this.qa=i,this.uI=e,this.dI={quality:H.Auto,height:360},this.resizeObserverBinded=!1,this.fI=30,this.so=()=>{const t=this.uI.clientHeight;if(this.pI(t)&&this.currentQualitySettings.quality===H.Auto){const i={height:t,quality:H.Auto};this.setCurrentQualitySettings(i),this.mediator.publish(this,G.CurrentQuality,{payload:i})}}}setCurrentQualitySettings(t){this.dI.quality=t.quality,this.dI.height!==t.height&&(this.dI.height=t.height,this.mediator.publish(this,G.Change))}pI(t){return!this.dI.height||t/this.dI.height*100-100>this.fI}addResizeObserver(){this.resizeObserverBinded=!0,this.qa.on(this.uI,this.so)}removeResizeObserver(){this.resizeObserverBinded=!1,this.qa.off(this.uI,this.so)}setQuality(t){t.quality===H.Auto?this.resizeObserverBinded||(this.setCurrentQualitySettings({height:t.height,quality:t.quality}),this.addResizeObserver(),this.so()):(this.resizeObserverBinded&&this.removeResizeObserver(),this.setCurrentQualitySettings(t)),this.mediator.publish(this,G.CurrentQuality,{payload:this.dI})}get currentQualitySettings(){return this.dI}destroy(){this.removeResizeObserver()}}const Da={TrackLoaded:"trackLoaded"},Ba="en",$a="subtitle";class Fa extends o.a{constructor(t,i,e){super(),this.mediator=t,this.nO=i,this.bI=e,this.vI=[],this.gI=()=>{this.mediator.publish(this,Da.TrackLoaded)}}mI(t){this.yI=t,this.xI()}wI(t){this.bI.innerHTML="",t.forEach(t=>{this.bI.appendChild(t)})}kI(){return this.vI}xI(){if(this.vI=[],this.yI&&this.yI.subtitle){const t=this.nO.createElement("track");t.src=this.yI.subtitle,t.srclang=Ba,t.kind=$a,t.default=!0,t.addEventListener("load",this.gI,!1),t.addEventListener("loaded",this.gI,!1),this.vI.push(t)}}}class Va extends Fa{constructor(t,i,e,s,n,r={}){super(t,i,n),this.qa=e,this.Jf=s,this.SI=null,this.OI=10.13,this._I=this.jI(r)}start(){try{this.AI=new Ra(this,this.qa,this.Jf),this.TI(),this.setQuality({quality:H.Auto,height:0})}catch(t){Object(n.a)({message:"Mp4SourceHandler_start",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}onQualityChanged(){return this.attachMedia()}setSource(t,i=!1){this.mI(t),this.CI(this.II(),i)}setQuality(t){this.AI.setQuality(t)}get currentQualitySettings(){return this.AI.currentQualitySettings}attachMedia(){return new Promise(t=>{this.MI(),t()})}detachMedia(){this.bI.removeAttribute("src"),this.CI(null)}destroy(){this.AI.destroy()}TI(){this.relay(G.CurrentQuality,this.AI,this,this.mediator),this.subscribe(G.Change,this.AI,()=>{this.EI()})}EI(){this.CI(this.II()),this.mediator.publish(this,G.Change,{payload:this.AI.currentQualitySettings.height})}LI(t){this.wI(t),this.bI.load()}II(){return[...this.RI(),...this.kI()]}RI(){if(!this.bI||!this.yI)return[];const t=[];return this.yI.getSources(this.AI.currentQualitySettings.height,this._I).forEach(i=>{const e=this.nO.createElement("source");e.src=i.src,e.type=i.type,t.push(e)}),t}MI(){this.SI&&(this.LI(this.SI),this.SI=null)}CI(t,i=!1){this.SI=t,i&&this.MI()}jI(t){let i;switch(t.os){case qn.b.Ios:i=[z.Hevc,z.H264];break;case qn.b.Mac:i=t.osVersion>this.OI&&t.browser===T.a.Safari?[z.Hevc,z.H264]:[z.H264];break;default:i=[z.H264]}return i.map(t=>new La(t))}}var Ua=e(16);const Na={UnexpectedError:"unexpectedError",BufferingError:"bufferingError",FragBuffered:"fragBuffered",ManifestLoaded:"manifestLoaded",LevelSwitching:"levelSwitching",StreamEnded:"streamEnded"};var Ha;!function(t){t.Http="http",t.Https="https"}(Ha||(Ha={}));const qa=Ua&&Ua.isSupported(),za=t=>t.canPlayType("application/vnd.apple.mpegurl");var Wa=e(33);const Ga={enableWorker:!1,capLevelToPlayerSize:!0,cnxRenderWindow:window,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:0};class Qa extends Fa{constructor(t,i,e,s){super(t,i,e),this.DI=s,this.BI=[],this.$I=H.Auto,this.FI=320,this.VI=!1,this.UI=!1,this.NI=!1,this.HI=()=>{this.qI.off(Ua.Events.MEDIA_ATTACHED,this.HI);const t=this.zI(this.WI);this.qI.loadSource(t),this.qI.once(Ua.Events.MANIFEST_PARSED,this.GI)},this.GI=()=>{this.qI.off(Ua.Events.MANIFEST_PARSED,this.GI),this.qI.on(Ua.Events.LEVEL_SWITCHING,this.QI),this.qI.on(Ua.Events.LEVEL_SWITCHED,this.JI),this.qI.on(Ua.Events.FRAG_BUFFERED,this.XI),this.qI.on(Ua.Events.FRAG_LOADING,this.YI),this.qI.on(Ua.Events.FRAG_LOADED,this.KI),this.qI.on(Ua.Events.BUFFER_APPENDING,this.ZI),this.qI.on(Ua.Events.BUFFER_APPENDED,this.tP),this.qI.on(Ua.Events.BUFFER_EOS,this.iP),this.WI=null,this.eP(),this.sP(),this.nP.resolve()},this.rP=()=>{this.WI=null,this.bI.removeEventListener(N.LoadedMetadata,this.rP),this.hP.resolve()},this.sP=()=>{const t=this.BI.map(t=>({videoHeight:t.height,isHD:t.height>=J,label:t.level.toString()}));this.mediator.publish(this,Na.ManifestLoaded,{payload:{qualityList:t}})},this.XI=()=>{this.mediator.publish(this,Na.FragBuffered)},this.YI=()=>{this.VI=!0},this.KI=()=>{this.VI=!1},this.ZI=()=>{this.UI=!0},this.tP=()=>{this.UI=!1},this.iP=()=>{this.mediator.publish(this,Na.StreamEnded)},this.aP=(t,i)=>{if(i.details===Ua.ErrorDetails.BUFFER_STALLED_ERROR&&(this.VI||this.UI?this.mediator.publish(this,Na.BufferingError):(this.NI||(this.qI.recoverMediaError(),this.bI.play().then(()=>{this.NI=!1}).catch(()=>{this.NI=!1})),this.NI=!0)),i.fatal)switch(i.type){case Ua.ErrorTypes.NETWORK_ERROR:if(i.details===Ua.ErrorDetails.MANIFEST_PARSING_ERROR)return void this.oP("hls_network_error_manifest_parsing_error_FATAL");if(i.details===Ua.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.mediator.publish(this,Na.UnexpectedError);this.qI.startLoad();break;case Ua.ErrorTypes.MEDIA_ERROR:this.qI.recoverMediaError();break;default:this.oP("hls_unexpected_error_FATAL",`type_${i.type}_details_${i.details}`)}else i.type===Ua.ErrorTypes.MEDIA_ERROR&&i.details===Ua.ErrorDetails.BUFFER_APPENDING_ERROR&&this.oP("hls_media_error_buffer_appending_error"),i.type===Ua.ErrorTypes.NETWORK_ERROR&&i.details===Ua.ErrorDetails.MANIFEST_PARSING_ERROR&&this.oP("hls_network_error_manifest_parsing_error")},this.cP=()=>{this.oP("hls_video_tag_error",`code_${this.bI.error.code}_message_${this.bI.error.message}`)},this.JI=(t,i)=>{this.FI=this.BI.find(t=>t.level===i.level).height,this.mediator.publish(this,G.Change,{payload:this.currentQualitySettings.height}),this.mediator.publish(this,G.CurrentQuality,{payload:this.currentQualitySettings})},this.QI=()=>{this.mediator.publish(this,Na.LevelSwitching)},qa&&(this.qI=this.nO.initHls(Ga))}start(){}get liveSyncPosition(){if(this.qI)return this.qI.liveSyncPosition}setSource(t,i=!1){this.lP=t.id,this.mI(t),this.WI=t,i&&this.attachMedia()}attachMedia(){return new Promise(t=>{if(this.qI?this.qI.on(Ua.Events.ERROR,this.aP):this.bI.addEventListener(N.Error,this.cP),this.WI){const i=this.kI();this.wI(i),this.qI?this.uP().then(()=>{t()}):this.dP().then(()=>{t()})}else t()})}detachMedia(){this.BI=[],this.qI?(this.qI.detachMedia(),this.fP()):(this.bI.removeAttribute("src"),this.bI.removeEventListener(N.LoadedMetadata,this.rP),this.bI.removeEventListener(N.Error,this.cP))}setQuality(t){this.$I=t.quality,this.FI=t.height,this.qI&&this.pP(),this.mediator.publish(this,G.Change,{payload:this.currentQualitySettings.height}),this.mediator.publish(this,G.CurrentQuality,{payload:this.currentQualitySettings})}get currentQualitySettings(){return{quality:this.$I,height:this.FI}}onQualityChanged(){return new Promise(()=>{})}destroy(){this.qI?(this.fP(),this.qI.destroy(),this.qI=null):(this.bI.removeEventListener(N.LoadedMetadata,this.rP),this.bI.removeEventListener(N.Error,this.cP))}uP(){return this.nP=new Wa.a,this.qI.attachMedia(this.bI),this.qI.once(Ua.Events.MEDIA_ATTACHED,this.HI),this.nP.promise}dP(){return this.hP=new Wa.a,this.bI.src=this.zI(this.WI),this.bI.addEventListener(N.LoadedMetadata,this.rP),this.hP.promise}fP(){this.qI.off(Ua.Events.MEDIA_ATTACHED,this.HI),this.qI.off(Ua.Events.MANIFEST_PARSED,this.GI),this.qI.off(Ua.Events.ERROR,this.aP),this.qI.off(Ua.Events.LEVEL_SWITCHING,this.QI),this.qI.off(Ua.Events.LEVEL_SWITCHED,this.JI),this.qI.off(Ua.Events.FRAG_BUFFERED,this.XI),this.qI.off(Ua.Events.FRAG_LOADING,this.YI),this.qI.off(Ua.Events.FRAG_LOADED,this.KI),this.qI.off(Ua.Events.BUFFER_APPENDING,this.ZI),this.qI.off(Ua.Events.BUFFER_APPENDED,this.tP),this.qI.off(Ua.Events.BUFFER_EOS,this.iP)}eP(){this.qI.levels.forEach((t,i)=>{this.BI.push({level:i,height:t.height})})}oP(t,i){Object(n.a)({message:t,exception:this.lP,level:h.ProtoLoggingLevelEnum.WARNING,callStack:i}),this.mediator.publish(this,Na.UnexpectedError)}pP(){if(this.$I===H.Auto)this.qI.currentLevel=-1;else try{this.qI.currentLevel=this.BI.find(t=>t.height===this.FI).level}catch(t){Object(n.a)({message:"HlsSourceHandler_quality_not_present_in_hls_manifest",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}zI(t){try{const i=t.getHlsSource(),e=Object(ht.g)(i);return e&&e.protocol?i:`${this.DI}:${i}`}catch(t){Object(n.a)({exception:t.message,message:"HlsSourceHandler_undefined_sourceMeta",level:h.ProtoLoggingLevelEnum.FATAL,callStack:t.stack,throttle:5,sendMaxLog:!1})}}}var Ja;!function(t){t.Disabled="disabled",t.Hidden="hidden",t.Showing="showing"}(Ja||(Ja={}));class Xa{constructor(t,i,e,s){this.mediator=t,this.bI=i,this.Ev=e,this.bP=!1,this.vP=!1,this.gP=Ja.Hidden,this.mP=0,this.yP=t=>{switch(t.type){case N.Play:this.bP=!0;break;case N.Timeupdate:this.mediator.publish(this,t.type,{payload:this.bP});break;case N.Error:const i=this.bI.error?this.bI.error.message:"";this.mediator.publish(this,W.PlayError,{payload:i});break;case N.LoadedMetadata:this.vP=!0,Object(b.d)(this.xP)&&(this.currentTime=this.xP,this.xP=null),this.mediator.publish(this,t.type);break;default:this.mediator.publish(this,t.type)}},this.play=()=>{const t=this.bI.play();return t?(this.mP++,t.then(()=>{this.bP=!0,this.mP--,this.wP()}).catch(t=>{throw this.mediator.publish(this,W.PlayError,{payload:t}),this.bP=!1,this.mP--,t})):Promise.resolve()},this.pause=()=>{this.bI.pause(),this.bP=!1},this.volume=s,this.TI()}TI(){this.Ev.forEach(t=>{this.bI.addEventListener(t,this.yP)})}wP(){this.bI.textTracks&&0!==this.bI.textTracks.length&&Object.keys(this.bI.textTracks).forEach(t=>{this.bI.textTracks[t].mode=this.gP})}set poster(t){Object(b.h)(t)&&(this.bI.poster=t)}get poster(){return this.bI.poster}get volume(){return this.kP}set volume(t){this.kP=t<=1?t:t/100,this.bI.volume=this.kP,Object(A.R)(this.bI,this.kP)}get currentTime(){return this.bI.currentTime}set currentTime(t){this.vP?this.bI.currentTime=t:this.xP=t}get duration(){return this.bI.duration}get playing(){return this.bP}destroy(){this.Ev.forEach(t=>{this.bI.removeEventListener(t,this.yP)})}setTrackModes(t){this.gP=t,this.wP()}setMetaLoaded(t){this.vP=t}setCrossOriginAttribute(){this.bI.getAttribute("crossorigin")||this.bI.setAttribute("crossorigin","anonymous")}setPoster(t){this.poster=t.getThumbnailUrl(this.bI.clientWidth,this.bI.clientHeight)}getCurrentTrack(){return this.bI.textTracks&&0!==this.bI.textTracks.length?this.bI.textTracks[0]:null}isPlayPending(){return this.mP>0}}class Ya extends o.a{constructor(t,i,e,s,r,a={},o){if(super(),this.mediator=t,this.nO=i,this.Jf=e,this.qa=s,this.SP=r,this.NS=a,this.OP=o,this._P=!0,this.jP=!1,this.AP=!1,this.TP=()=>{let t;this.currentTrack.activeCues&&this.currentTrack.activeCues.length>0&&(t=this.currentTrack.activeCues[0]),this.mediator.publish(this,j[j.CaptionUpdate],{payload:t})},this.gI=()=>{this.currentTrack&&(this.currentTrack.mode=this.CP?Ja.Hidden:Ja.Disabled,this.currentTrack.oncuechange=this.TP)},this.IP(),this.PP.appendChild(this.bI),this.Jf.appendChild(this.PP),this.MP=new Va(this,i,this.qa,this.Jf,this.bI,this.NS),qa||za(this.bI)){const t=this.nO.isHttpsProtocolUsed()?Ha.Https:Ha.Http;this.EP=new Qa(this,this.nO,this.bI,t),this.LP()}else this._P=!1,Object(n.a)({message:"Hls_not_supported",level:h.ProtoLoggingLevelEnum.INFO})}start(){try{this.Ev=Object(l.a)(N),this.RP=new Xa(this,this.bI,this.Ev,this.SP),this.DP(),this.BP(),this.$P()}catch(t){Object(n.a)({message:"VideoHandler_start",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}FP(){const t=this.currentTime;this.setSource(this.VP,!0,this.MP),this.UP.attachMedia().then(()=>{this.RP.play().then(()=>{this.AP=!1,this.NP.resolve(),this.RP.currentTime=t}).catch(t=>{this.NP&&this.NP.isPending&&(this.AP=!1,this.NP.reject(),Object(n.a)({message:"VideoHandler_hls_error_content_player_play",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL}))})}).catch(t=>{this.NP&&this.NP.isPending&&(this.AP=!1,this.NP.reject()),Object(n.a)({message:"VideoHandler_hls_error_attach_media",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL})})}LP(){this.subscribe(Na.UnexpectedError,this.EP,()=>{this.AP=!0,this.FP()}),this.subscribe(Na.ManifestLoaded,this.EP,({payload:t})=>{this.mediator.publish(this,G.Loaded,{payload:{qualityList:t,videoMeta:this.VP}}),this.RP.setMetaLoaded(!0)}),this.subscribe(Na.BufferingError,this.EP,()=>{this.mediator.publish(this,W.Buffering)}),this.subscribe(Na.FragBuffered,this.EP,()=>{this.mediator.publish(this,W.Buffered)}),this.subscribe(Na.StreamEnded,this.EP,()=>{this.mediator.publish(this,W.EndOfStream)}),this.subscribe(Na.LevelSwitching,this.EP,()=>{this.mediator.publish(this,W.LevelSwitching)})}DP(){this.HP(this.MP)}BP(){this.EP&&this.HP(this.EP)}HP(t){t.start(),this.qP(t)}$P(){this.Ev.forEach(t=>{this.subscribe(t,this.RP,i=>{t===N.Canplay&&this.OP&&(this.currentTime=this.OP,this.OP=null),this.mediator.publish(this,t,i)})}),this.relay(W.PlayError,this.RP,this,this.mediator)}qP(t){this.relay([G.CurrentQuality,W.NewVideo],t,this,this.mediator),this.subscribe(G.Change,t,({payload:t})=>{this.onQualityChanged(t)}),this.subscribe(Da.TrackLoaded,t,()=>{this.gI()})}get width(){return this.PP.getBoundingClientRect().width}get height(){return this.PP.getBoundingClientRect().height}get currentTime(){return this.RP.currentTime}set currentTime(t){this.RP.currentTime=t}forceCurrentTime(t){this.RP.currentTime=t,this.OP=t}get duration(){return this.RP.duration}get volume(){return this.RP.volume}set volume(t){this.RP.volume=t}get playing(){return this.RP.playing}get isIosFullscreen(){return this.jP}set isIosFullscreen(t){this.jP=t,this.jP&&this.CP?this.zP():this.WP()}get currentQualitySettings(){return this.UP.currentQualitySettings}hide(){Object(A.a)(this.PP,d.d)}show(){Object(A.I)(this.PP,d.d)}setSource(t,i=!1,e){return this.OP=null,new Promise((s,r)=>{try{this.VP=t,this.UP&&this.UP.detachMedia(),e?this.GP(e):Object(b.h)(t.hlsFilePath)&&this.EP?this.UP=this.EP:this.GP(this.MP),t&&t.subtitle&&this.RP.setCrossOriginAttribute(),this.RP.setPoster(t),this.RP.setTrackModes(this.CP?Ja.Hidden:Ja.Disabled),i&&this.RP.setMetaLoaded(!1),this.UP.setSource(t,i),this.mediator.publish(this,W.NewVideo),s()}catch(t){Object(n.a)({message:"VideoHandler_set_video_source",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL}),r()}})}setQuality(t){this.UP.setQuality(t)}pause(){this.RP.pause()}play(){return this.NP=new Wa.a,this.UP.attachMedia().then(()=>{this.RP.play().then(()=>{this.NP.resolve()}).catch(t=>{!this.AP&&this.NP&&this.NP.isPending&&(this.NP.reject(),Object(n.a)({message:"VideoHandler_public_play_content_player_play",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL}))})}).catch(t=>{this.NP&&this.NP.isPending&&this.NP.reject(t),Object(n.a)({message:"VideoHandler_public_play_attach_media_error",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL})}),this.NP.promise}isPlayPending(){return this.RP.isPlayPending()}showCaptions(){this.CP=!0,this.RP.setTrackModes(Ja.Hidden)}hideCaptions(){this.CP=!1,this.RP.setTrackModes(Ja.Disabled),this.currentTrack&&this.mediator.publish(this,j[j.CaptionUpdate])}destroy(){this.UP.destroy(),this.PP.parentNode.removeChild(this.PP)}IP(){this.PP=this.nO.createElementByString('<cnx class="cnx-video-wrapper"></cnx>'),this.bI=this.nO.createElementByString('<video class="cnx-video-tag"></video>'),this.NS.os===qn.b.Ios&&(this.bI.setAttribute("playsinline",""),this.bI.setAttribute("webkit-playsinline",""))}GP(t){this.UP=t,this.UP.setQuality({quality:H.Auto,height:0})}onQualityChanged(t){const i=this.RP.playing;this.OP=this.currentTime,i&&this.UP.onQualityChanged&&this.UP.onQualityChanged().then(()=>{this.RP.setMetaLoaded(!1),this.RP.play().catch(t=>{Object(n.a)({message:"VideoHandler_quality_changed",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})})}),this.mediator.publish(this,G.Change,{payload:t})}get currentTrack(){return this.RP.getCurrentTrack()}zP(){this.currentTrack&&(this.currentTrack.oncuechange=null,this.mediator.publish(this,j[j.CaptionUpdate]),this.currentTrack.mode=Ja.Showing)}WP(){if(this.currentTrack){switch(this.currentTrack.mode){case Ja.Showing:case Ja.Hidden:this.CP=!0;break;case Ja.Disabled:this.CP=!1}this.mediator.publish(this,this.CP?j[j.CaptionOn]:j[j.CaptionOff])}this.gI()}}class Ka{constructor(t,i){this.QP=[],this.JP=[],this.XP=[],this.YP=[],this.Nd=[],this.KP=t,this.M_=i.title,this.tc=i.altText,this.ZP=i.description,this.tM=i.clickUrl,this.QP=i.keywordList,this.iM=i.languageId,this.JP=i.trackList,this.eM=i.thumbnail,this.It=i.duration,this.YP=i.customFields,this.sM=i.hlsFilePath,this.nM=i.sourceItemId,Object(u.h)(i.renditionList)&&(this.XP=this.rM(i.renditionList),this.hM(i.renditionList))}rM(t){return t.sort((t,i)=>t.height-i.height)}setAvailableQualities(t){this.Nd=t}hM(t){Object(u.d)("height",t).forEach((t,i)=>{this.Nd.push({videoHeight:t.height,label:`${t.height}p`,isHD:t.height>=J})})}aM(t,i){return this.XP.find(e=>e.codec===t&&e.height===i)}oM(t,i){const e=it(t,this.Nd.map(t=>t.videoHeight));return this.aM(i,e)}get hlsFilePath(){return this.sM}getAvailableQualities(){return this.Nd}getClosestSourceQuality(t){let i;const e=it(t,this.Nd.map(t=>t.videoHeight));return this.Nd.forEach(t=>{t.videoHeight===e&&(i=t)}),i}getSources(t,i){const e=[];return i.forEach(i=>{const s=this.oM(t,i.id);Object(u.h)(e)||s&&e.push({src:`${Ds.a.endPoints.base.video}${this.KP}/${s.file}`,type:i.type})}),e}getHlsSource(){return`${Ds.a.endPoints.base.video}${this.KP}/${this.sM}`}getThumbnailUrl(t,i){const e=`${Ds.a.endPoints.base.image}${this.KP}/${this.eM}`;return Aa.getSmartCroppedImageUrl(e,t,i)}get title(){return this.M_}get altText(){return Object(b.a)(this.tc)?this.tc:""}get description(){return this.ZP}get clickUrl(){return this.tM}get keywords(){return this.QP}get languageId(){return this.iM}get sourceItemId(){return this.nM}get subtitle(){if(this.JP&&this.JP[0])return`${Ds.a.endPoints.base.video}${this.KP}/${this.JP[0].file}`}get spriteSheet(){return this.cM}get duration(){return this.It}get id(){return this.KP}get customFields(){return this.YP}}class Za extends Ka{constructor(t){super(null,t)}getSources(t,i){return i.map(({id:i,type:e})=>{const s=this.oM(t,i);if(s)return{type:e,src:`${s.file}`}}).filter(t=>t)}getThumbnailUrl(t,i){return Aa.getSmartCroppedImageUrl(this.eM,t,i)}}class to extends Ta{constructor(t,i,e,s,n=0,r={}){super(t,i,e,s),this.SP=n,this.NS=r,this.lM=.1,this.type=h.ProtoMediaTypeEnum.Video,this.uM={[$.Landscape]:{renditionList:[],videoSourceMeta:void 0},[$.Portrait]:{renditionList:[],videoSourceMeta:void 0}},this.dM=null,this.getClosestSourceQuality=t=>(this.fM||this.pM(),this.uM[this.fM].videoSourceMeta.getClosestSourceQuality(t)),this.bM(),this.vM()}bM(){this.zC.videoRendition.renditions.forEach(({codec:t,height:i,width:e,videoUrl:s})=>{const n={codec:ch.ProtoPlayspaceCodecEnum[t],height:i,file:s};i<e?this.uM[$.Landscape].renditionList.push(n):this.uM[$.Portrait].renditionList.push(n)});const t=this.uM[$.Landscape].renditionList,i=this.uM[$.Portrait].renditionList;Object(u.h)(t)||Object(u.h)(i)?(Object(u.h)(t)||(this.uM[$.Landscape].renditionList=i),Object(u.h)(i)||(this.uM[$.Portrait].renditionList=t)):Object(n.a)({message:"SlideVideo_no_renditions",level:h.ProtoLoggingLevelEnum.FATAL})}vM(){Object.keys(this.uM).forEach(t=>{const i=this.uM[t];i.videoSourceMeta=new Za({title:this.zC.title,altText:this.zC.altText,clickUrl:this.zC.clickUrl,renditionList:i.renditionList,thumbnail:this.zC.imageUrl})})}gM(t){this.mM=new Ya(this,this.nO,t,this.qa,this.SP,this.NS,this.lM)}yM(){this.subscribe(G.Change,this.mM,({payload:t})=>{const i=this.getClosestSourceQuality(t);this.mediator.publish(this,G.Change,{payload:i.videoHeight})})}pM(){const{clientHeight:t,clientWidth:i}=this.uO;this.fM=t<i?$.Landscape:$.Portrait}xM(){this.mM&&this.mM.setSource(this.uM[this.fM].videoSourceMeta,!0).then(()=>{this.mM.playing&&this.wM()})}GC(){return Ea.a}wM(){this.mM.play().catch(()=>{})}play(){this.isLoaded&&this.wM()}pause(){this.isLoaded&&this.mM.pause()}reset(){this.WC&&(this.mM.currentTime=this.lM)}load(t){this.isLoaded||(t.appendChild(this.uO),this.isLoaded=!0,this.gM(this.uO),this.yM(),this.mM.start(),this.pM(),this.xM(),this.dM&&this.setQuality(this.dM),this.pause())}getAvailableQualities(){return this.uM[this.fM].videoSourceMeta.getAvailableQualities()}get currentQuality(){return this.mM.currentQualitySettings}get volume(){return this.isLoaded?this.mM.volume:this.SP}set volume(t){this.isLoaded?this.mM.volume=t:this.SP=t}setQuality(t){this.mM?this.mM.setQuality(t):this.dM=t}onSlideResizeCallback(){const t=this.fM;this.pM(),t!==this.fM&&this.xM()}}class io{constructor(t){this.oT=t}get template(){return`\n        <cnx class="cnx-ui-ps-slide-wrapper">\n            <cnx class="cnx-ui-ps-slide"></cnx>\n            <cnx class="cnx-ui-ps-slide-bg"></cnx>\n            <cnx class="cnx-ui-ps-cta-wrapper">\n                ${this.kM()}\n            </cnx>\n        </cnx>\n        `.trim()}kM(){return this.oT.disableCTARendering?"":`[[${lt.CtaButton}]]`}}class eo extends gt{enterState(){super.enterState();const t=this.context.getComponent(lt.PlayspaceProgressBar);t&&t.startProgress();const i=this.context.getComponent(lt.CtaButton);i&&i.startProgress()}exitState(){super.exitState()}updateDuration(){const t=this.context.getComponent(lt.PlayspaceProgressBar);t&&t.startProgress()}}class so extends yt{enterState(){super.enterState();const t=this.context.getComponent(lt.PlayspaceProgressBar);t&&t.pauseProgress();const i=this.context.getComponent(lt.CtaButton);i&&i.pauseProgress()}exitState(){super.exitState()}updateDuration(){}}class no extends so{enterState(){super.enterState()}exitState(){super.exitState()}}class ro extends so{enterState(){super.enterState()}exitState(){super.exitState()}}class ho extends so{enterState(){super.enterState()}exitState(){super.exitState()}}class ao extends St{constructor(t,i,e,s,n,r,h,a){super(t,i,e,n,new ta(e,s,i,{isMobile:r})),this.mediator=t,this.$container=i,this.nO=e,this.zO=h,this.zT=[lt.CtaButton],this.iC=new wa,this.vu={[q.PlayingState]:new eo(this),[q.PausedState]:new so(this),[q.StoppedState]:new no(this),[q.HiddenState]:new ro(this),[q.PrerollState]:new ho(this),[q.PostrollState]:new ho(this)},this.SM(),this.vu[a].enterState(),this.oC(),this.cC(!1)}SM(){const t=this.getComponent(lt.CtaButton);t&&t.setFooterElement(this.zO)}oC(t=[]){this.iC.setCapabilityList(t)}cC(t=!0){const{excludedComponents:i,includedComponents:e}=this.iC.getComponentList();i.map(t=>this.getComponent(t)).forEach(i=>i&&i.hideComponent(t)),e.map(t=>this.getComponent(t)).forEach(i=>i&&i.showComponent(t))}sC(t){switch(t){case tr.CallToAction:this.mediator.publish(this,tr.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.UrlClick})}}handleComponentEvent(t,i,e){switch(this.sC(t),t){case tr.CallToAction:Object(b.h)(i.payload)?this.mediator.publish(this,tr.CallToAction,i):this.mediator.publish(this,j[j.Next]);break;default:this.mediator.publish(this,t,i)}}handleCapabilityList(t){this.oC(t),this.cC(),this.zT.forEach(i=>{const e=this.getComponent(i);e&&e.handleCapabilities(t)})}}const oo="cnx-ui-ps-slide";class co extends o.a{constructor(t,i,e,s,n,r,h,a,o){super(),this.mediator=t,this.zC=i,this.nO=e,this.qa=s,this.OM=n,this.Wn=r,this.oT=h,this.zO=a,this.ml=o,this._M=[{type:jr.TopLogo,metadata:{}}],this.Kl=this.nO.createElementByString(`<cnx class="${Yn.Slide}"></cnx>`),this.jM(),this.AM=this.Kl.querySelector(`.${oo}`)}get $container(){return this.Kl}get slideCapabilityList(){return this._M}get metadata(){return this.zC}get media(){return this.OM}load(){this.OM.load(this.AM)}get clickUrl(){return this.zC.clickUrl}updateCapabilityMetadata(t){if(!Object(u.h)(this._M))return;const i=this._M.find(({type:i})=>i===t.type);i&&(i.metadata=Object.assign(Object.assign({},i.metadata),t.metadata))}changeState(t){this.kC.changeState(t)}jM(){this.kC=new ao(this,this.Kl,this.nO,this.qa,this.GC(),this.Wn,this.zO,this.ml.playbackMode===ch.ProtoPlayerPlaybackModeEnum.ClickToPlay?q.StoppedState:q.PausedState),this.subscribe(tr.CallToAction,this.kC,({payload:t})=>{this.mediator.publish(this,tr.CallToAction)}),this.subscribe(j[j.Next],this.kC,()=>{this.mediator.publish(this,j[j.Next])})}GC(){return new io(this.oT).template}TM(t,i){this._M.push({type:t,metadata:i})}CM(){const t=this.IM(this.zC);if(!t)return;const i={label:t,useTransition:!0};this.TM(jr.TopSlideTitle,i)}IM(t){const i=t.publisherName||t.title,e=this.nO.stripHtmlTags(i).trim();return t.publisherName?`by <em>${e}</em>`:e}onSlideTransitionStart(t){this.kC&&this.kC.handleCapabilityList(t)}}const lo=4;class uo extends co{constructor(t,i,e,s,r,a,o,c,l){super(t,i,e,s,r,a,o,c,l),this.type=ch.ProtoPlayspaceSlideTypeEnum.BulletList,Object(b.f)(i.bulletListMetadata)&&Object(u.h)(this.metadata.bulletListMetadata.items)?(this.PM(),this.onSlideTransitionStart(this._M)):Object(n.a)({message:"BulletSlide_no_metadata",level:h.ProtoLoggingLevelEnum.FATAL})}PM(){this.MM(),this.CM(),this.EM()}MM(){const{title:t,items:i}=this.zC.bulletListMetadata;i.length>lo&&(i.length=lo);const e=jr.SlideTitle,s={bulletChunkList:i,titleType:Ar.Bullet};Object(b.g)(t)&&(s.label=t),this.TM(e,s)}EM(){const t={label:this.zC.storyTitle,useFallbackLabel:!0};this.TM(jr.TopStoryTitle,t)}}class fo extends co{constructor(t,i,e,s,r,a,o,c,l){super(t,i,e,s,r,a,o,c,l),this.type=ch.ProtoPlayspaceSlideTypeEnum.Description,Object(b.f)(i.descriptionMetadata)&&Object(u.h)(this.metadata.descriptionMetadata.chunkList)?(this.LM(),this.RM(),this.onSlideTransitionStart(this._M)):Object(n.a)({message:"DescriptionSlide_no_metadata",level:h.ProtoLoggingLevelEnum.FATAL})}LM(){const{chunkList:t,label:i}=this.zC.descriptionMetadata;let e=!1;const s=t=>Object(b.e)(t);Object(b.f)(i)&&Object(b.h)(i.text)&&(e=!0,i.colorScheme=s(i.colorScheme)?i.colorScheme:ch.ProtoPlayspaceColorSchemeEnum.Primary),Object(u.h)(t)&&t.forEach((t,i)=>{t.colorScheme=0!==i||e?s(t.colorScheme)?t.colorScheme:ch.ProtoPlayspaceColorSchemeEnum.Secondary:s(t.colorScheme)?t.colorScheme:ch.ProtoPlayspaceColorSchemeEnum.Primary})}RM(){this.DM(),this.EM(),this.CM()}DM(){const{chunkList:t,label:i}=this.zC.descriptionMetadata,e=jr.SlideTitle,s={descriptionChunkList:t,titleType:Ar.Description};Object(b.f)(i)&&(s.label=i.text,s.labelColorScheme=i.colorScheme),this.TM(e,s)}EM(){const t={label:this.zC.storyTitle,useFallbackLabel:!0};this.TM(jr.TopStoryTitle,t)}}const po={[h.ProtoMediaTypeEnum.Image]:"Read more",[h.ProtoMediaTypeEnum.Video]:"Continue video"};class bo extends co{constructor(t,i,e,s,n,r,h,a,o){super(t,i,e,s,n,r,h,a,o),this.type=ch.ProtoPlayspaceSlideTypeEnum.Default,this.RM(),this.onSlideTransitionStart(this._M)}RM(){this.BM(),this.$M(),this.FM(),this.VM(),this.UM(),this.EM(),this.zC.publisherName&&this.CM()}BM(){const{clickUrl:t,title:i}=this.zC,e={url:t,label:i,titleType:Ar.Default};this.TM(jr.SlideTitle,e)}$M(){this.TM(jr.PlaybackControls)}FM(){this.TM(jr.PlaylistControls)}UM(){const{clickUrl:t}=this.zC;if(!Object(b.h)(t))return;const i={url:t,label:this.NM(this.zC),ctaAlignToContent:!0};this.TM(jr.CtaButton,i)}VM(){this.zC.mediaType===h.ProtoMediaTypeEnum.Video&&this.TM(jr.VolumeControls)}EM(){const t=this.nO.stripHtmlTags(this.zC.storyTitle).trim();if(!t)return;const i={label:t,useFallbackLabel:!0};this.TM(jr.TopStoryTitle,i)}NM(t){const{capabilityList:i,mediaType:e}=t;if(!Object(u.h)(i))return po[e];const s=i.find(({type:t})=>t===ch.ProtoPlayspaceSlideCapabilitiesEnum.CtaButton);return s&&s.metadata?s.metadata.label:po[e]}}const vo="START";class go extends co{constructor(t,i,e,s,n,r,h,a,o,c){super(t,i,e,s,n,h,a,o,c),this.HM=r,this.type=ch.ProtoPlayspaceSlideTypeEnum.Cover,this.qM(),this.RM(),this.onSlideTransitionStart(this._M)}qM(){Object(A.a)(this.Kl,ih.Cover)}RM(){this.BM(),this.UM(),this.zM()}BM(){const t=jr.SlideTitle,i={titleType:Ar.Cover,coverChunk:this.zC.coverMetadata};this.TM(t,i)}zM(){const t={label:`${this.HM} min. story`};this.TM(jr.TextLabel,t)}UM(){const t={label:vo,duration:this.zC.slideDuration,ctaAlignToContent:!1,ctaAlignToFooter:!0};this.TM(jr.CtaButton,t)}}class mo extends co{constructor(t,i,e,s,r,a,o,c,l){super(t,i,e,s,r,a,o,c,l),this.type=ch.ProtoPlayspaceSlideTypeEnum.Quote,Object(b.f)(i.quoteMetadata)?(this.RM(),this.onSlideTransitionStart(this._M)):Object(n.a)({message:"QuoteSlide_no_metadata",level:h.ProtoLoggingLevelEnum.FATAL})}RM(){this.EM(),this.CM(),this.WM()}EM(){const t={label:this.zC.storyTitle,useFallbackLabel:!0};this.TM(jr.TopStoryTitle,t)}WM(){const{text:t,source:i}=this.zC.quoteMetadata,e=jr.SlideTitle,s={quote:t,source:i,titleType:Ar.Quote};this.TM(e,s)}}const yo="VISIT POST";class xo extends co{constructor(t,i,e,s,n,r,h,a,o){super(t,i,e,s,n,r,h,a,o),this.type=ch.ProtoPlayspaceSlideTypeEnum.Instagram,this.qM(),this.RM(),this.onSlideTransitionStart(this._M)}qM(){Object(A.a)(this.Kl,ih.Instagram)}RM(){this.GM(),this.EM(),this.CM(),this.UM()}GM(){const{createdDate:t,comments:i,likes:e}=this.zC.instagramMetadata,s={label:this.zC.title,instagramMetadata:{createdDate:t,comments:i,likes:e},titleType:Ar.Instagram};this.TM(jr.SlideTitle,s)}EM(){const t={label:this.zC.storyTitle,useFallbackLabel:!0};this.TM(jr.TopStoryTitle,t)}UM(){const{clickUrl:t}=this.zC;if(!Object(b.h)(t))return;const i={url:t,label:yo,ctaAlignToContent:!1,ctaAlignToFooter:!0};this.TM(jr.CtaButton,i)}QM(t){const i=this.metadata.instagramMetadata.handle||t.publisherName,e=this.nO.stripHtmlTags(i).trim();return t.publisherName?`by <em>${e}</em>`:e}CM(){const t=this.QM(this.zC);if(!t)return;const i={label:t,useTransition:!0};this.TM(jr.TopSlideTitle,i)}}class wo{constructor(t,i,e,s,n,r,h,a){this.nO=t,this.qa=i,this.SP=e,this.NS=s,this.Wn=n,this.JM=r,this.zO=h,this.ml=a,this.XM={[ch.ProtoPlayspaceSlideTypeEnum.Description]:fo,[ch.ProtoPlayspaceSlideTypeEnum.Default]:bo,[ch.ProtoPlayspaceSlideTypeEnum.Quote]:mo,[ch.ProtoPlayspaceSlideTypeEnum.BulletList]:uo,[ch.ProtoPlayspaceSlideTypeEnum.Instagram]:xo}}getSlide(t,i,e){const s=this.XM[t.type]||bo,n=this.YM(t,i);switch(t.type){case ch.ProtoPlayspaceSlideTypeEnum.Cover:return new go(i,t,this.nO,this.qa,n,e,this.Wn,this.JM,this.zO,this.ml);default:return new s(i,t,this.nO,this.qa,n,this.Wn,this.JM,this.zO,this.ml)}}YM(t,i){if(t.mediaType===h.ProtoMediaTypeEnum.Video)return new to(i,t,this.nO,this.qa,this.SP,this.NS);if(t.mediaType===h.ProtoMediaTypeEnum.Image)return new Pa(i,t,this.nO,this.qa);throw new Error("Slide not found")}}class ko{constructor(t,i){this.KM=t,this.ZM=i,this.tE=t=>new Promise((i,e)=>{Ze.a.sendProtoRequest({ProtoResponse:this.KM,endpoint:t,requestType:"GET"}).then(t=>{i(t)}).catch(t=>{e(t)})})}fetchMetadata(t){return new Promise((i,e)=>{Object(ht.k)(()=>this.tE(t)).then(s=>{if(Object(b.f)(s))return i(s);const n=new Error("invalid metadata");return this.qC({url:t,metadata:s,e:n}),e(n)}).catch(i=>{this.qC({url:t,e:i}),e(i)})})}qC(t){var i,e;const s=Object(b.h)(null===(i=t.e)||void 0===i?void 0:i.message)?t.e.message:"";Object(n.a)({message:"MediaMetadataHandler_fetchMetadata",exception:`${this.ZM}_${s}:${JSON.stringify(t)}`,callStack:t.e&&t.e.stack,level:this.iE(null===(e=t)||void 0===e?void 0:e.e)})}iE(t){return t&&Object(b.h)(t.message)&&t.message.indexOf("status:0")>-1?h.ProtoLoggingLevelEnum.WARNING:h.ProtoLoggingLevelEnum.FATAL}}const So="00000000-0000-0000-0000-000000000002",Oo="PlayspaceContentHandler";class _o extends o.a{constructor(t,i,e,s,n,r,a){super(),this.mediator=t,this.nO=i,this.qa=e,this.ml=s,this.Kf=n,this.NA=r,this.aA=a,this.eE=new ko(ch.ProtoPlayspaceMediaMetadataResponse,Oo),this.sE=0,this.nE=!1,this.rE=t=>{t&&(this.kC.onFirstTimeInView(),this.Kf.services.ViewabilityService.off(this.NA,this.rE))},this.hE(),this.jM(),this.aE(),this.oE(),this.volume=this.ml.soundMode===h.ProtoPlayerSoundMode.On?1:0,this.vp(),this.Kf.services.ViewabilityService.on(this.NA,this.rE,{threshold:.5})}cE(t){return new Promise((i,e)=>{this.eE.fetchMetadata(t).then(t=>{if(window.parent.cnx_ps_slide_list&&Object(Ls.b)("cnx_ps_slide_list",this.Kf.config.pageUrl)&&(t.slides=[...window.parent.cnx_ps_slide_list,...t.slides]),t.slides=this.lE(t.slides),t.slides=this.uE(t.slides),t.slides.length>=2)i(t);else{if(this.nE)return void e({message:"fallbackstory_already_used"});this.nE=!0,this.dE().then(t=>{const e=`${Ds.a.endPoints.base.metadata}${t.storyId}/${t.activeVersionId}.bin`;i(this.cE(e))}).catch(t=>{Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PlayspaceContentH_error_getting_default_story"}),e(t)})}}).catch(t=>{e(t)})})}dE(){return new Promise((t,i)=>{Ze.a.sendProtoRequest({ProtoResponse:ch.ProtoFallbackStoryResponse,endpoint:Ds.a.endPoints.api.fallbackstory}).then(i=>{t(i)}).catch(t=>{i(t)})})}lE(t){const i=this.nO.getGlobalLocationProperties(),e=`${i.hostname}${i.pathname}`;return t.filter(t=>{const i=Object(ht.g)(t.clickUrl);return!(i&&i.hostname+i.pathname===e)})}uE(t){return t.filter(t=>t.type!==ch.ProtoPlayspaceSlideTypeEnum.Stock)}aE(){const{browserType:t}=this.Kf.config.browser,{os:i,osVersion:e}=this.Kf.config.os,s={disableCTARendering:this.ml.disableCTARendering};this.wC=new ra(this,this.nO,this.Kf.services.PageFocusService,this.kC.$mediaContainer,new wo(this.nO,this.qa,this.ml.soundMode===h.ProtoPlayerSoundMode.On?1:0,{browser:t,os:i,osVersion:e},this.Kf.config.isMobile,s,this.kC.footer,this.ml),this.ml.isSeoTraffic)}hE(){this.fE={logoUrl:this.ml.logoUrl,isMobile:this.Kf.config.isMobile,closeButtonMode:this.ml.closeButtonMode,floatingCloseButtonMode:this.ml.floatingCloseButtonMode,isCloseButton:this.ml.isCloseButton,sharingDestinations:this.ml.sharingDestinations,os:this.Kf.config.os.os,expandButtonEnabled:this.ml.uiComponentsVisibility.expandButton,primaryColorList:{background:this.ml.primaryColorList.background||d.l.PrimaryBackground,foreground:this.ml.primaryColorList.foreground||d.l.PrimaryForeground},secondaryColorList:{background:this.ml.secondaryColorList.background||d.l.SecondaryBackground,foreground:this.ml.secondaryColorList.foreground||d.l.SecondaryForeground},accentColorList:{background:this.ml.accentColorList.background,foreground:this.ml.accentColorList.foreground||d.l.AccentForeground},useAccentColorForProgressBar:this.ml.useAccentColorForProgressBar,disableClickUrl:this.ml.disableClickUrl,fontFamilySettings:this.ml.fontFamilySettings}}jM(){const t=new ha({disableStoryProgressBarRendering:this.ml.disableStoryProgressBarRendering,disableTitleRendering:this.ml.disableTitleRendering});this.kC=new Oa(this,this.NA,this.Kf.services.GlobalDomUtilsService,this.Kf.services.ResizeObserver,t.template,this.fE,this.Kf.config.appId,this.ml.playbackMode===h.ProtoPlayerPlaybackModeEnum.ClickToPlay?q.StoppedState:q.PausedState),this.kC.setMediaContainerRatio(this.aA.getContentRatioContainer()),this.kC.show()}vp(){this.subscribe(sr.SlideTransitionStart,this.wC,({payload:{nextSlide:t}})=>{const i=t;let e=[];i.media.type===h.ProtoMediaTypeEnum.Video&&(e=i.media.getAvailableQualities(),this.kC.updateQuality(i.media.currentQuality)),this.kC.updateQualityMenu(e),this.kC.onSlideTransitionStart(i.slideCapabilityList),i.onSlideTransitionStart(i.slideCapabilityList)}),this.subscribe(sr.SlideTransitionEnd,this.wC,()=>{this.kC.onSlideTransitionEnd()}),this.subscribe(sr.SlideTimeUpdate,this.wC,({payload:{elapsedTime:t,duration:i}})=>{this.kC.onSlideTimeUpdate(t,i)}),this.subscribe(sr.SlideChanged,this.wC,({payload:{index:t}})=>{this.kC.setCurrentIndex(t),this.kC.setDuration(this.wC.remainingTime),this.mediator.publish(this,ir.ChangeSlide)}),this.subscribe(sr.SlideCycleEnd,this.wC,()=>{this.pE.handleSlidesEnd()}),this.subscribe(G.Change,this.wC,({payload:t})=>{const i=this.wC.getCurrentSlide();i&&i.media.type===h.ProtoMediaTypeEnum.Video&&this.kC.updateQuality(i.media.currentQuality),this.mediator.publish(this,G.Change,{payload:t})}),this.subscribe(j[j.Play],this.kC,()=>{this.mediator.publish(this,c.a.UserInteraction,{payload:{playback:!0}});this.play(!0)}),this.subscribe(j[j.Pause],this.kC,()=>{this.mediator.publish(this,c.a.UserInteraction,{payload:{playback:!1}});this.pause(!0)}),this.subscribe(j[j.Volume],this.kC,({payload:t})=>{this.volume=t,this.mediator.publish(this,c.a.UserInteraction,{payload:{volume:!0}}),this.mediator.publish(this,j[j.Volume],{payload:{volume:t}})}),this.subscribe(j[j.Close],this.kC,()=>{this.mediator.publish(this,c.a.UserInteraction,{payload:{playback:!1}}),this.mediator.publish(this,j[j.Close])}),this.subscribe(j[j.LogoClicked],this.kC,()=>{this.mediator.publish(this,j[j.LogoClicked])}),this.subscribe(tr.ProgressBarItemClicked,this.kC,({payload:t})=>{this.mediator.publish(this,c.a.UserInteraction,{payload:{playback:!0}}),this.setSlide(t),this.mediator.publish(this,tr.ProgressBarItemClicked,{payload:t})}),this.subscribe(tr.CallToAction,this.wC,()=>{this.mediator.publish(this,tr.CallToAction)}),this.subscribe(j[j.Expand],this.kC,()=>{this.mediator.publish(this,j[j.Expand])}),this.subscribe(j[j.Collapse],this.kC,()=>{this.mediator.publish(this,j[j.Collapse])}),this.subscribe(hi.HoldStart,this.kC,()=>{this.pE.pauseToggle()}),this.subscribe(hi.HoldEnd,this.kC,()=>{this.pE.pauseToggle()}),this.subscribe(hi.TapLeft,this.kC,()=>{this.bE(),this.goToPrevSlide()}),this.subscribe(hi.TapRight,this.kC,()=>{this.bE(),this.goToNextSlide()}),this.subscribe(hi.SwipeEnd,this.kC,({payload:t})=>{t===ga.Left?this.pE.goToNextSlide():this.pE.goToPrevSlide()}),this.subscribe(hi.SwipeMove,this.kC,({payload:t})=>{this.wC.offsetSlides(t)}),this.subscribe(j[j.Quality],this.kC,({payload:t})=>{this.wC.setQuality(t)}),this.subscribe(j[j.Next],this.kC,()=>{this.bE(),this.goToNextSlide()}),this.subscribe(j[j.Next],this.wC,()=>{this.bE(),this.goToNextSlide()}),this.subscribe(j[j.Prev],this.kC,()=>{this.bE(),this.goToPrevSlide()}),this.relay(tr.GeneralClickInteraction,this.kC,this,this.mediator)}vE(){if(Object(b.a)(this.ml.storyMetadata)){const t=this.ml.storyMetadata;this.gE(t)}else{let{storyId:t,activeVersion:i}=this.ml;const e=Object(Ls.b)("cnx_force_fallback",this.Kf.config.pageUrl);e&&(t=So,i=e);const s=`${Ds.a.endPoints.base.metadata}${t}/${i}.bin`;this.cE(s).then(t=>{this.gE(t)})}}gE(t){t.slides=t.slides.map(i=>Object.assign(Object.assign({},i),{storyTitle:t.storyTitle,publisherName:this.ml.publisherName})),this.wC.start(t.slides),this.kC.setTotalSlides(t.slides.length);const i=this.ml.storyPosition&&this.ml.storyPosition<t.slides.length?this.ml.storyPosition:rr;this.wC.setCurrentSlide(i),this.mediator.publish(this,er.ContentHandlerReady)}oE(){this.pE=new ja(this,this.wC,this.kC,this.ml.preRollBreak,this.ml.postRollBreak,this.ml.endOfSlideCycleMode,null!==this.ml.storyPosition),this.mE()}mE(){this.subscribe(_a.StateChanged,this.pE,({payload:t})=>{this.kC.changeState(t);const i=this.wC.getCurrentSlide();i&&i.changeState(t),this.mediator.publish(this,er.StateChanged,{payload:t})}),this.subscribe(_a.ContentReset,this.pE,()=>{this.mediator.publish(this,er.NewStory)}),this.relay([er.ContentStart,er.ContentEnd],this.pE,this,this.mediator)}bE(){this.mediator.publish(this,c.a.UserInteraction,{payload:{playback:!0}})}setViewabilityState(t){this.pE.setViewabilityState(t)}goToNextSlide(){this.pE.goToNextSlide()}goToPrevSlide(){this.pE.goToPrevSlide()}getNextSlide(){return this.wC.getNextSlide()}getCurrentThumbnailUrlParams(t,i){return this.wC.getCurrentThumbnailUrlParams(t,i)}getCurrentMetadata(){return this.wC.getCurrentMetadata()}start(){this.vE()}get volume(){return this.sE}set volume(t){this.sE=t,this.wC.setVolume(t),this.kC.updateVolume(t)}play(t){this.pE.play(t)}pause(t){this.pE.pause(t)}show(){this.pE.show()}hide(){this.pE.hide()}enterFullscreen(){this.kC.expand()}exitFullscreen(){this.kC.collapse()}setSlide(t){this.play(!1),this.pE.setCurrentSlide(t)}onResize(){this.wC.onPlayerContainerResize(),this.kC.onResizeUi(this.wC.remainingTime,this.wC.isPlaying)}get currentSlideIndex(){return this.wC.currentSlideIndex}get slides(){return this.wC.slides}updateCtaLabel(t,i){const e={type:jr.CtaButton,metadata:{label:i}};this.wC.updateCapabilityMetadata(t,e),t===this.wC.currentSlideIndex&&this.kC.updateCapabilityMetadata(e)}get slidesMetadata(){return this.wC.slidesMetadata}toggleExpandButton(t){t?this.kC.showExpandButton():this.kC.hideExpandButton()}getQuality(){return this.wC.getQuality()}setQuality(t){const i={height:t,quality:H.Strict};this.wC.setQuality(i)}stop(){this.pE&&this.pE.stop()}resume(){this.pE&&this.pE.resume()}destroy(){this.wC&&this.wC.destroy(),this.pE&&this.pE.destroy(),this.kC&&this.kC.destroy()}}const jo={lg:630,md:400,sm:320,xs:0},Ao={[h.ProtoDeviceType.Desktop]:Object.assign({},jo),[h.ProtoDeviceType.Tablet]:Object.assign({},jo),[h.ProtoDeviceType.Smartphone]:Object.assign({},jo)},To=288;var Co,Io;!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(Co||(Co={}));class Po{constructor(t,i){switch(this.mediator=t,this.inView=!1,this.yE=!1,this.xE=!1,this.wE=()=>{},i){case h.ProtoPlayerPlaybackModeEnum.Autoplay:this.kE(this.SE);break;case h.ProtoPlayerPlaybackModeEnum.ClickToPlay:this.kE(this.OE);break;case h.ProtoPlayerPlaybackModeEnum.ScrollToPlay:this.kE(this._E)}}kE(t){this.wE=()=>{this.yE||t.call(this)}}SE(){!this.xE&&this.inView&&(this.xE=!0,this.mediator.publish(this,Co[Co.Play]))}_E(){this.inView?this.mediator.publish(this,Co[Co.Play]):this.mediator.publish(this,Co[Co.Pause])}OE(){}setViewability(t){this.inView=t,this.wE()}setUserPlayback(t){!this.xE&&t&&(this.xE=t),this.yE=!t}}!function(t){t.enter="enterFullscreen",t.exit="exitFullscreen"}(Io||(Io={}));class Mo{constructor(t,i,e,s){if(this.mediator=t,this.nO=i,this.Xn=s,this.jE=!1,this.AE=1e3,this.TE=!0,this.Tc=!1,this.CE=()=>{this.jE&&this.IE()},this.PE=t=>{this.jE?null!==this.fullscreenElement?this.IE():this.ME():this.mediator.publish(this,Io.exit)},this.ME=()=>{this.Tc=!1,this.EE.reject(),this.jE=!1,clearTimeout(this.LE)},this.uI=s&&s===qn.b.Ios?e.getElementsByTagName("video")[0]:e,!this.uI)throw new Error("element is missing");try{this.RE(),this.TI()}catch(t){this.TE=!1,Object(n.a)({message:"fullscreen_keys",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.WARNING})}}RE(){let t;t=this.Xn===qn.b.Ios?this.nO.getFullscreenKeys(this.uI):this.nO.getFullscreenKeys(),this.DE=t.keys,this.BE=t.name}get fullscreenElement(){return this.nO.getDocumentProperty(this.DE.fullscreenElement)}get fullscreenEnabled(){return this.nO.getDocumentProperty(this.DE.fullscreenEnabled)}enterFullScreen(){if(this.TE){this.EE=new Wa.a,this.jE=!0,clearTimeout(this.LE),this.LE=setTimeout(this.ME,this.AE);try{this.uI[this.DE.requestFullscreen]()}catch(t){this.ME()}return this.EE.promise}}exitFullScreen(){try{this.nO.exitFullscreen(this.DE.exitFullscreen,this.Xn===qn.b.Ios?this.uI:void 0)}catch(t){Object(n.a)({message:"fullscreen_exit",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.WARNING})}this.Tc=!1}TI(){this.BE===T.d.Moz||this.BE===T.d.Ms?(this.nO.addEventListenerOnGlobal(this.DE.fullscreenchange,this.PE),this.nO.addEventListenerOnGlobal(this.DE.fullscreenerror,this.ME)):(this.uI.addEventListener(this.DE.fullscreenchange,this.PE),this.uI.addEventListener(this.DE.fullscreenerror,this.ME)),this.Xn===qn.b.Ios&&(this.uI.addEventListener("webkitbeginfullscreen",this.CE),this.uI.addEventListener("webkitendfullscreen",this.PE))}$E(){this.BE===T.d.Moz||this.BE===T.d.Ms?(this.nO.removeEventListenerOnGlobal(this.DE.fullscreenchange,this.PE),this.nO.removeEventListenerOnGlobal(this.DE.fullscreenerror,this.ME)):(this.uI.removeEventListener(this.DE.fullscreenchange,this.PE),this.uI.removeEventListener(this.DE.fullscreenerror,this.ME)),this.Xn===qn.b.Ios&&(this.uI.removeEventListener("webkitbeginfullscreen",this.CE),this.uI.removeEventListener("webkitendfullscreen",this.PE))}IE(){this.Tc=!0,this.mediator.publish(this,Io.enter),this.EE.resolve(),this.jE=!1,clearTimeout(this.LE)}get isFullscreen(){return this.Tc}destroy(){this.isFullscreen&&this.exitFullScreen(),this.$E(),this.EE&&this.EE.isPending&&this.EE.reject()}}const Eo={xl:720,lg:320,md:204,sm:142,xs:0},Lo={[h.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:142,xs:0},[h.ProtoDeviceType.Tablet]:Object.assign({},Eo),[h.ProtoDeviceType.Smartphone]:Object.assign({},Eo)},Ro={xl:720,lg:320,md:204,sm:142,xs:0},Do=(Object.assign({},Ro),Object.assign({},Ro),176),Bo=160,$o=144,Fo=112,Vo={xl:Ro.xl+Do,lg:Ro.lg+Bo,md:Ro.md+$o,sm:Ro.sm+Fo},Uo=(Object.assign({},Vo),Object.assign({},Vo),{lg:320,md:204,sm:0}),No=(Object.assign({},Uo),Object.assign({},Uo),{xxl:1080,xl:0}),Ho=(Object.assign({},No),Object.assign({},No),Object.assign(Object.assign({},P.b),nr));var qo;!function(t){t[t.PlayerOrientationChange=0]="PlayerOrientationChange",t[t.MainOrientationChange=1]="MainOrientationChange"}(qo||(qo={}));class zo{constructor(t,i,e,s){this.mediator=t,this.Hn=i,this.FE=e,this.tr=s,this.VE={current:null,previous:null},this.UE={current:null,previous:null},this.NE=!1}setFloatingModule(t){this.HE=t}start(t){this.qE=t,this.zE(this.Hn.orientation),this.WE(this.Hn.orientation)}forceOrientation(t){this.NE=!1,this.setMainOrientation(t),this.setPlayerClassByOrientation(t),this.NE=!0}setPlayerClassByOrientation(t=this.Hn.orientation){this.zE(t),this.VE.previous&&this.VE.current===this.VE.previous||(this.GE(this.FE),this.VE.previous=this.VE.current,this.mediator.publish(this,qo[qo.PlayerOrientationChange],{payload:this.VE.current}))}setMainOrientation(t=this.Hn.orientation){this.WE(t),this.UE.previous&&this.UE.previous===this.UE.current||(this.UE.previous=this.UE.current,this.mediator.publish(this,qo[qo.MainOrientationChange],{payload:this.UE.current}))}get playerOrientation(){return this.VE.current}get mainOrientation(){return this.UE.current}shouldChangeMainOrientation(){return!this.Ja()}zE(t){this.VE.current=this.QE(t)}WE(t){this.UE.current=this.JE(t)}QE(t){if(this.Ja())return ch.ProtoPlayerOrientationEnum.Landscape;if(this.NE)return this.UE.current;switch(t){case ch.ProtoPlayerOrientationEnum.Mixed:return this.XE();default:return t}}JE(t){if(this.NE)return this.UE.current;switch(t){case ch.ProtoPlayerOrientationEnum.Mixed:return this.XE();default:return t}}Ja(){return this.HE&&this.HE.isInFloating}XE(){return this.tr.getViewportWidth()<this.Hn.orientationBreakpoint?ch.ProtoPlayerOrientationEnum.Portrait:ch.ProtoPlayerOrientationEnum.Landscape}GE(t){this.VE.previous?Object(A.M)(this.qE,t(this.VE.previous),t(this.VE.current)):Object(A.a)(this.qE,t(this.VE.current))}}class Wo{constructor(t){this.nO=t,this.YE=[]}createRatioContainer(t){const i=this.KE();return this.YE.push(i),this.setRatio(t),i}setRatio(t){this.ZE=t,this.tL()}KE(){return this.nO.createElementByString(`<cnx class='${d.c}'></cnx>`)}tL(){this.YE.forEach(t=>{Object(A.O)(t,{"padding-bottom":`${this.ZE}%`})})}}class Go{constructor(t,i){this.iL={width:1,height:1},this.eL=t,this.sL=i}start(t){this.nL(t)}getComputedPlayspaceRatio(t){return this.rL(t)/this.hL(t)*100}getComputedContentRatio(t){return this.aL(t)/this.oL(t)*100}nL(t){this.cL=t}hL(t){if(t===ch.ProtoPlayerOrientationEnum.Landscape){if(!this.cL.clientWidth)return this.eL.width;const t=this.lL();return this.cL.clientWidth/t}return this.sL.width}rL(t){if(t===ch.ProtoPlayerOrientationEnum.Landscape){if(!this.cL.clientWidth)return this.eL.height;return this.uL()/this.lL()}return this.sL.height}uL(){return this.eL.height/this.eL.width*this.cL.clientWidth+lr}lL(){const t=this.uL();return function(t,i){let e=t,s=i;for(;0!==e&&0!==s;)e>s?e%=s:s%=e;return 0===e?s:e}(this.cL.clientWidth,t)}oL(t){return t===ch.ProtoPlayerOrientationEnum.Landscape?this.eL.width:this.iL.width}aL(t){return t===ch.ProtoPlayerOrientationEnum.Landscape?this.eL.height:this.iL.height}}class Qo extends o.a{constructor(t,i,e,s,n){super(),this.mediator=t,this.Hn=i,this.nO=n,this.dL(),this.fL=new Go(e,s),this.pL=new Wo(n),this.bL=new Wo(n)}setFloatingModule(t){this.vL.setFloatingModule(t),this.setRatio()}start(t,i){this.vL.start(t),this.fL.start(i)}getPlayspaceRatioContainer(){return this.pL.createRatioContainer(this.gL())}getContentRatioContainer(){return this.bL.createRatioContainer(this.mL())}setRatio(t=!1){this.vL.setPlayerClassByOrientation(),(t||this.vL.shouldChangeMainOrientation())&&(this.vL.setMainOrientation(),this.pL.setRatio(this.gL())),this.bL.setRatio(this.mL())}getOrientation(){return this.vL.playerOrientation}setOrientation(t){this.vL.forceOrientation(t),this.pL.setRatio(this.gL()),this.bL.setRatio(this.mL())}dL(){this.vL=new zo(this,this.Hn,this.FE,this.nO),this.subscribe(qo[qo.PlayerOrientationChange],this.vL,({payload:t})=>{this.mediator.publish(this,qo[qo.PlayerOrientationChange],{payload:t})}),this.subscribe(qo[qo.MainOrientationChange],this.vL,({payload:t})=>{this.mediator.publish(this,qo[qo.MainOrientationChange],{payload:t})})}gL(){const t=this.vL.mainOrientation;return this.fL.getComputedPlayspaceRatio(t)}mL(){const t=this.vL.playerOrientation;return this.fL.getComputedContentRatio(t)}FE(t){return t===ch.ProtoPlayerOrientationEnum.Portrait?Xn.OrientationPortrait:Xn.OrientationLandscape}}const Jo={PlaybackModeEnum:{AutoPlay:h.ProtoPlayerPlaybackModeEnum.Autoplay,ScrollToPlay:h.ProtoPlayerPlaybackModeEnum.ScrollToPlay,ClickToPlay:h.ProtoPlayerPlaybackModeEnum.ClickToPlay},DefaultSoundModeEnum:{On:h.ProtoPlayerSoundMode.On,Off:h.ProtoPlayerSoundMode.Mute,OnHover:h.ProtoPlayerSoundMode.Hover},InsertPositionEnum:{WithinContainer:h.ProtoPlayerInsertMode.WithinContainer,BeforeContainer:h.ProtoPlayerInsertMode.BeforeContainer,AfterContainer:h.ProtoPlayerInsertMode.AfterContainer,ReplaceContainer:h.ProtoPlayerInsertMode.ReplaceContainer,HideContainer:h.ProtoPlayerInsertMode.HideContainer},CloseButtonModeEnum:{Off:h.ProtoPlayerCloseButtonMode.Off,On:h.ProtoPlayerCloseButtonMode.OnHover,OnAfterFirstAd:h.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,OnHover:h.ProtoPlayerCloseButtonMode.OnHover,OnHoverAfterFirstAd:h.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,AlwaysOn:h.ProtoPlayerCloseButtonMode.AlwaysOn},QualityEnum:Q,LineItemExcludedSlotsEnum:{PreRoll:h.ProtoAdSlotsEnum.PreRoll,MidRoll:h.ProtoAdSlotsEnum.MidRoll,PostRoll:h.ProtoAdSlotsEnum.PostRoll},ErrorTypesEnum:{SetupError:P.a.SetupError,NoPlayer:P.a.NoPlayer},FloatingModeEnum:{Off:h.ProtoPlayerFloatingMode.Off,OnPageLoad:h.ProtoPlayerFloatingMode.OnPageLoad,AfterInView:h.ProtoPlayerFloatingMode.AfterInView,Always:h.ProtoPlayerFloatingMode.Always},FloatingDevicesEnum:{Desktop:h.ProtoDeviceType.Desktop,Smartphone:h.ProtoDeviceType.Smartphone,Tablet:h.ProtoDeviceType.Tablet,Other:h.ProtoDeviceType.GameConsole},FloatingFixedPositionModeEnum:{Page:h.ProtoFloatingFixedPositionMode.Page,Element:h.ProtoFloatingFixedPositionMode.Element},FloatingScrollPositionEnum:{BottomRight:h.ProtoPositionMode.BottomRight,BottomLeft:h.ProtoPositionMode.BottomLeft,TopRight:h.ProtoPositionMode.TopRight,TopLeft:h.ProtoPositionMode.TopLeft},ImplementationTypeEnum:{Amp:h.ProtoImplementationType.Amp,Web:h.ProtoImplementationType.Web}},Xo=Object.assign(Object.assign({},Jo),{EndOfSlideCycleEnum:{Loop:ch.ProtoEndOfSlideCycleMode.Loop,Stop:ch.ProtoEndOfSlideCycleMode.Stop},LayoutEnum:{Portrait:$.Portrait,Landscape:$.Landscape},OrientationEnum:{Mixed:ch.ProtoPlayerOrientationEnum.Mixed,Portrait:ch.ProtoPlayerOrientationEnum.Portrait,Landscape:ch.ProtoPlayerOrientationEnum.Landscape}});class Yo extends o.a{constructor(t,i,e,s){super(),this.mediator=t,this.controlData=e,this.app=s,this.yL=0,this.xL=0,this.wL=null,this.currentPlayerAdSlot=Ut.ProtoAdSlotsEnum.PreRoll,this.kL={stopped:!1,viewability:!1,inImpression:!1,forceDisable:!1,zeroDimension:!1,isAppBackgrounded:!1},this.firstAdBreakStarted=!1,this.SL=!1,this.viewabilityStateChanged(i),this.onResize(this.controlData.playerDimensions.width,this.controlData.playerDimensions.height),this.controlData.totalAdBreakLength&&(this.OL=new Vs(this,this.controlData.totalAdBreakLength),this.subscribe(Fs.TimeElapsed,this.OL,()=>{this.mediator.publish(this,D.TotalAdBreakLengthExpired)}))}_L(){return this.xL>=this.controlData.numberOfMidRolls&&-1!==this.controlData.numberOfMidRolls}jL(t){if(t)return t.stop(),this.unsubscribeAll(t),null}AL(){if(this.SL){this.SL=!1;const t={[h.ProtoAdSlotsEnum.PreRoll]:h.ProtoAdBreakTypeEnum.PreRoll,[h.ProtoAdSlotsEnum.MidRoll]:h.ProtoAdBreakTypeEnum.MidRoll,[h.ProtoAdSlotsEnum.PostRoll]:h.ProtoAdBreakTypeEnum.PostRoll};this.mediator.publish(this,D.AdOpportunity,{payload:{adBreakType:t[this.currentPlayerAdSlot]}})}this.mediator.publish(this,D.EnableAds),this.OL&&this.OL.start()}canEnableAds(){return!(this.kL.stopped||this.kL.viewability||this.kL.inImpression||this.kL.forceDisable||this.kL.zeroDimension||this.kL.isAppBackgrounded)&&((this.currentPlayerAdSlot!==Ut.ProtoAdSlotsEnum.MidRoll||!this._L())&&!(this.currentPlayerAdSlot!==Ut.ProtoAdSlotsEnum.MidRoll&&this.yL>0))}toggleEnableAds(){this.canEnableAds()?this.AL():(this.mediator.publish(this,D.DisableAds),this.OL&&!this.kL.inImpression&&this.OL.stop())}startAds(){this.kL.stopped=!1,this.toggleEnableAds()}forceRecheck(){this.toggleEnableAds()}onAdImpression(t){this.currentPlayerAdSlot===Ut.ProtoAdSlotsEnum.MidRoll&&(this.firstAdBreakStarted||(this.firstAdBreakStarted=!0)),this.kL.inImpression=!0,this.toggleEnableAds(),this.TL(),this.CL(),this.IL(t.payload.adSkipMode,t.payload.adDuration)&&(this.wL=setTimeout(()=>{this.mediator.publish(this,D.ForceStopAdSlot)},ze.d*je.f))}CL(){this.controlData.maxAdPodDuration&&!this.PL&&(this.PL=new Vs(this,this.controlData.maxAdPodDuration),this.PL.start(),this.subscribe(Fs.TimeElapsed,this.PL,()=>{this.mediator.publish(this,D.ForceStopAdPod)}),this.subscribe(Fs.TimeUpdate,this.PL,()=>{const t=this.PL.timeRemaining;this.mediator.publish(this,D.AdPodRemainingTime,{payload:{remainingTime:t}})}))}TL(){this.controlData.maxAdSlotDuration&&!this.ML&&(this.ML=new Vs(this,this.controlData.maxAdSlotDuration),this.ML.start(),this.subscribe(Fs.TimeElapsed,this.ML,()=>{this.mediator.publish(this,D.ForceStopAdSlot)}))}IL(t,i){switch(this.controlData.playerAdsSkippability){case h.ProtoPlayerAdSkippability.IfLongerThan31Sec:if((t===h.ProtoAdSkipMode.Never||t===h.ProtoAdSkipMode.IfLongerThan31Sec)&&!i)return!0;if(t===h.ProtoAdSkipMode.Never&&i>ze.d)return!0;break;case h.ProtoPlayerAdSkippability.NoRestrictions:if(t===h.ProtoAdSkipMode.IfLongerThan31Sec&&!i)return!0}return!1}onAdFinished(t,i=!1){this.ML=this.jL(this.ML),i||(this.PL=this.jL(this.PL),this.currentPlayerAdSlot===Ut.ProtoAdSlotsEnum.MidRoll?this.xL++:this.yL++),this._L()&&!i&&this.mediator.publish(this,D.MidRollCapped),t&&(this.SL=!0),this.kL.inImpression=!1,i?this.AL():this.toggleEnableAds(),clearTimeout(this.wL)}onAdPause(){this.PL&&this.PL.stop(),this.ML&&this.ML.stop(),this.OL&&this.OL.stop()}onAdPlay(){this.PL&&this.PL.start(),this.ML&&this.ML.start(),this.OL&&this.OL.start()}onStop(){this.currentPlayerAdSlot=null,this.kL.stopped=!0,this.toggleEnableAds()}onAdStateChange(t,i){this.controlData.maxAdSlotDuration=i.maxAdSlotDuration,this.controlData.maxAdPodDuration=i.maxAdPodDuration,t===this.currentPlayerAdSlot&&t===Ut.ProtoAdSlotsEnum.MidRoll||(null===t&&this.EL===Ut.ProtoAdSlotsEnum.MidRoll||(this.SL=!0),t!==Ut.ProtoAdSlotsEnum.MidRoll&&(this.yL=0,this.firstAdBreakStarted=!1),this.currentPlayerAdSlot=t,this.EL=t,this.startAds())}contentChanged(){this.xL=0,this.firstAdBreakStarted=!1,this.toggleEnableAds()}viewabilityStateChanged(t,i=!1,e=!1){this.Ac=t,this.controlData.viewabilityPolicy===Ut.ProtoAdViewabilityPolicy.Strict&&(this.kL.viewability=!t),e||this.toggleEnableAds()}setAppBackgrounded(t){this.kL.isAppBackgrounded=t,this.toggleEnableAds()}disableAdvertising(){this.kL.forceDisable=!0,this.toggleEnableAds()}enableAdvertising(){this.kL.forceDisable=!1,this.toggleEnableAds()}destroy(){this.OL&&this.OL.disable(),clearTimeout(this.wL),this.ML=this.jL(this.ML),this.PL=this.jL(this.PL)}get inView(){return this.Ac}onResize(t,i){this.kL.zeroDimension=0===t||0===i,this.toggleEnableAds()}}class Ko extends Yo{constructor(t,i,e,s){super(t,i,e,s),this.mediator=t,this.controlData=e,this.LL=0,this.RL=0,this.onStop(),this.kL.slides=!1,this.DL()}BL(){this.controlData.minSlidesBeforeFirstAd&&this.RL<=this.controlData.minSlidesBeforeFirstAd&&(this.kL.slides=!0)}$L(){this.controlData.slidesBetweenAds&&this.LL<=this.controlData.slidesBetweenAds&&(this.kL.slides=!0)}DL(){this.kL.slides=!1,this.firstAdBreakStarted?this.$L():this.BL(),this.toggleEnableAds()}canEnableAds(){return(this.currentPlayerAdSlot!==h.ProtoAdSlotsEnum.MidRoll||!this.kL.slides||!this.Ac)&&super.canEnableAds()}contentPlaybackStateChanged(t){}slideChanged(){this.LL++,this.RL++,this.DL()}onAdImpression(t){this.LL=0,super.onAdImpression(t)}onAdFinished(t,i=!1){i||this.DL(),super.onAdFinished(t,i)}contentChanged(){this.DL(),super.contentChanged()}}const Zo=300,tc=250;class ic extends ot{constructor(){super(...arguments),this.ql=Ao,this.zl=d.p,this.Rl=To,this.eL={width:16,height:9},this.sL={width:4,height:5},this.events=Object.assign({},Ho),this.FL=()=>{this.VL(),this.UL(),this.NL()},this.HL=()=>{this.qL.enterFullScreen().then(()=>{this.zL()}).catch(t=>{Object(n.a)({message:"PlayspaceExperience_enterFullscreen",level:h.ProtoLoggingLevelEnum.WARNING})})},this.Cl=()=>{this._l.exitFullscreen(),this.floatingModule&&this.floatingModule.fullscreenStateChange(!1),this.mediator.publish(this,Ho.FullscreenChanged,{payload:!1}),super.Cl()},this.Tl=()=>{this.mediator.publish(this,Ho.FullscreenChanged,{payload:!0}),super.Tl()}}Qc(){const t={orientation:this.ml.orientation,orientationBreakpoint:this.ml.orientationBreakpoint};this.WL=new Qo(this,t,this.eL,this.sL,this.app.services.GlobalDomUtilsService),this.subscribe(qo[qo.PlayerOrientationChange],this.WL,({payload:t})=>{this.mediator.publish(this,Ho.LayoutChanged,{payload:Xo.LayoutEnum[ch.ProtoPlayerOrientationEnum[t]]})}),this.subscribe(qo[qo.MainOrientationChange],this.WL,({payload:t})=>{switch(t){case ch.ProtoPlayerOrientationEnum.Landscape:Object(A.K)(this.$experienceContainer,"maxWidth");break;case ch.ProtoPlayerOrientationEnum.Portrait:Object(A.O)(this.$experienceContainer,{maxWidth:`${Ao[this.app.config.device].lg-1}px`})}})}GL(t){this.WL.setFloatingModule(t)}generateHTML(){this.$playerWrapper=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${d.b.PlayerWrapper}"></cnx>`),this.$playerContainer=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${Yn.Container}"></cnx>`),this.WL.start(this.$playerContainer,this.$playerWrapper),this.addPlayerSize(),this.$experienceContainer.appendChild(this.$playerWrapper),this.$playerWrapper.appendChild(this.$playerContainer),this.WL.setRatio(),this.QL()}QL(){this.JL=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${Yn.ImageWrapper} ${Yn.ImageBackground}"></cnx>`),this.$playerWrapper.appendChild(this.JL)}XL(){return this._l.getCurrentThumbnailUrlParams(this.$experienceContainer.clientWidth,this.$experienceContainer.clientHeight)}YL(){const t=this.XL();if(!t)return;const{imageUrl:i,altText:e,width:s,height:n,queryParams:r}=t,h=this.Gc.getImage(i,e,s,n,r,!0);h.className=d.b.ImagePlaceholder,this.KL&&this.JL.removeChild(this.KL),this.JL.appendChild(h),this.KL=h,this.adHandler&&this.adHandler.setAdLoadingBackgroundUrl(h.src)}ZL(){this.floatingModule&&this.floatingModule.canFloat()&&this.YL()}tR(t=!1){this.JL&&(t?Object(A.a)(this.JL,Yn.MediaLogo):Object(A.I)(this.JL,Yn.MediaLogo))}addPlayerSize(){const t=this.WL.getPlayspaceRatioContainer();this.$playerWrapper.appendChild(t),Object(A.a)(this.$playerWrapper,d.i.Responsive)}resizeAdHandler(){if(this.adHandler){const t=this.qL&&this.qL.isFullscreen?w.a.Fullscreen:w.a.Normal;this.adHandler.setVastViewMode(t)}}handleClose(){this.mediator.publish(this,Ho.CloseButtonClicked),this.Ja()?(this.floatingModule.destroy(),this.pause()):this.qL&&this.qL.isFullscreen?this.qL.exitFullScreen():this.triggerDestroy()}getVolume(){return this._l.volume}setNewVolume(t){super.setNewVolume(t),this._l.volume=t,this.Zr(t)}destroy(){super.destroy(),this._l&&this._l.destroy(),this.qL&&this.qL.destroy()}iR(){this._l=new _o(this,this.app.services.GlobalDomUtilsService,this.app.services.ResizeObserver,this.ml,this.app,this.$playerContainer,this.WL),this.subscribe(er.ContentHandlerReady,this._l,this.FL),this.ml.isCloseButton&&this.subscribe(j[j.Close],this._l,()=>this.handleClose()),this.subscribe(j[j.Volume],this._l,({payload:{volume:t}})=>{this.Zr(t),this.adHandler&&this.adHandler.setVolume(t)}),this.subscribe(er.StateChanged,this._l,({payload:t})=>{this.eR(t),t===q.PlayingState&&this.app.services.TrackingService.setContentStart(),this.sR(t)}),this.subscribe(ir.ChangeSlide,this._l,()=>{this.Pc.slideChanged();const t=this.nR();if(this.floatingModule&&this.floatingModule.canFloat()){this.YL();const i=t&&t.mediaContext===ch.ProtoMediaContextEnum.Logo;this.tR(i)}this.app.services.TrackingService.updateMediaMetadata(this.rR()),this.mediator.publish(this,Ho.ChangeSlide,{payload:t})}),this.subscribe(er.NewStory,this._l,()=>{this.fl(),this.VL()}),this.subscribe(er.ContentStart,this._l,()=>{this.app.services.TrackingService.setMediaStart(),this.mediator.publish(this,Ho.ContentStart,{payload:this.getStoryMetadata()})}),this.subscribe(er.ContentEnd,this._l,()=>{this.app.services.TrackingService.trackMediaQuartile(h.ProtoQuartilesEnum.Fourth),this.mediator.publish(this,Ho.ContentComplete,{payload:this.getStoryMetadata()})}),this.floatingModule&&this.subscribe(c.a.UserInteraction,this._l,this.Nc),this.subscribe(tr.ProgressBarItemClicked,this._l,({payload:t})=>{this.mediator.publish(this,Ho.ProgressBarItemClicked,{payload:this.hR(t)})}),this.subscribe(j[j.Volume],this.adHandler,({payload:{volume:t}})=>{this.Zr(t),this._l.volume=t}),this.subscribe(tr.CallToAction,this._l,()=>{this.mediator.publish(this,Ho.CallToAction,{payload:this.nR()})}),this.subscribe(j[j.LogoClicked],this._l,()=>{this.mediator.publish(this,Ho.BrandingClicked)}),this.subscribe(G.Change,this._l,({payload:t})=>{this.dM!==t&&(this.dM=t,this.mediator.publish(this,Ho.QualityChanged,{payload:t}))}),this.subscribe(tr.GeneralClickInteraction,this._l,({payload:t})=>{this.app.services.TrackingService.trackMediaClick(t)}),this._l.start()}eR(t){switch(t){case q.PlayingState:this.al(ch.ProtoAdSlotsEnum.MidRoll);break;case q.PrerollState:this.al(ch.ProtoAdSlotsEnum.PreRoll);break;case q.PostrollState:this.al(ch.ProtoAdSlotsEnum.PostRoll);break;case q.PausedState:case q.StoppedState:this.Pc.onStop()}}sR(t){switch(t){case q.PlayingState:this.mediator.publish(this,Ho.Play,{payload:this.nR()});break;case q.PausedState:this.mediator.publish(this,Ho.Pause,{payload:this.nR()});break;case q.StoppedState:this.mediator.publish(this,Ho.ContentComplete,{payload:this.getStoryMetadata()})}}UL(){this.aR=new Po(this,this.ml.playbackMode),this.subscribe(Co[Co.Play],this.aR,()=>{this._l.play(!1)}),this.subscribe(Co[Co.Pause],this.aR,()=>{this._l.pause(!1)}),this.subscribe(c.a.UserInteraction,this._l,({payload:{playback:t}})=>{Object(b.a)(t)&&this.aR.setUserPlayback(t)}),this.aR.setViewability(this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.gc}))}NL(){this.adHandler&&(this.adHandler.start(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight,this.ml.soundMode===ch.ProtoPlayerSoundMode.On?1:0),this.Pc.forceRecheck(),this.ml.adPlaybackMode===ch.ProtoAdPlaybackMode.Autoplay&&this.ml.playbackMode!==ch.ProtoPlayerPlaybackModeEnum.ClickToPlay&&0===this.ml.preRollBreak&&this.al(ch.ProtoAdSlotsEnum.MidRoll))}Mc(){this.adHandler.setNextSlide(this.getNextSlide()),super.Mc(),this._l.hide()}gl(){this.dl.isInAdPod()?this.wl(()=>{this.Pc.onAdFinished(this.adHandler.inImpression,this.dl.isInAdPod()),super.gl(),this._l.show()}):(super.gl(),this._l.show())}bl(){return new ia(this,this.ml,this.$playerContainer,this.checkFloatingViewability(this.isViewable()),this.dl,this.app,this.WL)}Sl(){return new Ko(this,this.isViewable(),{minSlidesBeforeFirstAd:this.ml.minSlidesBeforeFirstAd,slidesBetweenAds:this.ml.slidesBetweenAds,numberOfMidRolls:this.ml.midRollNumber,viewabilityPolicy:this.ml.adViewabilityPolicy,maxAdSlotDuration:this.dl.getMaxAdSlotDuration(),maxAdPodDuration:this.dl.getMaxAdPodDuration(),playerDimensions:{width:this.$playerContainer.offsetWidth,height:this.$playerContainer.offsetHeight},playerAdsSkippability:this.ml.adSkippability},this.app)}ah(){super.ah(),this._l&&this._l.onResize(),this.WL.setRatio(),this.ZL(),this.oR.updateWidth(this.$playerContainer.clientWidth)}Ja(){return this.floatingModule&&this.floatingModule.isInFloating}Ho(t,i=!1){super.Ho(t,i),this.aR&&this.aR.setViewability(t),this._l&&this._l.setViewabilityState(t)}cR(){const t=this.app.services.GlobalDomUtilsService.getGlobalClosestTop().topFrame.document.body;this.app.services.ResizeObserver.on(t,()=>{this.WL.setRatio(!0)})}Bc(){return{isAutoPlay:this.ml.playbackMode===ch.ProtoPlayerPlaybackModeEnum.Autoplay,isSkippable:!0,skipOffset:0}}start(){try{super.start(),this.GL(this.floatingModule),this.iR(),this.Fl(this._l),this.lR(),this.cR(),this.oR=new R(this.$playerContainer,this.app.config.device,Lo,d.t),this.uR(this.$playerContainer)}catch(t){Object(n.a)({message:"PlayspaceExperience_start",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}setSlide(t){this._l.setSlide(t)}getNextSlide(){return this._l.getNextSlide()}play(){super.play();this._l.play(!1)}pause(){super.pause();this._l.pause(!1)}getStoryId(){return this.ml.storyId}getStoryPosition(){return this._l.currentSlideIndex}getStoryTimeline(){return this._l.slides.map(t=>t.media.duration/je.f)}updateCtaLabel(t,i){Object(b.d)(t)&&Object(b.h)(i)&&this._l.updateCtaLabel(t,i)}getStoryMetadata(){return this._l.slidesMetadata.map(({title:t,clickUrl:i,slideDuration:e})=>({title:t,clickUrl:i,duration:e}))}toggleFullscreenButton(t){this._l.toggleExpandButton(t)}toggleFullscreen(t){Object(b.a)(t)||(t=!this.qL.isFullscreen),this.qL.isFullscreen!==t&&(t?this.HL():this.qL.exitFullScreen())}getQuality(){return this._l.getQuality()}setQuality(t){this._l.setQuality(t)}getOrientation(){return this.WL.getOrientation()}setOrientation(t){this.WL.setOrientation(t)}lR(){this.app.config.os.os!==qn.b.Ios&&(this.qL=new Mo(this,this.app.services.GlobalDomUtilsService,this.$playerContainer,this.app.config.os.os),this.dR())}dR(){this.subscribe(j[j.Expand],this._l,this.HL),this.subscribe(j[j.Collapse],this._l,()=>this.qL.exitFullScreen()),this.subscribe(Io.exit,this.qL,this.Cl),this.subscribe(Io.enter,this.qL,this.Tl)}zL(){this._l.enterFullscreen(),this.floatingModule&&this.floatingModule.fullscreenStateChange(!0)}nR(){return this._l.getCurrentMetadata()}hR(t){if(!(t<0||this._l.slidesMetadata.length<t))return this._l.slidesMetadata[t]}VL(){this.app.services.TrackingService.setNewMedia(this.rR())}rR(){const t=this._l.getCurrentMetadata(),i=t.title||t.coverMetadata&&t.coverMetadata.title;return{mediaId:this.ml.storyId,clickUrl:t.clickUrl,slideTitle:i,slideNumber:this._l.currentSlideIndex+1,slideMediaType:t.mediaType}}uR(t){if(!Object(b.h)(this.ml.sdkVersion)&&Object(b.h)(this.app.config.bundleID)){const i=this.app.services.GlobalDomUtilsService.querySelector("body");Object(A.O)(i,{margin:"0"}),t.clientWidth>=Zo&&(Object(A.O)(t,{"min-height":`${tc}px`}),Object(A.j)(t)),Object(ht.l)([95,5])&&Object(n.a)({message:"PlayspaceExperience_start",exception:"IN_APP_RENDER_PLAYER_SIZE",callStack:`width: ${this.$playerContainer.clientWidth}: height: ${this.$playerContainer.clientHeight} `,level:h.ProtoLoggingLevelEnum.INFO})}}Nl(){}}class ec{constructor(){this.fR={}}on(t,i){if(this.fR[t]=this.fR[t]||[],!Object(b.b)(i))throw new Error(`${t} event callback is not a function`);return this.fR[t].push(i),()=>this.fR[t]=this.fR[t].filter(t=>t!==i)}once(t,i){const e=this.on(t,t=>{try{i(t)}catch(t){}e()})}remove(t,i){this.fR[t]&&(this.fR[t]=this.fR[t].filter(t=>t!==i))}removeAll(){this.fR={}}trigger(t,i){this.fR[t]&&this.fR[t].forEach(t=>{try{t(i)}catch(t){}})}}class sc{constructor(t){this.experience=t,this.pR=(t,i)=>this.Aa.on(t,i),this.bR=(t,i)=>{this.Aa.remove(t,i)},this.vR=()=>{this.Aa.removeAll()},this.gR=(t,i)=>{this.Aa.once(t,i)},this.mR=()=>this.experience.isViewable(),this.yR=t=>{this.experience.setViewableThreshold(t)},this.xR=()=>{this.experience.play()},this.wR=()=>{this.experience.pause()},this.kR=()=>this.experience.getVolume(),this.SR=t=>{this.experience.setVolume(t)},this.$o=()=>{this.experience.triggerDestroy()},this.OR=()=>{this.experience.disableAdvertising()},this._R=()=>{this.experience.enableAdvertising()},this.jR=t=>{this.experience.setCustomMacros(t)},this.AR=t=>{this.experience.setAmpUserConsent(t)},this.Aa=new ec}trigger(t,i){this.Aa.trigger(t,i)}setDestroyed(){this.trigger(P.b.Removed)}getApiMethods(){return{on:this.pR,remove:this.bR,removeAll:this.vR,once:this.gR,isViewable:this.mR,setViewableThreshold:this.yR,play:this.xR,pause:this.wR,getVolume:this.kR,setVolume:this.SR,disableAdvertising:this.OR,enableAdvertising:this._R,setMacros:this.jR,setAmpUserConsent:this.AR,destroy:this.$o}}}class nc extends sc{constructor(){super(...arguments),this.TR=()=>this.experience.getStoryPosition(),this.CR=()=>this.experience.getStoryId(),this.IR=()=>this.experience.getStoryTimeline(),this.PR=t=>{this.experience.setSlide(t)},this.MR=(t,i)=>{this.experience.updateCtaLabel(t,i)},this.ER=()=>this.experience.getStoryMetadata(),this.LR=t=>{this.experience.toggleFullscreenButton(t)},this.RR=t=>{this.experience.toggleFullscreen(t)},this.DR=()=>this.experience.getQuality(),this.BR=t=>{this.experience.setQuality(t)},this.$R=()=>{const t=this.experience.getOrientation();return Xo.LayoutEnum[ch.ProtoPlayerOrientationEnum[t]]},this.FR=t=>{const i=Object.keys(Xo.LayoutEnum).find(i=>Xo.LayoutEnum[i]===t);i&&ch.ProtoPlayerOrientationEnum[i]&&this.experience.setOrientation(ch.ProtoPlayerOrientationEnum[i])},this.Np=()=>this.experience.getSize()}getApiMethods(){return Object.assign(Object.assign({},super.getApiMethods()),{getStoryPosition:this.TR,setStoryPosition:this.PR,getStoryId:this.CR,getStoryTimeline:this.IR,setCtaLabel:this.MR,getStoryMetadata:this.ER,toggleFullscreen:this.RR,toggleFullscreenButton:this.LR,getQuality:this.DR,setQuality:this.BR,getLayout:this.$R,setLayout:this.FR,getPlayerSize:this.Np})}}class rc extends m{constructor(){super(...arguments),this.Va="cnx-ps"}createExperience(t,i){this.experience=new ic(this,this.As,i),this.experienceApi=new nc(this.experience)}getApiMethods(){return this.experienceApi.getApiMethods()}isSupportedBreakpoint(t){return!(this.experienceContainer.clientWidth<Ao[t].xs)}}var hc;!function(t){t[t.none=0]="none",t[t.friendly=1]="friendly",t[t.safe=2]="safe"}(hc||(hc={}));class ac{constructor(t,i,e){this.ae=t,this.UA=i,this.VR=[],this.UR=hc.none,this.NR={intersectionObserver:!1,fallbackImplementation:!1},this.HR=null,this.qR=[0,.01,.1,.2,.5],this.zR=250,this.WR=!1,this.GR=t=>{this.WR=t,this.QR(),f.a.setFocusState(t),_s.a.pageFocus=t},this.QR=()=>{this.VR.forEach(t=>{const i=this.JR(t.element);this.onViewHandle(t,i)})},this.XR=()=>{null===this.HR&&(this.HR=setTimeout(()=>{this.QR(),clearTimeout(this.HR),this.HR=null},this.zR))},this.YR(e),this.KR(),this.ZR()}ZR(){this.UA.on(this.GR),_s.a.pageFocus=this.UA.isDocumentVisible()}YR(t){this.ae.IntersectionObserver&&!t?this.NR.intersectionObserver=!0:this.NR.fallbackImplementation=!0,this.ae.self!==this.ae.top?(this.tD=this.iD(this.ae),null!==this.tD?this.UR=hc.friendly:this.UR=hc.safe):this.tD=this.ae.frameElement}iD(t){let i;try{if((i=t.parent)===this.ae.top)return t.frameElement}catch(t){return null}return this.iD(i)}KR(){this.NR.intersectionObserver?this.eD=new this.ae.IntersectionObserver(this.onObserverEnter.bind(this),{root:null,rootMargin:"0px",threshold:this.qR}):(this.ae.addEventListener("scroll",this.XR),this.ae.addEventListener("load",this.QR),this.ae.addEventListener("resize",this.QR))}sD(t){return this.VR.find(i=>i.element===t)}JR(t){if(this.UR===hc.safe){const i=this.sD(t);return i?i.cachedPercentInView:0}let i=1;const e=t.getBoundingClientRect(),s={bottomRatio:e.bottom/e.height,topRatio:(this.ae.top.innerHeight-e.top)/e.height,leftRatio:(this.ae.top.innerWidth-e.left)/e.width,rightRatio:e.right/e.width};return Object.keys(s).forEach(t=>{s[t]<=0&&(i=0),s[t]>0&&s[t]<1&&(i*=s[t])}),i}onObserverEnter(t){t.forEach(t=>{this.VR.filter(i=>i.element===t.target).forEach(i=>{this.onViewHandle(i,t.intersectionRatio)})})}onViewHandle(t,i){t.cachedPercentInView=i,t.list.forEach(t=>{!t.callbackSent&&t.threshold<=i&&this.WR?(t.callbackSent=!0,t.timeout=Object(ht.a)(t.callback,t.callbackDelay,!0)):t.callbackSent&&(t.threshold>i||!this.WR)&&(t.callbackSent=!1,clearTimeout(t.timeout),t.timeout=Object(ht.a)(t.callback,0,!1))})}on(t,i,e={}){let s=!1;if(this.NR.fallbackImplementation)if(this.UR===hc.friendly&&t.ownerDocument.defaultView!==this.ae.top)t=this.tD;else if(this.UR===hc.safe)return void Object(ht.a)(i,0,!1);let n=this.VR.find(i=>i.element===t);n?s=!0:(n={element:t,list:[],cachedPercentInView:0},this.VR.push(n)),n.list.push({threshold:e.threshold,callbackSent:!1,callbackDelay:e.callbackDelay,timeout:null,callback:i}),this.NR.intersectionObserver?(s&&this.eD.unobserve(t),this.eD.observe(t)):this.NR.fallbackImplementation&&this.QR()}off(t,i){const e=this.VR.find(i=>i.element===t);if(e){let s=e.list.length;for(;s;)s--,e.list[s].callback===i&&e.list.splice(s,1);0===e.list.length&&(this.eD&&this.eD.unobserve(t),this.VR.splice(this.VR.indexOf(e),1))}}check(t={threshold:.1}){if(!t.element)return!1;let i=t.element;return this.UR===hc.friendly&&(i=this.tD),this.JR(i)>=t.threshold&&this.WR}triggerRecheck(t){this.NR.fallbackImplementation&&t&&this.VR.forEach(i=>{if(!t||i.element===t){const t=this.JR(i.element);this.onViewHandle(i,t)}})}setViewableThreshold(t){}getIsTabInFocus(){return this.WR}destroy(){this.ae.removeEventListener("scroll",this.XR),this.ae.removeEventListener("load",this.QR),this.ae.removeEventListener("resize",this.QR),[].slice.call(this.VR).forEach(t=>{[].slice.call(t.list).forEach(i=>{this.off(t.element,i.callback),this.ae.clearTimeout(i.timeout)})}),this.UA.off(this.GR),clearTimeout(this.HR)}}class oc{constructor(){this.VR=[],this.JR=0,this.nD=!1,this.QR=t=>{this.VR.forEach(i=>{t&&t!==i.element||this.rD(i,this.JR)})}}hD(t){let i=this.VR.find(i=>i.element===t);return i||(i={element:t,list:[],cachedPercentInView:0},this.VR.push(i)),i.list}rD(t,i){t.list.forEach(t=>{!t.callbackSent&&t.threshold<=i?(t.callbackSent=!0,t.timeout=Object(ht.a)(t.callback,t.callbackDelay,!0,this.nD)):t.callbackSent&&t.threshold>i&&(t.callbackSent=!1,clearTimeout(t.timeout),t.timeout=Object(ht.a)(t.callback,0,!1,this.nD))})}on(t,i,e){this.hD(t).push({threshold:e.threshold,callbackSent:!1,callbackDelay:e.callbackDelay,timeout:null,callback:i}),this.QR()}off(t,i){const e=this.VR.find(i=>i.element===t);if(e){for(let t=e.list.length;t--;)e.list[t].callback===i&&e.list.splice(t,1);0===e.list.length&&this.VR.splice(this.VR.indexOf(e))}}check(t={threshold:.1}){return this.JR>=t.threshold}triggerRecheck(t){this.QR(t)}aD(t){this.nD=t}setViewableThreshold(t){this.JR=t,this.triggerRecheck()}getIsTabInFocus(){return!0}destroy(){for(let t=this.VR.length;t--;){const i=this.VR[t];for(let t=i.list.length;t--;)clearTimeout(i.list[t].timeout),this.off(i.element,i.list[t].callback)}}}class cc{constructor(t=0){this.oD=t,this.cD=16,this.lD=9}getHeightByRatio(t){return Math.round(t/this.cD*this.lD)+this.oD}}class lc{constructor(t,i,e={}){this.floatingMode=Object(b.a)(e.mode)?e.mode:t.floatingMode,Object(u.h)(e.devices)?this.floatingDeviceMode=e.devices:this.floatingDeviceMode=Object(u.h)(t.floatingDeviceMode)?t.floatingDeviceMode:[h.ProtoDeviceType.Desktop],Object(b.a)(e.closeButton)?this.floatingCloseButtonMode=e.closeButton:Object(b.a)(t.floatingCloseButtonMode)?this.floatingCloseButtonMode=t.floatingCloseButtonMode:this.floatingCloseButtonMode=h.ProtoPlayerCloseButtonMode.OnHover,this.floatingPosition=Object(b.a)(e.fixedPosition)?e.fixedPosition:t.floatingFixedPosition,this.floatingScrollPosition=Object(b.a)(e.scrollPosition)?e.scrollPosition:t.floatingScrollPosition,this.floatingWidth=Object(b.a)(e.floatingWidth)?e.floatingWidth:t.floatingWidth||k,this.floatingGutterX=Object(b.a)(e.floatingGutterX)?e.floatingGutterX:t.floatingGutterX,this.floatingGutterY=Object(b.a)(e.floatingGutterY)?e.floatingGutterY:t.floatingGutterY,this.pageElement=t.floatingPageElement,this.appendLocation=t.floatingAppendLocation,this.floatingYAxisPadding=t.floatingYAxisPadding,this.uD=this.floatingScrollPosition===h.ProtoPositionMode.BottomLeft||this.floatingScrollPosition===h.ProtoPositionMode.TopLeft,this.dD=this.floatingScrollPosition===h.ProtoPositionMode.BottomRight||this.floatingScrollPosition===h.ProtoPositionMode.TopRight,this.fD=this.floatingScrollPosition===h.ProtoPositionMode.TopLeft||this.floatingScrollPosition===h.ProtoPositionMode.TopRight,this.pD=this.floatingScrollPosition===h.ProtoPositionMode.BottomRight||this.floatingScrollPosition===h.ProtoPositionMode.BottomLeft,this.bD=new cc(i)}get isPositionedLeft(){return this.uD}get isPositionedRight(){return this.dD}get isPositionedTop(){return this.fD}get isPositionedBottom(){return this.pD}set isPositionedLeft(t){this.uD=t}set isPositionedRight(t){this.dD=t}set isPositionedBottom(t){this.pD=t}get positionClass(){switch(this.floatingScrollPosition){case h.ProtoPositionMode.BottomLeft:return"bottom-left";case h.ProtoPositionMode.TopLeft:return"top-left";case h.ProtoPositionMode.TopRight:return"top-right";default:return"bottom-right"}}set width(t){this.floatingWidth=t}get width(){return this.floatingWidth}getHeight(t){return`${this.bD.getHeightByRatio(t)}px`}}function uc(t){return Object(b.f)(t)&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function dc(t){return uc(t)?fc({},t):t}function fc(t,i){return function(t,i){const e={};return uc(t)&&Object.keys(t).forEach(i=>{e[i]=dc(t[i])}),Object.keys(i).forEach(s=>{uc(i[s])&&t[s]?e[s]=fc(t[s],i[s]):e[s]=dc(i[s])}),e}(t,i)}class pc{constructor(t,i,e,s,r,a,o,c,l,d,f,p=0){if(this.global=t,this.targetContainer=i,this.vD=e,this.Wa=s,this.secondLevelDomain=r,this.geneticAlgoInformation=a,this.gD=o,this.supplyChainSettings=l,this.isSeoTraffic=d,this.videoPosition=f,this.sharingDestinations=[],this.disableAdvertising=!1,this.disableClickUrl=!1,Object(b.h)(e.initializationSettingsJson))try{const t=JSON.parse(e.initializationSettingsJson);this.gD=fc(this.gD,t)}catch(t){Object(n.a)({message:"invalid_init_json",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL})}this.mD(this.vD.lineItems);const v=[];this.soundMode=Object(b.a)(this.gD.settings.defaultSoundMode)?this.gD.settings.defaultSoundMode:e.soundMode,this.playbackMode=Object(b.a)(this.gD.settings.playbackMode)?this.gD.settings.playbackMode:e.playbackMode,this.playbackMode===h.ProtoPlayerPlaybackModeEnum.ClickToPlay||this.soundMode===h.ProtoPlayerSoundMode.Mute||Object(ht.b)()||(this.soundMode=h.ProtoPlayerSoundMode.Mute),this.html=e.html,this.css=e.css,this.floatingSettings=new lc(e,p,this.gD.settings.customization.floating),this.logoUrl=Object(b.h)(this.gD.settings.customization.logoUrl)?this.gD.settings.customization.logoUrl:e.logoUrl;const g=e.amazonTamSlotId;if(Object(b.h)(g)&&(this.amazonTamSlotId=g),Object(b.a)(this.gD.settings.advertising.macros)&&(this.externalMacros=this.gD.settings.advertising.macros),Object(b.a)(this.gD.settings.disableAdvertising)&&(this.disableAdvertising=this.gD.settings.disableAdvertising),this.adBreaks=Object(u.h)(this.gD.settings.advertising.adBreaks)?this.gD.settings.advertising.adBreaks:e.adBreaks,this.yD(),Object(u.h)(this.gD.settings.advertising.lineItems)){const t=e.lineItems.filter(t=>t.creativeType===h.ProtoCreativeTypeEnum.External);this.gD.settings.advertising.lineItems.forEach(i=>{if(this.xD(i),c){const t=this.wD(),e=this.kD(i,t);v.push(e)}else t.forEach(t=>{if(i.id===t.advertiserLineItemId&&(i.url||i.headerBidderBids)){const e=this.kD(i,t);v.push(e)}})})}!0!==this.gD.settings.advertising.blockConnatixDemand&&v.push(...e.lineItems.filter(t=>t.creativeType!==h.ProtoCreativeTypeEnum.External)),v.forEach(t=>{t.creativeType===h.ProtoCreativeTypeEnum.External&&(t.headerBidderBids&&"[]"!==t.headerBidderBids?t.creativeType=h.ProtoCreativeTypeEnum.HeaderBidder:t.creativeType=h.ProtoCreativeTypeEnum.ThirdParty)});const m=Object(b.a)(this.gD.settings.rendering.scrollHijackingProtection)?this.gD.settings.rendering.scrollHijackingProtection:e.scrollHijackingProtection;this.lineItemSettings={lineItems:v,disableScrollHijackEnforcement:m},this.midRollNumber=Object(b.a)(this.gD.settings.advertising.maxNumberOfMidRolls)?this.gD.settings.advertising.maxNumberOfMidRolls:e.midRollNumber,this.adViewabilityPolicy=e.adViewabilityPolicy,this.preRollBreak=(Object(b.a)(this.gD.settings.advertising.preRollBreak)?this.gD.settings.advertising.preRollBreak:e.preRollBreak)*je.f,this.postRollBreak=(Object(b.a)(this.gD.settings.advertising.postRollBreak)?this.gD.settings.advertising.postRollBreak:e.postRollBreak)*je.f,this.playerId=e.playerId,this.floatingCloseButtonMode=this.floatingSettings.floatingCloseButtonMode,e.floatingMode===h.ProtoPlayerFloatingMode.Always?this.closeButtonMode=this.floatingCloseButtonMode:this.closeButtonMode=Object(b.a)(this.gD.settings.customization.closeButtonMode)?this.gD.settings.customization.closeButtonMode:e.closeButtonMode,this.isCloseButton=!!this.closeButtonMode||!!this.floatingCloseButtonMode,this.uiComponentsVisibility={casting:!1,expandButton:Object(b.a)(this.gD.settings.customization.showExpandButton)?this.gD.settings.customization.showExpandButton:e.expandButton},this.sharingDestinations=void 0,this.adPlaybackMode=e.adPlaybackMode,Object(b.a)(this.gD.settings.disableClickUrl)&&(this.disableClickUrl=this.gD.settings.disableClickUrl);const{skipAdAfter:y}=o.settings.advertising.skipAdSettings||{},{adSkippability:x}=o.settings.advertising.skipAdSettings||{};this.skipAdAfter=Object(b.a)(y)?y:e.skipAdAfter,this.adSkippability=Object(b.a)(x)?x:e.adSkippability;const{disableTracking:w}=o.settings._connatixInternals;(w||c||this.isSeoTraffic)&&(this.disableTracking=!0),this.sessionId=this.vD.sessionId}SD(t,i){i.adTag=Object(b.a)(t.url)?t.url:i.adTag,i.requestCap=Object(b.a)(t.contentRequestCap)?t.contentRequestCap:i.requestCap,i.impressionCap=Object(b.a)(t.contentImpressionCap)?t.contentImpressionCap:i.impressionCap,i.viewability=Object(b.a)(t.viewability)?t.viewability:i.viewability,i.sound=Object(b.a)(t.sound)?t.sound:i.sound,i.ignoreFilledRequests=Object(b.a)(t.ignoreFilledRequests)?t.ignoreFilledRequests:i.ignoreFilledRequests,i.headerBidderBids=Object(b.a)(t.headerBidderBids)?t.headerBidderBids:i.headerBidderBids,i.headerBidderTimeout=Object(b.a)(t.headerBidderTimeout)?t.headerBidderTimeout:i.headerBidderTimeout,i.resetRequestsCapTime=Object(b.a)(t.resetRequestsCapTime)?t.resetRequestsCapTime:i.resetRequestsCapTime,i.resetImpressionsCapTime=Object(b.a)(t.resetImpressionsCapTime)?t.resetImpressionsCapTime:i.resetImpressionsCapTime,i.resetCapType=Object(b.a)(t.resetCapType)?t.resetCapType:i.resetCapType,i.timeBetweenRequests=Object(b.a)(t.timeBetweenRequests)?t.timeBetweenRequests:i.timeBetweenRequests,i.skipMode=Object(b.a)(t.skipMode)?t.skipMode:i.skipMode,i.floorPrice=Object(b.a)(t.floorPrice)?t.floorPrice:i.floorPrice,i.adBreakSettings=Object(b.a)(t.adBreakSettings)?t.adBreakSettings:i.adBreakSettings}mD(t){t.forEach(t=>{t.adBreakSettings||this.OD(t),this.xD(t)})}OD(t){t.adBreakSettings={adBreakTargeting:[{adRollType:h.ProtoAdBreakTypeEnum.PreRoll,adBreakTypeEnum:h.ProtoLineItemAdBreakTypeEnum.All},{adRollType:h.ProtoAdBreakTypeEnum.MidRoll,adBreakTypeEnum:h.ProtoLineItemAdBreakTypeEnum.All},{adRollType:h.ProtoAdBreakTypeEnum.PostRoll,adBreakTypeEnum:h.ProtoLineItemAdBreakTypeEnum.All}]}}xD(t){0===t.requestCap&&(t.requestCap=20)}yD(){this.adBreaks.forEach(t=>{t.maxAdSlotDuration*=je.f,t.maxAdPodDuration*=je.f,t.numberOfAdSlots<=1?t.maxAdPodDuration=0:t.maxAdSlotDuration>t.maxAdPodDuration&&(t.maxAdSlotDuration=t.maxAdPodDuration)})}kD(t,i){const e=Object.assign({},i);return this.SD(t,e),e.customCpm=t.cpm,e.yoScore=jn(e.successRate,e.customCpm,e.lineItemPriority),e}wD(){return h.ProtoLineItem.toObject(h.ProtoLineItem.fromObject({}),{defaults:!0,arrays:!0,objects:!0})}}class bc extends pc{constructor(t,i,e,s,n,r,h,a,o,c,l,u){super(t,i,e,s,n,r,h,a,o,u,c,lr),this.global=t,this.targetContainer=i,this.vD=e,this.videoPosition=c,this.storyPosition=l,this.fontFamilySettings={},this.primaryColorList={},this.secondaryColorList={},this.accentColorList={},this.disableCTARendering=!1,this.disableStoryProgressBarRendering=!1,this.disableTitleRendering=!1,this.activeVersion=this.vD.activeVersion,this.storyId=this.vD.storyId,this.storyMetadata=this.gD.settings.story,this.sdkVersion=this.gD._appSettings.sdkVersion,this.minSlidesBeforeFirstAd=Object(b.a)(this.gD.settings.advertising.slidesBeforeFirstAd)?this.gD.settings.advertising.slidesBeforeFirstAd:this.vD.minSlidesBeforeFirstAd,this.slidesBetweenAds=Object(b.a)(this.gD.settings.advertising.slidesBetweenAds)?this.gD.settings.advertising.slidesBetweenAds:this.vD.slidesBetweenAds,this.vD.floatingMode===ch.ProtoPlayerFloatingMode.Always?this.orientation=ch.ProtoPlayerOrientationEnum.Landscape:this.orientation=Object(b.a)(this.gD.settings.customization.orientation)?this.gD.settings.customization.orientation:this.vD.orientation,this.orientationBreakpoint=Object(b.a)(this.gD.settings.customization.orientationBreakpoint)?this.gD.settings.customization.orientationBreakpoint:this.vD.orientationBreakpoint,Object(b.f)(this.gD.settings.customization.fontFamilySettings)&&(this.fontFamilySettings=this.gD.settings.customization.fontFamilySettings),this._D(),this.jD(),this.AD(),this.TD(),this.CD(),this.ID(),this.useAccentColorForProgressBar=Object(b.a)(this.gD.settings.customization.useAccentColorForProgressBar)?this.gD.settings.customization.useAccentColorForProgressBar:this.vD.useAccentColorForProgressBar,this.endOfSlideCycleMode=Object(b.a)(this.gD.settings.endOfSlideCycleMode)?this.gD.settings.endOfSlideCycleMode:this.vD.endOfCycleMode,this.uiComponentsVisibility.expandButton=!1,this.disableCTARendering=Object(b.a)(this.gD.settings.disableCTARendering)&&this.gD.settings.disableCTARendering,this.disableStoryProgressBarRendering=Object(b.a)(this.gD.settings.disableStoryProgressBarRendering)&&this.gD.settings.disableStoryProgressBarRendering,this.disableTitleRendering=Object(b.a)(this.gD.settings.disableTitleRendering)&&this.gD.settings.disableTitleRendering,this.publisherName=Object(b.h)(this.gD.settings.customization.publisherName)?this.gD.settings.customization.publisherName:this.vD.publisherName}_D(){this.gD.settings.customization.primaryColorList&&Object(b.h)(this.gD.settings.customization.primaryColorList.background)?this.primaryColorList.background=this.gD.settings.customization.primaryColorList.background:this.vD.primaryColorList&&Object(b.h)(this.vD.primaryColorList.background)&&(this.primaryColorList.background=this.vD.primaryColorList.background)}jD(){this.gD.settings.customization.primaryColorList&&Object(b.h)(this.gD.settings.customization.primaryColorList.foreground)?this.primaryColorList.foreground=this.gD.settings.customization.primaryColorList.foreground:this.vD.primaryColorList&&Object(b.h)(this.vD.primaryColorList.foreground)&&(this.primaryColorList.foreground=this.vD.primaryColorList.foreground)}AD(){this.gD.settings.customization.secondaryColorList&&Object(b.h)(this.gD.settings.customization.secondaryColorList.background)?this.secondaryColorList.background=this.gD.settings.customization.secondaryColorList.background:this.vD.secondaryColorList&&Object(b.h)(this.vD.secondaryColorList.background)&&(this.secondaryColorList.background=this.vD.secondaryColorList.background)}TD(){this.gD.settings.customization.secondaryColorList&&Object(b.h)(this.gD.settings.customization.secondaryColorList.foreground)?this.secondaryColorList.foreground=this.gD.settings.customization.secondaryColorList.foreground:this.vD.secondaryColorList&&Object(b.h)(this.vD.secondaryColorList.foreground)&&(this.secondaryColorList.foreground=this.vD.secondaryColorList.foreground)}CD(){this.gD.settings.customization.accentColorList&&Object(b.h)(this.gD.settings.customization.accentColorList.background)?this.accentColorList.background=this.gD.settings.customization.accentColorList.background:this.vD.accentColorList&&Object(b.h)(this.vD.accentColorList.background)&&(this.accentColorList.background=this.vD.accentColorList.background)}ID(){this.gD.settings.customization.accentColorList&&Object(b.h)(this.gD.settings.customization.accentColorList.foreground)?this.accentColorList.foreground=this.gD.settings.customization.accentColorList.foreground:this.vD.accentColorList&&Object(b.h)(this.vD.accentColorList.foreground)&&(this.accentColorList.foreground=this.vD.accentColorList.foreground)}}function vc(t,i){const e=t.toObject({},{defaults:!0,arrays:!0,objects:!0}),s=function(t){return t.toObject({},{defaults:!0,arrays:!0,objects:!0})}(i);return e.players.push(s),e.browser=h.Browser.toObject(h.Browser.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),e.geoLocation=h.GeoLocation.toObject(h.GeoLocation.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),e}var gc=e(24);class mc extends oc{constructor(t){super(),this.ae=t;try{this.ls()}catch(t){Object(n.a)({message:"omid_verification_client_error",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL})}}ls(){const t=this.PD();if(this.MD=new t,!this.MD.isSupported())throw new Error("omid_not_implemented");this.ED(),this.vp()}PD(){if(!this.ae.OmidVerificationClient)throw new Error("omid_verification_client_not_found");if(!this.ae.OmidVerificationClient[gc.k])throw new Error("omid_verification_client_wrong_version");return this.ae.OmidVerificationClient[gc.k]}ED(){this.MD.registerSessionObserver(t=>{t&&t.type===gc.e.sessionError&&Object(n.a)({message:"omid_verification_client_session_error",exception:t.data.message,level:h.ProtoLoggingLevelEnum.WARNING})})}vp(){this.MD.addEventListener(gc.e.geometryChange,t=>{try{const{percentageInView:i,reasons:e}=t.data.adView,s=[gc.a.backgrounded,gc.a.notFound].some(t=>e.includes(t));this.aD(s);const r=i/100;this.setViewableThreshold(r)}catch(t){Object(n.a)({message:"omid_verification_client_geometry_change_error",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL,throttle:1})}})}}const yc={src:Ds.a.endPoints.assets.css.playspace,id:"cnx-playspace-css"};class xc extends a.a{vn(){return yc}getDelegateHandler(){return null}getRendererInstance(t,i,e,s,n){return new rc(this,t,i,e,s,n)}getViewabilityService(t,i,e=!1){return this.externalAttributes.settings.useExternalViewabilityService?new oc:this.Ke?new mc(window):new ac(t.global,i,e)}getPlayerResponse(t){return new Promise((i,e)=>{Ze.a.sendProtoRequest({ProtoResponse:ch.ProtoPlayspaceResponse,ProtoRequest:ch.ProtoPlayspaceRequest,requestData:t,endpoint:Ds.a.endPoints.api.story,withCredentials:!0,queryParams:{[nn.b]:ui.a.version}}).then(t=>{window.parent.connatixDummy&&Object(Ls.b)("connatixDummy",this.pageUrl)&&(t.players[0]=Object.assign(Object.assign({},t.players[0]),window.parent.connatixDummy)),i(t)}).catch(t=>{this.GLOBAL.cnxDummyResponse?i(this.GLOBAL.cnxDummyResponse):e(t)})})}getPlayerModel(t,i,e){return new bc(t.insertWindow?t.insertWindow:this.GLOBAL,t.insertContainer,i.players[e],i.browser.device,i.secondLevelDomain,i.geneticAlgoInformation,this.externalAttributes,this.isServerlessMode,i.supplyChain,this.queryParams.cnxVideoPosition,this.queryParams.cnxStoryPosition,i.isSeoTraffic||this.queryParams.cnxIsSeoTraffic)}getApiConfigEnums(){return Xo}getApiConfigEvents(){return Ho}getSpecificRequestData(){const t={};return this.queryParams.cnxStoryId?t.forceStoryId=this.queryParams.cnxStoryId:this.externalAttributes.storyId&&(t.forceStoryId=this.externalAttributes.storyId),t}defaultInitFromProto(){return vc(ch.ProtoPlayspaceResponse,ch.ProtoPlayspace)}Is(){super.Is(),this.externalAttributes.settings.story=void 0}}var wc=e(11);class kc{constructor(t=!1){this.Sr=t,this.LD="eventEmitted",this.Aa=new ec}subscribe(t){return this.Aa.on(this.LD,t)}unsubscribe(t){this.Aa.remove(this.LD,t)}emitSessionStart(t){const i={videoMetadata:t};this.RD({metadata:i,name:wc.a.SessionStart})}emitContentComplete(){this.RD({name:wc.a.ContentComplete})}emitSessionEnd(){this.RD({name:wc.a.SessionEnd})}emitPlay(){this.RD({name:wc.a.Play})}emitPause(){this.RD({name:wc.a.Pause})}emitAdPlay(){this.RD({name:wc.a.AdPlay})}emitAdPause(){this.RD({name:wc.a.AdPause})}emitAdImpression(t,i){const e={adMetadata:t,customAdMetadata:i};this.RD({metadata:e,name:wc.a.AdImpression})}emitAdComplete(){this.RD({name:wc.a.AdComplete})}emitAdBreakStart(t){const i={adBreakMetadata:t};this.RD({metadata:i,name:wc.a.AdBreakStart})}emitAdBreakComplete(){this.RD({name:wc.a.AdBreakComplete})}emitPlayerResized(t){const i={playerDimensionsMetadata:t};this.RD({metadata:i,name:wc.a.PlayerResized})}emitOnEnterFullscreen(){this.RD({name:wc.a.OnEnterFullscreen})}emitOnExitFullscreen(){this.RD({name:wc.a.OnExitFullscreen})}emitOnPlayerCollapsed(){this.RD({name:wc.a.PlayerCollapsed})}emitOnPlayerExpanded(){this.RD({name:wc.a.PlayerExpanded})}emitAdError(){this.RD({name:wc.a.AdError})}emitPlayError(){this.RD({name:wc.a.PlayError})}emitRenderError(){this.RD({name:wc.a.RenderError})}emitAdClickThru(){this.RD({name:wc.a.AdClickThru})}emitAdInteraction(){this.RD({name:wc.a.AdInteraction})}emitAdVideoStart(t){const i={adVideoStartMetadata:t};this.RD({metadata:i,name:wc.a.AdVideoStart})}emitAdLoaded(t){const i={adLoadedMetadata:t};this.RD({metadata:i,name:wc.a.AdLoaded})}emitAdStateChange(t){const i={adStateChangedMetadata:t};this.RD({metadata:i,name:wc.a.AdStateChange})}emitAdVideoFirstQuartile(){this.RD({name:wc.a.AdVideoFirstQuartile})}emitAdVideoMidpoint(){this.RD({name:wc.a.AdVideoMidpoint})}emitAdVideoThirdQuartile(){this.RD({name:wc.a.AdVideoThirdQuartile})}emitAdVideoComplete(){this.RD({name:wc.a.AdVideoComplete})}emitVolumeChange(t){this.RD({name:wc.a.VolumeChange,metadata:{volume:t}})}emitAdSkipped(){this.RD({name:wc.a.AdSkipped})}RD(t){this.Sr&&console.log("Connatix Player Elements debugging: ",t),this.Aa.trigger(this.LD,t)}destroy(){this.RD({name:wc.a.Destroy}),this.Aa.removeAll()}}e(160),e(161);const Sc=window.parent,Oc=Object(ht.f)(Sc).topFrame;Je.a.abServiceType=Je.b.PlayspaceABService;const _c=function(t,i,e){const s=Object(b.h)(t._appSettings.bundleID),a=Object(b.h)(t._appSettings.sdkVersion);a&&(t.settings.useExternalViewabilityService=!0);const{cmp:o,tcf:c,usPrivacyString:l,deviceID:u}=t._appSettings,d=((t,i)=>i.AMP_CONTEXT_DATA||t.settings.implementationType===h.ProtoImplementationType.Amp)(t,Sc),f={UserManagerService:new r.b(Sc,s,d,{cmp:o,tcf:c,usPrivacyString:l,deviceID:u}),EventsStorageService:new kc(t.settings.plugins.Sr)},p=new xc(f,Sc,s,d,a,e),v=function(){Object(ht.k)(()=>new Promise((t,i)=>{if(Object(A.n)(yc.id,Oc))return t();Object(A.B)(yc,Oc.document.head,Oc,()=>t(),t=>i(t))})).then(()=>(Object(A.S)(Sc),p.updateQueryParams(),void(p.loadScriptTag(t,i)&&p.insertRenderer()))).catch(t=>Object(n.a)({message:"Loader_add_css_link",exception:t,level:h.ProtoLoggingLevelEnum.INFO}))};s?v():p.findPageUrl(Sc).then(()=>v()).catch(t=>{Object(n.a)({message:"Playspace_main_init",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL}),p.registerApiError()})},jc=t=>{var i,e,s,n,r;const h=Object.assign({},t),a=null===(i=h._appSettings)||void 0===i?void 0:i.cmp;(Object(b.h)(null===(e=h._appSettings)||void 0===e?void 0:e.gdprConsentString)||Object(b.h)(null===(s=h._appSettings)||void 0===s?void 0:s.gdprParsedVendorString))&&(h._appSettings.cmp={consentString:Object(b.h)(null===(n=a)||void 0===n?void 0:n.consentString)?a.consentString:h._appSettings.gdprConsentString,parsedVendorConsents:Object(b.h)(null===(r=a)||void 0===r?void 0:r.parsedVendorConsents)?a.parsedVendorConsents:h._appSettings.gdprParsedVendorString});const o=Object.assign({},Oi(Object.assign({},h._appSettings.cmp))),c=Object.assign({},Oi(Object.assign({},h._appSettings.tcf))),{usPrivacyString:l,deviceID:u}=Oi({usPrivacyString:h._appSettings.usPrivacyString,deviceID:h._appSettings.deviceID});return h._appSettings=Object.assign(Object.assign({},h._appSettings),{cmp:o,tcf:c,usPrivacyString:l,deviceID:u}),h};!function(){if(-1!==navigator.userAgent.toLowerCase().indexOf("msie"))return;let t=[];Sc.cnxps&&(t=Sc.cnxps.cmd),Sc.cnxps=function(){function t(t){return t.settings=t.settings||{},t._appSettings=t._appSettings||{},t._appSettings.cmp=t._appSettings.cmp||{},t._appSettings.tcf=t._appSettings.tcf||{},t.settings.customization=t.settings.customization||{},t.settings.rendering=t.settings.rendering||{},t.settings.advertising=t.settings.advertising||{},t.settings._connatixInternals=t.settings._connatixInternals||{},t.settings.plugins=t.settings.plugins||{},t.settings.advertising.skipAdSettings=t.settings.advertising.skipAdSettings||{},t=jc(t),{render:function(i,e){_c(t,i,e)}}}return t.cmd={push:function(t){t()}},t.configEnums=Xo,t.configEvents=Ho,t}(),t.forEach(t=>t())}()}]);